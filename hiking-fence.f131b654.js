!function(t,e,r,n){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof i.parcelRequire&&i.parcelRequire,a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function s(r,n){if(!e[r]){if(!t[r]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(r,!0);if(o)return o(r,!0);if(a&&"string"==typeof r)return a(r);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}l.resolve=function(e){return t[r][1][e]||e},l.cache={};var c=e[r]=new s.Module(r);t[r][0].call(c.exports,l,c,c.exports,this)}return e[r].exports;function l(t){return s(l.resolve(t))}}s.isParcelRequire=!0,s.Module=function(t){this.id=t,this.bundle=s,this.exports={}},s.modules=t,s.cache=e,s.parent=o,s.register=function(e,r){t[e]=[function(t,e){e.exports=r},{}]},i.parcelRequire=s;for(var u=0;u<r.length;u++)s(r[u]);if(r.length){var c=s(r[r.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd&&define(function(){return c})}}({"05e98922ea80008e5541b8b1cc8a3a9b":[function(t,e,r){"use strict";var n,i=t("ol"),o=t("ol/source"),a=t("ol/layer"),s=t("ol/format"),u=t("ol/geom"),c=t("ol/featureloader"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./style")),f=t("./map"),d=t("./geom"),p=(n=t("./monitor"))&&n.__esModule?n:{default:n};var h=new u.LineString([]),g=new i.Feature(h);g.setStyle(l.track);var _=new u.Polygon([]),y=new i.Feature(_);y.setStyle(l.buffer);var m=new URLSearchParams(location.search),v=m.has("width")?m.get("width"):75;(0,c.loadFeaturesXhr)(m.get("gpx"),new s.GPX,function(t,e){var r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value.getGeometry(),u=s.getType();if("MultiLineString"===u||"LineString"===u){s.transform(e,f.view.getProjection()),s.getLineString?h.setCoordinates(s.getLineString(0).getCoordinates()):h.setCoordinates(s.getCoordinates());var c=(0,d.getBufferCoordinates)(h,f.view.getProjection(),v);_.setCoordinates(c),f.view.fit(_)}}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}})(),f.map.setTarget("map");var b=new p.default(f.view,h,v);f.map.addLayer(new a.Vector({source:new o.Vector({features:[g,y]}),updateWhileInteracting:!0})),f.map.addLayer(new a.Vector({source:new o.Vector({features:[b.positionFeature,b.shortestLineFeature]}),updateWhileInteracting:!0}));var E=document.querySelector(".controls .start"),S=document.querySelector(".controls .stop");E.addEventListener("click",function(){b.tracking=!0,E.style.display="none",S.style.display=""}),S.addEventListener("click",function(){b.tracking=!1,E.style.display="",S.style.display="none"})},{ol:"de1fa2d5630a3818f25d7945af164be8","ol/source":"f1f6723dd857e499535771c93bd4014b","ol/layer":"07ac77b6d0e5d362ff4f6a5805e97e83","ol/format":"1f47e0122321da9468197863144a77af","ol/geom":"c8a571bf1ebb42240925899ebfbd7565","ol/featureloader":"247dc89d29ce8855e158f2f5ca38a528","./style":"ebb1d63c6878d82a9604c9bcd2689af0","./map":"baa52aaecf491fa840562fd56eefa975","./geom":"0f2135edd1c543a75b28a47a15d9525f","./monitor":"76a6450cb736d86ab494d825c0c21f5f"}],de1fa2d5630a3818f25d7945af164be8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AssertionError",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Collection",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Disposable",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Feature",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Geolocation",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"Graticule",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"ImageBase",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"ImageCanvas",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"ImageTile",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"Kinetic",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"Map",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"MapBrowserEvent",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"MapBrowserEventHandler",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"MapBrowserPointerEvent",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"MapEvent",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"Object",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"Observable",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"Overlay",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"PluggableMap",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(r,"Tile",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(r,"TileCache",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(r,"TileQueue",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(r,"TileRange",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(r,"VectorRenderTile",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(r,"VectorTile",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"View",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(r,"getUid",{enumerable:!0,get:function(){return w.getUid}}),Object.defineProperty(r,"VERSION",{enumerable:!0,get:function(){return w.VERSION}});var n=R(t("./AssertionError.js")),i=R(t("./Collection.js")),o=R(t("./Disposable.js")),a=R(t("./Feature.js")),s=R(t("./Geolocation.js")),u=R(t("./layer/Graticule.js")),c=R(t("./Image.js")),l=R(t("./ImageBase.js")),f=R(t("./ImageCanvas.js")),d=R(t("./ImageTile.js")),p=R(t("./Kinetic.js")),h=R(t("./Map.js")),g=R(t("./MapBrowserEvent.js")),_=R(t("./MapBrowserEventHandler.js")),y=R(t("./MapBrowserPointerEvent.js")),m=R(t("./MapEvent.js")),v=R(t("./Object.js")),b=R(t("./Observable.js")),E=R(t("./Overlay.js")),S=R(t("./PluggableMap.js")),j=R(t("./Tile.js")),O=R(t("./TileCache.js")),P=R(t("./TileQueue.js")),T=R(t("./TileRange.js")),x=R(t("./VectorRenderTile.js")),C=R(t("./VectorTile.js")),I=R(t("./View.js")),w=t("./util.js");function R(t){return t&&t.__esModule?t:{default:t}}},{"./AssertionError.js":"d6dd0f95641e35626f13793be8f072c7","./Collection.js":"6f090fc511268dcb6cf8b42e032e7c46","./Disposable.js":"d4605e3cdc6ca501dd4bed20a4731b8c","./Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","./Geolocation.js":"afd6d62aed49616ca06c94a490f69405","./layer/Graticule.js":"92cea55a21e6b46fad9d753145688c9b","./Image.js":"9e2ed74bba157eada38f7cb6b59a611e","./ImageBase.js":"54001c5f437a635b9754afca9674430b","./ImageCanvas.js":"3854c6d9681cc6b35ae1491618c153e2","./ImageTile.js":"f5618d867cebf758b815d3c31642717d","./Kinetic.js":"b218aa943771342aee66344d881d4cd4","./Map.js":"7a1b575be0d4882be19a8a1c4124e17b","./MapBrowserEvent.js":"677944463c2b67121a15ab13f8027c01","./MapBrowserEventHandler.js":"53f1e4e2710fd99e52820f23af8c3e13","./MapBrowserPointerEvent.js":"051b6b89475cbbcfe393a6f6ab0fea28","./MapEvent.js":"d0d5a8a90dfef616bfe93e3e6b0e1c86","./Object.js":"6c67600a5761ed2f245039657f77c37b","./Observable.js":"68e4fa3d0f7a78b6f9314070042a71c8","./Overlay.js":"c22a22a037eb751272758871a4e79f08","./PluggableMap.js":"e22d5f9155b17e6aa985e9372b52268a","./Tile.js":"81b8476e359c6fd98b69f8a2aa011224","./TileCache.js":"0d7a2d2c130d373853ebb848728aee0f","./TileQueue.js":"8bd91d2f5f2962889b9878108717f72c","./TileRange.js":"2907bc9189da59ab4885682af56a1740","./VectorRenderTile.js":"81f8ac747f5f7ceec55a05875db09968","./VectorTile.js":"e87dd3cf0c48628d84f21f6160fdd314","./View.js":"d306c3c537254824aa92704d553e7cb1","./util.js":"4bb2f7213adce7213216789f3fd3a27b"}],d6dd0f95641e35626f13793be8f072c7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("./util.js"),o=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=function(t){function e(e){var r=this,n="Assertion failed. See https://openlayers.org/en/"+("latest"===i.VERSION?i.VERSION:"v"+i.VERSION.split("-")[0])+"/doc/errors/#"+e+" for details.";return(r=t.call(this,n)||this).code=e,r.name="AssertionError",r.message=n,r}return o(e,t),e}(Error);r.default=a},{"./util.js":"4bb2f7213adce7213216789f3fd3a27b"}],"4bb2f7213adce7213216789f3fd3a27b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.abstract=function(){return function(){throw new Error("Unimplemented abstract method.")}()},r.getUid=function(t){return t.ol_uid||(t.ol_uid=String(++n))},r.VERSION=void 0;var n=0;r.VERSION="6.0.0-beta.14"},{}],"6f090fc511268dcb6cf8b42e032e7c46":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CollectionEvent=void 0;var n=s(t("./AssertionError.js")),i=s(t("./CollectionEventType.js")),o=s(t("./Object.js")),a=s(t("./events/Event.js"));function s(t){return t&&t.__esModule?t:{default:t}}var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l="length",f=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.element=r,i.index=n,i}return c(e,t),e}(a.default);r.CollectionEvent=f;var d=function(t){function e(e,r){var n=t.call(this)||this,i=r||{};if(n.unique_=!!i.unique,n.array_=e||[],n.unique_)for(var o=0,a=n.array_.length;o<a;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return c(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(l)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new f(i.default.ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new f(i.default.REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new f(i.default.REMOVE,n,t)),this.dispatchEvent(new f(i.default.ADD,e,t))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(l,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===t&&r!==e)throw new n.default(58)},e}(o.default);r.default=d},{"./AssertionError.js":"d6dd0f95641e35626f13793be8f072c7","./CollectionEventType.js":"1a284b36b7148c11d579a4e84e9735c1","./Object.js":"6c67600a5761ed2f245039657f77c37b","./events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6"}],"1a284b36b7148c11d579a4e84e9735c1":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={ADD:"add",REMOVE:"remove"}},{}],"6c67600a5761ed2f245039657f77c37b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getChangeEventType=h,r.default=r.ObjectEvent=void 0;var n=t("./util.js"),i=u(t("./ObjectEventType.js")),o=u(t("./Observable.js")),a=u(t("./events/Event.js")),s=t("./obj.js");function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.key=r,i.oldValue=n,i}return l(e,t),e}(a.default);r.ObjectEvent=f;var d=function(t){function e(e){var r=t.call(this)||this;return(0,n.getUid)(r),r.values_={},void 0!==e&&r.setProperties(e),r}return l(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return(0,s.assign)({},this.values_)},e.prototype.notify=function(t,e){var r;r=h(t),this.dispatchEvent(new f(r,t,e)),r=i.default.PROPERTYCHANGE,this.dispatchEvent(new f(r,t,e))},e.prototype.set=function(t,e,r){if(r)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},e.prototype.unset=function(t,e){if(t in this.values_){var r=this.values_[t];delete this.values_[t],e||this.notify(t,r)}},e}(o.default),p={};function h(t){return p.hasOwnProperty(t)?p[t]:p[t]="change:"+t}var g=d;r.default=g},{"./util.js":"4bb2f7213adce7213216789f3fd3a27b","./ObjectEventType.js":"dd0d876048dfd85d6a82a4a99353d0de","./Observable.js":"68e4fa3d0f7a78b6f9314070042a71c8","./events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","./obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],dd0d876048dfd85d6a82a4a99353d0de:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={PROPERTYCHANGE:"propertychange"}},{}],"68e4fa3d0f7a78b6f9314070042a71c8":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unByKey=function(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)(0,n.unlistenByKey)(t[e]);else(0,n.unlistenByKey)(t)},r.default=void 0;var n=t("./events.js"),i=a(t("./events/Target.js")),o=a(t("./events/EventType.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});var c=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return u(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(o.default.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var r=t.length,i=new Array(r),o=0;o<r;++o)i[o]=(0,n.listen)(this,t[o],e);return i}return(0,n.listen)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var r=t.length,i=new Array(r),o=0;o<r;++o)i[o]=(0,n.listenOnce)(this,t[o],e);return i}return(0,n.listenOnce)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;++r)(0,n.unlisten)(this,t[r],e);else(0,n.unlisten)(this,t,e)},e}(i.default);r.default=c},{"./events.js":"47affab92622893273981942c85f03c7","./events/Target.js":"259e75f7f42ffc43fc3e889115e2a322","./events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2"}],"47affab92622893273981942c85f03c7":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bindListener=i,r.findListener=o,r.getListeners=a,r.listen=c,r.listenOnce=function(t,e,r,n){return c(t,e,r,n,!0)},r.unlisten=function(t,e,r,n){var i=a(t,e);if(i){var s=o(i,r,n,!0);s&&l(s)}},r.unlistenByKey=l,r.unlistenAll=function(t){var e=s(t);if(e)for(var r in e)u(t,r)};var n=t("./obj.js");function i(t){var e=function(e){var r=t.listener,n=t.bindTo||t.target;return t.callOnce&&l(t),r.call(n,e)};return t.boundListener=e,e}function o(t,e,r,n){for(var i,o=0,a=t.length;o<a;++o)if((i=t[o]).listener===e&&i.bindTo===r)return n&&(i.deleteIndex=o),i}function a(t,e){var r=s(t);return r?r[e]:void 0}function s(t,e){var r=t.ol_lm;return!r&&e&&(r=t.ol_lm={}),r}function u(t,e){var r=a(t,e);if(r){for(var i=0,o=r.length;i<o;++i)t.removeEventListener(e,r[i].boundListener),(0,n.clear)(r[i]);r.length=0;var u=s(t);u&&(delete u[e],0===Object.keys(u).length&&function(t){delete t.ol_lm}(t))}}function c(t,e,r,n,a){var u=s(t,!0),c=u[e];c||(c=u[e]=[]);var l=o(c,r,n,!1);return l?a||(l.callOnce=!1):(l={bindTo:n,callOnce:!!a,listener:r,target:t,type:e},t.addEventListener(e,i(l)),c.push(l)),l}function l(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=a(t.target,t.type);if(e){var r="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==r&&e.splice(r,1),0===e.length&&u(t.target,t.type)}(0,n.clear)(t)}}},{"./obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],"33baacb9b92cb6097b890ee8b1ee5384":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clear=function(t){for(var e in t)delete t[e]},r.isEmpty=function(t){var e;for(e in t)return!1;return!e},r.getValues=r.assign=void 0;var n="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a])}return r};r.assign=n;var i="function"==typeof Object.values?Object.values:function(t){var e=[];for(var r in t)e.push(t[r]);return e};r.getValues=i},{}],"259e75f7f42ffc43fc3e889115e2a322":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(t("../Disposable.js")),i=t("../events.js"),o=t("../functions.js"),a=s(t("./Event.js"));function s(t){return t&&t.__esModule?t:{default:t}}var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=function(t){function e(){var e=t.call(this)||this;return e.pendingRemovals_={},e.dispatching_={},e.listeners_={},e}return c(e,t),e.prototype.addEventListener=function(t,e){var r=this.listeners_[t];r||(r=this.listeners_[t]=[]),-1===r.indexOf(e)&&r.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new a.default(t):t,r=e.type;e.target=this;var n,i=this.listeners_[r];if(i){r in this.dispatching_||(this.dispatching_[r]=0,this.pendingRemovals_[r]=0),++this.dispatching_[r];for(var s=0,u=i.length;s<u;++s)if(!1===i[s].call(this,e)||e.propagationStopped){n=!1;break}if(--this.dispatching_[r],0===this.dispatching_[r]){var c=this.pendingRemovals_[r];for(delete this.pendingRemovals_[r];c--;)this.removeEventListener(r,o.VOID);delete this.dispatching_[r]}return n}},e.prototype.disposeInternal=function(){(0,i.unlistenAll)(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var r=this.listeners_[t];if(r){var n=r.indexOf(e);t in this.pendingRemovals_?(r[n]=o.VOID,++this.pendingRemovals_[t]):(r.splice(n,1),0===r.length&&delete this.listeners_[t])}},e}(n.default);r.default=l},{"../Disposable.js":"d4605e3cdc6ca501dd4bed20a4731b8c","../events.js":"47affab92622893273981942c85f03c7","../functions.js":"cafc68c692964009aaa3cf7333cf2956","./Event.js":"6dbbd13650258c4cddfa7496bc99a0c6"}],d4605e3cdc6ca501dd4bed20a4731b8c:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();r.default=n},{}],cafc68c692964009aaa3cf7333cf2956:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TRUE=function(){return!0},r.FALSE=function(){return!1},r.VOID=function(){}},{}],"6dbbd13650258c4cddfa7496bc99a0c6":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.stopPropagation=function(t){t.stopPropagation()},r.preventDefault=function(t){t.preventDefault()},r.default=void 0;var n=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();r.default=n},{}],"3a46c7f45adf3f74e20933a2fda3fba2":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={CHANGE:"change",ERROR:"error",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},{}],"065457fce6f6e7f0c7834d8e02c7c1b3":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createStyleFunction=l,r.default=void 0;var n,i=t("./asserts.js"),o=t("./events.js"),a=(n=t("./events/EventType.js"))&&n.__esModule?n:{default:n},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Object.js"));var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function l(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:((0,i.assert)("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}var f=function(t){function e(e){var r=t.call(this)||this;if(r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,(0,o.listen)(r,(0,s.getChangeEventType)(r.geometryName_),r.handleGeometryChanged_,r),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;r.setGeometry(n)}else{var i=e;r.setProperties(i)}return r}return c(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,o.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=(0,o.listen)(t,a.default.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?l(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){(0,o.unlisten)(this,(0,s.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,(0,o.listen)(this,(0,s.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(s.default);r.default=f},{"./asserts.js":"7e662a02bc41c2814316b69c70da50e2","./events.js":"47affab92622893273981942c85f03c7","./events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","./Object.js":"6c67600a5761ed2f245039657f77c37b"}],"7e662a02bc41c2814316b69c70da50e2":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assert=function(t,e){if(!t)throw new i.default(e)};var n,i=(n=t("./AssertionError.js"))&&n.__esModule?n:{default:n}},{"./AssertionError.js":"d6dd0f95641e35626f13793be8f072c7"}],afd6d62aed49616ca06c94a490f69405:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Object.js")),i=t("./events.js"),o=l(t("./events/Event.js")),a=l(t("./events/EventType.js")),s=t("./geom/Polygon.js"),u=t("./math.js"),c=t("./proj.js");function l(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},h=function(t){function e(e){var r=t.call(this,a.default.ERROR)||this;return r.code=e.code,r.message=e.message,r}return d(e,t),e}(o.default),g=function(t){function e(e){var r=t.call(this)||this,o=e||{};return r.position_=null,r.transform_=c.identityTransform,r.watchId_=void 0,(0,i.listen)(r,(0,n.getChangeEventType)(p.PROJECTION),r.handleProjectionChanged_,r),(0,i.listen)(r,(0,n.getChangeEventType)(p.TRACKING),r.handleTrackingChanged_,r),void 0!==o.projection&&r.setProjection(o.projection),void 0!==o.trackingOptions&&r.setTrackingOptions(o.trackingOptions),r.setTracking(void 0!==o.tracking&&o.tracking),r}return d(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=(0,c.getTransformFromProjections)((0,c.get)("EPSG:4326"),t),this.position_&&this.set(p.POSITION,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(p.ACCURACY,e.accuracy),this.set(p.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(p.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(p.HEADING,null===e.heading?void 0:(0,u.toRadians)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var r=this.transform_(this.position_);this.set(p.POSITION,r),this.set(p.SPEED,null===e.speed?void 0:e.speed);var n=(0,s.circular)(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(p.ACCURACY_GEOMETRY,n),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new h(t))},e.prototype.getAccuracy=function(){return this.get(p.ACCURACY)},e.prototype.getAccuracyGeometry=function(){return this.get(p.ACCURACY_GEOMETRY)||null},e.prototype.getAltitude=function(){return this.get(p.ALTITUDE)},e.prototype.getAltitudeAccuracy=function(){return this.get(p.ALTITUDE_ACCURACY)},e.prototype.getHeading=function(){return this.get(p.HEADING)},e.prototype.getPosition=function(){return this.get(p.POSITION)},e.prototype.getProjection=function(){return this.get(p.PROJECTION)},e.prototype.getSpeed=function(){return this.get(p.SPEED)},e.prototype.getTracking=function(){return this.get(p.TRACKING)},e.prototype.getTrackingOptions=function(){return this.get(p.TRACKING_OPTIONS)},e.prototype.setProjection=function(t){this.set(p.PROJECTION,(0,c.get)(t))},e.prototype.setTracking=function(t){this.set(p.TRACKING,t)},e.prototype.setTrackingOptions=function(t){this.set(p.TRACKING_OPTIONS,t)},e}(n.default);r.default=g},{"./Object.js":"6c67600a5761ed2f245039657f77c37b","./events.js":"47affab92622893273981942c85f03c7","./events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","./events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","./geom/Polygon.js":"24ebc1624175b8546601860191490c20","./math.js":"6086e082317ce6ce8a1b47fb09fed63b","./proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],"24ebc1624175b8546601860191490c20":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.circular=function(t,e,r,i){for(var a=r||32,s=[],u=0;u<a;++u)(0,n.extend)(s,(0,l.offset)(t,e,2*Math.PI*u/a,i));return s.push(s[0],s[1]),new O(s,o.default.XY,[s.length])},r.fromExtent=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=[e,r,e,i,n,i,n,r,e,r];return new O(a,o.default.XY,[a.length])},r.fromCircle=function(t,e,r){for(var n=e||32,i=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=i*(n+1),u=new Array(s),c=0;c<s;c+=i){u[c]=0,u[c+1]=0;for(var l=2;l<i;l++)u[c+l]=a[l]}var f=[u.length],d=new O(u,o,f);return T(d,a,t.getRadius(),r),d},r.makeRegular=T,r.default=void 0;var n=t("../array.js"),i=t("../extent.js"),o=E(t("./GeometryLayout.js")),a=E(t("./GeometryType.js")),s=E(t("./LinearRing.js")),u=E(t("./Point.js")),c=E(t("./SimpleGeometry.js")),l=t("../sphere.js"),f=t("./flat/area.js"),d=t("./flat/closest.js"),p=t("./flat/contains.js"),h=t("./flat/deflate.js"),g=t("./flat/inflate.js"),_=t("./flat/interiorpoint.js"),y=t("./flat/intersectsextent.js"),m=t("./flat/orient.js"),v=t("./flat/simplify.js"),b=t("../math.js");function E(t){return t&&t.__esModule?t:{default:t}}var S,j=(S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),O=function(t){function e(e,r,n){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==r&&n?(i.setFlatCoordinates(r,e),i.ends_=n):i.setCoordinates(e,r),i}return j(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?(0,n.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,n){return n<(0,i.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,d.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,d.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return(0,p.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return(0,f.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,m.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,g.inflateCoordinatesArray)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,i.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,_.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new u.default(this.getFlatInteriorPoint(),o.default.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new s.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],i=0,o=0,a=r.length;o<a;++o){var u=r[o],c=new s.default(e.slice(i,u),t);n.push(c),i=u}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,m.linearRingsAreOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,m.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=(0,v.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,n),new e(r,o.default.XY,n)},e.prototype.getType=function(){return a.default.POLYGON},e.prototype.intersectsExtent=function(t){return(0,y.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,h.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(c.default),P=O;function T(t,e,r,n){for(var i=t.getFlatCoordinates(),o=t.getStride(),a=i.length/o-1,s=n||0,u=0;u<=a;++u){var c=u*o,l=s+2*(0,b.modulo)(u,a)*Math.PI/a;i[c]=e[0]+r*Math.cos(l),i[c+1]=e[1]+r*Math.sin(l)}t.changed()}r.default=P},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","./GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./LinearRing.js":"a52e9a2ff90bf362305e8edc5337b90f","./Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","./SimpleGeometry.js":"2c201efc98ebdf5eedf2ad5e7989cb8b","../sphere.js":"a72fac8f64ca895036ab3b428d6a6b1a","./flat/area.js":"9fd79ea550c6d746cf09954b6b51dd5c","./flat/closest.js":"8ea74ee08b8715b1dff5a6fbe306bc3b","./flat/contains.js":"ee43659791d4226c3d24b329b87cd966","./flat/deflate.js":"20562fe5b89ba49209b8e67a87a11b60","./flat/inflate.js":"41316cc397979197f0ec65ed178d2a19","./flat/interiorpoint.js":"13a1a64f3cf9ef20a02b0e546fc0638c","./flat/intersectsextent.js":"e0bf5a56fa9c6ecc259fd8e4cf84e1a5","./flat/orient.js":"639aa6020d1095fcc76ca0ab863c78fa","./flat/simplify.js":"a98715e91b730c5e8c7932dde8ddd333","../math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],"8f42dda010c04e4c3f5a3f294914ec2a":[function(t,e,r){"use strict";function n(t,e){return t>e?1:t<e?-1:0}Object.defineProperty(r,"__esModule",{value:!0}),r.binarySearch=function(t,e,r){var i,o,a=r||n,s=0,u=t.length,c=!1;for(;s<u;)(o=+a(t[i=s+(u-s>>1)],e))<0?s=i+1:(u=i,c=!o);return c?s:~s},r.numberSafeCompareFunction=n,r.includes=function(t,e){return t.indexOf(e)>=0},r.linearFindNearest=function(t,e,r){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(t[i]<e)return i-1}else if(r<0){for(i=1;i<n;++i)if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1},r.reverseSubArray=function(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}},r.extend=function(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,i=0;i<n;i++)t[t.length]=r[i]},r.remove=function(t,e){var r=t.indexOf(e),n=r>-1;n&&t.splice(r,1);return n},r.find=function(t,e){for(var r,n=t.length>>>0,i=0;i<n;i++)if(r=t[i],e(r,i,t))return r;return null},r.equals=function(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0},r.stableSort=function(t,e){var r,n=t.length,i=Array(t.length);for(r=0;r<n;r++)i[r]={index:r,value:t[r]};for(i.sort(function(t,r){return e(t.value,r.value)||t.index-r.index}),r=0;r<t.length;r++)t[r]=i[r].value},r.findIndex=function(t,e){var r;return t.every(function(n,i){return r=i,!e(n,i,t)})?-1:r},r.isSorted=function(t,e,r){var i=e||n;return t.every(function(e,n){if(0===n)return!0;var o=i(t[n-1],e);return!(o>0||r&&0===o)})}},{}],"4b9ffd1e5113d2b2115f35ccd7ae494b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.boundingExtent=function(t){for(var e=c(),r=0,n=t.length;r<n;++r)d(e,t[r]);return e},r.buffer=function(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]},r.clone=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()},r.closestSquaredDistanceXY=function(t,e,r){var n,i;n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0;i=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0;return n*n+i*i},r.containsCoordinate=function(t,e){return s(t,e[0],e[1])},r.containsExtent=function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},r.containsXY=s,r.coordinateRelationship=u,r.createEmpty=c,r.createOrUpdate=l,r.createOrUpdateEmpty=f,r.createOrUpdateFromCoordinate=function(t,e){var r=t[0],n=t[1];return l(r,n,r,n,e)},r.createOrUpdateFromCoordinates=function(t,e){return p(f(e),t)},r.createOrUpdateFromFlatCoordinates=function(t,e,r,n,i){return h(f(i),t,e,r,n)},r.createOrUpdateFromRings=function(t,e){return g(f(e),t)},r.equals=function(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]},r.extend=function(t,e){e[0]<t[0]&&(t[0]=e[0]);e[2]>t[2]&&(t[2]=e[2]);e[1]<t[1]&&(t[1]=e[1]);e[3]>t[3]&&(t[3]=e[3]);return t},r.extendCoordinate=d,r.extendCoordinates=p,r.extendFlatCoordinates=h,r.extendRings=g,r.extendXY=_,r.forEachCorner=function(t,e){var r;if(r=e(m(t)))return r;if(r=e(v(t)))return r;if(r=e(j(t)))return r;if(r=e(S(t)))return r;return!1},r.getArea=y,r.getBottomLeft=m,r.getBottomRight=v,r.getCenter=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},r.getCorner=function(t,e){var r;e===i.default.BOTTOM_LEFT?r=m(t):e===i.default.BOTTOM_RIGHT?r=v(t):e===i.default.TOP_LEFT?r=S(t):e===i.default.TOP_RIGHT?r=j(t):(0,n.assert)(!1,13);return r},r.getEnlargedArea=function(t,e){var r=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]),i=Math.max(t[2],e[2]),o=Math.max(t[3],e[3]);return(i-r)*(o-n)},r.getForViewAndSize=function(t,e,r,n,i){var o=e*n[0]/2,a=e*n[1]/2,s=Math.cos(r),u=Math.sin(r),c=o*s,f=o*u,d=a*s,p=a*u,h=t[0],g=t[1],_=h-c+p,y=h-c-p,m=h+c-p,v=h+c+p,b=g-f-d,E=g-f+d,S=g+f+d,j=g+f-d;return l(Math.min(_,y,m,v),Math.min(b,E,S,j),Math.max(_,y,m,v),Math.max(b,E,S,j),i)},r.getHeight=b,r.getIntersectionArea=function(t,e){return y(E(t,e))},r.getIntersection=E,r.getMargin=function(t){return O(t)+b(t)},r.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},r.getTopLeft=S,r.getTopRight=j,r.getWidth=O,r.intersects=P,r.isEmpty=T,r.returnOrUpdate=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t},r.scaleFromCenter=function(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n},r.intersectsSegment=function(t,e,r){var n=!1,i=u(t,e),a=u(t,r);if(i===o.default.INTERSECTING||a===o.default.INTERSECTING)n=!0;else{var s=t[0],c=t[1],l=t[2],f=t[3],d=e[0],p=e[1],h=r[0],g=r[1],_=(g-p)/(h-d),y=void 0,m=void 0;a&o.default.ABOVE&&!(i&o.default.ABOVE)&&(n=(y=h-(g-f)/_)>=s&&y<=l),n||!(a&o.default.RIGHT)||i&o.default.RIGHT||(n=(m=g-(h-l)*_)>=c&&m<=f),n||!(a&o.default.BELOW)||i&o.default.BELOW||(n=(y=h-(g-c)/_)>=s&&y<=l),n||!(a&o.default.LEFT)||i&o.default.LEFT||(n=(m=g-(h-s)*_)>=c&&m<=f)}return n},r.applyTransform=function(t,e,r){var n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(n,n,2),function(t,e,r){var n=Math.min.apply(null,t),i=Math.min.apply(null,e),o=Math.max.apply(null,t),a=Math.max.apply(null,e);return l(n,i,o,a,r)}([n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]],r)};var n=t("./asserts.js"),i=a(t("./extent/Corner.js")),o=a(t("./extent/Relationship.js"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function u(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],s=e[0],u=e[1],c=o.default.UNKNOWN;return s<r?c|=o.default.LEFT:s>i&&(c|=o.default.RIGHT),u<n?c|=o.default.BELOW:u>a&&(c|=o.default.ABOVE),c===o.default.UNKNOWN&&(c=o.default.INTERSECTING),c}function c(){return[1/0,1/0,-1/0,-1/0]}function l(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function f(t){return l(1/0,1/0,-1/0,-1/0,t)}function d(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function p(t,e){for(var r=0,n=e.length;r<n;++r)d(t,e[r]);return t}function h(t,e,r,n,i){for(;r<n;r+=i)_(t,e[r],e[r+1]);return t}function g(t,e){for(var r=0,n=e.length;r<n;++r)p(t,e[r]);return t}function _(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function y(t){var e=0;return T(t)||(e=O(t)*b(t)),e}function m(t){return[t[0],t[1]]}function v(t){return[t[2],t[1]]}function b(t){return t[3]-t[1]}function E(t,e,r){var n=r||[1/0,1/0,-1/0,-1/0];return P(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):f(n),n}function S(t){return[t[0],t[3]]}function j(t){return[t[2],t[3]]}function O(t){return t[2]-t[0]}function P(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function T(t){return t[2]<t[0]||t[3]<t[1]}},{"./asserts.js":"7e662a02bc41c2814316b69c70da50e2","./extent/Corner.js":"9dc214fac697a2e5ae241e6598d3bc0d","./extent/Relationship.js":"1b90a5d09ae149f0d1c1cac9bd9c486c"}],"9dc214fac697a2e5ae241e6598d3bc0d":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},{}],"1b90a5d09ae149f0d1c1cac9bd9c486c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},{}],"717cb51d6eb73e3534dd52cdc7ceabd3":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},{}],e4c2c0976c836ea34084f8f280358bdb:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},{}],a52e9a2ff90bf362305e8edc5337b90f:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../extent.js"),i=d(t("./GeometryLayout.js")),o=d(t("./GeometryType.js")),a=d(t("./SimpleGeometry.js")),s=t("./flat/area.js"),u=t("./flat/closest.js"),c=t("./flat/deflate.js"),l=t("./flat/inflate.js"),f=t("./flat/simplify.js");function d(t){return t&&t.__esModule?t:{default:t}}var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g=function(t){function e(e,r){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return h(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,i){return i<(0,n.closestSquaredDistanceXY)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,u.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,u.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,i))},e.prototype.getArea=function(){return(0,s.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return(0,l.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=(0,f.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,i.default.XY)},e.prototype.getType=function(){return o.default.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,c.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(a.default);r.default=g},{"../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","./GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./SimpleGeometry.js":"2c201efc98ebdf5eedf2ad5e7989cb8b","./flat/area.js":"9fd79ea550c6d746cf09954b6b51dd5c","./flat/closest.js":"8ea74ee08b8715b1dff5a6fbe306bc3b","./flat/deflate.js":"20562fe5b89ba49209b8e67a87a11b60","./flat/inflate.js":"41316cc397979197f0ec65ed178d2a19","./flat/simplify.js":"a98715e91b730c5e8c7932dde8ddd333"}],"2c201efc98ebdf5eedf2ad5e7989cb8b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getStrideForLayout=d,r.transformGeom2D=function(t,e,r){var n=t.getFlatCoordinates();if(n){var i=t.getStride();return(0,s.transform2D)(n,0,n.length,i,e,r)}return null},r.default=void 0;var n=t("../util.js"),i=t("../extent.js"),o=c(t("./Geometry.js")),a=c(t("./GeometryLayout.js")),s=t("./flat/transform.js"),u=t("../obj.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function d(t){var e;return t==a.default.XY?e=2:t==a.default.XYZ||t==a.default.XYM?e=3:t==a.default.XYZM&&(e=4),e}var p=function(t){function e(){var e=t.call(this)||this;return e.layout=a.default.XY,e.stride=2,e.flatCoordinates=null,e}return f(e,t),e.prototype.computeExtent=function(t){return(0,i.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return(0,n.abstract)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&((0,u.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var r=this.getSimplifiedGeometryInternal(t);return r.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=r,r):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=d(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){(0,n.abstract)()},e.prototype.setLayout=function(t,e,r){var n;if(t)n=d(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout=a.default.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=a.default.XY:3==t?e=a.default.XYZ:4==t&&(e=a.default.XYZM);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();(0,s.rotate)(r,0,r.length,n,t,e,r),this.changed()}},e.prototype.scale=function(t,e,r){var n=e;void 0===n&&(n=t);var o=r;o||(o=(0,i.getCenter)(this.getExtent()));var a=this.getFlatCoordinates();if(a){var u=this.getStride();(0,s.scale)(a,0,a.length,u,t,n,o,a),this.changed()}},e.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();(0,s.translate)(r,0,r.length,n,t,e,r),this.changed()}},e}(o.default);r.default=p},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Geometry.js":"cb1f241dba30bfea6138fe8d7d7ce73f","./GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","./flat/transform.js":"4c8bbdedb02c72e6aff9d71cb3a76316","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],cb1f241dba30bfea6138fe8d7d7ce73f:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=l(t("../Object.js")),o=t("../extent.js"),a=t("./flat/transform.js"),s=t("../proj.js"),u=l(t("../proj/Units.js")),c=t("../transform.js");function l(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p=(0,c.create)(),h=function(t){function e(){var e=t.call(this)||this;return e.extent_=(0,o.createEmpty)(),e.extentRevision_=-1,e.simplifiedGeometryCache={},e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e}return d(e,t),e.prototype.clone=function(){return(0,n.abstract)()},e.prototype.closestPointXY=function(t,e,r,i){return(0,n.abstract)()},e.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},e.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return(0,n.abstract)()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),(0,o.returnOrUpdate)(this.extent_,t)},e.prototype.rotate=function(t,e){(0,n.abstract)()},e.prototype.scale=function(t,e,r){(0,n.abstract)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return(0,n.abstract)()},e.prototype.getType=function(){return(0,n.abstract)()},e.prototype.applyTransform=function(t){(0,n.abstract)()},e.prototype.intersectsExtent=function(t){return(0,n.abstract)()},e.prototype.translate=function(t,e){(0,n.abstract)()},e.prototype.transform=function(t,e){var r=(0,s.get)(t),n=r.getUnits()==u.default.TILE_PIXELS?function(t,n,i){var u=r.getExtent(),l=r.getWorldExtent(),f=(0,o.getHeight)(l)/(0,o.getHeight)(u);return(0,c.compose)(p,l[0],l[3],f,-f,0,0,0),(0,a.transform2D)(t,0,t.length,i,p,n),(0,s.getTransform)(r,e)(t,n,i)}:(0,s.getTransform)(r,e);return this.applyTransform(n),this},e}(i.default);r.default=h},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../Object.js":"6c67600a5761ed2f245039657f77c37b","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./flat/transform.js":"4c8bbdedb02c72e6aff9d71cb3a76316","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../proj/Units.js":"aed7c8d781fca9ae0c0fa9c24383e0e4","../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928"}],"4c8bbdedb02c72e6aff9d71cb3a76316":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transform2D=function(t,e,r,n,i,o){for(var a=o||[],s=0,u=e;u<r;u+=n){var c=t[u],l=t[u+1];a[s++]=i[0]*c+i[2]*l+i[4],a[s++]=i[1]*c+i[3]*l+i[5]}o&&a.length!=s&&(a.length=s);return a},r.rotate=function(t,e,r,n,i,o,a){for(var s=a||[],u=Math.cos(i),c=Math.sin(i),l=o[0],f=o[1],d=0,p=e;p<r;p+=n){var h=t[p]-l,g=t[p+1]-f;s[d++]=l+h*u-g*c,s[d++]=f+h*c+g*u;for(var _=p+2;_<p+n;++_)s[d++]=t[_]}a&&s.length!=d&&(s.length=d);return s},r.scale=function(t,e,r,n,i,o,a,s){for(var u=s||[],c=a[0],l=a[1],f=0,d=e;d<r;d+=n){var p=t[d]-c,h=t[d+1]-l;u[f++]=c+i*p,u[f++]=l+o*h;for(var g=d+2;g<d+n;++g)u[f++]=t[g]}s&&u.length!=f&&(u.length=f);return u},r.translate=function(t,e,r,n,i,o,a){for(var s=a||[],u=0,c=e;c<r;c+=n){s[u++]=t[c]+i,s[u++]=t[c+1]+o;for(var l=c+2;l<c+n;++l)s[u++]=t[l]}a&&s.length!=u&&(s.length=u);return s}},{}],"62f54c55d8828c04c9cb79fe6933946b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cloneTransform=p,r.identityTransform=h,r.addProjection=g,r.addProjections=_,r.get=y,r.getPointResolution=function(t,e,r,n){var o,a=(t=y(t)).getPointResolutionFunc();if(a){if(o=a(e,r),n&&n!==t.getUnits())(c=t.getMetersPerUnit())&&(o=o*c/l.METERS_PER_UNIT[n])}else{if(t.getUnits()==l.default.DEGREES&&!n||n==l.default.DEGREES)o=e;else{var s=E(t,y("EPSG:4326")),u=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];u=s(u,u,2);var c,f=(0,i.getDistance)(u.slice(0,2),u.slice(2,4)),d=(0,i.getDistance)(u.slice(4,6),u.slice(6,8));o=(f+d)/2,void 0!==(c=n?l.METERS_PER_UNIT[n]:t.getMetersPerUnit())&&(o/=c)}}return o},r.addEquivalentProjections=m,r.addEquivalentTransforms=v,r.clearAllProjections=function(){(0,d.clear)(),(0,f.clear)()},r.createProjection=function(t,e){return t?"string"==typeof t?y(t):t:y(e)},r.createTransformFromCoordinateTransform=b,r.addCoordinateTransforms=function(t,e,r,n){var i=y(t),o=y(e);(0,f.add)(i,o,b(r)),(0,f.add)(o,i,b(n))},r.fromLonLat=function(t,e){return j(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},r.toLonLat=function(t,e){var r=j(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=r[0];(n<-180||n>180)&&(r[0]=(0,a.modulo)(n+180,360)-180);return r},r.equivalent=function(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?r:E(t,e)===p&&r},r.getTransformFromProjections=E,r.getTransform=S,r.transform=j,r.transformExtent=function(t,e,r){var n=S(e,r);return(0,o.applyTransform)(t,n)},r.transformWithProjections=function(t,e,r){return E(e,r)(t)},r.addCommon=O,Object.defineProperty(r,"Projection",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"METERS_PER_UNIT",{enumerable:!0,get:function(){return l.METERS_PER_UNIT}});var n,i=t("./sphere.js"),o=t("./extent.js"),a=t("./math.js"),s=t("./proj/epsg3857.js"),u=t("./proj/epsg4326.js"),c=(n=t("./proj/Projection.js"))&&n.__esModule?n:{default:n},l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./proj/Units.js")),f=t("./proj/transforms.js"),d=t("./proj/projections.js");function p(t,e,r){var n;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];n=e}else n=t.slice();return n}function h(t,e,r){if(void 0!==e&&t!==e){for(var n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function g(t){(0,d.add)(t.getCode(),t),(0,f.add)(t,t,p)}function _(t){t.forEach(g)}function y(t){return"string"==typeof t?(0,d.get)(t):t||null}function m(t){_(t),t.forEach(function(e){t.forEach(function(t){e!==t&&(0,f.add)(e,t,p)})})}function v(t,e,r,n){t.forEach(function(t){e.forEach(function(e){(0,f.add)(t,e,r),(0,f.add)(e,t,n)})})}function b(t){return function(e,r,n){for(var i=e.length,o=void 0!==n?n:2,a=void 0!==r?r:new Array(i),s=0;s<i;s+=o){var u=t([e[s],e[s+1]]);a[s]=u[0],a[s+1]=u[1];for(var c=o-1;c>=2;--c)a[s+c]=e[s+c]}return a}}function E(t,e){var r=t.getCode(),n=e.getCode(),i=(0,f.get)(r,n);return i||(i=h),i}function S(t,e){return E(y(t),y(e))}function j(t,e,r){return S(e,r)(t,void 0,t.length)}function O(){m(s.PROJECTIONS),m(u.PROJECTIONS),v(u.PROJECTIONS,s.PROJECTIONS,s.fromEPSG4326,s.toEPSG4326)}O()},{"./sphere.js":"a72fac8f64ca895036ab3b428d6a6b1a","./extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./math.js":"6086e082317ce6ce8a1b47fb09fed63b","./proj/epsg3857.js":"864788b816488e9fc76d5b429ae11d1b","./proj/epsg4326.js":"b6ef52f645c0605fef2ef084e54c8364","./proj/Projection.js":"65c40c3ce72d129e9a962be7485d57de","./proj/Units.js":"aed7c8d781fca9ae0c0fa9c24383e0e4","./proj/transforms.js":"2421f4b461ebbfce7af47e1de8398d0b","./proj/projections.js":"d5894c01975cf14933bea9dabcf60ac7"}],a72fac8f64ca895036ab3b428d6a6b1a:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDistance=s,r.getLength=function t(e,r){var n=r||{};var i=n.radius||a;var s=n.projection||"EPSG:3857";var c=e.getType();c!==o.default.GEOMETRY_COLLECTION&&(e=e.clone().transform(s,"EPSG:4326"));var l=0;var f,d,p,h,g,_;switch(c){case o.default.POINT:case o.default.MULTI_POINT:break;case o.default.LINE_STRING:case o.default.LINEAR_RING:f=e.getCoordinates(),l=u(f,i);break;case o.default.MULTI_LINE_STRING:case o.default.POLYGON:for(f=e.getCoordinates(),p=0,h=f.length;p<h;++p)l+=u(f[p],i);break;case o.default.MULTI_POLYGON:for(f=e.getCoordinates(),p=0,h=f.length;p<h;++p)for(d=f[p],g=0,_=d.length;g<_;++g)l+=u(d[g],i);break;case o.default.GEOMETRY_COLLECTION:var y=e.getGeometries();for(p=0,h=y.length;p<h;++p)l+=t(y[p],r);break;default:throw new Error("Unsupported geometry type: "+c)}return l},r.getArea=function t(e,r){var n=r||{};var i=n.radius||a;var s=n.projection||"EPSG:3857";var u=e.getType();u!==o.default.GEOMETRY_COLLECTION&&(e=e.clone().transform(s,"EPSG:4326"));var l=0;var f,d,p,h,g,_;switch(u){case o.default.POINT:case o.default.MULTI_POINT:case o.default.LINE_STRING:case o.default.MULTI_LINE_STRING:case o.default.LINEAR_RING:break;case o.default.POLYGON:for(f=e.getCoordinates(),l=Math.abs(c(f[0],i)),p=1,h=f.length;p<h;++p)l-=Math.abs(c(f[p],i));break;case o.default.MULTI_POLYGON:for(f=e.getCoordinates(),p=0,h=f.length;p<h;++p)for(d=f[p],l+=Math.abs(c(d[0],i)),g=1,_=d.length;g<_;++g)l-=Math.abs(c(d[g],i));break;case o.default.GEOMETRY_COLLECTION:var y=e.getGeometries();for(p=0,h=y.length;p<h;++p)l+=t(y[p],r);break;default:throw new Error("Unsupported geometry type: "+u)}return l},r.offset=function(t,e,r,n){var o=n||a,s=(0,i.toRadians)(t[1]),u=(0,i.toRadians)(t[0]),c=e/o,l=Math.asin(Math.sin(s)*Math.cos(c)+Math.cos(s)*Math.sin(c)*Math.cos(r)),f=u+Math.atan2(Math.sin(r)*Math.sin(c)*Math.cos(s),Math.cos(c)-Math.sin(s)*Math.sin(l));return[(0,i.toDegrees)(f),(0,i.toDegrees)(l)]},r.DEFAULT_RADIUS=void 0;var n,i=t("./math.js"),o=(n=t("./geom/GeometryType.js"))&&n.__esModule?n:{default:n};var a=6371008.8;function s(t,e,r){var n=r||a,o=(0,i.toRadians)(t[1]),s=(0,i.toRadians)(e[1]),u=(s-o)/2,c=(0,i.toRadians)(e[0]-t[0])/2,l=Math.sin(u)*Math.sin(u)+Math.sin(c)*Math.sin(c)*Math.cos(o)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function u(t,e){for(var r=0,n=0,i=t.length;n<i-1;++n)r+=s(t[n],t[n+1],e);return r}function c(t,e){for(var r=0,n=t.length,o=t[n-1][0],a=t[n-1][1],s=0;s<n;s++){var u=t[s][0],c=t[s][1];r+=(0,i.toRadians)(u-o)*(2+Math.sin((0,i.toRadians)(a))+Math.sin((0,i.toRadians)(c))),o=u,a=c}return r*e*e/2}r.DEFAULT_RADIUS=a},{"./math.js":"6086e082317ce6ce8a1b47fb09fed63b","./geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb"}],"6086e082317ce6ce8a1b47fb09fed63b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clamp=function(t,e,r){return Math.min(Math.max(t,e),r)},r.squaredSegmentDistance=function(t,e,r,n,o,a){var s=o-r,u=a-n;if(0!==s||0!==u){var c=((t-r)*s+(e-n)*u)/(s*s+u*u);c>1?(r=o,n=a):c>0&&(r+=s*c,n+=u*c)}return i(t,e,r,n)},r.squaredDistance=i,r.solveLinearSystem=function(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,i=Math.abs(t[r][r]),o=r+1;o<e;o++){var a=Math.abs(t[o][r]);a>i&&(i=a,n=o)}if(0===i)return null;var s=t[n];t[n]=t[r],t[r]=s;for(var u=r+1;u<e;u++)for(var c=-t[u][r]/t[r][r],l=r;l<e+1;l++)r==l?t[u][l]=0:t[u][l]+=c*t[r][l]}for(var f=new Array(e),d=e-1;d>=0;d--){f[d]=t[d][e]/t[d][d];for(var p=d-1;p>=0;p--)t[p][e]-=t[p][d]*f[d]}return f},r.toDegrees=function(t){return 180*t/Math.PI},r.toRadians=function(t){return t*Math.PI/180},r.modulo=function(t,e){var r=t%e;return r*e<0?r+e:r},r.lerp=function(t,e,r){return t+r*(e-t)},r.cosh=void 0;var n="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function i(t,e,r,n){var i=r-t,o=n-e;return i*i+o*o}r.cosh=n},{}],"864788b816488e9fc76d5b429ae11d1b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromEPSG4326=function(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=l,s=0;s<n;s+=i){o[s]=a*t[s]/180;var u=c*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>a?u=a:u<-a&&(u=-a),o[s+1]=u}return o},r.toEPSG4326=function(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=0;a<n;a+=i)o[a]=180*t[a]/l,o[a+1]=360*Math.atan(Math.exp(t[a+1]/c))/Math.PI-90;return o},r.PROJECTIONS=r.WORLD_EXTENT=r.EXTENT=r.HALF_SIZE=r.RADIUS=void 0;var n=t("../math.js"),i=a(t("./Projection.js")),o=a(t("./Units.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=6378137;r.RADIUS=c;var l=Math.PI*c;r.HALF_SIZE=l;var f=[-l,-l,l,l];r.EXTENT=f;var d=[-180,-85,180,85];r.WORLD_EXTENT=d;var p=function(t){function e(e){return t.call(this,{code:e,units:o.default.METERS,extent:f,global:!0,worldExtent:d,getPointResolution:function(t,e){return t/(0,n.cosh)(e[1]/c)}})||this}return u(e,t),e}(i.default),h=[new p("EPSG:3857"),new p("EPSG:102100"),new p("EPSG:102113"),new p("EPSG:900913"),new p("urn:ogc:def:crs:EPSG:6.18:3:3857"),new p("urn:ogc:def:crs:EPSG::3857"),new p("http://www.opengis.net/gml/srs/epsg.xml#3857")];r.PROJECTIONS=h},{"../math.js":"6086e082317ce6ce8a1b47fb09fed63b","./Projection.js":"65c40c3ce72d129e9a962be7485d57de","./Units.js":"aed7c8d781fca9ae0c0fa9c24383e0e4"}],"65c40c3ce72d129e9a962be7485d57de":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./Units.js"),i=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||n.METERS_PER_UNIT[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();r.default=i},{"./Units.js":"aed7c8d781fca9ae0c0fa9c24383e0e4"}],aed7c8d781fca9ae0c0fa9c24383e0e4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.METERS_PER_UNIT=void 0;var n={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},i={};r.METERS_PER_UNIT=i,i[n.DEGREES]=2*Math.PI*6370997/360,i[n.FEET]=.3048,i[n.METERS]=1,i[n.USFEET]=1200/3937;var o=n;r.default=o},{}],b6ef52f645c0605fef2ef084e54c8364:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PROJECTIONS=r.METERS_PER_UNIT=r.EXTENT=r.RADIUS=void 0;var n=o(t("./Projection.js")),i=o(t("./Units.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});r.RADIUS=6378137;var u=[-180,-90,180,90];r.EXTENT=u;var c=6378137*Math.PI/180;r.METERS_PER_UNIT=c;var l=function(t){function e(e,r){return t.call(this,{code:e,units:i.default.DEGREES,extent:u,axisOrientation:r,global:!0,metersPerUnit:c,worldExtent:u})||this}return s(e,t),e}(n.default),f=[new l("CRS:84"),new l("EPSG:4326","neu"),new l("urn:ogc:def:crs:EPSG::4326","neu"),new l("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new l("urn:ogc:def:crs:OGC:1.3:CRS84"),new l("urn:ogc:def:crs:OGC:2:84"),new l("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new l("urn:x-ogc:def:crs:EPSG:4326","neu")];r.PROJECTIONS=f},{"./Projection.js":"65c40c3ce72d129e9a962be7485d57de","./Units.js":"aed7c8d781fca9ae0c0fa9c24383e0e4"}],"2421f4b461ebbfce7af47e1de8398d0b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clear=function(){i={}},r.add=function(t,e,r){var n=t.getCode(),o=e.getCode();n in i||(i[n]={});i[n][o]=r},r.remove=function(t,e){var r=t.getCode(),o=e.getCode(),a=i[r][o];delete i[r][o],(0,n.isEmpty)(i[r])&&delete i[r];return a},r.get=function(t,e){var r;t in i&&e in i[t]&&(r=i[t][e]);return r};var n=t("../obj.js"),i={}},{"../obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],d5894c01975cf14933bea9dabcf60ac7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clear=function(){n={}},r.get=function(t){return n[t]||null},r.add=function(t,e){n[t]=e};var n={}},{}],"2cfeb6b6111a4a4a4e18e3429d625928":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){return[1,0,0,1,0,0]},r.reset=function(t){return a(t,1,0,0,1,0,0)},r.multiply=o,r.set=a,r.setFromArray=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},r.apply=function(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e},r.rotate=function(t,e){var r=Math.cos(e),n=Math.sin(e);return o(t,a(i,r,n,-n,r,0,0))},r.scale=function(t,e,r){return o(t,a(i,e,0,0,r,0,0))},r.makeScale=function(t,e,r){return a(t,e,0,0,r,0,0)},r.translate=function(t,e,r){return o(t,a(i,1,0,0,1,e,r))},r.compose=function(t,e,r,n,i,o,a,s){var u=Math.sin(o),c=Math.cos(o);return t[0]=n*c,t[1]=i*u,t[2]=-n*u,t[3]=i*c,t[4]=a*n*c-s*n*u+e,t[5]=a*i*u+s*i*c+r,t},r.invert=function(t){return s(t,t)},r.makeInverse=s,r.determinant=u,r.toString=function(t){return"matrix("+t.join(", ")+")"};var n=t("./asserts.js"),i=new Array(6);function o(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],c=e[1],l=e[2],f=e[3],d=e[4],p=e[5];return t[0]=r*u+i*c,t[1]=n*u+o*c,t[2]=r*l+i*f,t[3]=n*l+o*f,t[4]=r*d+i*p+a,t[5]=n*d+o*p+s,t}function a(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t}function s(t,e){var r=u(e);(0,n.assert)(0!==r,32);var i=e[0],o=e[1],a=e[2],s=e[3],c=e[4],l=e[5];return t[0]=s/r,t[1]=-o/r,t[2]=-a/r,t[3]=i/r,t[4]=(a*l-s*c)/r,t[5]=-(i*l-o*c)/r,t}function u(t){return t[0]*t[3]-t[1]*t[2]}},{"./asserts.js":"7e662a02bc41c2814316b69c70da50e2"}],"9fd79ea550c6d746cf09954b6b51dd5c":[function(t,e,r){"use strict";function n(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function i(t,e,r,i){for(var o=0,a=0,s=r.length;a<s;++a){var u=r[a];o+=n(t,e,u,i),e=u}return o}Object.defineProperty(r,"__esModule",{value:!0}),r.linearRing=n,r.linearRings=i,r.linearRingss=function(t,e,r,n){for(var o=0,a=0,s=r.length;a<s;++a){var u=r[a];o+=i(t,e,u,n),e=u[u.length-1]}return o}},{}],"8ea74ee08b8715b1dff5a6fbe306bc3b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.maxSquaredDelta=o,r.arrayMaxSquaredDelta=a,r.multiArrayMaxSquaredDelta=function(t,e,r,n,i){for(var o=0,s=r.length;o<s;++o){var u=r[o];i=a(t,e,u,n,i),e=u[u.length-1]}return i},r.assignClosestPoint=s,r.assignClosestArrayPoint=u,r.assignClosestMultiArrayPoint=function(t,e,r,n,i,o,a,s,c,l,f){for(var d=f||[NaN,NaN],p=0,h=r.length;p<h;++p){var g=r[p];l=u(t,e,g,n,i,o,a,s,c,l,d),e=g[g.length-1]}return l};var n=t("../../math.js");function i(t,e,r,i,o,a,s){var u,c=t[e],l=t[e+1],f=t[r]-c,d=t[r+1]-l;if(0===f&&0===d)u=e;else{var p=((o-c)*f+(a-l)*d)/(f*f+d*d);if(p>1)u=r;else{if(p>0){for(var h=0;h<i;++h)s[h]=(0,n.lerp)(t[e+h],t[r+h],p);return void(s.length=i)}u=e}}for(h=0;h<i;++h)s[h]=t[u+h];s.length=i}function o(t,e,r,i,o){var a=t[e],s=t[e+1];for(e+=i;e<r;e+=i){var u=t[e],c=t[e+1],l=(0,n.squaredDistance)(a,s,u,c);l>o&&(o=l),a=u,s=c}return o}function a(t,e,r,n,i){for(var a=0,s=r.length;a<s;++a){var u=r[a];i=o(t,e,u,n,i),e=u}return i}function s(t,e,r,o,a,s,u,c,l,f,d){if(e==r)return f;var p,h;if(0===a){if((h=(0,n.squaredDistance)(u,c,t[e],t[e+1]))<f){for(p=0;p<o;++p)l[p]=t[e+p];return l.length=o,h}return f}for(var g=d||[NaN,NaN],_=e+o;_<r;)if(i(t,_-o,_,o,u,c,g),(h=(0,n.squaredDistance)(u,c,g[0],g[1]))<f){for(f=h,p=0;p<o;++p)l[p]=g[p];l.length=o,_+=o}else _+=o*Math.max((Math.sqrt(h)-Math.sqrt(f))/a|0,1);if(s&&(i(t,r-o,e,o,u,c,g),(h=(0,n.squaredDistance)(u,c,g[0],g[1]))<f)){for(f=h,p=0;p<o;++p)l[p]=g[p];l.length=o}return f}function u(t,e,r,n,i,o,a,u,c,l,f){for(var d=f||[NaN,NaN],p=0,h=r.length;p<h;++p){var g=r[p];l=s(t,e,g,n,i,o,a,u,c,l,d),e=g}return l}},{"../../math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],"20562fe5b89ba49209b8e67a87a11b60":[function(t,e,r){"use strict";function n(t,e,r,n){for(var i=0,o=r.length;i<o;++i)for(var a=r[i],s=0;s<n;++s)t[e++]=a[s];return e}function i(t,e,r,i,o){for(var a=o||[],s=0,u=0,c=r.length;u<c;++u){var l=n(t,e,r[u],i);a[s++]=l,e=l}return a.length=s,a}Object.defineProperty(r,"__esModule",{value:!0}),r.deflateCoordinate=function(t,e,r,n){for(var i=0,o=r.length;i<o;++i)t[e++]=r[i];return e},r.deflateCoordinates=n,r.deflateCoordinatesArray=i,r.deflateMultiCoordinatesArray=function(t,e,r,n,o){for(var a=o||[],s=0,u=0,c=r.length;u<c;++u){var l=i(t,e,r[u],n,a[s]);a[s++]=l,e=l[l.length-1]}return a.length=s,a}},{}],"41316cc397979197f0ec65ed178d2a19":[function(t,e,r){"use strict";function n(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=e;s<r;s+=n)o[a++]=t.slice(s,s+n);return o.length=a,o}function i(t,e,r,i,o){for(var a=void 0!==o?o:[],s=0,u=0,c=r.length;u<c;++u){var l=r[u];a[s++]=n(t,e,l,i,a[s]),e=l}return a.length=s,a}Object.defineProperty(r,"__esModule",{value:!0}),r.inflateCoordinates=n,r.inflateCoordinatesArray=i,r.inflateMultiCoordinatesArray=function(t,e,r,n,o){for(var a=void 0!==o?o:[],s=0,u=0,c=r.length;u<c;++u){var l=r[u];a[s++]=i(t,e,l,n,a[s]),e=l[l.length-1]}return a.length=s,a}},{}],a98715e91b730c5e8c7932dde8ddd333:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.simplifyLineString=function(t,e,r,n,o,s,u){var c=void 0!==u?u:[];s||(r=a(t,e,r,n,o,c,0),t=c,e=0,n=2);return c.length=i(t,e,r,n,o,c,0),c},r.douglasPeucker=i,r.douglasPeuckerArray=o,r.douglasPeuckerMultiArray=function(t,e,r,n,i,a,s,u){for(var c=0,l=r.length;c<l;++c){var f=r[c],d=[];s=o(t,e,f,n,i,a,s,d),u.push(d),e=f[f.length-1]}return s},r.radialDistance=a,r.snap=s,r.quantize=u,r.quantizeArray=c,r.quantizeMultiArray=function(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var f=r[u],d=[];a=c(t,e,f,n,i,o,a,d),s.push(d),e=f[f.length-1]}return a};var n=t("../../math.js");function i(t,e,r,i,o,a,s){var u=(r-e)/i;if(u<3){for(;e<r;e+=i)a[s++]=t[e],a[s++]=t[e+1];return s}var c=new Array(u);c[0]=1,c[u-1]=1;for(var l=[e,r-i],f=0;l.length>0;){for(var d=l.pop(),p=l.pop(),h=0,g=t[p],_=t[p+1],y=t[d],m=t[d+1],v=p+i;v<d;v+=i){var b=t[v],E=t[v+1],S=(0,n.squaredSegmentDistance)(b,E,g,_,y,m);S>h&&(f=v,h=S)}h>o&&(c[(f-e)/i]=1,p+i<f&&l.push(p,f),f+i<d&&l.push(f,d))}for(v=0;v<u;++v)c[v]&&(a[s++]=t[e+v*i],a[s++]=t[e+v*i+1]);return s}function o(t,e,r,n,o,a,s,u){for(var c=0,l=r.length;c<l;++c){var f=r[c];s=i(t,e,f,n,o,a,s),u.push(s),e=f}return s}function a(t,e,r,i,o,a,s){if(r<=e+i){for(;e<r;e+=i)a[s++]=t[e],a[s++]=t[e+1];return s}var u=t[e],c=t[e+1];a[s++]=u,a[s++]=c;var l=u,f=c;for(e+=i;e<r;e+=i)l=t[e],f=t[e+1],(0,n.squaredDistance)(u,c,l,f)>o&&(a[s++]=l,a[s++]=f,u=l,c=f);return l==u&&f==c||(a[s++]=l,a[s++]=f),s}function s(t,e){return e*Math.round(t/e)}function u(t,e,r,n,i,o,a){if(e==r)return a;var u,c,l=s(t[e],i),f=s(t[e+1],i);e+=n,o[a++]=l,o[a++]=f;do{if(u=s(t[e],i),c=s(t[e+1],i),(e+=n)==r)return o[a++]=u,o[a++]=c,a}while(u==l&&c==f);for(;e<r;){var d=s(t[e],i),p=s(t[e+1],i);if(e+=n,d!=u||p!=c){var h=u-l,g=c-f,_=d-l,y=p-f;h*y==g*_&&(h<0&&_<h||h==_||h>0&&_>h)&&(g<0&&y<g||g==y||g>0&&y>g)?(u=d,c=p):(o[a++]=u,o[a++]=c,l=u,f=c,u=d,c=p)}}return o[a++]=u,o[a++]=c,a}function c(t,e,r,n,i,o,a,s){for(var c=0,l=r.length;c<l;++c){var f=r[c];a=u(t,e,f,n,i,o,a),s.push(a),e=f}return a}},{"../../math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],cf6c900ee6e4cda65f7a0e5c229546d6:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../extent.js"),i=u(t("./GeometryType.js")),o=u(t("./SimpleGeometry.js")),a=t("./flat/deflate.js"),s=t("../math.js");function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e,r){var n=t.call(this)||this;return n.setCoordinates(e,r),n}return l(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=(0,s.squaredDistance)(t,e,i[0],i[1]);if(o<n){for(var a=this.stride,u=0;u<a;++u)r[u]=i[u];return r.length=a,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return(0,n.createOrUpdateFromCoordinate)(this.flatCoordinates,t)},e.prototype.getType=function(){return i.default.POINT},e.prototype.intersectsExtent=function(t){return(0,n.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,a.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(o.default);r.default=f},{"../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./SimpleGeometry.js":"2c201efc98ebdf5eedf2ad5e7989cb8b","./flat/deflate.js":"20562fe5b89ba49209b8e67a87a11b60","../math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],ee43659791d4226c3d24b329b87cd966:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.linearRingContainsExtent=function(t,e,r,o,a){return!(0,n.forEachCorner)(a,function(n){return!i(t,e,r,o,n[0],n[1])})},r.linearRingContainsXY=i,r.linearRingsContainsXY=o,r.linearRingssContainsXY=function(t,e,r,n,i,a){if(0===r.length)return!1;for(var s=0,u=r.length;s<u;++s){var c=r[s];if(o(t,e,c,n,i,a))return!0;e=c[c.length-1]}return!1};var n=t("../../extent.js");function i(t,e,r,n,i,o){for(var a=0,s=t[r-n],u=t[r-n+1];e<r;e+=n){var c=t[e],l=t[e+1];u<=o?l>o&&(c-s)*(o-u)-(i-s)*(l-u)>0&&a++:l<=o&&(c-s)*(o-u)-(i-s)*(l-u)<0&&a--,s=c,u=l}return 0!==a}function o(t,e,r,n,o,a){if(0===r.length)return!1;if(!i(t,e,r[0],n,o,a))return!1;for(var s=1,u=r.length;s<u;++s)if(i(t,r[s-1],r[s],n,o,a))return!1;return!0}},{"../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b"}],"13a1a64f3cf9ef20a02b0e546fc0638c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getInteriorPointOfArray=o,r.getInteriorPointsOfMultiArray=function(t,e,r,n,i){for(var a=[],s=0,u=r.length;s<u;++s){var c=r[s];a=o(t,e,c,n,i,2*s,a),e=c[c.length-1]}return a};var n=t("../../array.js"),i=t("./contains.js");function o(t,e,r,o,a,s,u){for(var c,l,f,d,p,h,g,_=a[s+1],y=[],m=0,v=r.length;m<v;++m){var b=r[m];for(d=t[b-o],h=t[b-o+1],c=e;c<b;c+=o)p=t[c],g=t[c+1],(_<=h&&g<=_||h<=_&&_<=g)&&(f=(_-h)/(g-h)*(p-d)+d,y.push(f)),d=p,h=g}var E=NaN,S=-1/0;for(y.sort(n.numberSafeCompareFunction),d=y[0],c=1,l=y.length;c<l;++c){p=y[c];var j=Math.abs(p-d);j>S&&(f=(d+p)/2,(0,i.linearRingsContainsXY)(t,e,r,o,f,_)&&(E=f,S=j)),d=p}return isNaN(E)&&(E=a[s]),u?(u.push(E,_,S),u):[E,_,S]}},{"../../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","./contains.js":"ee43659791d4226c3d24b329b87cd966"}],e0bf5a56fa9c6ecc259fd8e4cf84e1a5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.intersectsLineString=a,r.intersectsLineStringArray=function(t,e,r,n,i){for(var o=0,s=r.length;o<s;++o){if(a(t,e,r[o],n,i))return!0;e=r[o]}return!1},r.intersectsLinearRing=s,r.intersectsLinearRingArray=u,r.intersectsLinearRingMultiArray=function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(u(t,e,s,n,i))return!0;e=s[s.length-1]}return!1};var n=t("../../extent.js"),i=t("./contains.js"),o=t("./segments.js");function a(t,e,r,i,a){var s=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),t,e,r,i);return!!(0,n.intersects)(a,s)&&(!!(0,n.containsExtent)(a,s)||(s[0]>=a[0]&&s[2]<=a[2]||(s[1]>=a[1]&&s[3]<=a[3]||(0,o.forEach)(t,e,r,i,function(t,e){return(0,n.intersectsSegment)(a,t,e)}))))}function s(t,e,r,n,o){return!!a(t,e,r,n,o)||(!!(0,i.linearRingContainsXY)(t,e,r,n,o[0],o[1])||(!!(0,i.linearRingContainsXY)(t,e,r,n,o[0],o[3])||(!!(0,i.linearRingContainsXY)(t,e,r,n,o[2],o[1])||!!(0,i.linearRingContainsXY)(t,e,r,n,o[2],o[3]))))}function u(t,e,r,n,o){if(!s(t,e,r[0],n,o))return!1;if(1===r.length)return!0;for(var u=1,c=r.length;u<c;++u)if((0,i.linearRingContainsExtent)(t,r[u-1],r[u],n,o)&&!a(t,r[u-1],r[u],n,o))return!1;return!0}},{"../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./contains.js":"ee43659791d4226c3d24b329b87cd966","./segments.js":"5a45db534d5c0ac5d30c257fe9fff675"}],"5a45db534d5c0ac5d30c257fe9fff675":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=function(t,e,r,n,i){for(var o,a=[t[e],t[e+1]],s=[];e+n<r;e+=n){if(s[0]=t[e+n],s[1]=t[e+n+1],o=i(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}},{}],"639aa6020d1095fcc76ca0ab863c78fa":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.linearRingIsClockwise=i,r.linearRingsAreOriented=o,r.linearRingssAreOriented=function(t,e,r,n,i){for(var a=0,s=r.length;a<s;++a){var u=r[a];if(!o(t,e,u,n,i))return!1;u.length&&(e=u[u.length-1])}return!0},r.orientLinearRings=a,r.orientLinearRingsArray=function(t,e,r,n,i){for(var o=0,s=r.length;o<s;++o)e=a(t,e,r[o],n,i);return e};var n=t("./reverse.js");function i(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=(s-o)*(u+a),o=s,a=u}return i>0}function o(t,e,r,n,o){for(var a=void 0!==o&&o,s=0,u=r.length;s<u;++s){var c=r[s],l=i(t,e,c,n);if(0===s){if(a&&l||!a&&!l)return!1}else if(a&&!l||!a&&l)return!1;e=c}return!0}function a(t,e,r,o,a){for(var s=void 0!==a&&a,u=0,c=r.length;u<c;++u){var l=r[u],f=i(t,e,l,o);(0===u?s&&f||!s&&!f:s&&!f||!s&&f)&&(0,n.coordinates)(t,e,l,o),e=l}return e}},{"./reverse.js":"a63bc28744b5fbd4cbdc174863e79cec"}],a63bc28744b5fbd4cbdc174863e79cec:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.coordinates=function(t,e,r,n){for(;e<r-n;){for(var i=0;i<n;++i){var o=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=o}e+=n,r-=n}}},{}],"92cea55a21e6b46fad9d753145688c9b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=E(t("./Vector.js")),i=t("../obj.js"),o=t("../coordinate.js"),a=E(t("../style/Text.js")),s=E(t("../style/Fill.js")),u=E(t("../style/Stroke.js")),c=E(t("../geom/LineString.js")),l=E(t("../source/Vector.js")),f=t("../proj.js"),d=t("../extent.js"),p=t("../math.js"),h=E(t("../style/Style.js")),g=E(t("../Feature.js")),_=t("../loadingstrategy.js"),y=t("../geom/flat/geodesic.js"),m=E(t("../geom/GeometryLayout.js")),v=E(t("../geom/Point.js")),b=E(t("../Collection.js"));function E(t){return t&&t.__esModule?t:{default:t}}var S,j=(S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),O=new u.default({color:"rgba(0,0,0,0.2)"}),P=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],T=function(t){function e(e){var r=this,n=e||{},c=(0,i.assign)({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},n);return delete c.maxLines,delete c.strokeStyle,delete c.targetSize,delete c.showLabels,delete c.lonLabelFormatter,delete c.latLabelFormatter,delete c.lonLabelPosition,delete c.latLabelPosition,delete c.lonLabelStyle,delete c.latLabelStyle,delete c.intervals,(r=t.call(this,c)||this).projection_=null,r.maxLat_=1/0,r.maxLon_=1/0,r.minLat_=-1/0,r.minLon_=-1/0,r.maxLatP_=1/0,r.maxLonP_=1/0,r.minLatP_=-1/0,r.minLonP_=-1/0,r.targetSize_=void 0!==n.targetSize?n.targetSize:100,r.maxLines_=void 0!==n.maxLines?n.maxLines:100,r.meridians_=[],r.parallels_=[],r.strokeStyle_=void 0!==n.strokeStyle?n.strokeStyle:O,r.fromLonLatTransform_=void 0,r.toLonLatTransform_=void 0,r.projectionCenterLonLat_=null,r.meridiansLabels_=null,r.parallelsLabels_=null,n.showLabels&&(r.lonLabelFormatter_=null==n.lonLabelFormatter?o.degreesToStringHDMS.bind(r,"EW"):n.lonLabelFormatter,r.latLabelFormatter_=null==n.latLabelFormatter?o.degreesToStringHDMS.bind(r,"NS"):n.latLabelFormatter,r.lonLabelPosition_=null==n.lonLabelPosition?0:n.lonLabelPosition,r.latLabelPosition_=null==n.latLabelPosition?1:n.latLabelPosition,r.lonLabelStyleCache_={},r.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleCache_[e]||(this.lonLabelStyleCache_[e]=new h.default({text:void 0!==n.lonLabelStyle?n.lonLabelStyle:new a.default({text:e,font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new s.default({color:"rgba(0,0,0,1)"}),stroke:new u.default({color:"rgba(255,255,255,1)",width:3})})})),this.lonLabelStyleCache_[e]}.bind(r),r.latLabelStyleCache_={},r.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleCache_[e]||(this.latLabelStyleCache_[e]=new h.default({text:void 0!==n.latLabelStyle?n.latLabelStyle:new a.default({text:e,font:"12px Calibri,sans-serif",textAlign:"right",fill:new s.default({color:"rgba(0,0,0,1)"}),stroke:new u.default({color:"rgba(255,255,255,1)",width:3})})})),this.latLabelStyleCache_[e]}.bind(r),r.meridiansLabels_=[],r.parallelsLabels_=[]),r.intervals_=void 0!==n.intervals?n.intervals:P,r.setSource(new l.default({loader:r.loaderFunction.bind(r),strategy:_.bbox,features:new b.default,overlaps:!1,useSpatialIndex:!1,wrapX:n.wrapX})),r.featurePool_=[],r.lineStyle_=new h.default({stroke:r.strokeStyle_}),r.renderedExtent_=null,r.setRenderOrder(null),r.tmpExtent_=null,r}return j(e,t),e.prototype.loaderFunction=function(t,e,r){var n=this.getSource(),i=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=(0,d.getIntersection)(i,t,this.tmpExtent_);if(setTimeout(function(){n.removeLoadedExtent(t)},0),!(this.renderedExtent_&&(0,d.equals)(this.renderedExtent_,o)||(this.renderedExtent_=o,(0,d.isEmpty)(o)))){var a=(0,d.getCenter)(o),s=e*e/4;(!this.projection_||!(0,f.equivalent)(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(o,a,e,s);var u,c=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(c+=this.meridiansLabels_.length),this.parallelsLabels_&&(c+=this.parallelsLabels_.length);c>this.featurePool_.length;)u=new g.default,this.featurePool_.push(u);var l=n.getFeaturesCollection();l.clear();var p,h,_,y=0;for(p=0,h=this.meridians_.length;p<h;++p)(u=this.featurePool_[y++]).setGeometry(this.meridians_[p]),u.setStyle(this.lineStyle_),l.push(u);for(p=0,h=this.parallels_.length;p<h;++p)(u=this.featurePool_[y++]).setGeometry(this.parallels_[p]),u.setStyle(this.lineStyle_),l.push(u);if(this.meridiansLabels_)for(p=0,h=this.meridiansLabels_.length;p<h;++p)_=this.meridiansLabels_[p],(u=this.featurePool_[y++]).setGeometry(_.geom),u.setStyle(this.lonLabelStyle_),u.set("graticule_label",_.text),l.push(u);if(this.parallelsLabels_)for(p=0,h=this.parallelsLabels_.length;p<h;++p)_=this.parallelsLabels_[p],(u=this.featurePool_[y++]).setGeometry(_.geom),u.setStyle(this.latLabelStyle_),u.set("graticule_label",_.text),l.push(u)}},e.prototype.addMeridian_=function(t,e,r,n,i,o){var a=this.getMeridian_(t,e,r,n,o);if((0,d.intersects)(a.getExtent(),i)){if(this.meridiansLabels_){var s=this.getMeridianPoint_(a,i,o);this.meridiansLabels_[o]={geom:s,text:this.lonLabelFormatter_(t)}}this.meridians_[o++]=a}return o},e.prototype.addParallel_=function(t,e,r,n,i,o){var a=this.getParallel_(t,e,r,n,o);if((0,d.intersects)(a.getExtent(),i)){if(this.parallelsLabels_){var s=this.getParallelPoint_(a,i,o);this.parallelsLabels_[o]={geom:s,text:this.latLabelFormatter_(t)}}this.parallels_[o++]=a}return o},e.prototype.createGraticule_=function(t,e,r,n){var i=this.getInterval_(r);if(-1==i)return this.meridians_.length=this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o,a,s,u,c=this.toLonLatTransform_(e),l=c[0],d=c[1],h=this.maxLines_,g=[Math.max(t[0],this.minLonP_),Math.max(t[1],this.minLatP_),Math.min(t[2],this.maxLonP_),Math.min(t[3],this.maxLatP_)],_=(g=(0,f.transformExtent)(g,this.projection_,"EPSG:4326"))[3],y=g[2],m=g[1],v=g[0];for(l=Math.floor(l/i)*i,u=(0,p.clamp)(l,this.minLon_,this.maxLon_),a=this.addMeridian_(u,m,_,n,t,0),o=0;u!=this.minLon_&&o++<h;)u=Math.max(u-i,this.minLon_),a=this.addMeridian_(u,m,_,n,t,a);for(u=(0,p.clamp)(l,this.minLon_,this.maxLon_),o=0;u!=this.maxLon_&&o++<h;)u=Math.min(u+i,this.maxLon_),a=this.addMeridian_(u,m,_,n,t,a);for(this.meridians_.length=a,this.meridiansLabels_&&(this.meridiansLabels_.length=a),d=Math.floor(d/i)*i,s=(0,p.clamp)(d,this.minLat_,this.maxLat_),a=this.addParallel_(s,v,y,n,t,0),o=0;s!=this.minLat_&&o++<h;)s=Math.max(s-i,this.minLat_),a=this.addParallel_(s,v,y,n,t,a);for(s=(0,p.clamp)(d,this.minLat_,this.maxLat_),o=0;s!=this.maxLat_&&o++<h;)s=Math.min(s+i,this.maxLat_),a=this.addParallel_(s,v,y,n,t,a);this.parallels_.length=a,this.parallelsLabels_&&(this.parallelsLabels_.length=a)},e.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1],n=-1,i=Math.pow(this.targetSize_*t,2),o=[],a=[],s=0,u=this.intervals_.length;s<u;++s){var c=this.intervals_[s]/2;if(o[0]=e-c,o[1]=r-c,a[0]=e+c,a[1]=r+c,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=i)break;n=this.intervals_[s]}return n},e.prototype.getMeridian_=function(t,e,r,n,i){var o=(0,y.meridian)(t,e,r,this.projection_,n),a=this.meridians_[i];return a?(a.setFlatCoordinates(m.default.XY,o),a.changed()):a=this.meridians_[i]=new c.default(o,m.default.XY),a},e.prototype.getMeridianPoint_=function(t,e,r){var n,i=t.getFlatCoordinates(),o=Math.max(e[1],i[1]),a=Math.min(e[3],i[i.length-1]),s=(0,p.clamp)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,o,a),u=[i[0],s];return r in this.meridiansLabels_?(n=this.meridiansLabels_[r].geom).setCoordinates(u):n=new v.default(u),n},e.prototype.getMeridians=function(){return this.meridians_},e.prototype.getParallel_=function(t,e,r,n,i){var o=(0,y.parallel)(t,e,r,this.projection_,n),a=this.parallels_[i];return a?(a.setFlatCoordinates(m.default.XY,o),a.changed()):a=new c.default(o,m.default.XY),a},e.prototype.getParallelPoint_=function(t,e,r){var n,i=t.getFlatCoordinates(),o=Math.max(e[0],i[0]),a=Math.min(e[2],i[i.length-2]),s=[(0,p.clamp)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,o,a),i[1]];return r in this.parallelsLabels_?(n=this.parallelsLabels_[r].geom).setCoordinates(s):n=new v.default(s),n},e.prototype.getParallels=function(){return this.parallels_},e.prototype.updateProjectionInfo_=function(t){var e=(0,f.get)("EPSG:4326"),r=t.getWorldExtent(),n=(0,f.transformExtent)(r,e,t);this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0],this.maxLatP_=n[3],this.maxLonP_=n[2],this.minLatP_=n[1],this.minLonP_=n[0],this.fromLonLatTransform_=(0,f.getTransform)(e,t),this.toLonLatTransform_=(0,f.getTransform)(t,e),this.projectionCenterLonLat_=this.toLonLatTransform_((0,d.getCenter)(t.getExtent())),this.projection_=t},e}(n.default);r.default=T},{"./Vector.js":"49de066443bc6516b98f0fae1c556dd4","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../coordinate.js":"2a3e9645190015dfc3d4ed757193af4c","../style/Text.js":"a062decc4252836a4aac93094a0a5c97","../style/Fill.js":"a869d8160b7ebc75403f3be54b17a332","../style/Stroke.js":"34d383bc2f5fa713ba7dc14d6c06c96f","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../source/Vector.js":"95cd5d20039b261bf342469b43fe7572","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../math.js":"6086e082317ce6ce8a1b47fb09fed63b","../style/Style.js":"83d3e6a8b05474094d91379cf54baf97","../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","../loadingstrategy.js":"f120609ebd4759f9387504f927a7c1cd","../geom/flat/geodesic.js":"592f14a90d9b2b0a051ae1b7c4dc9e1d","../geom/GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../Collection.js":"6f090fc511268dcb6cf8b42e032e7c46"}],"49de066443bc6516b98f0fae1c556dd4":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(t("./BaseVector.js")),i=o(t("../renderer/canvas/VectorLayer.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.createRenderer=function(){return new i.default(this)},e}(n.default);r.default=u},{"./BaseVector.js":"7d0994c50d0f4ce072278459045b4f9f","../renderer/canvas/VectorLayer.js":"3564c0c8505a8986e03bfa3aa8a5f309"}],"7d0994c50d0f4ce072278459045b4f9f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Layer.js"))&&n.__esModule?n:{default:n},o=t("../obj.js"),a=t("../style/Style.js");var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c="renderOrder",l=function(t){function e(e){var r=this,n=e||{},i=(0,o.assign)({},n);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(r=t.call(this,i)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return u(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(c)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(c,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:a.createDefaultStyle,this.styleFunction_=null===t?void 0:(0,a.toFunction)(this.style_),this.changed()},e}(i.default);r.default=l},{"./Layer.js":"59dd6581292a9dd63695ea43a8043d57","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../style/Style.js":"83d3e6a8b05474094d91379cf54baf97"}],"59dd6581292a9dd63695ea43a8043d57":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.inView=function(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom},r.default=void 0;var n=t("../events.js"),i=f(t("../events/EventType.js")),o=t("../Object.js"),a=f(t("./Base.js")),s=f(t("./Property.js")),u=t("../obj.js"),c=f(t("../render/EventType.js")),l=f(t("../source/State.js"));function f(t){return t&&t.__esModule?t:{default:t}}var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});var h=function(t){function e(e){var r=this,i=(0,u.assign)({},e);delete i.source,(r=t.call(this,i)||this).mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,e.render&&(r.render=e.render),e.map&&r.setMap(e.map),(0,n.listen)(r,(0,o.getChangeEventType)(s.default.SOURCE),r.handleSourcePropertyChange_,r);var a=e.source?e.source:null;return r.setSource(a),r}return p(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(s.default.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():l.default.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&((0,n.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=(0,n.listen)(t,i.default.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.render=function(t,e){var r=this.getRenderer();if(r.prepareFrame(t))return r.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&((0,n.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,n.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,n.listen)(t,c.default.PRECOMPOSE,function(t){t.frameState.layerStatesArray.push(this.getLayerState(!1))},this),this.mapRenderKey_=(0,n.listen)(this,i.default.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(s.default.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e}(a.default);r.default=h},{"../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../Object.js":"6c67600a5761ed2f245039657f77c37b","./Base.js":"82fc51284eae699c7de11fbb148099a9","./Property.js":"8991ed813554c440eb1d490c7e06dd18","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../render/EventType.js":"06d6dd10e6aec33ecdd51285aca01fbb","../source/State.js":"909be2fc812ab85b41263e2e8ec87f92"}],"82fc51284eae699c7de11fbb148099a9":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=c(t("../Object.js")),o=c(t("./Property.js")),a=t("../math.js"),s=t("../obj.js"),u=t("../asserts.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=function(t){function e(e){var r=t.call(this)||this,n=(0,s.assign)({},e);return n[o.default.OPACITY]=void 0!==e.opacity?e.opacity:1,(0,u.assert)("number"==typeof n[o.default.OPACITY],64),n[o.default.VISIBLE]=void 0===e.visible||e.visible,n[o.default.Z_INDEX]=e.zIndex,n[o.default.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,n[o.default.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,n[o.default.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,n[o.default.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,r.setProperties(n),r.state_=null,r}return f(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t,hasOverlay:!1};return e.opacity=(0,a.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=this.getZIndex()||(!1===e.managed?1/0:0),e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return(0,n.abstract)()},e.prototype.getLayerStatesArray=function(t){return(0,n.abstract)()},e.prototype.getExtent=function(){return this.get(o.default.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(o.default.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(o.default.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(o.default.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(o.default.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(o.default.OPACITY)},e.prototype.getSourceState=function(){return(0,n.abstract)()},e.prototype.getVisible=function(){return this.get(o.default.VISIBLE)},e.prototype.getZIndex=function(){return this.get(o.default.Z_INDEX)},e.prototype.setExtent=function(t){this.set(o.default.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(o.default.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(o.default.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(o.default.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(o.default.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){(0,u.assert)("number"==typeof t,64),this.set(o.default.OPACITY,t)},e.prototype.setVisible=function(t){this.set(o.default.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(o.default.Z_INDEX,t)},e}(i.default);r.default=d},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../Object.js":"6c67600a5761ed2f245039657f77c37b","./Property.js":"8991ed813554c440eb1d490c7e06dd18","../math.js":"6086e082317ce6ce8a1b47fb09fed63b","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../asserts.js":"7e662a02bc41c2814316b69c70da50e2"}],"8991ed813554c440eb1d490c7e06dd18":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"}},{}],"06d6dd10e6aec33ecdd51285aca01fbb":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},{}],"909be2fc812ab85b41263e2e8ec87f92":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},{}],"83d3e6a8b05474094d91379cf54baf97":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toFunction=function(t){var e;if("function"==typeof t)e=t;else{var r;if(Array.isArray(t))r=t;else(0,n.assert)("function"==typeof t.getZIndex,41),r=[t];e=function(){return r}}return e},r.createDefaultStyle=function(t,e){if(!l){var r=new a.default({color:"rgba(255,255,255,0.4)"}),n=new s.default({color:"#3399CC",width:1.25});l=[new c({image:new o.default({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return l},r.createEditingStyle=function(){var t={},e=[255,255,255,1],r=[0,153,255,1];return t[i.default.POLYGON]=[new c({fill:new a.default({color:[255,255,255,.5]})})],t[i.default.MULTI_POLYGON]=t[i.default.POLYGON],t[i.default.LINE_STRING]=[new c({stroke:new s.default({color:e,width:5})}),new c({stroke:new s.default({color:r,width:3})})],t[i.default.MULTI_LINE_STRING]=t[i.default.LINE_STRING],t[i.default.CIRCLE]=t[i.default.POLYGON].concat(t[i.default.LINE_STRING]),t[i.default.POINT]=[new c({image:new o.default({radius:6,fill:new a.default({color:r}),stroke:new s.default({color:e,width:1.5})}),zIndex:1/0})],t[i.default.MULTI_POINT]=t[i.default.POINT],t[i.default.GEOMETRY_COLLECTION]=t[i.default.POLYGON].concat(t[i.default.LINE_STRING],t[i.default.POINT]),t},r.default=void 0;var n=t("../asserts.js"),i=u(t("../geom/GeometryType.js")),o=u(t("./Circle.js")),a=u(t("./Fill.js")),s=u(t("./Stroke.js"));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=f,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=f,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();var l=null;function f(t){return t.getGeometry()}var d=c;r.default=d},{"../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./Circle.js":"93fbd9ead5c99814e9c5f67ef07464c3","./Fill.js":"a869d8160b7ebc75403f3be54b17a332","./Stroke.js":"34d383bc2f5fa713ba7dc14d6c06c96f"}],"93fbd9ead5c99814e9c5f67ef07464c3":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./RegularShape.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke})||this}return a(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(i.default);r.default=s},{"./RegularShape.js":"c64a085fe737ff86ecbeeeb109a1e273"}],c64a085fe737ff86ecbeeeb109a1e273:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../colorlike.js"),i=t("../dom.js"),o=u(t("../ImageState.js")),a=t("../render/canvas.js"),s=u(t("./Image.js"));function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e){var r=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(r=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1})||this).canvas_=null,r.hitDetectionCanvas_=null,r.fill_=void 0!==e.fill?e.fill:null,r.origin_=[0,0],r.points_=e.points,r.radius_=void 0!==e.radius?e.radius:e.radius1,r.radius2_=e.radius2,r.angle_=void 0!==e.angle?e.angle:0,r.stroke_=void 0!==e.stroke?e.stroke:null,r.anchor_=null,r.size_=null,r.imageSize_=null,r.hitDetectionImageSize_=null,r.render(),r}return l(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return o.default.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render=function(){var t,e=a.defaultLineCap,r=a.defaultLineJoin,o=0,s=null,u=0,c=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=a.defaultStrokeStyle),t=(0,n.asColorLike)(t),void 0===(c=this.stroke_.getWidth())&&(c=a.defaultLineWidth),s=this.stroke_.getLineDash(),u=this.stroke_.getLineDashOffset(),void 0===(r=this.stroke_.getLineJoin())&&(r=a.defaultLineJoin),void 0===(e=this.stroke_.getLineCap())&&(e=a.defaultLineCap),void 0===(o=this.stroke_.getMiterLimit())&&(o=a.defaultMiterLimit));var l=2*(this.radius_+c)+1,f={strokeStyle:t,strokeWidth:c,size:l,lineCap:e,lineDash:s,lineDashOffset:u,lineJoin:r,miterLimit:o},d=(0,i.createCanvasContext2D)(l,l);this.canvas_=d.canvas;var p=l=this.canvas_.width;this.draw_(f,d,0,0),this.createHitDetectionCanvas_(f),this.anchor_=[l/2,l/2],this.size_=[l,l],this.imageSize_=[p,p]},e.prototype.draw_=function(t,e,r,i){var o,s,u;e.setTransform(1,0,0,1,0,0),e.translate(r,i),e.beginPath();var c=this.points_;if(c===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(c*=2),o=0;o<=c;o++)s=2*o*Math.PI/c-Math.PI/2+this.angle_,u=o%2==0?this.radius_:l,e.lineTo(t.size/2+u*Math.cos(s),t.size/2+u*Math.sin(s))}if(this.fill_){var f=this.fill_.getColor();null===f&&(f=a.defaultFillStyle),e.fillStyle=(0,n.asColorLike)(f),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=(0,i.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,r,n){e.setTransform(1,0,0,1,0,0),e.translate(r,n),e.beginPath();var i=this.points_;if(i===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(i*=2);var s=void 0,u=void 0,c=void 0;for(s=0;s<=i;s++)c=2*s*Math.PI/i-Math.PI/2+this.angle_,u=s%2==0?this.radius_:o,e.lineTo(t.size/2+u*Math.cos(c),t.size/2+u*Math.sin(c))}e.fillStyle=a.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(s.default);r.default=f},{"../colorlike.js":"b60b82b020672980b1ec294b2afd8fc9","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2","../render/canvas.js":"89843263bd71c58765f4fe7d95f6f63c","./Image.js":"bc8e873dd5632db289baab9fcddb4751"}],b60b82b020672980b1ec294b2afd8fc9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.asColorLike=function(t){return Array.isArray(t)?(0,n.toString)(t):t};var n=t("./color.js")},{"./color.js":"15b4c40f3e4cfb63cb3cc4b2798c1fb2"}],"15b4c40f3e4cfb63cb3cc4b2798c1fb2":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.asString=function(t){return"string"==typeof t?t:f(t)},r.asArray=function(t){return Array.isArray(t)?t:c(t)},r.normalize=l,r.toString=f,r.fromString=void 0;var n=t("./asserts.js"),i=t("./math.js"),o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,a=/^([a-z]*)$/i;var s,u,c=(s={},u=0,function(t){var e;if(s.hasOwnProperty(t))e=s[t];else{if(u>=1024){var r=0;for(var i in s)0==(3&r++)&&(delete s[i],--u)}e=function(t){var e,r,i,s,u;if(a.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}return""}(t)),o.exec(t)){var c=t.length-1,f=void 0;f=c<=4?1:2;var d=4===c||8===c;e=parseInt(t.substr(1+0*f,f),16),r=parseInt(t.substr(1+1*f,f),16),i=parseInt(t.substr(1+2*f,f),16),s=d?parseInt(t.substr(1+3*f,f),16):255,1==f&&(e=(e<<4)+e,r=(r<<4)+r,i=(i<<4)+i,d&&(s=(s<<4)+s)),u=[e,r,i,s/255]}else 0==t.indexOf("rgba(")?l(u=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((u=t.slice(4,-1).split(",").map(Number)).push(1),l(u)):(0,n.assert)(!1,14);return u}(t),s[t]=e,++u}return e});function l(t){return t[0]=(0,i.clamp)(t[0]+.5|0,0,255),t[1]=(0,i.clamp)(t[1]+.5|0,0,255),t[2]=(0,i.clamp)(t[2]+.5|0,0,255),t[3]=(0,i.clamp)(t[3],0,1),t}function f(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:t[3])+")"}r.fromString=c},{"./asserts.js":"7e662a02bc41c2814316b69c70da50e2","./math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],"0ade60b4014b5f1918822f5d81f5a358":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createCanvasContext2D=function(t,e){var r=document.createElement("canvas");t&&(r.width=t);e&&(r.height=e);return r.getContext("2d")},r.outerWidth=function(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)},r.outerHeight=function(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)},r.replaceNode=function(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)},r.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},r.removeChildren=function(t){for(;t.lastChild;)t.removeChild(t.lastChild)},r.replaceChildren=function(t,e){for(var r=t.childNodes,n=0;;++n){var i=r[n],o=e[n];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--n):t.appendChild(o))}}},{}],"1a17f949fb90d1999b4af0ca7025d0a2":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},{}],"89843263bd71c58765f4fe7d95f6f63c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.measureTextWidth=v,r.measureAndCacheTextWidth=function(t,e,r){if(e in r)return r[e];return r[e]=v(t,e)},r.measureTextWidths=function(t,e,r){for(var n=e.length,i=0,o=0;o<n;++o){var a=v(t,e[o]);i=Math.max(i,a),r.push(a)}return i},r.rotateAtOffset=function(t,e,r,n){0!==e&&(t.translate(r,n),t.rotate(e),t.translate(-r,-n))},r.drawImage=function(t,e,r,n,i,o,a,s,u,c,l){var f;1!=r&&(f=t.globalAlpha,t.globalAlpha=f*r);e&&t.setTransform.apply(t,e);t.drawImage(n,i,o,a,s,u,c,a*l,s*l),1!=r&&(t.globalAlpha=f);e&&t.setTransform.apply(t,b)},r.resetTransform=r.measureTextHeight=r.checkFont=r.textHeights=r.checkedFonts=r.labelCache=r.defaultLineWidth=r.defaultPadding=r.defaultTextBaseline=r.defaultTextAlign=r.defaultStrokeStyle=r.defaultMiterLimit=r.defaultLineJoin=r.defaultLineDashOffset=r.defaultLineDash=r.defaultLineCap=r.defaultFillStyle=r.defaultFont=void 0;var n,i=t("../css.js"),o=t("../dom.js"),a=t("../obj.js"),s=t("../transform.js"),u=(n=t("./canvas/LabelCache.js"))&&n.__esModule?n:{default:n};r.defaultFont="10px sans-serif";r.defaultFillStyle="#000";r.defaultLineCap="round";r.defaultLineDash=[];r.defaultLineDashOffset=0;r.defaultLineJoin="round";r.defaultMiterLimit=10;r.defaultStrokeStyle="#000";r.defaultTextAlign="center";r.defaultTextBaseline="middle";r.defaultPadding=[0,0,0,0];r.defaultLineWidth=1;var c=new u.default;r.labelCache=c;var l={};r.checkedFonts=l;var f,d=null,p={};r.textHeights=p;var h=function(){var t,e,r=100,n=l,o="32px ",s=["monospace","serif"],u=s.length,h="wmytzilWMYTZIL@#/&?$%10";function _(t,r,n){for(var i=g(),a=!0,c=0;c<u;++c){var l=s[c];if(i.font=t+" "+r+" "+o+l,e=i.measureText(h).width,n!=l){i.font=t+" "+r+" "+o+n+","+l;var f=i.measureText(h).width;a=a&&f!=e}}return!!a}function y(){var e=!0;for(var i in n)n[i]<r&&(_.apply(this,i.split("\n"))?(n[i]=r,(0,a.clear)(p),d=null,f=void 0,c.getCount()&&c.clear()):(++n[i],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var o=(0,i.getFontParameters)(e);if(o)for(var a=o.families,s=0,u=a.length;s<u;++s){var c=a[s],l=o.style+"\n"+o.weight+"\n"+c;l in n||(n[l]=r,_(o.style,o.weight,c)||(n[l]=0,void 0===t&&(t=setInterval(y,32))))}}}();function g(){return d||(d=(0,o.createCanvasContext2D)(1,1)),d}r.checkFont=h;var _,y,m=(y=p,function(t){var e=y[t];return null==e&&(_||((_=document.createElement("div")).innerHTML="M",_.style.margin=_.style.padding="0 !important",_.style.position="absolute !important",_.style.left="-99999px !important"),_.style.font=t,document.body.appendChild(_),e=y[t]=_.offsetHeight,document.body.removeChild(_)),e});function v(t,e){var r=g();return t!=f&&(r.font=f=t),r.measureText(e).width}r.measureTextHeight=m;var b=(0,s.create)();r.resetTransform=b},{"../css.js":"f85c5145e7d341bc4a345e62bbff4738","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928","./canvas/LabelCache.js":"33954219264e0fb20c97aa167f92099f"}],f85c5145e7d341bc4a345e62bbff4738:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getFontParameters=r.CLASS_COLLAPSED=r.CLASS_CONTROL=r.CLASS_UNSUPPORTED=r.CLASS_UNSELECTABLE=r.CLASS_SELECTABLE=r.CLASS_HIDDEN=void 0;r.CLASS_HIDDEN="ol-hidden";r.CLASS_SELECTABLE="ol-selectable";r.CLASS_UNSELECTABLE="ol-unselectable";r.CLASS_UNSUPPORTED="ol-unsupported";r.CLASS_CONTROL="ol-control";r.CLASS_COLLAPSED="ol-collapsed";var n,i,o=(i={},function(t){if(n||(n=document.createElement("div").style),!(t in i)){n.font=t;var e=n.fontFamily,r=n.fontWeight,o=n.fontStyle;if(n.font="",!e)return null;var a=e.split(/,\s?/);i[t]={families:a,weight:r,style:o}}return i[t]});r.getFontParameters=o},{}],"33954219264e0fb20c97aa167f92099f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../../util.js"),o=(n=t("../../structs/LRUCache.js"))&&n.__esModule?n:{default:n};var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){var r=t.call(this,e)||this;return r.consumers={},r}return s(e,t),e.prototype.clear=function(){this.consumers={},t.prototype.clear.call(this)},e.prototype.get=function(e,r){var n=t.prototype.get.call(this,e),o=(0,i.getUid)(r);return o in this.consumers||(this.consumers[o]={}),this.consumers[o][e]=!0,n},e.prototype.prune=function(){t:for(;this.canExpireCache();){var t=this.peekLastKey();for(var e in this.consumers)if(t in this.consumers[e])break t;var r=this.pop();for(var e in r.width=r.height=0,this.consumers)delete this.consumers[e][t]}},e.prototype.release=function(t){delete this.consumers[(0,i.getUid)(t)]},e}(o.default);r.default=u},{"../../util.js":"4bb2f7213adce7213216789f3fd3a27b","../../structs/LRUCache.js":"9434da164ac7e8055b4d84766e5a6da8"}],"9434da164ac7e8055b4d84766e5a6da8":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../asserts.js"),i=a(t("../events/Target.js")),o=a(t("../events/EventType.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e){var r=t.call(this)||this;return r.highWaterMark=void 0!==e?e:2048,r.count_=0,r.entries_={},r.oldest_=null,r.newest_=null,r}return u(e,t),e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(o.default.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},e.prototype.get=function(t,e){var r=this.entries_[t];return(0,n.assert)(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return(0,n.assert)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){(0,n.assert)(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e}(i.default);r.default=c},{"../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../events/Target.js":"259e75f7f42ffc43fc3e889115e2a322","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2"}],bc8e873dd5632db289baab9fcddb4751:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getAnchor=function(){return(0,n.abstract)()},t.prototype.getImage=function(t){return(0,n.abstract)()},t.prototype.getHitDetectionImage=function(t){return(0,n.abstract)()},t.prototype.getImageState=function(){return(0,n.abstract)()},t.prototype.getImageSize=function(){return(0,n.abstract)()},t.prototype.getHitDetectionImageSize=function(){return(0,n.abstract)()},t.prototype.getOrigin=function(){return(0,n.abstract)()},t.prototype.getSize=function(){return(0,n.abstract)()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t,e){return(0,n.abstract)()},t.prototype.load=function(){(0,n.abstract)()},t.prototype.unlistenImageChange=function(t,e){(0,n.abstract)()},t}();r.default=i},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b"}],a869d8160b7ebc75403f3be54b17a332:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}();r.default=n},{}],"34d383bc2f5fa713ba7dc14d6c06c96f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();r.default=n},{}],"3564c0c8505a8986e03bfa3aa8a5f309":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../../util.js"),i=f(t("../../ViewHint.js")),o=t("../../extent.js"),a=f(t("../../render/canvas/BuilderGroup.js")),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("../../render/canvas/ExecutorGroup.js")),u=f(t("./Layer.js")),c=t("../vector.js"),l=t("../../transform.js");function f(t){return t&&t.__esModule?t:{default:t}}var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=function(t){function e(e){var r=t.call(this,e)||this;return r.dirty_=!1,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=(0,o.createEmpty)(),r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r}return p(e,t),e.prototype.useContainer=function(e,r,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,r,n)},e.prototype.renderFrame=function(t,e){var r=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];(0,l.makeScale)(this.pixelTransform,1/r,1/r),(0,l.makeInverse)(this.inversePixelTransform,this.pixelTransform),this.useContainer(e,this.pixelTransform,n.opacity);var a=this.context,u=a.canvas,c=this.replayGroup_;if(!c||c.isEmpty())return!this.containerReused&&u.width>0&&(u.width=0),this.container;var f=Math.round(t.size[0]*r),d=Math.round(t.size[1]*r);if(u.width!=f||u.height!=d){u.width=f,u.height=d;var p=(0,l.toString)(this.pixelTransform);u.style.transform!==p&&(u.style.transform=p)}else this.containerReused||a.clearRect(0,0,f,d);this.preRender(a,t);var h=t.extent,g=t.viewState,_=g.projection,y=g.rotation,m=_.getExtent(),v=this.getLayer().getSource(),b=n.extent,E=void 0!==b;E&&this.clip(a,t,b);var S=t.viewHints,j=!(S[i.default.ANIMATING]||S[i.default.INTERACTING]),O=this.getRenderTransform(t,f,d,0),P=n.managed?t.skippedFeatureUids:{},T=this.getLayer().getDeclutter()?{}:null;if(c.execute(a,O,y,P,j,void 0,T),v.getWrapX()&&_.canWrapX()&&!(0,o.containsExtent)(m,h)){for(var x=h[0],C=(0,o.getWidth)(m),I=0,w=void 0;x<m[0];){w=C*--I;var R=this.getRenderTransform(t,f,d,w);c.execute(a,R,y,P,j,void 0,T),x+=C}for(I=0,x=h[2];x>m[2];){w=C*++I;var N=this.getRenderTransform(t,f,d,w);c.execute(a,N,y,P,j,void 0,T),x-=C}}if(T){var M=t.viewHints,L=!(M[i.default.ANIMATING]||M[i.default.INTERACTING]);(0,s.replayDeclutter)(T,a,y,1,L,t.declutterItems)}E&&a.restore(),this.postRender(a,t);var A=n.opacity,F=this.container;return A!==parseFloat(F.style.opacity)&&(F.style.opacity=1===A?"":A),this.container},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,i,o){if(this.replayGroup_){var a=e.viewState.resolution,s=e.viewState.rotation,u=this.getLayer(),c={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s,r,{},function(t){var e=(0,n.getUid)(t);if(!(e in c))return c[e]=!0,i(t,u)},u.getDeclutter()?o:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource(),n=t.viewHints[i.default.ANIMATING],u=t.viewHints[i.default.INTERACTING],l=e.getUpdateWhileAnimating(),f=e.getUpdateWhileInteracting();if(!this.dirty_&&!l&&n||!f&&u)return!0;var d=t.extent,p=t.viewState,h=p.projection,g=p.resolution,_=t.pixelRatio,y=e.getRevision(),m=e.getRenderBuffer(),v=e.getRenderOrder();void 0===v&&(v=c.defaultOrder);var b=(0,o.buffer)(d,m*g),E=p.projection.getExtent();if(r.getWrapX()&&p.projection.canWrapX()&&!(0,o.containsExtent)(E,t.extent)){var S=(0,o.getWidth)(E),j=Math.max((0,o.getWidth)(b)/2,S);b[0]=E[0]-j,b[2]=E[2]+j}if(!this.dirty_&&this.renderedResolution_==g&&this.renderedRevision_==y&&this.renderedRenderOrder_==v&&(0,o.containsExtent)(this.renderedExtent_,b))return this.replayGroupChanged=!1,!0;this.replayGroup_&&this.replayGroup_.dispose(),this.replayGroup_=null,this.dirty_=!1;var O=new a.default((0,c.getTolerance)(g,_),b,g,_,e.getDeclutter());r.loadFeatures(b,g,h);var P=function(t){var r,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(r=n(t,g)),r){var i=this.renderFeature(t,g,_,r,O);this.dirty_=this.dirty_||i}}.bind(this);if(v){var T=[];r.forEachFeatureInExtent(b,function(t){T.push(t)}),T.sort(v);for(var x=0,C=T.length;x<C;++x)P(T[x])}else r.forEachFeatureInExtent(b,P);var I=O.finish(),w=new s.default(b,g,_,r.getOverlaps(),I,e.getRenderBuffer());return this.renderedResolution_=g,this.renderedRevision_=y,this.renderedRenderOrder_=v,this.renderedExtent_=b,this.replayGroup_=w,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,r,n,i){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var a=0,s=n.length;a<s;++a)o=(0,c.renderFeature)(i,t,n[a],(0,c.getSquaredTolerance)(e,r),this.handleStyleImageChange_,this)||o;else o=(0,c.renderFeature)(i,t,n,(0,c.getSquaredTolerance)(e,r),this.handleStyleImageChange_,this);return o},e}(u.default);r.default=h},{"../../util.js":"4bb2f7213adce7213216789f3fd3a27b","../../ViewHint.js":"1c64ac73cc5dd7506e286fe17f1044a9","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../../render/canvas/BuilderGroup.js":"eee3dd2c9a1fbdc6efef8e57e1727fe4","../../render/canvas/ExecutorGroup.js":"60c90e6a3a28991a1f6db9ce252a5bd6","./Layer.js":"138b040d9b7f26238eddda7e17500920","../vector.js":"7ed977cc1b741c8030677466fc217cc6","../../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928"}],"1c64ac73cc5dd7506e286fe17f1044a9":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={ANIMATING:0,INTERACTING:1}},{}],eee3dd2c9a1fbdc6efef8e57e1727fe4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../../extent.js"),i=c(t("./Builder.js")),o=c(t("./ImageBuilder.js")),a=c(t("./LineStringBuilder.js")),s=c(t("./PolygonBuilder.js")),u=c(t("./TextBuilder.js"));function c(t){return t&&t.__esModule?t:{default:t}}var l={Circle:s.default,Default:i.default,Image:o.default,LineString:a.default,Polygon:s.default,Text:u.default},f=function(){function t(t,e,r,n,i){this.declutter_=i,this.declutterGroup_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=(0,n.createEmpty)()).push(1)),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var n in r){var i=r[n].finish();t[e][n]=i}}return t},t.prototype.getBuilder=function(t,e){var r=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[r];void 0===n&&(n={},this.buildersByZIndex_[r]=n);var i=n[e];void 0===i&&(i=new(0,l[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=i);return i},t}();r.default=f},{"../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Builder.js":"bd28004f04fa95e48149b4a9a2ff19ae","./ImageBuilder.js":"63652d573f90e752c0e0fb55ae21258b","./LineStringBuilder.js":"009f9574325264533295e1b1649426a4","./PolygonBuilder.js":"d6e3c41764e603a48a2d44db0999817a","./TextBuilder.js":"28646c63d73af95532e9ffb1a3cc0a4f"}],bd28004f04fa95e48149b4a9a2ff19ae:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../../array.js"),i=t("../../colorlike.js"),o=t("../../extent.js"),a=d(t("../../extent/Relationship.js")),s=d(t("../../geom/GeometryType.js")),u=t("../../geom/flat/inflate.js"),c=d(t("../VectorContext.js")),l=t("../canvas.js"),f=d(t("./Instruction.js"));function d(t){return t&&t.__esModule?t:{default:t}}var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=r,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return h(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,r,n,i,s){var u=this.coordinates.length,c=this.getBufferedMaxExtent();s&&(e+=n);var l,f,d,p=t[e],h=t[e+1],g=this.tmpCoordinate_,_=!0;for(l=e+n;l<r;l+=n)g[0]=t[l],g[1]=t[l+1],(d=(0,o.coordinateRelationship)(c,g))!==f?(_&&(this.coordinates[u++]=p,this.coordinates[u++]=h),this.coordinates[u++]=g[0],this.coordinates[u++]=g[1],_=!1):d===a.default.INTERSECTING?(this.coordinates[u++]=g[0],this.coordinates[u++]=g[1],_=!1):_=!0,p=g[0],h=g[1],f=d;return(i&&_||l===e+n)&&(this.coordinates[u++]=p,this.coordinates[u++]=h),u},e.prototype.drawCustomCoordinates_=function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o],u=this.appendFlatCoordinates(t,e,s,n,!1,!1);i.push(u),e=s}return e},e.prototype.drawCustom=function(t,e,r){this.beginGeometry(e);var n,i,o,a,c,l=t.getType(),d=t.getStride(),p=this.coordinates.length;if(l==s.default.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var h=t.getEndss();c=0;for(var g=0,_=h.length;g<_;++g){var y=[];c=this.drawCustomCoordinates_(n,c,h[g],d,y),a.push(y)}this.instructions.push([f.default.CUSTOM,p,a,t,r,u.inflateMultiCoordinatesArray])}else l==s.default.POLYGON||l==s.default.MULTI_LINE_STRING?(o=[],n=l==s.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),c=this.drawCustomCoordinates_(n,0,t.getEnds(),d,o),this.instructions.push([f.default.CUSTOM,p,o,t,r,u.inflateCoordinatesArray])):l==s.default.LINE_STRING||l==s.default.MULTI_POINT?(n=t.getFlatCoordinates(),i=this.appendFlatCoordinates(n,0,n.length,d,!1,!1),this.instructions.push([f.default.CUSTOM,p,i,t,r,u.inflateCoordinates])):l==s.default.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),i=this.coordinates.length,this.instructions.push([f.default.CUSTOM,p,i,t,r]));this.endGeometry(e)},e.prototype.beginGeometry=function(t){this.beginGeometryInstruction1_=[f.default.BEGIN_GEOMETRY,t,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[f.default.BEGIN_GEOMETRY,t,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,i,o=e.length,a=-1;for(t=0;t<o;++t)(i=(r=e[t])[0])==f.default.END_GEOMETRY?a=t:i==f.default.BEGIN_GEOMETRY&&(r[2]=t,(0,n.reverseSubArray)(this.hitDetectionInstructions,a,t),a=-1)},e.prototype.setFillStrokeStyle=function(t,e){var r=this.state;if(t){var n=t.getColor();r.fillStyle=(0,i.asColorLike)(n||l.defaultFillStyle)}else r.fillStyle=void 0;if(e){var o=e.getColor();r.strokeStyle=(0,i.asColorLike)(o||l.defaultStrokeStyle);var a=e.getLineCap();r.lineCap=void 0!==a?a:l.defaultLineCap;var s=e.getLineDash();r.lineDash=s?s.slice():l.defaultLineDash;var u=e.getLineDashOffset();r.lineDashOffset=u||l.defaultLineDashOffset;var c=e.getLineJoin();r.lineJoin=void 0!==c?c:l.defaultLineJoin;var f=e.getWidth();r.lineWidth=void 0!==f?f:l.defaultLineWidth;var d=e.getMiterLimit();r.miterLimit=void 0!==d?d:l.defaultMiterLimit,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,r=[f.default.SET_FILL_STYLE,e];return"string"!=typeof e&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[f.default.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,e){var r=t.strokeStyle,i=t.lineCap,o=t.lineDash,a=t.lineDashOffset,s=t.lineJoin,u=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=i||o!=t.currentLineDash&&!(0,n.equals)(t.currentLineDash,o)||t.currentLineDashOffset!=a||t.currentLineJoin!=s||t.currentLineWidth!=u||t.currentMiterLimit!=c)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=i,t.currentLineDash=o,t.currentLineDashOffset=a,t.currentLineJoin=s,t.currentLineWidth=u,t.currentMiterLimit=c)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[f.default.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,o.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,o.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(c.default);r.default=g},{"../../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../../colorlike.js":"b60b82b020672980b1ec294b2afd8fc9","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../../extent/Relationship.js":"1b90a5d09ae149f0d1c1cac9bd9c486c","../../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../../geom/flat/inflate.js":"41316cc397979197f0ec65ed178d2a19","../VectorContext.js":"09fd68b52f8ae252e7f1da12b616a424","../canvas.js":"89843263bd71c58765f4fe7d95f6f63c","./Instruction.js":"f90b042534af1360cbd44137432423ed"}],"09fd68b52f8ae252e7f1da12b616a424":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){function t(){}return t.prototype.drawCustom=function(t,e,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}();r.default=n},{}],f90b042534af1360cbd44137432423ed:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.closePathInstruction=r.beginPathInstruction=r.strokeInstruction=r.fillInstruction=void 0;var n={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},i=[n.FILL];r.fillInstruction=i;var o=[n.STROKE];r.strokeInstruction=o;var a=[n.BEGIN_PATH];r.beginPathInstruction=a;var s=[n.CLOSE_PATH];r.closePathInstruction=s;var u=n;r.default=u},{}],"63652d573f90e752c0e0fb55ae21258b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(t("./Instruction.js")),i=o(t("./Builder.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.declutterGroup_=null,o.hitDetectionImage_=null,o.image_=null,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return s(e,t),e.prototype.drawCoordinates_=function(t,e,r,n){return this.appendFlatCoordinates(t,e,r,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(e);var r=t.getFlatCoordinates(),i=t.getStride(),o=this.coordinates.length,a=this.drawCoordinates_(r,0,r.length,i);this.instructions.push([n.default.DRAW_IMAGE,o,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([n.default.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(e);var r=t.getFlatCoordinates(),i=t.getStride(),o=this.coordinates.length,a=this.drawCoordinates_(r,0,r.length,i);this.instructions.push([n.default.DRAW_IMAGE,o,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([n.default.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var r=t.getAnchor(),n=t.getSize(),i=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=r[0],this.anchorY_=r[1],this.declutterGroup_=e,this.hitDetectionImage_=i,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(i.default);r.default=u},{"./Instruction.js":"f90b042534af1360cbd44137432423ed","./Builder.js":"bd28004f04fa95e48149b4a9a2ff19ae"}],"009f9574325264533295e1b1649426a4":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Instruction.js")),o=(n=t("./Builder.js"))&&n.__esModule?n:{default:n};var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return s(e,t),e.prototype.drawFlatCoordinates_=function(t,e,r,n){var o=this.coordinates.length,a=this.appendFlatCoordinates(t,e,r,n,!1,!1),s=[i.default.MOVE_TO_LINE_TO,o,a];return this.instructions.push(s),this.hitDetectionInstructions.push(s),r},e.prototype.drawLineString=function(t,e){var r=this.state,n=r.strokeStyle,o=r.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e),this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],i.beginPathInstruction);var a=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(a,0,a.length,s),this.hitDetectionInstructions.push(i.strokeInstruction),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var r=this.state,n=r.strokeStyle,o=r.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e),this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],i.beginPathInstruction);for(var a=t.getEnds(),s=t.getFlatCoordinates(),u=t.getStride(),c=0,l=0,f=a.length;l<f;++l)c=this.drawFlatCoordinates_(s,c,a[l],u);this.hitDetectionInstructions.push(i.strokeInstruction),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(i.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(i.strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(i.beginPathInstruction)},e}(o.default);r.default=u},{"./Instruction.js":"f90b042534af1360cbd44137432423ed","./Builder.js":"bd28004f04fa95e48149b4a9a2ff19ae"}],d6e3c41764e603a48a2d44db0999817a:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../../geom/flat/simplify.js"),o=t("../canvas.js"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Instruction.js")),s=(n=t("./Builder.js"))&&n.__esModule?n:{default:n};var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return c(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,r,n){var i=this.state,o=void 0!==i.fillStyle,s=null!=i.strokeStyle,u=r.length;this.instructions.push(a.beginPathInstruction),this.hitDetectionInstructions.push(a.beginPathInstruction);for(var c=0;c<u;++c){var l=r[c],f=this.coordinates.length,d=this.appendFlatCoordinates(t,e,l,n,!0,!s),p=[a.default.MOVE_TO_LINE_TO,f,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(a.closePathInstruction),this.hitDetectionInstructions.push(a.closePathInstruction)),e=l}return o&&(this.instructions.push(a.fillInstruction),this.hitDetectionInstructions.push(a.fillInstruction)),s&&(this.instructions.push(a.strokeInstruction),this.hitDetectionInstructions.push(a.strokeInstruction)),e},e.prototype.drawCircle=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([a.default.SET_FILL_STYLE,o.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([a.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var s=t.getFlatCoordinates(),u=t.getStride(),c=this.coordinates.length;this.appendFlatCoordinates(s,0,s.length,u,!1,!1);var l=[a.default.CIRCLE,c];this.instructions.push(a.beginPathInstruction,l),this.hitDetectionInstructions.push(a.beginPathInstruction,l),this.hitDetectionInstructions.push(a.fillInstruction),void 0!==r.fillStyle&&this.instructions.push(a.fillInstruction),void 0!==r.strokeStyle&&(this.instructions.push(a.strokeInstruction),this.hitDetectionInstructions.push(a.strokeInstruction)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([a.default.SET_FILL_STYLE,o.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([a.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var s=t.getEnds(),u=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(u,0,s,c),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([a.default.SET_FILL_STYLE,o.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([a.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var s=t.getEndss(),u=t.getOrientedFlatCoordinates(),c=t.getStride(),l=0,f=0,d=s.length;f<d;++f)l=this.drawFlatCoordinatess_(u,l,s[f],c);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var r=this.coordinates,n=0,o=r.length;n<o;++n)r[n]=(0,i.snap)(r[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(s.default);r.default=l},{"../../geom/flat/simplify.js":"a98715e91b730c5e8c7932dde8ddd333","../canvas.js":"89843263bd71c58765f4fe7d95f6f63c","./Instruction.js":"f90b042534af1360cbd44137432423ed","./Builder.js":"bd28004f04fa95e48149b4a9a2ff19ae"}],"28646c63d73af95532e9ffb1a3cc0a4f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.TEXT_ALIGN=void 0;var n=t("../../util.js"),i=t("../../colorlike.js"),o=t("../../extent.js"),a=t("../../geom/flat/straightchunk.js"),s=d(t("../../geom/GeometryType.js")),u=t("../canvas.js"),c=d(t("./Instruction.js")),l=d(t("./Builder.js")),f=d(t("../../style/TextPlacement.js"));function d(t){return t&&t.__esModule?t:{default:t}}var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g={};r.TEXT_ALIGN=g,g.left=0,g.end=0,g.center=.5,g.right=1,g.start=1,g.top=0,g.middle=.5,g.hanging=.2,g.alphabetic=.8,g.ideographic=.8,g.bottom=1;var _=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.declutterGroup_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",u.labelCache.prune(),o}return h(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var r=this.textFillState_,n=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(r||n)){var l,d,p=this.coordinates.length,h=t.getType(),g=null,_=2,y=2;if(i.placement===f.default.LINE){if(!(0,o.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var m=void 0;if(g=t.getFlatCoordinates(),y=t.getStride(),h==s.default.LINE_STRING)m=[g.length];else if(h==s.default.MULTI_LINE_STRING)m=t.getEnds();else if(h==s.default.POLYGON)m=t.getEnds().slice(0,1);else if(h==s.default.MULTI_POLYGON){var v=t.getEndss();for(m=[],l=0,d=v.length;l<d;++l)m.push(v[l][0])}this.beginGeometry(e);for(var b=i.textAlign,E=0,S=void 0,j=0,O=m.length;j<O;++j){if(null==b){var P=(0,a.matchingChunk)(i.maxAngle,g,E,m[j],y);E=P[0],S=P[1]}else S=m[j];for(l=E;l<S;l+=y)this.coordinates.push(g[l],g[l+1]);_=this.coordinates.length,E=m[j],this.drawChars_(p,_,this.declutterGroup_),p=_}this.endGeometry(e)}else{var T=null;switch(i.overflow||(T=[]),h){case s.default.POINT:case s.default.MULTI_POINT:_=(g=t.getFlatCoordinates()).length;break;case s.default.LINE_STRING:g=t.getFlatMidpoint();break;case s.default.CIRCLE:g=t.getCenter();break;case s.default.MULTI_LINE_STRING:_=(g=t.getFlatMidpoints()).length;break;case s.default.POLYGON:g=t.getFlatInteriorPoint(),i.overflow||T.push(g[2]/this.resolution),y=3;break;case s.default.MULTI_POLYGON:var x=t.getFlatInteriorPoints();for(g=[],l=0,d=x.length;l<d;l+=3)i.overflow||T.push(x[l+2]/this.resolution),g.push(x[l],x[l+1]);if(0==(_=g.length))return}_=this.appendFlatCoordinates(g,0,_,y,!1,!1),this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e);var C=this.pixelRatio;this.instructions.push([c.default.DRAW_IMAGE,p,_,null,NaN,NaN,this.declutterGroup_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,i.padding==u.defaultPadding?u.defaultPadding:i.padding.map(function(t){return t*C}),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,T]),this.hitDetectionInstructions.push([c.default.DRAW_IMAGE,p,_,null,NaN,NaN,this.declutterGroup_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,i.padding,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,T]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||u.defaultTextAlign,textBaseline:e.textBaseline||u.defaultTextBaseline,scale:e.scale});var o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))},e.prototype.drawChars_=function(t,e,r){var n=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,a=this.textKey_,s=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,l=g[i.textBaseline],f=this.textOffsetY_*u,d=this.text_,p=i.scale,h=n?n.lineWidth*p/2:0;this.instructions.push([c.default.DRAW_CHARS,t,e,l,r,i.overflow,s,i.maxAngle,u,f,o,h*u,d,a,1]),this.hitDetectionInstructions.push([c.default.DRAW_CHARS,t,e,l,r,i.overflow,s,i.maxAngle,1,f,o,h,d,a,1/u])},e.prototype.setTextStyle=function(t,e){var r,o,a;if(t){this.declutterGroup_=e;var s=t.getFill();s?((o=this.textFillState_)||(o=this.textFillState_={}),o.fillStyle=(0,i.asColorLike)(s.getColor()||u.defaultFillStyle)):o=this.textFillState_=null;var c=t.getStroke();if(c){(a=this.textStrokeState_)||(a=this.textStrokeState_={});var l=c.getLineDash(),f=c.getLineDashOffset(),d=c.getWidth(),p=c.getMiterLimit();a.lineCap=c.getLineCap()||u.defaultLineCap,a.lineDash=l?l.slice():u.defaultLineDash,a.lineDashOffset=void 0===f?u.defaultLineDashOffset:f,a.lineJoin=c.getLineJoin()||u.defaultLineJoin,a.lineWidth=void 0===d?u.defaultLineWidth:d,a.miterLimit=void 0===p?u.defaultMiterLimit:p,a.strokeStyle=(0,i.asColorLike)(c.getColor()||u.defaultStrokeStyle)}else a=this.textStrokeState_=null;r=this.textState_;var h=t.getFont()||u.defaultFont;(0,u.checkFont)(h);var g=t.getScale();r.overflow=t.getOverflow(),r.font=h,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||u.defaultTextBaseline,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||u.defaultPadding,r.scale=void 0===g?1:g;var _=t.getOffsetX(),y=t.getOffsetY(),m=t.getRotateWithView(),v=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===_?0:_,this.textOffsetY_=void 0===y?0:y,this.textRotateWithView_=void 0!==m&&m,this.textRotation_=void 0===v?0:v,this.strokeKey_=a?("string"==typeof a.strokeStyle?a.strokeStyle:(0,n.getUid)(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+(0,n.getUid)(o.fillStyle):""}else this.text_=""},e}(l.default);r.default=_},{"../../util.js":"4bb2f7213adce7213216789f3fd3a27b","../../colorlike.js":"b60b82b020672980b1ec294b2afd8fc9","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../../geom/flat/straightchunk.js":"82bcdc1e9eb5758ccb85f8c3aa1debb2","../../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../canvas.js":"89843263bd71c58765f4fe7d95f6f63c","./Instruction.js":"f90b042534af1360cbd44137432423ed","./Builder.js":"bd28004f04fa95e48149b4a9a2ff19ae","../../style/TextPlacement.js":"862c64756808259c9b522e7ae77339b7"}],"82bcdc1e9eb5758ccb85f8c3aa1debb2":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.matchingChunk=function(t,e,r,n,i){var o,a,s,u,c,l,f,d,p,h=r,g=r,_=0,y=0,m=r;for(o=r;o<n;o+=i){var v=e[o],b=e[o+1];void 0!==u&&(d=v-u,p=b-c,s=Math.sqrt(d*d+p*p),void 0!==l&&(y+=a,Math.acos((l*d+f*p)/(a*s))>t&&(y>_&&(_=y,h=m,g=o),y=0,m=o-i)),a=s,l=d,f=p),u=v,c=b}return(y+=s)>_?[m,o]:[h,g]}},{}],"862c64756808259c9b522e7ae77339b7":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={POINT:"point",LINE:"line"}},{}],"60c90e6a3a28991a1f6db9ce252a5bd6":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getCircleArray=v,r.replayDeclutter=function(t,e,r,i,o,a){for(var s=Object.keys(t).map(Number).sort(n.numberSafeCompareFunction),u={},c=0,l=s.length;c<l;++c)for(var f=t[s[c].toString()],d=void 0,p=0,h=f.length;p<h;){var g=f[p++];g!==d&&(d=g,a.push({items:g.declutterItems,opacity:i}));var _=f[p++];g.execute(e,_,r,u,o)}},r.default=void 0;var n=t("../../array.js"),i=t("../../dom.js"),o=t("../../extent.js"),a=t("../../geom/flat/transform.js"),s=t("../../obj.js"),u=d(t("./BuilderType.js")),c=t("../../transform.js"),l=d(t("./Executor.js")),f=d(t("../../Disposable.js"));function d(t){return t&&t.__esModule?t:{default:t}}var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g=[u.default.POLYGON,u.default.CIRCLE,u.default.LINE_STRING,u.default.IMAGE,u.default.TEXT,u.default.DEFAULT],_=function(t){function e(e,r,n,i,o,a){var s=t.call(this)||this;return s.maxExtent_=e,s.overlaps_=i,s.pixelRatio_=n,s.resolution_=r,s.renderBuffer_=a,s.executorsByZIndex_={},s.hitDetectionContext_=null,s.hitDetectionTransform_=(0,c.create)(),s.createExecutors_(o),s}return h(e,t),e.prototype.clip=function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},e.prototype.createExecutors_=function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(this.executorsByZIndex_[e]=r={});var n=t[e];for(var i in n){var o=n[i];r[i]=new l.default(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},e.prototype.disposeInternal=function(){for(var e in this.executorsByZIndex_){var r=this.executorsByZIndex_[e];for(var n in r)r[n].disposeInternal()}if(this.hitDetectionContext_){var i=this.hitDetectionContext_.canvas;i.width=i.height=0}t.prototype.disposeInternal.call(this)},e.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],n=0,i=t.length;n<i;++n)if(t[n]in r)return!0;return!1},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,a,s,l,f){var d=2*(a=Math.round(a))+1,p=(0,c.compose)(this.hitDetectionTransform_,a+.5,a+.5,1/e,-1/e,-r,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=(0,i.createCanvasContext2D)(d,d));var h,_=this.hitDetectionContext_;_.canvas.width!==d||_.canvas.height!==d?(_.canvas.width=d,_.canvas.height=d):_.clearRect(0,0,d,d),void 0!==this.renderBuffer_&&(h=(0,o.createEmpty)(),(0,o.extendCoordinate)(h,t),(0,o.buffer)(h,e*(this.renderBuffer_+a),h));var y,m=v(a);function b(t){for(var e=_.getImageData(0,0,d,d).data,r=0;r<d;r++)for(var n=0;n<d;n++)if(m[r][n]&&e[4*(n*d+r)+3]>0){var i=void 0;return(!f||y!=u.default.IMAGE&&y!=u.default.TEXT||-1!==f.indexOf(t))&&(i=l(t)),i||void _.clearRect(0,0,d,d)}}var E,S,j,O,P,T=Object.keys(this.executorsByZIndex_).map(Number);for(T.sort(n.numberSafeCompareFunction),E=T.length-1;E>=0;--E){var x=T[E].toString();for(j=this.executorsByZIndex_[x],S=g.length-1;S>=0;--S)if(void 0!==(O=j[y=g[S]])&&(P=O.executeHitDetection(_,p,r,s,b,h)))return P}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],n=e[1],i=e[2],o=e[3],s=[r,n,r,o,i,o,i,n];return(0,a.transform2D)(s,0,8,2,t,s),s},e.prototype.isEmpty=function(){return(0,s.isEmpty)(this.executorsByZIndex_)},e.prototype.execute=function(t,e,r,i,o,a,s){var c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(n.numberSafeCompareFunction),this.maxExtent_&&(t.save(),this.clip(t,e));var l,f,d,p,h,_,y=a||g;for(l=0,f=c.length;l<f;++l){var m=c[l].toString();for(h=this.executorsByZIndex_[m],d=0,p=y.length;d<p;++d){var v=y[d];if(void 0!==(_=h[v]))if(!s||v!=u.default.IMAGE&&v!=u.default.TEXT)_.execute(t,e,r,i,o);else{var b=s[m];b?b.push(_,e.slice(0)):s[m]=[_,e.slice(0)]}}}this.maxExtent_&&t.restore()},e}(f.default),y={0:[[!0]]};function m(t,e,r){var n,i=Math.floor(t.length/2);if(e>=i)for(n=i;n<e;n++)t[n][r]=!0;else if(e<i)for(n=e+1;n<i;n++)t[n][r]=!0}function v(t){if(void 0!==y[t])return y[t];for(var e=2*t+1,r=new Array(e),n=0;n<e;n++)r[n]=new Array(e);for(var i=t,o=0,a=0;i>=o;)m(r,t+i,t+o),m(r,t+o,t+i),m(r,t-o,t+i),m(r,t-i,t+o),m(r,t-i,t-o),m(r,t-o,t-i),m(r,t+o,t-i),m(r,t+i,t-o),2*((a+=1+2*++o)-i)+1>0&&(a+=1-2*(i-=1));return y[t]=r,r}var b=_;r.default=b},{"../../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../../geom/flat/transform.js":"4c8bbdedb02c72e6aff9d71cb3a76316","../../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","./BuilderType.js":"7e31f2f3ef882284ed0c3e4e447170db","../../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928","./Executor.js":"df1feaf34b132fbae4485fc88093c284","../../Disposable.js":"d4605e3cdc6ca501dd4bed20a4731b8c"}],"7e31f2f3ef882284ed0c3e4e447170db":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"}},{}],df1feaf34b132fbae4485fc88093c284:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../../util.js"),i=t("../../array.js"),o=t("../../extent.js"),a=t("../../geom/flat/length.js"),s=t("../../geom/flat/textpath.js"),u=t("../../geom/flat/transform.js"),c=t("../../obj.js"),l=t("../canvas.js"),f=y(t("./Instruction.js")),d=t("./TextBuilder.js"),p=t("../../transform.js"),h=t("../../dom.js"),g=y(t("../../Disposable.js")),_=y(t("rbush"));function y(t){return t&&t.__esModule?t:{default:t}}var m,v=(m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),b=(0,o.createEmpty)(),E=(0,p.create)(),S=[],j=[],O=[],P=[],T=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.overlaps=n,o.pixelRatio=r,o.resolution=e,o.alignFill_,o.declutterItems=[],o.instructions=i.instructions,o.coordinates=i.coordinates,o.coordinateCache_={},o.renderedTransform_=(0,p.create)(),o.hitDetectionInstructions=i.hitDetectionInstructions,o.pixelCoordinates_=null,o.viewRotation_=0,o.fillStates=i.fillStates||{},o.strokeStates=i.strokeStates||{},o.textStates=i.textStates||{},o.widths_={},o}return v(e,t),e.prototype.disposeInternal=function(){l.labelCache.release(this),t.prototype.disposeInternal.call(this)},e.prototype.getTextImage=function(t,e,r,n){var i,o=n+e+t+r+this.pixelRatio;if(!l.labelCache.containsKey(o)){var a=n?this.strokeStates[n]:null,s=r?this.fillStates[r]:null,u=this.textStates[e],c=this.pixelRatio,f=u.scale*c,p=d.TEXT_ALIGN[u.textAlign||l.defaultTextAlign],g=n&&a.lineWidth?a.lineWidth:0,_=t.split("\n"),y=_.length,m=[],v=(0,l.measureTextWidths)(u.font,_,m),b=(0,l.measureTextHeight)(u.font),E=b*y,S=v+g,j=(0,h.createCanvasContext2D)(Math.ceil((S+2)*f),Math.ceil((E+g)*f));i=j.canvas,l.labelCache.set(o,i),1!=f&&j.scale(f,f),j.font=u.font,n&&(j.strokeStyle=a.strokeStyle,j.lineWidth=g,j.lineCap=a.lineCap,j.lineJoin=a.lineJoin,j.miterLimit=a.miterLimit,j.setLineDash&&a.lineDash.length&&(j.setLineDash(a.lineDash),j.lineDashOffset=a.lineDashOffset)),r&&(j.fillStyle=s.fillStyle),j.textBaseline="middle",j.textAlign="center";var O=.5-p,P=p*S+O*g,T=void 0;if(n)for(T=0;T<y;++T)j.strokeText(_[T],P+O*m[T],.5*(g+b)+T*b);if(r)for(T=0;T<y;++T)j.fillText(_[T],P+O*m[T],.5*(g+b)+T*b)}return l.labelCache.get(o,this)},e.prototype.replayTextBackground_=function(t,e,r,n,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},e.prototype.replayImage_=function(t,e,r,n,i,a,s,u,c,f,d,h,g,_,y,m,v,T){var x=v||T;e-=i*=g,r-=a*=g;var C=y+f>n.width?n.width-f:y,I=u+d>n.height?n.height-d:u,w=m[3]+C*g+m[1],R=m[0]+I*g+m[2],N=e-m[3],M=r-m[0];(x||0!==h)&&(S[0]=P[0]=N,S[1]=j[1]=M,j[0]=O[0]=N+w,O[1]=P[1]=M+R);var L=null;if(0!==h){var A=e+i,F=r+a;L=(0,p.compose)(E,A,F,1,1,h,-A,-F),(0,p.apply)(E,S),(0,p.apply)(E,j),(0,p.apply)(E,O),(0,p.apply)(E,P),(0,o.createOrUpdate)(Math.min(S[0],j[0],O[0],P[0]),Math.min(S[1],j[1],O[1],P[1]),Math.max(S[0],j[0],O[0],P[0]),Math.max(S[1],j[1],O[1],P[1]),b)}else(0,o.createOrUpdate)(N,M,N+w,M+R,b);var D=t.canvas,k=T?T[2]*g/2:0,G=b[0]-k<=D.width&&b[2]+k>=0&&b[1]-k<=D.height&&b[3]+k>=0;if(_&&(e=Math.round(e),r=Math.round(r)),s){if(!G&&1==s[4])return;(0,o.extend)(s,b);var U=G?[t,L?L.slice(0):null,c,n,f,d,C,I,e,r,g]:null;U&&(x&&U.push(v,T,S,j,O,P),s.push(U))}else G&&(x&&this.replayTextBackground_(t,S,j,O,P,v,T),(0,l.drawImage)(t,L,c,n,f,d,C,I,e,r,g))},e.prototype.fill_=function(t){if(this.alignFill_){var e=(0,p.apply)(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter=function(t,e,r,n){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var a={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(n||(n=new _.default(9)),!n.collides(a)){n.insert(a);for(var s=5,u=t.length;s<u;++s){var c=t[s],f=c[0],d=f.globalAlpha;d!==r&&(f.globalAlpha=r),c.length>11&&this.replayTextBackground_(c[0],c[13],c[14],c[15],c[16],c[11],c[12]),l.drawImage.apply(void 0,c),d!==r&&(f.globalAlpha=d)}}t.length=5,(0,o.createOrUpdateEmpty)(t)}}return n},e.prototype.drawTextImageWithPointPlacement_=function(t,e,r,n){var i=this.textStates[e],o=this.getTextImage(t,e,n,r),a=this.strokeStates[r],s=this.pixelRatio,u=d.TEXT_ALIGN[i.textAlign||l.defaultTextAlign],c=d.TEXT_ALIGN[i.textBaseline||l.defaultTextBaseline],f=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:u*(o.width/s-2*i.scale)+2*(.5-u)*f,anchorY:c*o.height/s+2*(.5-c)*f}},e.prototype.execute_=function(t,e,r,h,g,_,y){var m;this.declutterItems.length=0,this.pixelCoordinates_&&(0,i.equals)(e,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=(0,u.transform2D)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),(0,p.setFromArray)(this.renderedTransform_,e));for(var v,b,E,S,j,O,P,T,x,C,I,w,R,N,M,L,A=!(0,c.isEmpty)(r),F=0,D=h.length,k=0,G=0,U=0,B=null,z=null,V=this.coordinateCache_,Y=this.viewRotation_,X={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Y},q=this.instructions!=h||this.overlaps?0:200;F<D;){var W=h[F];switch(W[0]){case f.default.BEGIN_GEOMETRY:N=W[1],A&&r[(0,n.getUid)(N)]||!N.getGeometry()?F=W[2]:void 0===y||(0,o.intersects)(y,N.getGeometry().getExtent())?++F:F=W[2]+1;break;case f.default.BEGIN_PATH:G>q&&(this.fill_(t),G=0),U>q&&(t.stroke(),U=0),G||U||(t.beginPath(),S=j=NaN),++F;break;case f.default.CIRCLE:var H=m[k=W[1]],K=m[k+1],Z=m[k+2]-H,J=m[k+3]-K,Q=Math.sqrt(Z*Z+J*J);t.moveTo(H+Q,K),t.arc(H,K,Q,0,2*Math.PI,!0),++F;break;case f.default.CLOSE_PATH:t.closePath(),++F;break;case f.default.CUSTOM:k=W[1],v=W[2];var $=W[3],tt=W[4],et=6==W.length?W[5]:void 0;X.geometry=$,X.feature=N,F in V||(V[F]=[]);var rt=V[F];et?et(m,k,v,2,rt):(rt[0]=m[k],rt[1]=m[k+1],rt.length=2),tt(rt,X),++F;break;case f.default.DRAW_IMAGE:k=W[1],v=W[2],x=W[3],b=W[4],E=W[5],T=_?null:W[6];var nt=W[7],it=W[8],ot=W[9],at=W[10],st=W[11],ut=W[12],ct=W[13],lt=W[14];if(!x&&W.length>=19){C=W[18],I=W[19],w=W[20],R=W[21];var ft=this.drawTextImageWithPointPlacement_(C,I,w,R);x=W[3]=ft.label;var dt=W[22];b=W[4]=(ft.anchorX-dt)*this.pixelRatio;var pt=W[23];E=W[5]=(ft.anchorY-pt)*this.pixelRatio,nt=W[7]=x.height,lt=W[14]=x.width}var ht=void 0;W.length>24&&(ht=W[24]);var gt=void 0,_t=void 0,yt=void 0;W.length>16?(gt=W[15],_t=W[16],yt=W[17]):(gt=l.defaultPadding,_t=yt=!1),st&&(ut+=Y);for(var mt=0;k<v;k+=2)ht&&ht[mt++]<lt/this.pixelRatio||this.replayImage_(t,m[k],m[k+1],x,b,E,T,nt,it,ot,at,ut,ct,g,lt,gt,_t?B:null,yt?z:null);this.declutterItems.push(this,T,N),++F;break;case f.default.DRAW_CHARS:var vt=W[1],bt=W[2],Et=W[3];T=_?null:W[4];var St=W[5];R=W[6];var jt=W[7],Ot=W[8],Pt=W[9];w=W[10];var Tt=W[11];C=W[12],I=W[13];var xt=W[14],Ct=this.textStates[I],It=Ct.font,wt=Ct.scale*Ot,Rt=void 0;Rt=It in this.widths_?this.widths_[It]:this.widths_[It]={};var Nt=(0,a.lineStringLength)(m,vt,bt,2),Mt=wt*(0,l.measureAndCacheTextWidth)(It,C,Rt);if(St||Mt<=Nt){var Lt=this.textStates[I].textAlign,At=(Nt-Mt)*d.TEXT_ALIGN[Lt],Ft=(0,s.drawTextOnPath)(m,vt,bt,2,C,At,jt,wt,l.measureAndCacheTextWidth,It,Rt);if(Ft){var Dt=void 0,kt=void 0,Gt=void 0,Ut=void 0,Bt=void 0;if(w)for(Dt=0,kt=Ft.length;Dt<kt;++Dt)Gt=(Bt=Ft[Dt])[4],Ut=this.getTextImage(Gt,I,"",w),b=Bt[2]+Tt,E=Et*Ut.height+2*(.5-Et)*Tt-Pt,this.replayImage_(t,Bt[0],Bt[1],Ut,b,E,T,Ut.height,1,0,0,Bt[3],xt,!1,Ut.width,l.defaultPadding,null,null);if(R)for(Dt=0,kt=Ft.length;Dt<kt;++Dt)Gt=(Bt=Ft[Dt])[4],Ut=this.getTextImage(Gt,I,R,""),b=Bt[2],E=Et*Ut.height-Pt,this.replayImage_(t,Bt[0],Bt[1],Ut,b,E,T,Ut.height,1,0,0,Bt[3],xt,!1,Ut.width,l.defaultPadding,null,null)}}this.declutterItems.push(this,T,N),++F;break;case f.default.END_GEOMETRY:if(void 0!==_){var zt=_(N=W[1]);if(zt)return zt}++F;break;case f.default.FILL:q?G++:this.fill_(t),++F;break;case f.default.MOVE_TO_LINE_TO:for(k=W[1],v=W[2],M=m[k],P=(L=m[k+1])+.5|0,(O=M+.5|0)===S&&P===j||(t.moveTo(M,L),S=O,j=P),k+=2;k<v;k+=2)O=(M=m[k])+.5|0,P=(L=m[k+1])+.5|0,k!=v-2&&O===S&&P===j||(t.lineTo(M,L),S=O,j=P);++F;break;case f.default.SET_FILL_STYLE:B=W,this.alignFill_=W[2],G&&(this.fill_(t),G=0,U&&(t.stroke(),U=0)),t.fillStyle=W[1],++F;break;case f.default.SET_STROKE_STYLE:z=W,U&&(t.stroke(),U=0),this.setStrokeStyle_(t,W),++F;break;case f.default.STROKE:q?U++:t.stroke(),++F;break;default:++F}}G&&this.fill_(t),U&&t.stroke()},e.prototype.execute=function(t,e,r,n,i){this.viewRotation_=r,this.execute_(t,e,n,this.instructions,i,void 0,void 0)},e.prototype.executeHitDetection=function(t,e,r,n,i,o){return this.viewRotation_=r,this.execute_(t,e,n,this.hitDetectionInstructions,!0,i,o)},e}(g.default);r.default=T},{"../../util.js":"4bb2f7213adce7213216789f3fd3a27b","../../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../../geom/flat/length.js":"8d17d78ae05da9262479c1dfa26d3b4c","../../geom/flat/textpath.js":"6d4bd835f04d9c29ca7d8852d51e1c96","../../geom/flat/transform.js":"4c8bbdedb02c72e6aff9d71cb3a76316","../../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../canvas.js":"89843263bd71c58765f4fe7d95f6f63c","./Instruction.js":"f90b042534af1360cbd44137432423ed","./TextBuilder.js":"28646c63d73af95532e9ffb1a3cc0a4f","../../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928","../../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../../Disposable.js":"d4605e3cdc6ca501dd4bed20a4731b8c",rbush:"3592495b200dd85756c43e6668eb84f2"}],"8d17d78ae05da9262479c1dfa26d3b4c":[function(t,e,r){"use strict";function n(t,e,r,n){for(var i=t[e],o=t[e+1],a=0,s=e+n;s<r;s+=n){var u=t[s],c=t[s+1];a+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return a}Object.defineProperty(r,"__esModule",{value:!0}),r.lineStringLength=n,r.linearRingLength=function(t,e,r,i){var o=n(t,e,r,i),a=t[r-i]-t[e],s=t[r-i+1]-t[e+1];return o+=Math.sqrt(a*a+s*s)}},{}],"6d4bd835f04d9c29ca7d8852d51e1c96":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.drawTextOnPath=function(t,e,r,i,o,a,s,u,c,l,f){for(var d,p,h=[],g=t[e]>t[r-i],_=o.length,y=t[e],m=t[e+1],v=t[e+=i],b=t[e+1],E=0,S=Math.sqrt(Math.pow(v-y,2)+Math.pow(b-m,2)),j=!1,O=0;O<_;++O){for(var P=o[d=g?_-O-1:O],T=u*c(l,P,f),x=a+T/2;e<r-i&&E+S<x;)y=v,m=b,v=t[e+=i],b=t[e+1],E+=S,S=Math.sqrt(Math.pow(v-y,2)+Math.pow(b-m,2));var C=x-E,I=Math.atan2(b-m,v-y);if(g&&(I+=I>0?-Math.PI:Math.PI),void 0!==p){var w=I-p;if(j=j||0!==w,w+=w>Math.PI?-2*Math.PI:w<-Math.PI?2*Math.PI:0,Math.abs(w)>s)return null}p=I;var R=C/S,N=(0,n.lerp)(y,v,R),M=(0,n.lerp)(m,b,R);h[d]=[N,M,T/2,I,P],a+=T}return j?h:[[h[0][0],h[0][1],h[0][2],h[0][3],o]]};var n=t("../../math.js")},{"../../math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],"3592495b200dd85756c43e6668eb84f2":[function(t,e,r){!function(t,n){"object"==typeof r&&void 0!==e?e.exports=n():(t=t||self).RBush=n()}(this,function(){"use strict";function t(t,n,i,o,a){!function t(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=n-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);t(r,n,Math.max(i,Math.floor(n-u*l/s+f)),Math.min(o,Math.floor(n+(s-u)*l/s+f)),a)}var d=r[n],p=i,h=o;for(e(r,i,n),a(r[o],d)>0&&e(r,i,o);p<h;){for(e(r,p,h),p++,h--;a(r[p],d)<0;)p++;for(;a(r[h],d)>0;)h--}0===a(r[i],d)?e(r,i,h):e(r,++h,o),h<=n&&(i=h+1),n<=h&&(o=h-1)}}(t,n,i||0,o||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,i){i||(i=h(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var a=t.children[o];s(i,t.leaf?n(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function h(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,r,n,i,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=i)){var s=r+Math.ceil((n-r)/i/2)*i;t(e,s,r,n,o),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;p(t,s)&&(e.leaf?r.push(a):d(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||d(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=h([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=c.pop(),o=!0),a.leaf){var l=i(t,a.children,e);if(-1!==l)return a.children.splice(l,1),u.push(a),this._condense(u),this}o||a.leaf||!d(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(u.push(a),c.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,a=r-e+1,s=this._maxEntries;if(a<=s)return o(i=h(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(i=h([])).leaf=!1,i.height=n;var u=Math.ceil(a/s),c=u*Math.ceil(Math.sqrt(s));g(t,e,r,c,this.compareMinX);for(var l=e;l<=r;l+=c){var f=Math.min(l+c-1,r);g(t,l,f,u,this.compareMinY);for(var d=l;d<=f;d+=u){var p=Math.min(d+u-1,f);i.children.push(this._build(t,d,p,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],c=l(u),f=(d=t,p=u,(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-c);f<o?(o=f,i=c<i?c:i,a=u):f===o&&c<i&&(i=c,a=u)}e=a||e.children[0]}var d,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),s(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),s=h(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=h([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,s,u,c,f,d=1/0,p=1/0,h=e;h<=r-e;h++){var g=a(t,0,h,this.toBBox),_=a(t,h,r,this.toBBox),y=(i=g,o=_,void 0,void 0,void 0,void 0,s=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),c=Math.min(i.maxX,o.maxX),f=Math.min(i.maxY,o.maxY),Math.max(0,c-s)*Math.max(0,f-u)),m=l(g)+l(_);y<d?(d=y,n=h,p=m<p?m:p):y===d&&m<p&&(p=m,n=h)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=a(t,0,e,i),u=a(t,r-e,r,i),c=f(o)+f(u),l=e;l<r-e;l++){var d=t.children[l];s(o,t.leaf?i(d):d),c+=f(o)}for(var p=r-e-1;p>=e;p--){var h=t.children[p];s(u,t.leaf?i(h):h),c+=f(u)}return c},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n})},{}],"138b040d9b7f26238eddda7e17500920":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../../extent.js"),i=t("../../dom.js"),o=l(t("../../render/Event.js")),a=l(t("../../render/EventType.js")),s=t("../../render/canvas.js"),u=l(t("../Layer.js")),c=t("../../transform.js");function l(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p=function(t){function e(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform_=(0,c.create)(),r.pixelTransform=(0,c.create)(),r.inversePixelTransform=(0,c.create)(),r.context=null,r.containerReused=!1,r}return d(e,t),e.prototype.useContainer=function(t,e,r){var n,o,a=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===a&&((u=t.firstElementChild)instanceof HTMLCanvasElement&&(o=u.getContext("2d")));if(o&&o.canvas.style.transform===(0,c.toString)(e)?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=a;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var u=(o=(0,i.createCanvasContext2D)()).canvas;n.appendChild(u),(s=u.style).position="absolute",s.transformOrigin="top left",this.container=n,this.context=o}},e.prototype.clip=function(t,e,r){var i=e.pixelRatio,o=e.size[0]*i/2,a=e.size[1]*i/2,u=e.viewState.rotation,l=(0,n.getTopLeft)(r),f=(0,n.getTopRight)(r),d=(0,n.getBottomRight)(r),p=(0,n.getBottomLeft)(r);(0,c.apply)(e.coordinateToPixelTransform,l),(0,c.apply)(e.coordinateToPixelTransform,f),(0,c.apply)(e.coordinateToPixelTransform,d),(0,c.apply)(e.coordinateToPixelTransform,p),t.save(),(0,s.rotateAtOffset)(t,-u,o,a),t.beginPath(),t.moveTo(l[0]*i,l[1]*i),t.lineTo(f[0]*i,f[1]*i),t.lineTo(d[0]*i,d[1]*i),t.lineTo(p[0]*i,p[1]*i),t.clip(),(0,s.rotateAtOffset)(t,u,o,a)},e.prototype.clipUnrotated=function(t,e,r){var i=(0,n.getTopLeft)(r),o=(0,n.getTopRight)(r),a=(0,n.getBottomRight)(r),s=(0,n.getBottomLeft)(r);(0,c.apply)(e.coordinateToPixelTransform,i),(0,c.apply)(e.coordinateToPixelTransform,o),(0,c.apply)(e.coordinateToPixelTransform,a),(0,c.apply)(e.coordinateToPixelTransform,s);var u=this.inversePixelTransform;(0,c.apply)(u,i),(0,c.apply)(u,o),(0,c.apply)(u,a),(0,c.apply)(u,s),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){var i=new o.default(t,this.inversePixelTransform,r,e);n.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(a.default.PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(a.default.POSTRENDER,t,e)},e.prototype.getRenderTransform=function(t,e,r,n){var i=t.viewState,o=e/2,a=r/2,s=t.pixelRatio/i.resolution,u=-s,l=-i.center[0]+n,f=-i.center[1];return(0,c.compose)(this.tempTransform_,o,a,s,u,-i.rotation,l,f)},e.prototype.getDataAtPixel=function(t,e,r){var n,i=(0,c.apply)(this.inversePixelTransform,t.slice()),o=this.context;try{n=o.getImageData(Math.round(i[0]),Math.round(i[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(u.default);r.default=p},{"../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../../render/Event.js":"fe3cc0231c991e2f976e0a3ddb4a5068","../../render/EventType.js":"06d6dd10e6aec33ecdd51285aca01fbb","../../render/canvas.js":"89843263bd71c58765f4fe7d95f6f63c","../Layer.js":"bd2ade48316cf7594e760d320a72bee3","../../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928"}],fe3cc0231c991e2f976e0a3ddb4a5068:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("../events/Event.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.inversePixelTransform=r,o.frameState=n,o.context=i,o}return a(e,t),e}(i.default);r.default=s},{"../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6"}],bd2ade48316cf7594e760d320a72bee3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=c(t("../ImageState.js")),o=c(t("../Observable.js")),a=t("../events.js"),s=c(t("../events/EventType.js")),u=c(t("../source/State.js"));function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=function(t){function e(e){var r=t.call(this)||this;return r.layer_=e,r}return f(e,t),e.prototype.prepareFrame=function(t){return(0,n.abstract)()},e.prototype.renderFrame=function(t,e){return(0,n.abstract)()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(n,i){var o=this.loadedTileCallback.bind(this,r,n);return t.forEachLoadedTile(e,n,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){},e.prototype.getDataAtPixel=function(t,e,r){return(0,n.abstract)()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===i.default.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=i.default.LOADED&&e!=i.default.ERROR&&(0,a.listen)(t,s.default.CHANGE,this.handleImageChange_,this),e==i.default.IDLE&&(t.load(),e=t.getState()),e==i.default.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==u.default.READY&&t.changed()},e}(o.default);r.default=d},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2","../Observable.js":"68e4fa3d0f7a78b6f9314070042a71c8","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../source/State.js":"909be2fc812ab85b41263e2e8ec87f92"}],"7ed977cc1b741c8030677466fc217cc6":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultOrder=function(t,e){return parseInt((0,n.getUid)(t),10)-parseInt((0,n.getUid)(e),10)},r.getSquaredTolerance=function(t,e){var r=l(t,e);return r*r},r.getTolerance=l,r.renderFeature=function(t,e,r,n,s,u){var l=!1,f=r.getImage();if(f){var d=f.getImageState();d==i.default.LOADED||d==i.default.ERROR?f.unlistenImageChange(s,u):(d==i.default.IDLE&&f.load(),d=f.getImageState(),f.listenImageChange(s,u),l=!0)}return function(t,e,r,n){var i=r.getGeometryFunction()(e);if(!i)return;var s=i.getSimplifiedGeometry(n);if(r.getRenderer())!function t(e,r,n,i){if(r.getType()==o.default.GEOMETRY_COLLECTION){for(var s=r.getGeometries(),u=0,c=s.length;u<c;++u)t(e,s[u],n,i);return}var l=e.getBuilder(n.getZIndex(),a.default.DEFAULT);l.drawCustom(r,i,n.getRenderer())}(t,s,r,e);else{(0,c[s.getType()])(t,s,r,e)}}(t,e,r,n),l};var n=t("../util.js"),i=s(t("../ImageState.js")),o=s(t("../geom/GeometryType.js")),a=s(t("../render/canvas/BuilderType.js"));function s(t){return t&&t.__esModule?t:{default:t}}var u=.5,c={Point:function(t,e,r,n){var o=r.getImage();if(o){if(o.getImageState()!=i.default.LOADED)return;var s=t.getBuilder(r.getZIndex(),a.default.IMAGE);s.setImageStyle(o,t.addDeclutter(!1)),s.drawPoint(e,n)}var u=r.getText();if(u){var c=t.getBuilder(r.getZIndex(),a.default.TEXT);c.setTextStyle(u,t.addDeclutter(!!o)),c.drawText(e,n)}},LineString:function(t,e,r,n){var i=r.getStroke();if(i){var o=t.getBuilder(r.getZIndex(),a.default.LINE_STRING);o.setFillStrokeStyle(null,i),o.drawLineString(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),a.default.TEXT);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}},Polygon:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(i||o){var s=t.getBuilder(r.getZIndex(),a.default.POLYGON);s.setFillStrokeStyle(i,o),s.drawPolygon(e,n)}var u=r.getText();if(u){var c=t.getBuilder(r.getZIndex(),a.default.TEXT);c.setTextStyle(u,t.addDeclutter(!1)),c.drawText(e,n)}},MultiPoint:function(t,e,r,n){var o=r.getImage();if(o){if(o.getImageState()!=i.default.LOADED)return;var s=t.getBuilder(r.getZIndex(),a.default.IMAGE);s.setImageStyle(o,t.addDeclutter(!1)),s.drawMultiPoint(e,n)}var u=r.getText();if(u){var c=t.getBuilder(r.getZIndex(),a.default.TEXT);c.setTextStyle(u,t.addDeclutter(!!o)),c.drawText(e,n)}},MultiLineString:function(t,e,r,n){var i=r.getStroke();if(i){var o=t.getBuilder(r.getZIndex(),a.default.LINE_STRING);o.setFillStrokeStyle(null,i),o.drawMultiLineString(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),a.default.TEXT);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}},MultiPolygon:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(o||i){var s=t.getBuilder(r.getZIndex(),a.default.POLYGON);s.setFillStrokeStyle(i,o),s.drawMultiPolygon(e,n)}var u=r.getText();if(u){var c=t.getBuilder(r.getZIndex(),a.default.TEXT);c.setTextStyle(u,t.addDeclutter(!1)),c.drawText(e,n)}},GeometryCollection:function(t,e,r,n){var i,o,a=e.getGeometriesArray();for(i=0,o=a.length;i<o;++i){(0,c[a[i].getType()])(t,a[i],r,n)}},Circle:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(i||o){var s=t.getBuilder(r.getZIndex(),a.default.CIRCLE);s.setFillStrokeStyle(i,o),s.drawCircle(e,n)}var u=r.getText();if(u){var c=t.getBuilder(r.getZIndex(),a.default.TEXT);c.setTextStyle(u,t.addDeclutter(!1)),c.drawText(e,n)}}};function l(t,e){return u*t/e}},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../render/canvas/BuilderType.js":"7e31f2f3ef882284ed0c3e4e447170db"}],"2a3e9645190015dfc3d4ed757193af4c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=function(t,e){return t[0]+=+e[0],t[1]+=+e[1],t},r.closestOnCircle=function(t,e){var r=e.getRadius(),n=e.getCenter(),i=n[0],o=n[1],a=t[0],s=t[1],u=a-i,c=s-o;0===u&&0===c&&(u=1);var l=Math.sqrt(u*u+c*c);return[i+r*u/l,o+r*c/l]},r.closestOnSegment=o,r.createStringXY=function(t){return function(e){return c(e,t)}},r.degreesToStringHDMS=a,r.format=s,r.equals=function(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r},r.rotate=function(t,e){var r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,o=t[1]*r+t[0]*n;return t[0]=i,t[1]=o,t},r.scale=function(t,e){return t[0]*=e,t[1]*=e,t},r.squaredDistance=u,r.distance=function(t,e){return Math.sqrt(u(t,e))},r.squaredDistanceToSegment=function(t,e){return u(t,o(t,e))},r.toStringHDMS=function(t,e){return t?a("NS",t[1],e)+" "+a("EW",t[0],e):""},r.toStringXY=c;var n=t("./math.js"),i=t("./string.js");function o(t,e){var r,n,i=t[0],o=t[1],a=e[0],s=e[1],u=a[0],c=a[1],l=s[0],f=s[1],d=l-u,p=f-c,h=0===d&&0===p?0:(d*(i-u)+p*(o-c))/(d*d+p*p||0);return h<=0?(r=u,n=c):h>=1?(r=l,n=f):(r=u+h*d,n=c+h*p),[r,n]}function a(t,e,r){var o=(0,n.modulo)(e+180,360)-180,a=Math.abs(3600*o),s=r||0,u=Math.pow(10,s),c=Math.floor(a/3600),l=Math.floor((a-3600*c)/60),f=a-3600*c-60*l;return(f=Math.ceil(f*u)/u)>=60&&(f=0,l+=1),l>=60&&(l=0,c+=1),c+"° "+(0,i.padNumber)(l,2)+"′ "+(0,i.padNumber)(f,2,s)+"″"+(0==o?"":" "+t.charAt(o<0?1:0))}function s(t,e,r){return t?e.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function u(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function c(t,e){return s(t,"{x}, {y}",e)}},{"./math.js":"6086e082317ce6ce8a1b47fb09fed63b","./string.js":"8e4790f1251a6b3a187ceda3eb6e4980"}],"8e4790f1251a6b3a187ceda3eb6e4980":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.padNumber=function(t,e,r){var n=void 0!==r?t.toFixed(r):""+t,i=n.indexOf(".");return(i=-1===i?n.length:i)>e?n:new Array(1+e-i).join("0")+n},r.compareVersions=function(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),a=parseInt(n[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}},{}],a062decc4252836a4aac93094a0a5c97:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(t("./Fill.js")),i=o(t("./TextPlacement.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a="#333",s=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new n.default({color:a}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:i.default.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();r.default=s},{"./Fill.js":"a869d8160b7ebc75403f3be54b17a332","./TextPlacement.js":"862c64756808259c9b522e7ae77339b7"}],"5d6eefef200c67688f4e433510e8c318":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../array.js"),i=t("../extent.js"),o=_(t("./GeometryLayout.js")),a=_(t("./GeometryType.js")),s=_(t("./SimpleGeometry.js")),u=t("./flat/closest.js"),c=t("./flat/deflate.js"),l=t("./flat/inflate.js"),f=t("./flat/interpolate.js"),d=t("./flat/intersectsextent.js"),p=t("./flat/length.js"),h=t("./flat/segments.js"),g=t("./flat/simplify.js");function _(t){return t&&t.__esModule?t:{default:t}}var y,m=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),v=function(t){function e(e,r){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return m(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?(0,n.extend)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<(0,i.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,u.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,u.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.forEachSegment=function(t){return(0,h.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=o.default.XYM&&this.layout!=o.default.XYZM)return null;var r=void 0!==e&&e;return(0,f.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return(0,l.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return(0,f.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return(0,p.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=(0,g.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,o.default.XY)},e.prototype.getType=function(){return a.default.LINE_STRING},e.prototype.intersectsExtent=function(t){return(0,d.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,c.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.default);r.default=v},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","./GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./SimpleGeometry.js":"2c201efc98ebdf5eedf2ad5e7989cb8b","./flat/closest.js":"8ea74ee08b8715b1dff5a6fbe306bc3b","./flat/deflate.js":"20562fe5b89ba49209b8e67a87a11b60","./flat/inflate.js":"41316cc397979197f0ec65ed178d2a19","./flat/interpolate.js":"ef56ba89fe9aeda1c21bb532787a31ed","./flat/intersectsextent.js":"e0bf5a56fa9c6ecc259fd8e4cf84e1a5","./flat/length.js":"8d17d78ae05da9262479c1dfa26d3b4c","./flat/segments.js":"5a45db534d5c0ac5d30c257fe9fff675","./flat/simplify.js":"a98715e91b730c5e8c7932dde8ddd333"}],ef56ba89fe9aeda1c21bb532787a31ed:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.interpolatePoint=function(t,e,r,o,a,s){var u=NaN,c=NaN,l=(r-e)/o;if(1===l)u=t[e],c=t[e+1];else if(2==l)u=(1-a)*t[e]+a*t[e+o],c=(1-a)*t[e+1]+a*t[e+o+1];else if(0!==l){for(var f=t[e],d=t[e+1],p=0,h=[0],g=e+o;g<r;g+=o){var _=t[g],y=t[g+1];p+=Math.sqrt((_-f)*(_-f)+(y-d)*(y-d)),h.push(p),f=_,d=y}var m=a*p,v=(0,n.binarySearch)(h,m);if(v<0){var b=(m-h[-v-2])/(h[-v-1]-h[-v-2]),E=e+(-v-2)*o;u=(0,i.lerp)(t[E],t[E+o],b),c=(0,i.lerp)(t[E+1],t[E+o+1],b)}else u=t[e+v*o],c=t[e+v*o+1]}return s?(s[0]=u,s[1]=c,s):[u,c]},r.lineStringCoordinateAtM=o,r.lineStringsCoordinateAtM=function(t,e,r,n,i,a,s){if(s)return o(t,e,r[r.length-1],n,i,a);var u;if(i<t[n-1])return a?((u=t.slice(0,n))[n-1]=i,u):null;if(t[t.length-1]<i)return a?((u=t.slice(t.length-n))[n-1]=i,u):null;for(var c=0,l=r.length;c<l;++c){var f=r[c];if(e!=f){if(i<t[e+n-1])return null;if(i<=t[f-1])return o(t,e,f,n,i,!1);e=f}}return null};var n=t("../../array.js"),i=t("../../math.js");function o(t,e,r,n,o,a){if(r==e)return null;var s;if(o<t[e+n-1])return a?((s=t.slice(e,e+n))[n-1]=o,s):null;if(t[r-1]<o)return a?((s=t.slice(r-n,r))[n-1]=o,s):null;if(o==t[e+n-1])return t.slice(e,e+n);for(var u=e/n,c=r/n;u<c;){var l=u+c>>1;o<t[(l+1)*n-1]?c=l:u=l+1}var f=t[u*n-1];if(o==f)return t.slice((u-1)*n,(u-1)*n+n);var d=(o-f)/(t[(u+1)*n-1]-f);s=[];for(var p=0;p<n-1;++p)s.push((0,i.lerp)(t[(u-1)*n+p],t[u*n+p],d));return s.push(o),s}},{"../../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../../math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],"95cd5d20039b261bf342469b43fe7572":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.VectorSourceEvent=void 0;var n=t("../util.js"),i=E(t("../Collection.js")),o=E(t("../CollectionEventType.js")),a=E(t("../ObjectEventType.js")),s=t("../array.js"),u=t("../asserts.js"),c=t("../events.js"),l=E(t("../events/Event.js")),f=E(t("../events/EventType.js")),d=t("../extent.js"),p=t("../featureloader.js"),h=t("../functions.js"),g=t("../loadingstrategy.js"),_=t("../obj.js"),y=E(t("./Source.js")),m=E(t("./State.js")),v=E(t("./VectorEventType.js")),b=E(t("../structs/RBush.js"));function E(t){return t&&t.__esModule?t:{default:t}}var S,j=(S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),O=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return j(e,t),e}(l.default);r.VectorSourceEvent=O;var P=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{attributions:n.attributions,projection:void 0,state:m.default.READY,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=h.VOID,r.format_=n.format,r.overlaps_=null==n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&((0,u.assert)(r.format_,7),r.loader_=(0,p.xhr)(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:g.all;var o,a,s=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=s?new b.default:null,r.loadedExtentsRtree_=new b.default,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?a=n.features:n.features&&(a=(o=n.features).getArray()),s||void 0!==o||(o=new i.default(a)),void 0!==a&&r.addFeaturesInternal(a),void 0!==o&&r.bindFeaturesCollection_(o),r}return j(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=(0,n.getUid)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new O(v.default.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[(0,c.listen)(e,f.default.CHANGE,this.handleFeatureChange_,this),(0,c.listen)(e,a.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var r=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=e),r&&((0,u.assert)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],r=[],i=[],o=0,a=t.length;o<a;o++){var s=t[o],u=(0,n.getUid)(s);this.addToIndex_(u,s)&&r.push(s)}o=0;for(var c=r.length;o<c;o++){s=r[o],u=(0,n.getUid)(s);this.setupChangeEvents_(u,s);var l=s.getGeometry();if(l){var f=l.getExtent();e.push(f),i.push(s)}else this.nullGeometryFeatures_[u]=s}this.featuresRtree_&&this.featuresRtree_.load(e,i);o=0;for(var d=r.length;o<d;o++)this.dispatchEvent(new O(v.default.ADDFEATURE,r[o]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;(0,c.listen)(this,v.default.ADDFEATURE,function(r){e||(e=!0,t.push(r.feature),e=!1)}),(0,c.listen)(this,v.default.REMOVEFEATURE,function(r){e||(e=!0,t.remove(r.feature),e=!1)}),(0,c.listen)(t,o.default.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),(0,c.listen)(t,o.default.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(c.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new O(v.default.CLEAR);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(t)?e(r):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(r){if(r.getGeometry().intersectsExtent(t)){var n=e(r);if(n)return n}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,_.isEmpty)(this.nullGeometryFeatures_)||(0,s.extend)(t,(0,_.getValues)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],n=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],u=e||h.TRUE;return this.featuresRtree_.forEachInExtent(s,function(t){if(u(t)){var e=t.getGeometry(),c=a;if((a=e.closestPointXY(r,n,o,a))<c){i=t;var l=Math.sqrt(a);s[0]=r-l,s[1]=n-l,s[2]=r+l,s[3]=n+l}}}),i},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,r=(0,n.getUid)(e),i=e.getGeometry();if(i){var o=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var a=e.getId();if(void 0!==a){var s=a.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new O(v.default.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:(0,n.getUid)(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&(0,_.isEmpty)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,r){var n=this.loadedExtentsRtree_,i=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var s=i[t];n.forEachInExtent(s,function(t){return(0,d.containsExtent)(t.extent,s)})||(a.loader_.call(a,s,e,r),n.insert(s,{extent:s.slice()}),a.loading=a.loader_!==h.VOID)},a=this,s=0,u=i.length;s<u;++s)o(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,r=this.loadedExtentsRtree_;r.forEachInExtent(t,function(r){if((0,d.equals)(r.extent,t))return e=r,!0}),e&&r.remove(e)},e.prototype.removeFeature=function(t){var e=(0,n.getUid)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=(0,n.getUid)(t);this.featureChangeKeys_[e].forEach(c.unlistenByKey),delete this.featureChangeKeys_[e];var r=t.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new O(v.default.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){(0,u.assert)(this.format_,7),this.setLoader((0,p.xhr)(t,this.format_))},e}(y.default);r.default=P},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../Collection.js":"6f090fc511268dcb6cf8b42e032e7c46","../CollectionEventType.js":"1a284b36b7148c11d579a4e84e9735c1","../ObjectEventType.js":"dd0d876048dfd85d6a82a4a99353d0de","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../events.js":"47affab92622893273981942c85f03c7","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../featureloader.js":"247dc89d29ce8855e158f2f5ca38a528","../functions.js":"cafc68c692964009aaa3cf7333cf2956","../loadingstrategy.js":"f120609ebd4759f9387504f927a7c1cd","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","./Source.js":"c0ef99a14a1dba4f0de89682688995af","./State.js":"909be2fc812ab85b41263e2e8ec87f92","./VectorEventType.js":"5a513e143aeb1c0e5d6fc723e7649eae","../structs/RBush.js":"fd701e760b3fc72cad0c10aedd2407c9"}],"247dc89d29ce8855e158f2f5ca38a528":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadFeaturesXhr=a,r.xhr=function(t,e){return a(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},i.VOID)};var n,i=t("./functions.js"),o=(n=t("./format/FormatType.js"))&&n.__esModule?n:{default:n};function a(t,e,r,n){return function(i,a,s){var u=new XMLHttpRequest;u.open("GET","function"==typeof t?t(i,a,s):t,!0),e.getType()==o.default.ARRAY_BUFFER&&(u.responseType="arraybuffer"),u.onload=function(t){if(!u.status||u.status>=200&&u.status<300){var a=e.getType(),c=void 0;a==o.default.JSON||a==o.default.TEXT?c=u.responseText:a==o.default.XML?(c=u.responseXML)||(c=(new DOMParser).parseFromString(u.responseText,"application/xml")):a==o.default.ARRAY_BUFFER&&(c=u.response),c?r.call(this,e.readFeatures(c,{extent:i,featureProjection:s}),e.readProjection(c)):n.call(this)}else n.call(this)}.bind(this),u.onerror=function(){n.call(this)}.bind(this),u.send()}}},{"./functions.js":"cafc68c692964009aaa3cf7333cf2956","./format/FormatType.js":"3fdcfb54449c5e8ac10a643260b11524"}],"3fdcfb54449c5e8ac10a643260b11524":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},{}],f120609ebd4759f9387504f927a7c1cd:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.all=function(t,e){return[[-1/0,-1/0,1/0,1/0]]},r.bbox=function(t,e){return[t]},r.tile=function(t){return function(e,r){var n=t.getZForResolution(r),i=t.getTileRangeForExtentAndZ(e,n),o=[],a=[n,0,0];for(a[1]=i.minX;a[1]<=i.maxX;++a[1])for(a[2]=i.minY;a[2]<=i.maxY;++a[2])o.push(t.getTileCoordExtent(a));return o}}},{}],c0ef99a14a1dba4f0de89682688995af:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=s(t("../Object.js")),o=t("../proj.js"),a=s(t("./State.js"));function s(t){return t&&t.__esModule?t:{default:t}}var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function l(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var f=function(t){function e(e){var r=t.call(this)||this;return r.projection_=(0,o.get)(e.projection),r.attributions_=l(e.attributions),r.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,r.loading=!1,r.state_=void 0!==e.state?e.state:a.default.READY,r.wrapX_=void 0!==e.wrapX&&e.wrapX,r}return c(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return(0,n.abstract)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=l(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(i.default);r.default=f},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../Object.js":"6c67600a5761ed2f245039657f77c37b","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","./State.js":"909be2fc812ab85b41263e2e8ec87f92"}],"5a513e143aeb1c0e5d6fc723e7649eae":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},{}],fd701e760b3fc72cad0c10aedd2407c9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../util.js"),o=(n=t("rbush"))&&n.__esModule?n:{default:n},a=t("../extent.js"),s=t("../obj.js");var u=function(){function t(t){this.rbush_=new o.default(t),this.items_={}}return t.prototype.insert=function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[(0,i.getUid)(e)]=r},t.prototype.load=function(t,e){for(var r=new Array(e.length),n=0,o=e.length;n<o;n++){var a=t[n],s=e[n],u={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};r[n]=u,this.items_[(0,i.getUid)(s)]=u}this.rbush_.load(r)},t.prototype.remove=function(t){var e=(0,i.getUid)(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)},t.prototype.update=function(t,e){var r=this.items_[(0,i.getUid)(e)],n=[r.minX,r.minY,r.maxX,r.maxY];(0,a.equals)(n,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var r,n=0,i=t.length;n<i;n++)if(r=e(t[n]))return r;return r},t.prototype.isEmpty=function(){return(0,s.isEmpty)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return(0,a.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}();r.default=u},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b",rbush:"3592495b200dd85756c43e6668eb84f2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],"592f14a90d9b2b0a051ae1b7c4dc9e1d":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.greatCircleArc=function(t,e,r,a,s,u){var c=(0,i.get)("EPSG:4326"),l=Math.cos((0,n.toRadians)(e)),f=Math.sin((0,n.toRadians)(e)),d=Math.cos((0,n.toRadians)(a)),p=Math.sin((0,n.toRadians)(a)),h=Math.cos((0,n.toRadians)(r-t)),g=Math.sin((0,n.toRadians)(r-t)),_=f*p+l*d*h;return o(function(e){if(1<=_)return[r,a];var i=e*Math.acos(_),o=Math.cos(i),s=Math.sin(i),u=g*d,c=l*p-f*d*h,y=Math.atan2(u,c),m=Math.asin(f*o+l*s*Math.cos(y)),v=(0,n.toRadians)(t)+Math.atan2(Math.sin(y)*s*l,o-f*Math.sin(m));return[(0,n.toDegrees)(v),(0,n.toDegrees)(m)]},(0,i.getTransform)(c,s),u)},r.meridian=function(t,e,r,n,a){var s=(0,i.get)("EPSG:4326");return o(function(n){return[t,e+(r-e)*n]},(0,i.getTransform)(s,n),a)},r.parallel=function(t,e,r,n,a){var s=(0,i.get)("EPSG:4326");return o(function(n){return[e+(r-e)*n,t]},(0,i.getTransform)(s,n),a)};var n=t("../../math.js"),i=t("../../proj.js");function o(t,e,r){for(var i,o,a,s,u,c,l=[],f=t(0),d=t(1),p=e(f),h=e(d),g=[d,f],_=[h,p],y=[1,0],m={},v=1e5;--v>0&&y.length>0;)a=y.pop(),f=g.pop(),p=_.pop(),(c=a.toString())in m||(l.push(p[0],p[1]),m[c]=!0),s=y.pop(),d=g.pop(),h=_.pop(),o=e(i=t(u=(a+s)/2)),(0,n.squaredSegmentDistance)(o[0],o[1],p[0],p[1],h[0],h[1])<r?(l.push(h[0],h[1]),m[c=s.toString()]=!0):(y.push(s,u,u,a),_.push(h,o,o,p),g.push(d,i,i,f));return l}},{"../../math.js":"6086e082317ce6ce8a1b47fb09fed63b","../../proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],"9e2ed74bba157eada38f7cb6b59a611e":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.listenImage=d,r.default=void 0;var n=c(t("./ImageBase.js")),i=c(t("./ImageState.js")),o=t("./events.js"),a=c(t("./events/EventType.js")),s=t("./extent.js"),u=t("./has.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function d(t,e,r){var n=t;if(n.src&&u.IMAGE_DECODE){var i=n.decode(),s=!0;return i.then(function(){s&&e()}).catch(function(t){s&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():r())}),function(){s=!1}}var c=[(0,o.listenOnce)(n,a.default.LOAD,e),(0,o.listenOnce)(n,a.default.ERROR,r)];return function(){c.forEach(o.unlistenByKey)}}var p=function(t){function e(e,r,n,o,a,s){var u=t.call(this,e,r,n,i.default.IDLE)||this;return u.src_=o,u.image_=new Image,null!==a&&(u.image_.crossOrigin=a),u.unlisten_=null,u.state=i.default.IDLE,u.imageLoadFunction_=s,u}return f(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=i.default.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=(0,s.getHeight)(this.extent)/this.image_.height),this.state=i.default.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=i.default.IDLE&&this.state!=i.default.ERROR||(this.state=i.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=d(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(n.default);r.default=p},{"./ImageBase.js":"54001c5f437a635b9754afca9674430b","./ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2","./events.js":"47affab92622893273981942c85f03c7","./events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","./extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./has.js":"277cbb6fb57ab1c8c5545fe37fb5daba"}],"54001c5f437a635b9754afca9674430b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./util.js"),i=a(t("./events/Target.js")),o=a(t("./events/EventType.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=n,o.resolution=r,o.state=i,o}return u(e,t),e.prototype.changed=function(){this.dispatchEvent(o.default.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return(0,n.abstract)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){(0,n.abstract)()},e}(i.default);r.default=c},{"./util.js":"4bb2f7213adce7213216789f3fd3a27b","./events/Target.js":"259e75f7f42ffc43fc3e889115e2a322","./events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2"}],"277cbb6fb57ab1c8c5545fe37fb5daba":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IMAGE_DECODE=r.DEVICE_PIXEL_RATIO=r.MAC=r.WEBKIT=r.SAFARI=r.FIREFOX=void 0;var n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i=-1!==n.indexOf("firefox");r.FIREFOX=i;var o=-1!==n.indexOf("safari")&&-1==n.indexOf("chrom");r.SAFARI=o;var a=-1!==n.indexOf("webkit")&&-1==n.indexOf("edge");r.WEBKIT=a;var s=-1!==n.indexOf("macintosh");r.MAC=s;var u=window.devicePixelRatio||1;r.DEVICE_PIXEL_RATIO=u;var c="undefined"!=typeof Image&&Image.prototype.decode;r.IMAGE_DECODE=c},{}],"3854c6d9681cc6b35ae1491618c153e2":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(t("./ImageBase.js")),i=o(t("./ImageState.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e,r,n,o,a){var s=this,u=void 0!==a?i.default.IDLE:i.default.LOADED;return(s=t.call(this,e,r,n,u)||this).loader_=void 0!==a?a:null,s.canvas_=o,s.error_=null,s}return s(e,t),e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=i.default.ERROR):this.state=i.default.LOADED,this.changed()},e.prototype.load=function(){this.state==i.default.IDLE&&(this.state=i.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(n.default);r.default=u},{"./ImageBase.js":"54001c5f437a635b9754afca9674430b","./ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2"}],f5618d867cebf758b815d3c31642717d:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(t("./Tile.js")),i=s(t("./TileState.js")),o=t("./dom.js"),a=t("./Image.js");function s(t){return t&&t.__esModule?t:{default:t}}var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function l(){var t=(0,o.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var f=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.crossOrigin_=i,s.src_=n,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.tileLoadFunction_=o,s}return c(e,t),e.prototype.disposeInternal=function(){this.state==i.default.LOADING&&(this.unlistenImage_(),this.image_=l()),this.interimTile&&this.interimTile.dispose(),this.state=i.default.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=i.default.ERROR,this.unlistenImage_(),this.image_=l(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=i.default.LOADED:this.state=i.default.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==i.default.ERROR&&(this.state=i.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==i.default.IDLE&&(this.state=i.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,a.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(n.default);r.default=f},{"./Tile.js":"81b8476e359c6fd98b69f8a2aa011224","./TileState.js":"db929d9360c0941c511bb453a25f591f","./dom.js":"0ade60b4014b5f1918822f5d81f5a358","./Image.js":"9e2ed74bba157eada38f7cb6b59a611e"}],"81b8476e359c6fd98b69f8a2aa011224":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(t("./TileState.js")),i=t("./easing.js"),o=u(t("./events/Target.js")),a=u(t("./events/EventType.js")),s=t("./util.js");function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e,r,n){var i=t.call(this)||this,o=n||{};return i.tileCoord=e,i.state=r,i.interimTile=null,i.hifi=!0,i.key="",i.transition_=void 0===o.transition?250:o.transition,i.transitionStarts_={},i}return l(e,t),e.prototype.changed=function(){this.dispatchEvent(a.default.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==n.default.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==n.default.LOADED){t.interimTile=null;break}t.getState()==n.default.LOADING?e=t:t.getState()==n.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){(0,s.abstract)()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:(0,i.easeIn)(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(o.default);r.default=f},{"./TileState.js":"db929d9360c0941c511bb453a25f591f","./easing.js":"8aefdec0c4be6700bf94b7f3aafa0ae8","./events/Target.js":"259e75f7f42ffc43fc3e889115e2a322","./events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","./util.js":"4bb2f7213adce7213216789f3fd3a27b"}],db929d9360c0941c511bb453a25f591f:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},{}],"8aefdec0c4be6700bf94b7f3aafa0ae8":[function(t,e,r){"use strict";function n(t){return Math.pow(t,3)}function i(t){return 3*t*t-2*t*t*t}Object.defineProperty(r,"__esModule",{value:!0}),r.easeIn=n,r.easeOut=function(t){return 1-n(1-t)},r.inAndOut=i,r.linear=function(t){return t},r.upAndDown=function(t){return t<.5?i(2*t):1-i(2*(t-.5))}},{}],b218aa943771342aee66344d881d4cd4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){function t(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;var i=this.points_[e]-this.points_[r],o=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();r.default=n},{}],"7a1b575be0d4882be19a8a1c4124e17b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(t("./PluggableMap.js")),i=t("./control.js"),o=t("./interaction.js"),a=t("./obj.js"),s=u(t("./renderer/Composite.js"));function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e){return(e=(0,a.assign)({},e)).controls||(e.controls=(0,i.defaults)()),e.interactions||(e.interactions=(0,o.defaults)()),t.call(this,e)||this}return l(e,t),e.prototype.createRenderer=function(){return new s.default(this)},e}(n.default);r.default=f},{"./PluggableMap.js":"e22d5f9155b17e6aa985e9372b52268a","./control.js":"8fb8940e6e1e773e28b7dc9c3322d2ba","./interaction.js":"dcdb7e22b0472785652f09e3dcd7cd32","./obj.js":"33baacb9b92cb6097b890ee8b1ee5384","./renderer/Composite.js":"596d23db2ccab94a13524bbe3ae85d8d"}],e22d5f9155b17e6aa985e9372b52268a:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./util.js"),i=I(t("./Collection.js")),o=I(t("./CollectionEventType.js")),a=I(t("./MapBrowserEvent.js")),s=I(t("./MapBrowserEventHandler.js")),u=I(t("./MapBrowserEventType.js")),c=I(t("./MapEvent.js")),l=I(t("./MapEventType.js")),f=I(t("./MapProperty.js")),d=I(t("./render/EventType.js")),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Object.js")),h=I(t("./ObjectEventType.js")),g=I(t("./TileQueue.js")),_=I(t("./View.js")),y=I(t("./ViewHint.js")),m=t("./asserts.js"),v=t("./dom.js"),b=t("./events.js"),E=I(t("./events/EventType.js")),S=t("./extent.js"),j=t("./functions.js"),O=t("./has.js"),P=I(t("./layer/Group.js")),T=t("./size.js"),x=t("./structs/PriorityQueue.js"),C=t("./transform.js");function I(t){return t&&t.__esModule?t:{default:t}}var w,R=(w=function(t,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});var N=function(t){function e(e){var r=t.call(this)||this,n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,n,o,a={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new P.default({layers:t.layers});a[f.default.LAYERGROUP]=s,a[f.default.TARGET]=t.target,a[f.default.VIEW]=void 0!==t.view?t.view:new _.default,void 0!==t.controls&&(Array.isArray(t.controls)?r=new i.default(t.controls.slice()):((0,m.assert)("function"==typeof t.controls.getArray,47),r=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new i.default(t.interactions.slice()):((0,m.assert)("function"==typeof t.interactions.getArray,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?o=new i.default(t.overlays.slice()):((0,m.assert)("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new i.default;return{controls:r,interactions:n,keyboardEventTarget:e,overlays:o,values:a}}(e);for(var a in r.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,r.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:O.DEVICE_PIXEL_RATIO,r.animationDelayKey_,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=(0,C.create)(),r.pixelToCoordinateTransform_=(0,C.create)(),r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.viewport_.style.msTouchAction="none",r.viewport_.style.touchAction="none",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=new s.default(r,e.moveTolerance),u.default)(0,b.listen)(r.mapBrowserEventHandler_,u.default[a],r.handleMapBrowserEvent,r);return r.keyboardEventTarget_=n.keyboardEventTarget,r.keyHandlerKeys_=null,(0,b.listen)(r.viewport_,E.default.CONTEXTMENU,r.handleBrowserEvent,r),(0,b.listen)(r.viewport_,E.default.WHEEL,r.handleBrowserEvent,r),(0,b.listen)(r.viewport_,E.default.MOUSEWHEEL,r.handleBrowserEvent,r),r.controls=n.controls||new i.default,r.interactions=n.interactions||new i.default,r.labelCache_=null,r.labelCacheListenerKey_,r.overlays_=n.overlays,r.overlayIdIndex_={},r.renderer_=null,r.handleResize_,r.focus_=null,r.postRenderFunctions_=[],r.tileQueue_=new g.default(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.skippedFeatureUids_={},(0,b.listen)(r,(0,p.getChangeEventType)(f.default.LAYERGROUP),r.handleLayerGroupChanged_,r),(0,b.listen)(r,(0,p.getChangeEventType)(f.default.VIEW),r.handleViewChanged_,r),(0,b.listen)(r,(0,p.getChangeEventType)(f.default.SIZE),r.handleSizeChanged_,r),(0,b.listen)(r,(0,p.getChangeEventType)(f.default.TARGET),r.handleTargetChanged_,r),r.setProperties(n.values),r.controls.forEach(function(t){t.setMap(this)}.bind(r)),(0,b.listen)(r.controls,o.default.ADD,function(t){t.element.setMap(this)},r),(0,b.listen)(r.controls,o.default.REMOVE,function(t){t.element.setMap(null)},r),r.interactions.forEach(function(t){t.setMap(this)}.bind(r)),(0,b.listen)(r.interactions,o.default.ADD,function(t){t.element.setMap(this)},r),(0,b.listen)(r.interactions,o.default.REMOVE,function(t){t.element.setMap(null)},r),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),(0,b.listen)(r.overlays_,o.default.ADD,function(t){this.addOverlayInternal_(t.element)},r),(0,b.listen)(r.overlays_,o.default.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},r),r}return R(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),(0,b.unlisten)(this.viewport_,E.default.CONTEXTMENU,this.handleBrowserEvent,this),(0,b.unlisten)(this.viewport_,E.default.WHEEL,this.handleBrowserEvent,this),(0,b.unlisten)(this.viewport_,E.default.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(E.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,r){if(this.frameState_){var n=this.getCoordinateFromPixel(t),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==r.layerFilter?r.layerFilter:j.TRUE;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var r=null;return this.forEachFeatureAtPixel(t,function(t){r||(r=[]),r.push(t)},e),r},e.prototype.forEachLayerAtPixel=function(t,e,r){if(this.frameState_){var n=r||{},i=void 0!==n.hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||j.TRUE;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixel(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:j.TRUE,i=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-e.left,r.clientY-e.top]},e.prototype.getTarget=function(){return this.get(f.default.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?(0,C.apply)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(f.default.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?(0,C.apply)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(f.default.SIZE)},e.prototype.getView=function(){return this.get(f.default.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,r,n){var i=this.frameState_;if(!(i&&e in i.wantedTiles))return x.DROP;if(!i.wantedTiles[e][t.getKey()])return x.DROP;var o=r[0]-i.focus[0],a=r[1]-i.focus[1];return 65536*Math.log(n)+Math.sqrt(o*o+a*a)/n},e.prototype.handleBrowserEvent=function(t,e){var r=e||t.type,n=new a.default(r,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){for(var e=t.originalEvent.target;e instanceof HTMLElement;){if(e.parentElement===this.overlayContainerStopEvent_)return;e=e.parentElement}this.focus_=t.coordinate,t.frameState=this.frameState_;var r=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.getActive())if(!i.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,n=r;if(t){var i=t.viewHints;if(i[y.default.ANIMATING]||i[y.default.INTERACTING]){var o=!O.IMAGE_DECODE&&Date.now()-t.time>8;r=o?0:8,n=o?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,n))}!t||!this.hasListener(d.default.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(d.default.RENDERCOMPLETE,t);for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,r=this.keyHandlerKeys_.length;e<r;++e)(0,b.unlistenByKey)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[(0,b.listen)(n,E.default.KEYDOWN,this.handleBrowserEvent,this),(0,b.listen)(n,E.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(E.default.RESIZE,this.handleResize_,!1))}else this.renderer_&&(this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),(0,v.removeNode)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(E.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&((0,b.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,b.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",(0,n.getUid)(t)),this.viewPropertyListenerKey_=(0,b.listen)(t,h.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,b.listen)(t,E.default.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(b.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[(0,b.listen)(t,h.default.PROPERTYCHANGE,this.render,this),(0,b.listen)(t,E.default.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,r=this.getSize(),n=this.getView(),i=(0,S.createEmpty)(),o=this.frameState_,a=null;if(void 0!==r&&(0,T.hasArea)(r)&&n&&n.isDef()){var s=n.getHints(this.frameState_?this.frameState_.viewHints:void 0);e=n.getState(),a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:o?o.declutterItems:[],extent:i,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:s,wantedTiles:{}}}if(a&&(a.extent=(0,S.getForViewAndSize)(e.center,e.resolution,e.rotation,a.size,i)),this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),o)(!this.previousExtent_||!(0,S.isEmpty)(this.previousExtent_)&&!(0,S.equals)(a.extent,this.previousExtent_))&&(this.dispatchEvent(new c.default(l.default.MOVESTART,this,o)),this.previousExtent_=(0,S.createOrUpdateEmpty)(this.previousExtent_));this.previousExtent_&&!a.viewHints[y.default.ANIMATING]&&!a.viewHints[y.default.INTERACTING]&&!(0,S.equals)(a.extent,this.previousExtent_)&&(this.dispatchEvent(new c.default(l.default.MOVEEND,this,a)),(0,S.clone)(a.extent,this.previousExtent_))}this.dispatchEvent(new c.default(l.default.POSTRENDER,this,a)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(f.default.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(f.default.SIZE,t)},e.prototype.setTarget=function(t){this.set(f.default.TARGET,t)},e.prototype.setView=function(t){this.set(f.default.VIEW,t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[(0,n.getUid)(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[(0,n.getUid)(t)],this.render()},e}(p.default);r.default=N},{"./util.js":"4bb2f7213adce7213216789f3fd3a27b","./Collection.js":"6f090fc511268dcb6cf8b42e032e7c46","./CollectionEventType.js":"1a284b36b7148c11d579a4e84e9735c1","./MapBrowserEvent.js":"677944463c2b67121a15ab13f8027c01","./MapBrowserEventHandler.js":"53f1e4e2710fd99e52820f23af8c3e13","./MapBrowserEventType.js":"16e9d1f3fb7b220d40b3dda0147708b0","./MapEvent.js":"d0d5a8a90dfef616bfe93e3e6b0e1c86","./MapEventType.js":"c5f9a31032c688f6115b47b952057e83","./MapProperty.js":"5b775bb8b0a24c416ceef1220d83ce65","./render/EventType.js":"06d6dd10e6aec33ecdd51285aca01fbb","./Object.js":"6c67600a5761ed2f245039657f77c37b","./ObjectEventType.js":"dd0d876048dfd85d6a82a4a99353d0de","./TileQueue.js":"8bd91d2f5f2962889b9878108717f72c","./View.js":"d306c3c537254824aa92704d553e7cb1","./ViewHint.js":"1c64ac73cc5dd7506e286fe17f1044a9","./asserts.js":"7e662a02bc41c2814316b69c70da50e2","./dom.js":"0ade60b4014b5f1918822f5d81f5a358","./events.js":"47affab92622893273981942c85f03c7","./events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","./extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./functions.js":"cafc68c692964009aaa3cf7333cf2956","./has.js":"277cbb6fb57ab1c8c5545fe37fb5daba","./layer/Group.js":"fe9e2446a3d2d9fdc16d7af51e3294f8","./size.js":"f20e5446e37aa2c395fbeb406aabfc05","./structs/PriorityQueue.js":"99d11d83f19e09cff7e7b8a37d19184e","./transform.js":"2cfeb6b6111a4a4a4e18e3429d625928"}],"677944463c2b67121a15ab13f8027c01":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./MapEvent.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,o)||this;return a.originalEvent=n,a.pixel=r.getEventPixel(n),a.coordinate=r.getCoordinateFromPixel(a.pixel),a.dragging=void 0!==i&&i,a}return a(e,t),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(i.default);r.default=s},{"./MapEvent.js":"d0d5a8a90dfef616bfe93e3e6b0e1c86"}],d0d5a8a90dfef616bfe93e3e6b0e1c86:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./events/Event.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.map=r,i.frameState=void 0!==n?n:null,i}return a(e,t),e}(i.default);r.default=s},{"./events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6"}],"53f1e4e2710fd99e52820f23af8c3e13":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./has.js"),i=l(t("./MapBrowserEventType.js")),o=l(t("./MapBrowserPointerEvent.js")),a=t("./events.js"),s=l(t("./events/Target.js")),u=l(t("./pointer/EventType.js")),c=l(t("./pointer/PointerEventHandler.js"));function l(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p=function(t){function e(e,r){var i=t.call(this)||this;i.map_=e,i.clickTimeoutId_,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=r?r*n.DEVICE_PIXEL_RATIO:n.DEVICE_PIXEL_RATIO,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=0,i.trackedTouches_={},i.pointerEventHandler_=new c.default(o),i.documentPointerEventHandler_=null,i.pointerdownListenerKey_=(0,a.listen)(i.pointerEventHandler_,u.default.POINTERDOWN,i.handlePointerDown_,i),i.relayedListenerKey_=(0,a.listen)(i.pointerEventHandler_,u.default.POINTERMOVE,i.relayEvent_,i),i}return d(e,t),e.prototype.emulateClick_=function(t){var e=new o.default(i.default.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new o.default(i.default.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new o.default(i.default.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==i.default.POINTERUP||e.type==i.default.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==i.default.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new o.default(i.default.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(a.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new o.default(i.default.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new c.default(document),this.dragListenerKeys_.push((0,a.listen)(this.documentPointerEventHandler_,i.default.POINTERMOVE,this.handlePointerMove_,this),(0,a.listen)(this.documentPointerEventHandler_,i.default.POINTERUP,this.handlePointerUp_,this),(0,a.listen)(this.pointerEventHandler_,i.default.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new o.default(i.default.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new o.default(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&((0,a.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&((0,a.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(a.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(s.default);r.default=p},{"./has.js":"277cbb6fb57ab1c8c5545fe37fb5daba","./MapBrowserEventType.js":"16e9d1f3fb7b220d40b3dda0147708b0","./MapBrowserPointerEvent.js":"051b6b89475cbbcfe393a6f6ab0fea28","./events.js":"47affab92622893273981942c85f03c7","./events/Target.js":"259e75f7f42ffc43fc3e889115e2a322","./pointer/EventType.js":"2bb176dc27cc0bfb6fce96f692a99140","./pointer/PointerEventHandler.js":"7a6d760eec19f147b7580e67d1822e2b"}],"16e9d1f3fb7b220d40b3dda0147708b0":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./events/EventType.js"))&&n.__esModule?n:{default:n};var o={SINGLECLICK:"singleclick",CLICK:i.default.CLICK,DBLCLICK:i.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};r.default=o},{"./events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2"}],"051b6b89475cbbcfe393a6f6ab0fea28":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./MapBrowserEvent.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,n.originalEvent,i,o)||this;return a.pointerEvent=n,a}return a(e,t),e}(i.default);r.default=s},{"./MapBrowserEvent.js":"677944463c2b67121a15ab13f8027c01"}],"2bb176dc27cc0bfb6fce96f692a99140":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},{}],"7a6d760eec19f147b7580e67d1822e2b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../events.js"),i=f(t("../events/Target.js")),o=f(t("./EventType.js")),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./MouseSource.js")),s=f(t("./MsSource.js")),u=f(t("./NativeSource.js")),c=f(t("./PointerEvent.js")),l=f(t("./TouchSource.js"));function f(t){return t&&t.__esModule?t:{default:t}}var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],g=function(t){function e(e){var r=t.call(this)||this;return r.element_=e,r.pointerMap={},r.eventMap_={},r.eventSourceList_=[],r.registerSources(),r}return p(e,t),e.prototype.registerSources=function(){if("PointerEvent"in window)this.registerSource("native",new u.default(this));else if(window.navigator.msPointerEnabled)this.registerSource("ms",new s.default(this));else{var t=new a.default(this);this.registerSource("mouse",t),"ontouchstart"in window&&this.registerSource("touch",new l.default(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var r=e,n=r.getEvents();n&&(n.forEach(function(t){var e=r.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(r))}.bind(this)),this.eventSourceList_.push(r))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var r=this.eventSourceList_[e];this.addEvents_(r.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var r=this.eventSourceList_[e];this.removeEvents_(r.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,r=this.eventMap_[e];r&&r(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){(0,n.listen)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){(0,n.unlisten)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var r={},n=0,i=h.length;n<i;n++){var o=h[n][0];r[o]=t[o]||e[o]||h[n][1]}return r},e.prototype.down=function(t,e){this.fireEvent(o.default.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(o.default.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(o.default.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(o.default.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(o.default.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(o.default.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(o.default.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(o.default.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,r){return new c.default(t,r,e)},e.prototype.fireEvent=function(t,e,r){var n=this.makeEvent(t,e,r);this.dispatchEvent(n)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,(0,a.prepareEvent)(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(i.default);r.default=g},{"../events.js":"47affab92622893273981942c85f03c7","../events/Target.js":"259e75f7f42ffc43fc3e889115e2a322","./EventType.js":"2bb176dc27cc0bfb6fce96f692a99140","./MouseSource.js":"1004b3a7ee3334a98330537a234037de","./MsSource.js":"b87322bfe6ffc923a151be0153c061f9","./NativeSource.js":"cb3b379c36c36e6fac29bc08bbba27ec","./PointerEvent.js":"cbd2ffd458a06f0006403560260c4941","./TouchSource.js":"c18058e4119e7c99be282cab653fc9ca"}],"1004b3a7ee3334a98330537a234037de":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.prepareEvent=h,r.default=r.POINTER_TYPE=r.POINTER_ID=void 0;var n,i=(n=t("./EventSource.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=1;r.POINTER_ID=s;var u="mouse";r.POINTER_TYPE=u;function c(t){if(!this.isEventSimulatedFromTouch_(t)){s.toString()in this.pointerMap&&this.cancel(t);var e=h(t,this.dispatcher);this.pointerMap[s.toString()]=t,this.dispatcher.down(e,t)}}function l(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.move(e,t)}}function f(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[s.toString()];if(e&&e.button===t.button){var r=h(t,this.dispatcher);this.dispatcher.up(r,t),this.cleanupMouse()}}}function d(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function p(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function h(t,e){var r=e.cloneEvent(t,t),n=r.preventDefault;return r.preventDefault=function(){t.preventDefault(),n()},r.pointerId=s,r.isPrimary=!0,r.pointerType=u,r}var g=function(t){function e(e){var r=this,n={mousedown:c,mousemove:l,mouseup:f,mouseover:d,mouseout:p};return(r=t.call(this,e,n)||this).pointerMap=e.pointerMap,r.lastTouches=[],r}return a(e,t),e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,r=t.clientX,n=t.clientY,i=0,o=e.length,a=void 0;i<o&&(a=e[i]);i++){var s=Math.abs(r-a[0]),u=Math.abs(n-a[1]);if(s<=25&&u<=25)return!0}return!1},e.prototype.cancel=function(t){var e=h(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[s.toString()]},e}(i.default);r.default=g},{"./EventSource.js":"e30f98617a55f60b4d2adadf4b15aebe"}],e30f98617a55f60b4d2adadf4b15aebe:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){function t(t,e){this.dispatcher=t,this.mapping_=e}return t.prototype.getEvents=function(){return Object.keys(this.mapping_)},t.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},t}();r.default=n},{}],b87322bfe6ffc923a151be0153c061f9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./EventSource.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=["","unavailable","touch","pen","mouse"];function u(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function c(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function l(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function f(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function d(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function p(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function h(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function g(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var _=function(t){function e(e){var r=this,n={MSPointerDown:u,MSPointerMove:c,MSPointerUp:l,MSPointerOut:f,MSPointerOver:d,MSPointerCancel:p,MSGotPointerCapture:g,MSLostPointerCapture:h};return(r=t.call(this,e,n)||this).pointerMap=e.pointerMap,r}return a(e,t),e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=s[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(i.default);r.default=_},{"./EventSource.js":"e30f98617a55f60b4d2adadf4b15aebe"}],cb3b379c36c36e6fac29bc08bbba27ec:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./EventSource.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function s(t){this.dispatcher.fireNativeEvent(t)}function u(t){this.dispatcher.fireNativeEvent(t)}function c(t){this.dispatcher.fireNativeEvent(t)}function l(t){this.dispatcher.fireNativeEvent(t)}function f(t){this.dispatcher.fireNativeEvent(t)}function d(t){this.dispatcher.fireNativeEvent(t)}function p(t){this.dispatcher.fireNativeEvent(t)}function h(t){this.dispatcher.fireNativeEvent(t)}var g=function(t){function e(e){var r={pointerdown:s,pointermove:u,pointerup:c,pointerout:l,pointerover:f,pointercancel:d,gotpointercapture:h,lostpointercapture:p};return t.call(this,e,r)||this}return a(e,t),e}(i.default);r.default=g},{"./EventSource.js":"e30f98617a55f60b4d2adadf4b15aebe"}],cbd2ffd458a06f0006403560260c4941:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("../events/Event.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=!1,u=function(t){function e(e,r,n){var i=t.call(this,e)||this;i.originalEvent=r;var o=n||{};return i.buttons=function(t){var e;if(t.buttons||s)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(o),i.pressure=function(t,e){var r=0;r=t.pressure?t.pressure:e?.5:0;return r}(o,i.buttons),i.bubbles="bubbles"in o&&o.bubbles,i.cancelable="cancelable"in o&&o.cancelable,i.view="view"in o?o.view:null,i.detail="detail"in o?o.detail:null,i.screenX="screenX"in o?o.screenX:0,i.screenY="screenY"in o?o.screenY:0,i.clientX="clientX"in o?o.clientX:0,i.clientY="clientY"in o?o.clientY:0,i.ctrlKey="ctrlKey"in o&&o.ctrlKey,i.altKey="altKey"in o&&o.altKey,i.shiftKey="shiftKey"in o&&o.shiftKey,i.metaKey="metaKey"in o&&o.metaKey,i.button="button"in o?o.button:0,i.relatedTarget="relatedTarget"in o?o.relatedTarget:null,i.pointerId="pointerId"in o?o.pointerId:0,i.width="width"in o?o.width:0,i.height="height"in o?o.height:0,i.tiltX="tiltX"in o?o.tiltX:0,i.tiltY="tiltY"in o?o.tiltY:0,i.pointerType="pointerType"in o?o.pointerType:"",i.hwTimestamp="hwTimestamp"in o?o.hwTimestamp:0,i.isPrimary="isPrimary"in o&&o.isPrimary,r.preventDefault&&(i.preventDefault=function(){r.preventDefault()}),i}return a(e,t),e}(i.default);!function(){try{var t=new MouseEvent("click",{buttons:1});s=1===t.buttons}catch(t){}}();var c=u;r.default=c},{"../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6"}],c18058e4119e7c99be282cab653fc9ca:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../array.js"),o=(n=t("./EventSource.js"))&&n.__esModule?n:{default:n},a=t("./MouseSource.js");var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function c(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function l(t){this.processTouches_(t,this.moveOverOut_)}function f(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function d(t){this.processTouches_(t,this.cancelOut_)}var p=function(t){function e(e,r){var n=this,i={touchstart:c,touchmove:l,touchend:f,touchcancel:d};return(n=t.call(this,e,i)||this).pointerMap=e.pointerMap,n.mouseSource=r,n.firstTouchId_=void 0,n.clickCount_=0,n.resetId_,n.dedupTimeout_=2500,n}return u(e,t),e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&a.POINTER_ID.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var r=this.dispatcher.cloneEvent(t,e);return r.pointerId=e.identifier+2,r.bubbles=!0,r.cancelable=!0,r.detail=this.clickCount_,r.button=0,r.buttons=1,r.width=e.radiusX||0,r.height=e.radiusY||0,r.pressure=e.force||.5,r.isPrimary=this.isPrimaryTouch_(e),r.pointerType="touch",r.clientX=e.clientX,r.clientY=e.clientY,r.screenX=e.screenX,r.screenY=e.screenY,r},e.prototype.processTouches_=function(t,e){var r=Array.prototype.slice.call(t.changedTouches),n=r.length;function i(){t.preventDefault()}for(var o=0;o<n;++o){var a=this.touchToPointer_(t,r[o]);a.preventDefault=i,e.call(this,t,a)}},e.prototype.findTouch_=function(t,e){for(var r=t.length,n=0;n<r;n++){if(t[n].identifier===e)return!0}return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,r=Object.keys(this.pointerMap),n=r.length;if(n>=e.length){for(var i=[],o=0;o<n;++o){var s=Number(r[o]),u=this.pointerMap[s];s==a.POINTER_ID||this.findTouch_(e,s-2)||i.push(u.out)}for(o=0;o<i.length;++o)this.cancelOut_(t,i[o])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var r=e,n=this.pointerMap[r.pointerId];if(n){var i=n.out,o=n.outTarget;this.dispatcher.move(r,t),i&&o!==r.target&&(i.relatedTarget=r.target,r.relatedTarget=o,i.target=o,r.target?(this.dispatcher.leaveOut(i,t),this.dispatcher.enterOver(r,t)):(r.target=o,r.relatedTarget=null,this.cancelOut_(t,r))),n.out=r,n.outTarget=r.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,r=t.changedTouches[0];if(this.isPrimaryTouch_(r)){var n=[r.clientX,r.clientY];e.push(n),setTimeout(function(){(0,i.remove)(e,n)},this.dedupTimeout_)}},e}(o.default);r.default=p},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","./EventSource.js":"e30f98617a55f60b4d2adadf4b15aebe","./MouseSource.js":"1004b3a7ee3334a98330537a234037de"}],c5f9a31032c688f6115b47b952057e83:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},{}],"5b775bb8b0a24c416ceef1220d83ce65":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},{}],"8bd91d2f5f2962889b9878108717f72c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(t("./TileState.js")),i=t("./events.js"),o=s(t("./events/EventType.js")),a=s(t("./structs/PriorityQueue.js"));function s(t){return t&&t.__esModule?t:{default:t}}var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=function(t){function e(e,r){var n=t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()})||this;return n.tileChangeCallback_=r,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return c(e,t),e.prototype.enqueue=function(e){var r=t.prototype.enqueue.call(this,e);if(r){var n=e[0];(0,i.listen)(n,o.default.CHANGE,this.handleTileChange,this)}return r},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,r=e.getState();if(e.hifi&&r===n.default.LOADED||r===n.default.ERROR||r===n.default.EMPTY||r===n.default.ABORT){(0,i.unlisten)(e,o.default.CHANGE,this.handleTileChange,this);var a=e.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var r,i,o,a=0,s=!1;this.tilesLoading_<t&&a<e&&this.getCount()>0;)o=(i=this.dequeue()[0]).getKey(),(r=i.getState())===n.default.ABORT?s=!0:r!==n.default.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++a,i.load());0===a&&s&&this.tileChangeCallback_()},e}(a.default);r.default=l},{"./TileState.js":"db929d9360c0941c511bb453a25f591f","./events.js":"47affab92622893273981942c85f03c7","./events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","./structs/PriorityQueue.js":"99d11d83f19e09cff7e7b8a37d19184e"}],"99d11d83f19e09cff7e7b8a37d19184e":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.DROP=void 0;var n=t("../asserts.js"),i=t("../obj.js");r.DROP=1/0;var o=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,(0,i.clear)(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(r);return delete this.queuedElements_[n],r},t.prototype.enqueue=function(t){(0,n.assert)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,r=this.priorities_,n=e.length,i=e[t],o=r[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),c=u<n&&r[u]<r[s]?u:s;e[t]=e[c],r[t]=r[c],t=c}e[t]=i,r[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var r=this.elements_,n=this.priorities_,i=r[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;r[e]=r[a],n[e]=n[a],e=a}r[e]=i,n[e]=o},t.prototype.reprioritize=function(){var t,e,r,n=this.priorityFunction_,i=this.elements_,o=this.priorities_,a=0,s=i.length;for(e=0;e<s;++e)(r=n(t=i[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=r,i[a++]=t);i.length=a,o.length=a,this.heapify_()},t}();r.default=o},{"../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],d306c3c537254824aa92704d553e7cb1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createCenterConstraint=C,r.createResolutionConstraint=I,r.createRotationConstraint=w,r.isNoopAnimation=R,r.default=void 0;var n=t("./tilegrid/common.js"),i=t("./util.js"),o=t("./functions.js"),a=t("./centerconstraint.js"),s=j(t("./Object.js")),u=t("./resolutionconstraint.js"),c=t("./rotationconstraint.js"),l=j(t("./ViewHint.js")),f=j(t("./ViewProperty.js")),d=t("./array.js"),p=t("./asserts.js"),h=t("./coordinate.js"),g=t("./easing.js"),_=t("./extent.js"),y=j(t("./geom/GeometryType.js")),m=t("./geom/Polygon.js"),v=t("./math.js"),b=t("./obj.js"),E=t("./proj.js"),S=j(t("./proj/Units.js"));function j(t){return t&&t.__esModule?t:{default:t}}var O,P=(O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),T=0;function x(t,e){setTimeout(function(){t(e)},0)}function C(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return(0,a.createExtent)(t.extent,t.constrainOnlyCenter,e)}var r=(0,E.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,(0,a.createExtent)(n,!1,!1)}return a.none}function I(t){var e,r,i,o=void 0!==t.minZoom?t.minZoom:T,a=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2,c=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint;if(void 0!==t.resolutions){var f=t.resolutions;r=f[o],i=void 0!==f[a]?f[a]:f[f.length-1],e=t.constrainResolution?(0,u.createSnapToResolutions)(f,l,!t.constrainOnlyCenter&&t.extent):(0,u.createMinMaxResolution)(r,i,l,!t.constrainOnlyCenter&&t.extent)}else{var d=(0,E.createProjection)(t.projection,"EPSG:3857"),p=d.getExtent(),h=(p?Math.max((0,_.getWidth)(p),(0,_.getHeight)(p)):360*E.METERS_PER_UNIT[S.default.DEGREES]/d.getMetersPerUnit())/n.DEFAULT_TILE_SIZE/Math.pow(2,T),g=h/Math.pow(2,28-T);if(void 0!==(r=t.maxResolution)?o=0:r=h/Math.pow(s,o),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(s,a):h/Math.pow(s,a):g),a=o+Math.floor(Math.log(r/i)/Math.log(s)),i=r/Math.pow(s,a-o),t.constrainResolution)e=(0,u.createSnapToPower)(s,r,i,l,!t.constrainOnlyCenter&&t.extent);else{var y=t.constrainOnlyCenter,m=t.extent;c||m||!d.isGlobal()||(y=!1,m=d.getExtent()),e=(0,u.createMinMaxResolution)(r,i,l,!y&&m)}}return{constraint:e,maxResolution:r,minResolution:i,minZoom:o,zoomFactor:s}}function w(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(0,c.createSnapToZero)():!1===e?c.none:"number"==typeof e?(0,c.createSnapToN)(e):c.none}return c.disable}function R(t){return!(t.sourceCenter&&t.targetCenter&&!(0,h.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var N=function(t){function e(e){var r=t.call(this)||this,n=(0,b.assign)({},e);return r.hints_=[0,0],r.animations_=[],r.updateAnimationKey_,r.projection_=(0,E.createProjection)(n.projection,"EPSG:3857"),r.targetCenter_=null,r.targetResolution_,r.targetRotation_,r.applyOptions_(n),r}return P(e,t),e.prototype.applyOptions_=function(t){var e=I(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var r=C(t),n=e.constraint,i=w(t);this.constraints_={center:r,resolution:n,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenter(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.resolveConstraints(0),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=(0,b.assign)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),(0,b.assign)({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0),this.animate_.apply(this,arguments)},e.prototype.animate_=function(t){var e,r=arguments.length;if(r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var n=arguments[r-1];return n.center&&this.setCenter(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&x(e,!0))}for(var i=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,u=[],c=0;c<r;++c){var f=arguments[c],d={start:i,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||g.inAndOut,callback:e};if(f.center&&(d.sourceCenter=o,d.targetCenter=f.center.slice(),o=d.targetCenter),void 0!==f.zoom?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(f.zoom),a=d.targetResolution):f.resolution&&(d.sourceResolution=a,d.targetResolution=f.resolution,a=d.targetResolution),void 0!==f.rotation){d.sourceRotation=s;var p=(0,v.modulo)(f.rotation-s+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=s+p,s=d.targetRotation}R(d)?d.complete=!0:i+=d.duration,u.push(d)}this.animations_.push(u),this.setHint(l.default.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[l.default.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[l.default.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(l.default.ANIMATING,-this.hints_[l.default.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var r=this.animations_[t];r[0].callback&&x(r[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var n=this.animations_[r],i=!0,o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){var u=t-s.start,c=s.duration>0?u/s.duration:1;c>=1?(s.complete=!0,c=1):i=!1;var f=s.easing(c);if(s.sourceCenter){var d=s.sourceCenter[0],p=s.sourceCenter[1],h=d+f*(s.targetCenter[0]-d),g=p+f*(s.targetCenter[1]-p);this.targetCenter_=[h,g]}if(s.sourceResolution&&s.targetResolution){var _=1===f?s.targetResolution:s.sourceResolution+f*(s.targetResolution-s.sourceResolution);if(s.anchor){var y=this.getSizeFromViewport_(this.getRotation()),m=this.constraints_.resolution(_,0,y,!0);this.targetCenter_=this.calculateCenterZoom(m,s.anchor)}this.targetResolution_=_,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var b=1===f?(0,v.modulo)(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+f*(s.targetRotation-s.sourceRotation);if(s.anchor){var E=this.constraints_.rotation(b,!0);this.targetCenter_=this.calculateCenterRotate(E,s.anchor)}this.targetRotation_=b}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(i){this.animations_[r]=null,this.setHint(l.default.ANIMATING,-1);var S=n[0].callback;S&&x(S,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var r,n=this.getCenter();return void 0!==n&&(r=[n[0]-e[0],n[1]-e[1]],(0,h.rotate)(r,t-this.getRotation()),(0,h.add)(r,e)),r},e.prototype.calculateCenterZoom=function(t,e){var r,n=this.getCenter(),i=this.getResolution();void 0!==n&&void 0!==i&&(r=[e[0]-t*(e[0]-n[0])/i,e[1]-t*(e[1]-n[1])/i]);return r},e.prototype.getSizeFromViewport_=function(t){var e=[100,100],r='.ol-viewport[data-view="'+(0,i.getUid)(this)+'"]',n=document.querySelector(r);if(n){var o=getComputedStyle(n);e[0]=parseInt(o.width,10),e[1]=parseInt(o.height,10)}if(t){var a=e[0],s=e[1];e[0]=Math.abs(a*Math.cos(t))+Math.abs(s*Math.sin(t)),e[1]=Math.abs(a*Math.sin(t))+Math.abs(s*Math.cos(t))}return e},e.prototype.getCenter=function(){return this.get(f.default.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),r=this.getCenter();(0,p.assert)(r,1);var n=this.getResolution();(0,p.assert)(void 0!==n,2);var i=this.getRotation();return(0,p.assert)(void 0!==i,3),(0,_.getForViewAndSize)(r,n,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(f.default.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var r=e||this.getSizeFromViewport_(),n=(0,_.getWidth)(t)/r[0],i=(0,_.getHeight)(t)/r[1];return Math.max(n,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,r=this.maxResolution_,n=this.minResolution_,i=Math.log(r/n)/Math.log(e);return function(t){return r/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(f.default.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,r=this.maxResolution_,n=this.minResolution_,i=Math.log(r/n)/Math.log(e);return function(t){return Math.log(r/t)/Math.log(e)/i}},e.prototype.getState=function(){var t=this.getCenter(),e=this.getProjection(),r=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:r,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,r,n=this.minZoom_||0;if(this.resolutions_){var i=(0,d.linearFindNearest)(this.resolutions_,t,1);n=i,e=this.resolutions_[i],r=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(e/t)/Math.log(r)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=(0,v.clamp)(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(r,(0,v.clamp)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var r,n=e||{},i=n.size;i||(i=this.getSizeFromViewport_()),(0,p.assert)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?((0,p.assert)(!(0,_.isEmpty)(t),25),r=(0,m.fromExtent)(t)):t.getType()===y.default.CIRCLE?(t=t.getExtent(),(r=(0,m.fromExtent)(t)).rotate(this.getRotation(),(0,_.getCenter)(t))):r=t;var a,s=void 0!==n.padding?n.padding:[0,0,0,0],u=void 0!==n.nearest&&n.nearest;a=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;for(var c=r.getFlatCoordinates(),l=this.getRotation(),f=Math.cos(-l),d=Math.sin(-l),h=1/0,g=1/0,v=-1/0,b=-1/0,E=r.getStride(),S=0,j=c.length;S<j;S+=E){var O=c[S]*f-c[S+1]*d,P=c[S]*d+c[S+1]*f;h=Math.min(h,O),g=Math.min(g,P),v=Math.max(v,O),b=Math.max(b,P)}var T=this.getResolutionForExtent([h,g,v,b],[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);T=isNaN(T)?a:Math.max(T,a),T=this.getConstrainedResolution(T,u?0:1),d=-d;var C=(h+v)/2,I=(g+b)/2,w=[(C+=(s[1]-s[3])/2*T)*f-(I+=(s[0]-s[2])/2*T)*d,I*f+C*d],R=n.callback?n.callback:o.VOID;void 0!==n.duration?this.animate_({resolution:T,center:this.getConstrainedCenter(w,T),duration:n.duration,easing:n.easing},R):(this.targetResolution_=T,this.targetCenter_=w,this.applyTargetState_(!1,!0),x(R,!0))},e.prototype.centerOn=function(t,e,r){var n=this.getRotation(),i=Math.cos(-n),o=Math.sin(-n),a=t[0]*i-t[1]*o,s=t[1]*i+t[0]*o,u=this.getResolution(),c=(a+=(e[0]/2-r[0])*u)*i-(s+=(r[1]-e[1]/2)*u)*(o=-o),l=s*i+a*o;this.setCenter([c,l])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=this.targetCenter_;this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.getSizeFromViewport_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,r);void 0!==e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);void 0!==e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),i=this.getSizeFromViewport_(n),o=this.constraints_.resolution(this.targetResolution_,0,i,r),a=this.constraints_.center(this.targetCenter_,o,i,r);this.get(f.default.ROTATION)!==n&&this.set(f.default.ROTATION,n),this.get(f.default.RESOLUTION)!==o&&this.set(f.default.RESOLUTION,o),this.get(f.default.CENTER)&&(0,h.equals)(this.get(f.default.CENTER),a)||this.set(f.default.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations()},e.prototype.resolveConstraints=function(t,e,r){var n=void 0!==t?t:200,i=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getSizeFromViewport_(o),s=this.constraints_.resolution(this.targetResolution_,i,a),u=this.constraints_.center(this.targetCenter_,s,a);if(0===n)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=u,void this.applyTargetState_();this.getResolution()===s&&this.getRotation()===o&&this.getCenter()&&(0,h.equals)(this.getCenter(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animate_({rotation:o,center:u,resolution:s,duration:n,easing:g.easeOut,anchor:r}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(l.default.INTERACTING,1)},e.prototype.endInteraction=function(t,e,r){this.setHint(l.default.INTERACTING,-1),this.resolveConstraints(t,e,r)},e.prototype.getConstrainedCenter=function(t,e){var r=this.getSizeFromViewport_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)},e.prototype.getConstrainedZoom=function(t,e){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r))},e.prototype.getConstrainedResolution=function(t,e){var r=e||0,n=this.getSizeFromViewport_(this.getRotation());return this.constraints_.resolution(t,r,n)},e}(s.default);r.default=N},{"./tilegrid/common.js":"fd4f185cc527989274b79f8b54a07cff","./util.js":"4bb2f7213adce7213216789f3fd3a27b","./functions.js":"cafc68c692964009aaa3cf7333cf2956","./centerconstraint.js":"184117e03ee26bed93b425f82d2210be","./Object.js":"6c67600a5761ed2f245039657f77c37b","./resolutionconstraint.js":"156d7f3bfff467f037e04f53cfc9b64d","./rotationconstraint.js":"a9242152a2fff024565f25bb59c1ea72","./ViewHint.js":"1c64ac73cc5dd7506e286fe17f1044a9","./ViewProperty.js":"86ffd47856d2fd06f5ded6f8354af9ae","./array.js":"8f42dda010c04e4c3f5a3f294914ec2a","./asserts.js":"7e662a02bc41c2814316b69c70da50e2","./coordinate.js":"2a3e9645190015dfc3d4ed757193af4c","./easing.js":"8aefdec0c4be6700bf94b7f3aafa0ae8","./extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./geom/Polygon.js":"24ebc1624175b8546601860191490c20","./math.js":"6086e082317ce6ce8a1b47fb09fed63b","./obj.js":"33baacb9b92cb6097b890ee8b1ee5384","./proj.js":"62f54c55d8828c04c9cb79fe6933946b","./proj/Units.js":"aed7c8d781fca9ae0c0fa9c24383e0e4"}],fd4f185cc527989274b79f8b54a07cff:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_TILE_SIZE=r.DEFAULT_MAX_ZOOM=void 0;r.DEFAULT_MAX_ZOOM=42;r.DEFAULT_TILE_SIZE=256},{}],"184117e03ee26bed93b425f82d2210be":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createExtent=function(t,e,r){return function(i,o,a,s){if(i){var u=e?0:a[0]*o,c=e?0:a[1]*o,l=t[0]+u/2,f=t[2]-u/2,d=t[1]+c/2,p=t[3]-c/2;l>f&&(l=f=(f+l)/2),d>p&&(d=p=(p+d)/2);var h=(0,n.clamp)(i[0],l,f),g=(0,n.clamp)(i[1],d,p),_=30*o;return s&&r&&(h+=-_*Math.log(1+Math.max(0,l-i[0])/_)+_*Math.log(1+Math.max(0,i[0]-f)/_),g+=-_*Math.log(1+Math.max(0,d-i[1])/_)+_*Math.log(1+Math.max(0,i[1]-p)/_)),[h,g]}}},r.none=function(t){return t};var n=t("./math.js")},{"./math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],"156d7f3bfff467f037e04f53cfc9b64d":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createSnapToResolutions=function(t,e,r){return function(i,u,c,l){if(void 0!==i){var f=t[0],d=t[t.length-1],p=r?a(f,r,c):f;if(l)return void 0===e||e?s(i,p,d):(0,o.clamp)(i,d,p);var h=Math.min(p,i),g=Math.floor((0,n.linearFindNearest)(t,h,u));return t[g]}}},r.createSnapToPower=function(t,e,r,n,i){return function(u,c,l,f){if(void 0!==u){var d=i?a(e,i,l):e,p=void 0!==r?r:0;if(f)return void 0===n||n?s(u,d,p):(0,o.clamp)(u,p,d);var h=-c*(.5-1e-9)+.5,g=Math.min(d,u),_=Math.floor(Math.log(e/g)/Math.log(t)+h),y=e/Math.pow(t,_);return(0,o.clamp)(y,p,d)}}},r.createMinMaxResolution=function(t,e,r,n){return function(i,u,c,l){if(void 0!==i){var f=n?a(t,n,c):t;return(void 0===r||r)&&l?s(i,f,e):(0,o.clamp)(i,e,f)}}};var n=t("./array.js"),i=t("./extent.js"),o=t("./math.js");function a(t,e,r){var n=(0,i.getWidth)(e)/r[0],o=(0,i.getHeight)(e)/r[1];return Math.min(t,Math.min(n,o))}function s(t,e,r){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/t-1))/50+1),(0,o.clamp)(n,r/2,2*e)}},{"./array.js":"8f42dda010c04e4c3f5a3f294914ec2a","./extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],a9242152a2fff024565f25bb59c1ea72:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.disable=function(t){return void 0!==t?0:void 0},r.none=function(t){return void 0!==t?t:void 0},r.createSnapToN=function(t){var e=2*Math.PI/t;return function(t,r){return r?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}},r.createSnapToZero=function(t){var e=t||(0,n.toRadians)(5);return function(t,r){return r?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}};var n=t("./math.js")},{"./math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],"86ffd47856d2fd06f5ded6f8354af9ae":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},{}],fe9e2446a3d2d9fdc16d7af51e3294f8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=g(t("../Collection.js")),o=g(t("../CollectionEventType.js")),a=t("../Object.js"),s=g(t("../ObjectEventType.js")),u=t("../asserts.js"),c=t("../events.js"),l=g(t("../events/EventType.js")),f=t("../extent.js"),d=g(t("./Base.js")),p=t("../obj.js"),h=g(t("../source/State.js"));function g(t){return t&&t.__esModule?t:{default:t}}var _,y=(_=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),m={LAYERS:"layers"},v=function(t){function e(e){var r=this,n=e||{},o=(0,p.assign)({},n);delete o.layers;var s=n.layers;return(r=t.call(this,o)||this).layersListenerKeys_=[],r.listenerKeys_={},(0,c.listen)(r,(0,a.getChangeEventType)(m.LAYERS),r.handleLayersChanged_,r),s?Array.isArray(s)?s=new i.default(s.slice(),{unique:!0}):(0,u.assert)("function"==typeof s.getArray,43):s=new i.default(void 0,{unique:!0}),r.setLayers(s),r}return y(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(c.unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push((0,c.listen)(t,o.default.ADD,this.handleLayersAdd_,this),(0,c.listen)(t,o.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(c.unlistenByKey);(0,p.clear)(this.listenerKeys_);for(var r=t.getArray(),i=0,a=r.length;i<a;i++){var u=r[i];this.listenerKeys_[(0,n.getUid)(u)]=[(0,c.listen)(u,s.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,c.listen)(u,l.default.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[(0,n.getUid)(e)]=[(0,c.listen)(e,s.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,c.listen)(e,l.default.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,r=(0,n.getUid)(e);this.listenerKeys_[r].forEach(c.unlistenByKey),delete this.listenerKeys_[r],this.changed()},e.prototype.getLayers=function(){return this.get(m.LAYERS)},e.prototype.setLayers=function(t){this.set(m.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var n=this.getLayerState(),i=r,o=e.length;i<o;i++){var a=e[i];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=(0,f.getIntersection)(a.extent,n.extent):a.extent=n.extent)}return e},e.prototype.getSourceState=function(){return h.default.READY},e}(d.default);r.default=v},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../Collection.js":"6f090fc511268dcb6cf8b42e032e7c46","../CollectionEventType.js":"1a284b36b7148c11d579a4e84e9735c1","../Object.js":"6c67600a5761ed2f245039657f77c37b","../ObjectEventType.js":"dd0d876048dfd85d6a82a4a99353d0de","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Base.js":"82fc51284eae699c7de11fbb148099a9","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../source/State.js":"909be2fc812ab85b41263e2e8ec87f92"}],f20e5446e37aa2c395fbeb406aabfc05:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.buffer=function(t,e,r){void 0===r&&(r=[0,0]);return r[0]=t[0]+2*e,r[1]=t[1]+2*e,r},r.hasArea=function(t){return t[0]>0&&t[1]>0},r.scale=function(t,e,r){void 0===r&&(r=[0,0]);return r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r},r.toSize=function(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}},{}],"8fb8940e6e1e773e28b7dc9c3322d2ba":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaults=function(t){var e=t||{},r=new n.default;(void 0===e.zoom||e.zoom)&&r.push(new a.default(e.zoomOptions));(void 0===e.rotate||e.rotate)&&r.push(new o.default(e.rotateOptions));(void 0===e.attribution||e.attribution)&&r.push(new i.default(e.attributionOptions));return r},Object.defineProperty(r,"Attribution",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Rotate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Zoom",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Control",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"FullScreen",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"MousePosition",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"OverviewMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"ScaleLine",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"ZoomSlider",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"ZoomToExtent",{enumerable:!0,get:function(){return p.default}});var n=h(t("./Collection.js")),i=h(t("./control/Attribution.js")),o=h(t("./control/Rotate.js")),a=h(t("./control/Zoom.js")),s=h(t("./control/Control.js")),u=h(t("./control/FullScreen.js")),c=h(t("./control/MousePosition.js")),l=h(t("./control/OverviewMap.js")),f=h(t("./control/ScaleLine.js")),d=h(t("./control/ZoomSlider.js")),p=h(t("./control/ZoomToExtent.js"));function h(t){return t&&t.__esModule?t:{default:t}}},{"./Collection.js":"6f090fc511268dcb6cf8b42e032e7c46","./control/Attribution.js":"791f67c67f9c02f84431285fbf591cf3","./control/Rotate.js":"65960d2249fad1259290a4daabf2b668","./control/Zoom.js":"881d93da442f305f50d9d8504606201b","./control/Control.js":"3635be78329f50daffde3ad5a708ec9a","./control/FullScreen.js":"3fac51bf382441bdce434f6892e50d21","./control/MousePosition.js":"7a5ef29fad9c275958a80a4f258c90c7","./control/OverviewMap.js":"bae4c10f2780535586870f26b4c4ed48","./control/ScaleLine.js":"0d1170ca39921fbfc63b8e514cb7316a","./control/ZoomSlider.js":"1f77eccea7fbb37b27b6bd59cfd0c09d","./control/ZoomToExtent.js":"b68e1acda4a4a7f475fa4d4164d1f3dc"}],"791f67c67f9c02f84431285fbf591cf3":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.render=p,r.default=void 0;var n=t("../array.js"),i=l(t("./Control.js")),o=t("../css.js"),a=t("../dom.js"),s=t("../events.js"),u=l(t("../events/EventType.js")),c=t("../layer/Layer.js");function l(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function p(t){this.updateElement_(t.frameState)}var h=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||p,target:n.target})||this).ulElement_=document.createElement("ul"),r.collapsed_=void 0===n.collapsed||n.collapsed,r.overrideCollapsible_=void 0!==n.collapsible,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1);var i=void 0!==n.className?n.className:"ol-attribution",a=void 0!==n.tipLabel?n.tipLabel:"Attributions",c=void 0!==n.collapseLabel?n.collapseLabel:"»";"string"==typeof c?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=c):r.collapseLabel_=c;var l=void 0!==n.label?n.label:"i";"string"==typeof l?(r.label_=document.createElement("span"),r.label_.textContent=l):r.label_=l;var f=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,d=document.createElement("button");d.setAttribute("type","button"),d.title=a,d.appendChild(f),(0,s.listen)(d,u.default.CLICK,r.handleClick_,r);var h=i+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL+(r.collapsed_&&r.collapsible_?" "+o.CLASS_COLLAPSED:"")+(r.collapsible_?"":" ol-uncollapsible"),g=r.element;return g.className=h,g.appendChild(r.ulElement_),g.appendChild(d),r.renderedAttributions_=[],r.renderedVisible_=!0,r}return d(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},r=[],n=t.layerStatesArray,i=0,o=n.length;i<o;++i){var a=n[i];if((0,c.inView)(a,t.viewState)){var s=a.layer.getSource();if(s){var u=s.getAttributions();if(u){var l=u(t);if(l)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(l))for(var f=0,d=l.length;f<d;++f)l[f]in e||(r.push(l[f]),e[l[f]]=!0);else l in e||(r.push(l),e[l]=!0)}}}}return r},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!(0,n.equals)(e,this.renderedAttributions_)){(0,a.removeChildren)(this.ulElement_);for(var i=0,o=e.length;i<o;++i){var s=document.createElement("li");s.innerHTML=e[i],this.ulElement_.appendChild(s)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(o.CLASS_COLLAPSED),this.collapsed_?(0,a.replaceNode)(this.collapseLabel_,this.label_):(0,a.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(i.default);r.default=h},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","./Control.js":"3635be78329f50daffde3ad5a708ec9a","../css.js":"f85c5145e7d341bc4a345e62bbff4738","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../layer/Layer.js":"59dd6581292a9dd63695ea43a8043d57"}],"3635be78329f50daffde3ad5a708ec9a":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../functions.js"),i=u(t("../MapEventType.js")),o=u(t("../Object.js")),a=t("../dom.js"),s=t("../events.js");function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e){var r=t.call(this)||this;return r.element=e.element?e.element:null,r.target_=null,r.map_=null,r.listenerKeys=[],r.render=e.render?e.render:n.VOID,e.target&&r.setTarget(e.target),r}return l(e,t),e.prototype.disposeInternal=function(){(0,a.removeNode)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&(0,a.removeNode)(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)(0,s.unlistenByKey)(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==n.VOID&&this.listenerKeys.push((0,s.listen)(t,i.default.POSTRENDER,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(o.default);r.default=f},{"../functions.js":"cafc68c692964009aaa3cf7333cf2956","../MapEventType.js":"c5f9a31032c688f6115b47b952057e83","../Object.js":"6c67600a5761ed2f245039657f77c37b","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../events.js":"47affab92622893273981942c85f03c7"}],"65960d2249fad1259290a4daabf2b668":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.render=f,r.default=void 0;var n=u(t("./Control.js")),i=t("../css.js"),o=t("../easing.js"),a=t("../events.js"),s=u(t("../events/EventType.js"));function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function f(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var o=this.element.classList.contains(i.CLASS_HIDDEN);o||0!==r?o&&0!==r&&this.element.classList.remove(i.CLASS_HIDDEN):this.element.classList.add(i.CLASS_HIDDEN)}this.label_.style.transform=n}this.rotation_=r}}var d=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),render:n.render||f,target:n.target})||this;var o=void 0!==n.className?n.className:"ol-rotate",u=void 0!==n.label?n.label:"⇧";r.label_=null,"string"==typeof u?(r.label_=document.createElement("span"),r.label_.className="ol-compass",r.label_.textContent=u):(r.label_=u,r.label_.classList.add("ol-compass"));var c=n.tipLabel?n.tipLabel:"Reset rotation",l=document.createElement("button");l.className=o+"-reset",l.setAttribute("type","button"),l.title=c,l.appendChild(r.label_),(0,a.listen)(l,s.default.CLICK,r.handleClick_,r);var d=o+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL,p=r.element;return p.className=d,p.appendChild(l),r.callResetNorth_=n.resetNorth?n.resetNorth:void 0,r.duration_=void 0!==n.duration?n.duration:250,r.autoHide_=void 0===n.autoHide||n.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(i.CLASS_HIDDEN),r}return l(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):t.setRotation(0))},e}(n.default);r.default=d},{"./Control.js":"3635be78329f50daffde3ad5a708ec9a","../css.js":"f85c5145e7d341bc4a345e62bbff4738","../easing.js":"8aefdec0c4be6700bf94b7f3aafa0ae8","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2"}],"881d93da442f305f50d9d8504606201b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../events.js"),i=u(t("../events/EventType.js")),o=u(t("./Control.js")),a=t("../css.js"),s=t("../easing.js");function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e){var r=this,o=e||{};r=t.call(this,{element:document.createElement("div"),target:o.target})||this;var s=void 0!==o.className?o.className:"ol-zoom",u=void 0!==o.delta?o.delta:1,c=void 0!==o.zoomInLabel?o.zoomInLabel:"+",l=void 0!==o.zoomOutLabel?o.zoomOutLabel:"−",f=void 0!==o.zoomInTipLabel?o.zoomInTipLabel:"Zoom in",d=void 0!==o.zoomOutTipLabel?o.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s+"-in",p.setAttribute("type","button"),p.title=f,p.appendChild("string"==typeof c?document.createTextNode(c):c),(0,n.listen)(p,i.default.CLICK,r.handleClick_.bind(r,u));var h=document.createElement("button");h.className=s+"-out",h.setAttribute("type","button"),h.title=d,h.appendChild("string"==typeof l?document.createTextNode(l):l),(0,n.listen)(h,i.default.CLICK,r.handleClick_.bind(r,-u));var g=s+" "+a.CLASS_UNSELECTABLE+" "+a.CLASS_CONTROL,_=r.element;return _.className=g,_.appendChild(p),_.appendChild(h),r.duration_=void 0!==o.duration?o.duration:250,r}return l(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var r=e.getZoom();if(void 0!==r){var n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:s.easeOut})):e.setZoom(n)}}},e}(o.default);r.default=f},{"../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","./Control.js":"3635be78329f50daffde3ad5a708ec9a","../css.js":"f85c5145e7d341bc4a345e62bbff4738","../easing.js":"8aefdec0c4be6700bf94b7f3aafa0ae8"}],"3fac51bf382441bdce434f6892e50d21":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(t("./Control.js")),i=t("../css.js"),o=t("../dom.js"),a=t("../events.js"),s=u(t("../events/EventType.js"));function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function d(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function p(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function h(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var g=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).cssClassName_=void 0!==n.className?n.className:"ol-full-screen";var o=void 0!==n.label?n.label:"⤢";r.labelNode_="string"==typeof o?document.createTextNode(o):o;var u=void 0!==n.labelActive?n.labelActive:"×";r.labelActiveNode_="string"==typeof u?document.createTextNode(u):u,r.button_=document.createElement("button");var c=n.tipLabel?n.tipLabel:"Toggle full-screen";r.setClassName_(r.button_,p()),r.button_.setAttribute("type","button"),r.button_.title=c,r.button_.appendChild(r.labelNode_),(0,a.listen)(r.button_,s.default.CLICK,r.handleClick_,r);var l=r.cssClassName_+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL+" "+(d()?"":i.CLASS_UNSUPPORTED),f=r.element;return f.className=l,f.appendChild(r.button_),r.keys_=void 0!==n.keys&&n.keys,r.source_=n.source,r}return l(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(d()){var t=this.getMap();if(t)if(p())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e=void 0;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():h(t)}(e):h(e)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();p()?(this.setClassName_(this.button_,!0),(0,o.replaceNode)(this.labelActiveNode_,this.labelNode_)):(this.setClassName_(this.button_,!1),(0,o.replaceNode)(this.labelNode_,this.labelActiveNode_)),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var r=this.cssClassName_+"-true",n=this.cssClassName_+"-false",i=e?r:n;t.classList.remove(r),t.classList.remove(n),t.classList.add(i)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e)for(var r=0,n=f.length;r<n;++r)this.listenerKeys.push((0,a.listen)(document,f[r],this.handleFullScreenChange_,this))},e}(n.default);r.default=g},{"./Control.js":"3635be78329f50daffde3ad5a708ec9a","../css.js":"f85c5145e7d341bc4a345e62bbff4738","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2"}],"7a5ef29fad9c275958a80a4f258c90c7":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.render=d,r.default=void 0;var n=t("../events.js"),i=u(t("../events/EventType.js")),o=t("../Object.js"),a=u(t("./Control.js")),s=t("../proj.js");function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f="projection";function d(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}var p=function(t){function e(e){var r=this,i=e||{},a=document.createElement("div");return a.className=void 0!==i.className?i.className:"ol-mouse-position",r=t.call(this,{element:a,render:i.render||d,target:i.target})||this,(0,n.listen)(r,(0,o.getChangeEventType)(f),r.handleProjectionChanged_,r),i.coordinateFormat&&r.setCoordinateFormat(i.coordinateFormat),i.projection&&r.setProjection(i.projection),r.undefinedHTML_=void 0!==i.undefinedHTML?i.undefinedHTML:"&#160;",r.renderOnMouseOut_=!!r.undefinedHTML_,r.renderedHTML_=a.innerHTML,r.mapProjection_=null,r.transform_=null,r}return l(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get(f)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var r=e.getViewport();this.listenerKeys.push((0,n.listen)(r,i.default.MOUSEMOVE,this.handleMouseMove,this),(0,n.listen)(r,i.default.TOUCHSTART,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,n.listen)(r,i.default.MOUSEOUT,this.handleMouseOut,this),(0,n.listen)(r,i.default.TOUCHEND,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set(f,(0,s.get)(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?(0,s.getTransformFromProjections)(this.mapProjection_,r):s.identityTransform}var n=this.getMap().getCoordinateFromPixel(t);if(n){this.transform_(n,n);var i=this.getCoordinateFormat();e=i?i(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(a.default);r.default=p},{"../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../Object.js":"6c67600a5761ed2f245039657f77c37b","./Control.js":"3635be78329f50daffde3ad5a708ec9a","../proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],bae4c10f2780535586870f26b4c4ed48:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.render=j,r.default=void 0;var n=v(t("../PluggableMap.js")),i=v(t("../renderer/Composite.js")),o=v(t("../MapEventType.js")),a=v(t("../MapProperty.js")),s=t("../Object.js"),u=v(t("../ObjectEventType.js")),c=v(t("../Overlay.js")),l=v(t("../OverlayPositioning.js")),f=v(t("../ViewProperty.js")),d=v(t("./Control.js")),p=t("../coordinate.js"),h=t("../css.js"),g=t("../dom.js"),_=t("../events.js"),y=v(t("../events/EventType.js")),m=t("../extent.js");function v(t){return t&&t.__esModule?t:{default:t}}var b,E=(b=function(t,e){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.createRenderer=function(){return new i.default(this)},e}(n.default);function j(t){this.validateExtent_(),this.updateBox_()}var O=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||j,target:n.target})||this).collapsed_=void 0===n.collapsed||n.collapsed,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1);var i=void 0!==n.className?n.className:"ol-overviewmap",o=void 0!==n.tipLabel?n.tipLabel:"Overview map",a=void 0!==n.collapseLabel?n.collapseLabel:"«";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var s=void 0!==n.label?n.label:"»";"string"==typeof s?(r.label_=document.createElement("span"),r.label_.textContent=s):r.label_=s;var u=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,f=document.createElement("button");f.setAttribute("type","button"),f.title=o,f.appendChild(u),(0,_.listen)(f,y.default.CLICK,r.handleClick_,r),r.ovmapDiv_=document.createElement("div"),r.ovmapDiv_.className="ol-overviewmap-map",r.ovmap_=new S({view:n.view});var d=r.ovmap_;n.layers&&n.layers.forEach(function(t){d.addLayer(t)});var p=document.createElement("div");p.className="ol-overviewmap-box",p.style.boxSizing="border-box",r.boxOverlay_=new c.default({position:[0,0],positioning:l.default.BOTTOM_LEFT,element:p}),r.ovmap_.addOverlay(r.boxOverlay_);var g=i+" "+h.CLASS_UNSELECTABLE+" "+h.CLASS_CONTROL+(r.collapsed_&&r.collapsible_?" "+h.CLASS_COLLAPSED:"")+(r.collapsible_?"":" ol-uncollapsible"),m=r.element;m.className=g,m.appendChild(r.ovmapDiv_),m.appendChild(f);var v=r,b=r.boxOverlay_,E=r.boxOverlay_.getElement(),O=function(t){var e,r={clientX:(e=t).clientX-E.offsetWidth/2,clientY:e.clientY+E.offsetHeight/2},n=d.getEventCoordinate(r);b.setPosition(n)},P=function(t){var e=d.getEventCoordinate(t);v.getMap().getView().setCenter(e),window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",P)};return E.addEventListener("mousedown",function(){window.addEventListener("mousemove",O),window.addEventListener("mouseup",P)}),r}return E(e,t),e.prototype.setMap=function(e){var r=this.getMap();if(e!==r){if(r){var n=r.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,_.listen)(e,u.default.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===a.default.VIEW){var e=t.oldValue;e&&this.unbindView_(e);var r=this.getMap().getView();this.bindView_(r)}},e.prototype.bindView_=function(t){(0,_.listen)(t,(0,s.getChangeEventType)(f.default.ROTATION),this.handleRotationChanged_,this)},e.prototype.unbindView_=function(t){(0,_.unlisten)(t,(0,s.getChangeEventType)(f.default.ROTATION),this.handleRotationChanged_,this)},e.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView().calculateExtent(r),i=e.getSize(),o=e.getView().calculateExtent(i),a=e.getPixelFromCoordinate((0,m.getTopLeft)(n)),s=e.getPixelFromCoordinate((0,m.getBottomRight)(n)),u=Math.abs(a[0]-s[0]),c=Math.abs(a[1]-s[1]),l=i[0],f=i[1];u<.1*l||c<.1*f||u>.75*l||c>.75*f?this.resetExtent_():(0,m.containsExtent)(o,n)||this.recenter_()}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getSize(),n=t.getView().calculateExtent(r),i=e.getView(),o=Math.log(7.5)/Math.LN2,a=1/(.1*Math.pow(2,o/2));(0,m.scaleFromCenter)(n,a),i.fit(n)},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getView();e.getView().setCenter(r.getCenter())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView(),i=e.getView(),o=n.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),u=n.calculateExtent(r),c=i.getResolution(),l=(0,m.getBottomLeft)(u),f=(0,m.getTopRight)(u),d=this.calculateCoordinateRotate_(o,l);a.setPosition(d),s&&(s.style.width=Math.abs((l[0]-f[0])/c)+"px",s.style.height=Math.abs((f[1]-l[1])/c)+"px")}},e.prototype.calculateCoordinateRotate_=function(t,e){var r,n=this.getMap().getView().getCenter();return n&&(r=[e[0]-n[0],e[1]-n[1]],(0,p.rotate)(r,t),(0,p.add)(r,n)),r},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(h.CLASS_COLLAPSED),this.collapsed_?(0,g.replaceNode)(this.collapseLabel_,this.label_):(0,g.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),(0,_.listenOnce)(t,o.default.POSTRENDER,function(t){this.updateBox_()},this))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(d.default);r.default=O},{"../PluggableMap.js":"e22d5f9155b17e6aa985e9372b52268a","../renderer/Composite.js":"596d23db2ccab94a13524bbe3ae85d8d","../MapEventType.js":"c5f9a31032c688f6115b47b952057e83","../MapProperty.js":"5b775bb8b0a24c416ceef1220d83ce65","../Object.js":"6c67600a5761ed2f245039657f77c37b","../ObjectEventType.js":"dd0d876048dfd85d6a82a4a99353d0de","../Overlay.js":"c22a22a037eb751272758871a4e79f08","../OverlayPositioning.js":"79d41add27441e3b2ce7d576004be179","../ViewProperty.js":"86ffd47856d2fd06f5ded6f8354af9ae","./Control.js":"3635be78329f50daffde3ad5a708ec9a","../coordinate.js":"2a3e9645190015dfc3d4ed757193af4c","../css.js":"f85c5145e7d341bc4a345e62bbff4738","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b"}],"596d23db2ccab94a13524bbe3ae85d8d":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../css.js"),i=t("../layer/Layer.js"),o=p(t("../render/Event.js")),a=p(t("../render/EventType.js")),s=p(t("./Map.js")),u=p(t("../source/State.js")),c=t("../dom.js"),l=t("../render/canvas.js"),f=p(t("../events/EventType.js")),d=t("../events.js");function p(t){return t&&t.__esModule?t:{default:t}}var h,g=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),_=function(t){function e(e){var r=t.call(this,e)||this;r.labelCacheKey_=(0,d.listen)(l.labelCache,f.default.CLEAR,e.redrawText.bind(e)),r.element_=document.createElement("div");var i=r.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",r.element_.className=n.CLASS_UNSELECTABLE+" ol-layers";var o=e.getViewport();return o.insertBefore(r.element_,o.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return g(e,t),e.prototype.dispatchRenderEvent=function(t,e){var r=this.getMap();if(r.hasListener(t)){var n=new o.default(t,void 0,e);r.dispatchEvent(n)}},e.prototype.disposeInternal=function(){(0,d.unlistenByKey)(this.labelCacheKey_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(a.default.PRECOMPOSE,e);var r=e.layerStatesArray.sort(function(t,e){return t.zIndex-e.zIndex}),n=e.viewState;this.children_.length=0;for(var o=!1,s=null,l=0,f=r.length;l<f;++l){var d=r[l];if(o=o||d.hasOverlay,e.layerIndex=l,(0,i.inView)(d,n)&&(d.sourceState==u.default.READY||d.sourceState==u.default.UNDEFINED)){var p=d.layer.render(e,s);p&&(p===s&&l!=f-1||2!==p.childElementCount||o||p.removeChild(p.lastElementChild),p!==s&&(this.children_.push(p),o=!1,s=p))}}t.prototype.renderFrame.call(this,e),(0,c.replaceChildren)(this.element_,this.children_),this.dispatchRenderEvent(a.default.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,r,n,o){for(var a=e.viewState,s=e.layerStatesArray,u=s.length-1;u>=0;--u){var c=s[u],l=c.layer;if(l.hasRenderer()&&(0,i.inView)(c,a)&&o(l)){var f=l.getRenderer().getDataAtPixel(t,e,r);if(f){var d=n(l,f);if(d)return d}}}},e}(s.default);r.default=_},{"../css.js":"f85c5145e7d341bc4a345e62bbff4738","../layer/Layer.js":"59dd6581292a9dd63695ea43a8043d57","../render/Event.js":"fe3cc0231c991e2f976e0a3ddb4a5068","../render/EventType.js":"06d6dd10e6aec33ecdd51285aca01fbb","./Map.js":"878f3ca4bb5f8c95bf4a73956ca013a6","../source/State.js":"909be2fc812ab85b41263e2e8ec87f92","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../render/canvas.js":"89843263bd71c58765f4fe7d95f6f63c","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../events.js":"47affab92622893273981942c85f03c7"}],"878f3ca4bb5f8c95bf4a73956ca013a6":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../util.js"),o=(n=t("../Disposable.js"))&&n.__esModule?n:{default:n},a=t("../extent.js"),s=t("../functions.js"),u=t("../layer/Layer.js"),c=t("../style/IconImageCache.js"),l=t("../transform.js"),f=t("../render.js");var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function h(t,e){c.shared.expire()}var g=function(t){function e(e){var r=t.call(this)||this;return r.map_=e,r.declutterTree_=null,r}return p(e,t),e.prototype.dispatchRenderEvent=function(t,e){(0,i.abstract)()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;(0,l.compose)(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,l.makeInverse)(n,r)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,o,s,c){var l,f=e.viewState;function d(t,r,a){if(!((0,i.getUid)(r)in e.skippedFeatureUids)||t)return n.call(o,r,t?a:null)}var p=f.projection,h=t;if(p.canWrapX()){var g=p.getExtent(),_=(0,a.getWidth)(g),y=t[0];if(y<g[0]||y>g[2])h=[y+_*Math.ceil((g[0]-y)/_),t[1]]}var m,v,b=e.layerStatesArray,E=b.length;for(this.declutterTree_&&(m=this.declutterTree_.all().map(function(t){return t.value})),v=E-1;v>=0;--v){var S=b[v],j=S.layer;if(j.hasRenderer()&&(0,u.inView)(S,f)&&s.call(c,j)){var O=j.getRenderer(),P=j.getSource();if(O&&P){var T=d.bind(null,S.managed);l=O.forEachFeatureAtCoordinate(P.getWrapX()?h:t,e,r,T,m)}if(l)return l}}},e.prototype.forEachLayerAtPixel=function(t,e,r,n,o){return(0,i.abstract)()},e.prototype.hasFeatureAtCoordinate=function(t,e,r,n,i){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,s.TRUE,this,n,i)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=(0,f.renderDeclutterItems)(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){c.shared.canExpireCache()&&t.postRenderFunctions.push(h)},e}(o.default);r.default=g},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../Disposable.js":"d4605e3cdc6ca501dd4bed20a4731b8c","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../functions.js":"cafc68c692964009aaa3cf7333cf2956","../layer/Layer.js":"59dd6581292a9dd63695ea43a8043d57","../style/IconImageCache.js":"a4e44e0a5c7b764913a7e624491db1fc","../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928","../render.js":"c56a55f11fca331cab1321bc7ee520c8"}],a4e44e0a5c7b764913a7e624491db1fc:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shared=r.default=void 0;var n=t("../color.js"),i=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,r){var n=o(t,e,r);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,r,n){var i=o(t,e,r);this.cache_[i]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function o(t,e,r){return e+":"+t+":"+(r?(0,n.asString)(r):"null")}var a=i;r.default=a;var s=new i;r.shared=s},{"../color.js":"15b4c40f3e4cfb63cb3cc4b2798c1fb2"}],c56a55f11fca331cab1321bc7ee520c8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toContext=function(t,e){var r=t.canvas,n=e||{},s=n.pixelRatio||i.DEVICE_PIXEL_RATIO,u=n.size;u&&(r.width=u[0]*s,r.height=u[1]*s,r.style.width=u[0]+"px",r.style.height=u[1]+"px");var c=[0,0,r.width,r.height],l=(0,o.scale)((0,o.create)(),s,s);return new a.default(t,s,c,l,0)},r.getVectorContext=function(t){var e=t.frameState,r=(0,o.multiply)(t.inversePixelTransform.slice(),e.coordinateToPixelTransform);return new a.default(t.context,e.pixelRatio,e.extent,r,e.viewState.rotation)},r.getRenderPixel=function(t,e){var r=e.slice(0);return(0,o.apply)(t.inversePixelTransform.slice(),r),r},r.renderDeclutterItems=function(t,e){e&&e.clear();for(var r=t.declutterItems,n=r.length-1;n>=0;--n)for(var i=r[n],o=i.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],i.opacity,e);return r.length=0,e};var n,i=t("./has.js"),o=t("./transform.js"),a=(n=t("./render/canvas/Immediate.js"))&&n.__esModule?n:{default:n}},{"./has.js":"277cbb6fb57ab1c8c5545fe37fb5daba","./transform.js":"2cfeb6b6111a4a4a4e18e3429d625928","./render/canvas/Immediate.js":"96342bca4519c963868b8513f02905e8"}],"96342bca4519c963868b8513f02905e8":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../../array.js"),i=t("../../colorlike.js"),o=t("../../extent.js"),a=d(t("../../geom/GeometryType.js")),s=t("../../geom/SimpleGeometry.js"),u=t("../../geom/flat/transform.js"),c=d(t("../VectorContext.js")),l=t("../canvas.js"),f=t("../../transform.js");function d(t){return t&&t.__esModule?t:{default:t}}var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g=function(t){function e(e,r,n,i,o){var a=t.call(this)||this;return a.context_=e,a.pixelRatio_=r,a.extent_=n,a.transform_=i,a.viewRotation_=o,a.contextFillState_=null,a.contextStrokeState_=null,a.contextTextState_=null,a.fillState_=null,a.strokeState_=null,a.image_=null,a.imageAnchorX_=0,a.imageAnchorY_=0,a.imageHeight_=0,a.imageOpacity_=0,a.imageOriginX_=0,a.imageOriginY_=0,a.imageRotateWithView_=!1,a.imageRotation_=0,a.imageScale_=0,a.imageWidth_=0,a.text_="",a.textOffsetX_=0,a.textOffsetY_=0,a.textRotateWithView_=!1,a.textRotation_=0,a.textScale_=0,a.textFillState_=null,a.textStrokeState_=null,a.textState_=null,a.pixelCoordinates_=[],a.tmpLocalTransform_=(0,f.create)(),a}return h(e,t),e.prototype.drawImages_=function(t,e,r,n){if(this.image_){var i=(0,u.transform2D)(t,e,r,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var c=this.imageRotation_;this.imageRotateWithView_&&(c+=this.viewRotation_);for(var l=0,d=i.length;l<d;l+=2){var p=i[l]-this.imageAnchorX_,h=i[l+1]-this.imageAnchorY_;if(0!==c||1!=this.imageScale_){var g=p+this.imageAnchorX_,_=h+this.imageAnchorY_;(0,f.compose)(a,g,_,this.imageScale_,this.imageScale_,c,-g,-_),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,h,this.imageWidth_,this.imageHeight_)}0===c&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=(0,u.transform2D)(t,e,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){var s=i[e]+this.textOffsetX_,c=i[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var l=(0,f.compose)(this.tmpLocalTransform_,s,c,this.textScale_,this.textScale_,a,-s,-c);o.setTransform.apply(o,l)}this.textStrokeState_&&o.strokeText(this.text_,s,c),this.textFillState_&&o.fillText(this.text_,s,c)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,r,n,i){var o=this.context_,a=(0,u.transform2D)(t,e,r,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var c=2;c<s;c+=2)o.lineTo(a[c],a[c+1]);return i&&o.closePath(),r},e.prototype.drawRings_=function(t,e,r,n){for(var i=0,o=r.length;i<o;++i)e=this.moveToLineTo_(t,e,r[i],n,!0);return e},e.prototype.drawCircle=function(t){if((0,o.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,s.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],i=Math.sqrt(r*r+n*n),a=this.context_;a.beginPath(),a.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case a.default.POINT:this.drawPoint(t);break;case a.default.LINE_STRING:this.drawLineString(t);break;case a.default.POLYGON:this.drawPolygon(t);break;case a.default.MULTI_POINT:this.drawMultiPoint(t);break;case a.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case a.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case a.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case a.default.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var r=e.getGeometryFunction()(t);r&&(0,o.intersects)(this.extent_,r.getExtent())&&(this.setStyle(e),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawLineString=function(t){if((0,o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if((0,o.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,n=t.getFlatCoordinates(),i=0,a=t.getEnds(),s=t.getStride();r.beginPath();for(var u=0,c=a.length;u<c;++u)i=this.moveToLineTo_(n,i,a[u],s,!1);r.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if((0,o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if((0,o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),n=0,i=t.getEndss(),a=t.getStride();e.beginPath();for(var s=0,u=i.length;s<u;++s){var c=i[s];n=this.drawRings_(r,n,c,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=e.lineCap=t.lineCap),e.setLineDash&&((0,n.equals)(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:l.defaultTextAlign;r?(r.font!=t.font&&(r.font=e.font=t.font),r.textAlign!=n&&(r.textAlign=e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var r=t.getColor();this.fillState_={fillStyle:(0,i.asColorLike)(r||l.defaultFillStyle)}}else this.fillState_=null;if(e){var n=e.getColor(),o=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),u=e.getLineJoin(),c=e.getWidth(),f=e.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:l.defaultLineCap,lineDash:a||l.defaultLineDash,lineDashOffset:s||l.defaultLineDashOffset,lineJoin:void 0!==u?u:l.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==c?c:l.defaultLineWidth),miterLimit:void 0!==f?f:l.defaultMiterLimit,strokeStyle:(0,i.asColorLike)(n||l.defaultStrokeStyle)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),r=t.getImage(1),n=t.getOrigin(),i=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=i[1],this.image_=r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=i[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:(0,i.asColorLike)(r||l.defaultFillStyle)}}else this.textFillState_=null;var n=t.getStroke();if(n){var o=n.getColor(),a=n.getLineCap(),s=n.getLineDash(),u=n.getLineDashOffset(),c=n.getLineJoin(),f=n.getWidth(),d=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:l.defaultLineCap,lineDash:s||l.defaultLineDash,lineDashOffset:u||l.defaultLineDashOffset,lineJoin:void 0!==c?c:l.defaultLineJoin,lineWidth:void 0!==f?f:l.defaultLineWidth,miterLimit:void 0!==d?d:l.defaultMiterLimit,strokeStyle:(0,i.asColorLike)(o||l.defaultStrokeStyle)}}else this.textStrokeState_=null;var p=t.getFont(),h=t.getOffsetX(),g=t.getOffsetY(),_=t.getRotateWithView(),y=t.getRotation(),m=t.getScale(),v=t.getText(),b=t.getTextAlign(),E=t.getTextBaseline();this.textState_={font:void 0!==p?p:l.defaultFont,textAlign:void 0!==b?b:l.defaultTextAlign,textBaseline:void 0!==E?E:l.defaultTextBaseline},this.text_=void 0!==v?v:"",this.textOffsetX_=void 0!==h?this.pixelRatio_*h:0,this.textOffsetY_=void 0!==g?this.pixelRatio_*g:0,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0!==y?y:0,this.textScale_=this.pixelRatio_*(void 0!==m?m:1)}else this.text_=""},e}(c.default);r.default=g},{"../../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../../colorlike.js":"b60b82b020672980b1ec294b2afd8fc9","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../../geom/SimpleGeometry.js":"2c201efc98ebdf5eedf2ad5e7989cb8b","../../geom/flat/transform.js":"4c8bbdedb02c72e6aff9d71cb3a76316","../VectorContext.js":"09fd68b52f8ae252e7f1da12b616a424","../canvas.js":"89843263bd71c58765f4fe7d95f6f63c","../../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928"}],c22a22a037eb751272758871a4e79f08:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(t("./MapEventType.js")),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Object.js")),o=l(t("./OverlayPositioning.js")),a=t("./css.js"),s=t("./dom.js"),u=t("./events.js"),c=t("./extent.js");function l(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},h=function(t){function e(e){var r=t.call(this)||this;return r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container "+a.CLASS_SELECTABLE,r.element.style.position="absolute",r.autoPan=void 0!==e.autoPan&&e.autoPan,r.autoPanAnimation=e.autoPanAnimation||{},r.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,r.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},r.mapPostrenderListenerKey=null,(0,u.listen)(r,(0,i.getChangeEventType)(p.ELEMENT),r.handleElementChanged,r),(0,u.listen)(r,(0,i.getChangeEventType)(p.MAP),r.handleMapChanged,r),(0,u.listen)(r,(0,i.getChangeEventType)(p.OFFSET),r.handleOffsetChanged,r),(0,u.listen)(r,(0,i.getChangeEventType)(p.POSITION),r.handlePositionChanged,r),(0,u.listen)(r,(0,i.getChangeEventType)(p.POSITIONING),r.handlePositioningChanged,r),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(void 0!==e.positioning?e.positioning:o.default.TOP_LEFT),void 0!==e.position&&r.setPosition(e.position),r}return d(e,t),e.prototype.getElement=function(){return this.get(p.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(p.MAP)},e.prototype.getOffset=function(){return this.get(p.OFFSET)},e.prototype.getPosition=function(){return this.get(p.POSITION)},e.prototype.getPositioning=function(){return this.get(p.POSITIONING)},e.prototype.handleElementChanged=function(){(0,s.removeChildren)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,s.removeNode)(this.element),(0,u.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,u.listen)(t,n.default.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(p.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(p.ELEMENT,t)},e.prototype.setMap=function(t){this.set(p.MAP,t)},e.prototype.setOffset=function(t){this.set(p.OFFSET,t)},e.prototype.setPosition=function(t){this.set(p.POSITION,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),n=this.getRect(r,[(0,s.outerWidth)(r),(0,s.outerHeight)(r)]),i=this.autoPanMargin;if(!(0,c.containsExtent)(e,n)){var o=n[0]-e[0],a=e[2]-n[2],u=n[1]-e[1],l=e[3]-n[3],f=[0,0];if(o<0?f[0]=o-i:a<0&&(f[0]=Math.abs(a)+i),u<0?f[1]=u-i:l<0&&(f[1]=Math.abs(l)+i),0!==f[0]||0!==f[1]){var d=t.getView().getCenter(),p=t.getPixelFromCoordinate(d),h=[p[0]+f[0],p[1]+f[1]];t.getView().animate({center:t.getCoordinateFromPixel(h),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,i=r.top+window.pageYOffset;return[n,i,n+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(p.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,n=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var a=n[0],s=n[1];if(i==o.default.BOTTOM_RIGHT||i==o.default.CENTER_RIGHT||i==o.default.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=r.left="");var u=Math.round(e[0]-t[0]-a)+"px";this.rendered.right_!=u&&(this.rendered.right_=r.right=u)}else{""!==this.rendered.right_&&(this.rendered.right_=r.right=""),i!=o.default.BOTTOM_CENTER&&i!=o.default.CENTER_CENTER&&i!=o.default.TOP_CENTER||(a-=this.element.offsetWidth/2);var c=Math.round(t[0]+a)+"px";this.rendered.left_!=c&&(this.rendered.left_=r.left=c)}if(i==o.default.BOTTOM_LEFT||i==o.default.BOTTOM_CENTER||i==o.default.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=r.top="");var l=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=l&&(this.rendered.bottom_=r.bottom=l)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=r.bottom=""),i!=o.default.CENTER_LEFT&&i!=o.default.CENTER_CENTER&&i!=o.default.CENTER_RIGHT||(s-=this.element.offsetHeight/2);var f=Math.round(t[1]+s)+"px";this.rendered.top_!=f&&(this.rendered.top_=r.top=f)}},e.prototype.getOptions=function(){return this.options},e}(i.default);r.default=h},{"./MapEventType.js":"c5f9a31032c688f6115b47b952057e83","./Object.js":"6c67600a5761ed2f245039657f77c37b","./OverlayPositioning.js":"79d41add27441e3b2ce7d576004be179","./css.js":"f85c5145e7d341bc4a345e62bbff4738","./dom.js":"0ade60b4014b5f1918822f5d81f5a358","./events.js":"47affab92622893273981942c85f03c7","./extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b"}],"79d41add27441e3b2ce7d576004be179":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},{}],"0d1170ca39921fbfc63b8e514cb7316a":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.render=_,r.default=r.Units=void 0;var n=t("../Object.js"),i=t("../asserts.js"),o=l(t("./Control.js")),a=t("../css.js"),s=t("../events.js"),u=t("../proj.js"),c=l(t("../proj/Units.js"));function l(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p="units",h={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};r.Units=h;var g=[1,2,5];function _(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}var y=function(t){function e(e){var r=this,i=e||{},o=void 0!==i.className?i.className:i.bar?"ol-scale-bar":"ol-scale-line";return(r=t.call(this,{element:document.createElement("div"),render:i.render||_,target:i.target})||this).innerElement_=document.createElement("div"),r.innerElement_.className=o+"-inner",r.element.className=o+" "+a.CLASS_UNSELECTABLE,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==i.minWidth?i.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",(0,s.listen)(r,(0,n.getChangeEventType)(p),r.handleUnitsChanged_,r),r.setUnits(i.units||h.METRIC),r.scaleBar_=i.bar||!1,r.scaleBarSteps_=i.steps||4,r.scaleBarText_=i.text||!1,r}return d(e,t),e.prototype.getUnits=function(){return this.get(p)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(p,t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),o=n==h.DEGREES?c.default.DEGREES:c.default.METERS,a=(0,u.getPointResolution)(r,t.resolution,e,o),s=this.minWidth_*a,l="";if(n==h.DEGREES){var f=u.METERS_PER_UNIT[c.default.DEGREES];(s*=f)<f/60?(l="″",a*=3600):s<f?(l="′",a*=60):l="°"}else n==h.IMPERIAL?s<.9144?(l="in",a/=.0254):s<1609.344?(l="ft",a/=.3048):(l="mi",a/=1609.344):n==h.NAUTICAL?(a/=1852,l="nm"):n==h.METRIC?s<.001?(l="μm",a*=1e6):s<1?(l="mm",a*=1e3):s<1e3?l="m":(l="km",a/=1e3):n==h.US?s<.9144?(l="in",a*=39.37):s<1609.344?(l="ft",a/=.30480061):(l="mi",a/=1609.3472):(0,i.assert)(!1,33);for(var d,p,_,y,m=3*Math.floor(Math.log(this.minWidth_*a)/Math.log(10));;){_=Math.floor(m/3);var v=Math.pow(10,_);if(d=g[(m%3+3)%3]*v,p=Math.round(d/a),isNaN(p))return this.element.style.display="none",void(this.renderedVisible_=!1);if(p>=this.minWidth_)break;++m}y=this.scaleBar_?this.createScaleBar(p,d,l):d.toFixed(_<0?-_:0)+" "+l,this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,r){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&i.push(this.createMarker("absolute",s)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,r):"")+"</div>"),s===this.scaleBarSteps_-1&&i.push(this.createStepText(s+1,t,!0,e,r)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+n+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,r,n,i){var o=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(r?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=this.getMap().getView().getResolution(),e=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*e*39.37*(25.4/.28)},e}(o.default);r.default=y},{"../Object.js":"6c67600a5761ed2f245039657f77c37b","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","./Control.js":"3635be78329f50daffde3ad5a708ec9a","../css.js":"f85c5145e7d341bc4a345e62bbff4738","../events.js":"47affab92622893273981942c85f03c7","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../proj/Units.js":"aed7c8d781fca9ae0c0fa9c24383e0e4"}],"1f77eccea7fbb37b27b6bd59cfd0c09d":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.render=_,r.default=void 0;var n=d(t("./Control.js")),i=t("../css.js"),o=t("../easing.js"),a=t("../events.js"),s=t("../events/Event.js"),u=d(t("../events/EventType.js")),c=t("../math.js"),l=d(t("../pointer/EventType.js")),f=d(t("../pointer/PointerEventHandler.js"));function d(t){return t&&t.__esModule?t:{default:t}}var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g={VERTICAL:0,HORIZONTAL:1};function _(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}var y=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||_})||this).dragListenerKeys_=[],r.currentResolution_=void 0,r.direction_=g.VERTICAL,r.dragging_,r.heightLimit_=0,r.widthLimit_=0,r.startX_,r.startY_,r.thumbSize_=null,r.sliderInitialized_=!1,r.duration_=void 0!==n.duration?n.duration:200;var o=void 0!==n.className?n.className:"ol-zoomslider",c=document.createElement("button");c.setAttribute("type","button"),c.className=o+"-thumb "+i.CLASS_UNSELECTABLE;var d=r.element;return d.className=o+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL,d.appendChild(c),r.dragger_=new f.default(d),(0,a.listen)(r.dragger_,l.default.POINTERDOWN,r.handleDraggerStart_,r),(0,a.listen)(r.dragger_,l.default.POINTERMOVE,r.handleDraggerDrag_,r),(0,a.listen)(r.dragger_,l.default.POINTERUP,r.handleDraggerEnd_,r),(0,a.listen)(d,u.default.CLICK,r.handleContainerClick_,r),(0,a.listen)(c,u.default.CLICK,s.stopPropagation),r}return h(e,t),e.prototype.disposeInternal=function(){this.dragger_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,r=t.offsetHeight,n=t.firstElementChild,i=getComputedStyle(n),o=n.offsetWidth+parseFloat(i.marginRight)+parseFloat(i.marginLeft),a=n.offsetHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom);this.thumbSize_=[o,a],e>r?(this.direction_=g.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=g.VERTICAL,this.heightLimit_=r-a),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),r=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(r),i=e.getConstrainedZoom(e.getZoomForResolution(n));e.animate({zoom:i,duration:this.duration_,easing:o.easeOut})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.originalEvent.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var r=this.handleDraggerDrag_,n=this.handleDraggerEnd_;this.dragListenerKeys_.push((0,a.listen)(document,u.default.MOUSEMOVE,r,this),(0,a.listen)(document,l.default.POINTERMOVE,r,this),(0,a.listen)(document,u.default.MOUSEUP,n,this),(0,a.listen)(document,l.default.POINTERUP,n,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,r=t.clientY-this.startY_,n=this.getRelativePosition_(e,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(a.unlistenByKey),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),r=this.element.firstElementChild;this.direction_==g.HORIZONTAL?r.style.left=this.widthLimit_*e+"px":r.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){var r;return r=this.direction_===g.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,(0,c.clamp)(r,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return(0,c.clamp)(1-e(t),0,1)},e}(n.default);r.default=y},{"./Control.js":"3635be78329f50daffde3ad5a708ec9a","../css.js":"f85c5145e7d341bc4a345e62bbff4738","../easing.js":"8aefdec0c4be6700bf94b7f3aafa0ae8","../events.js":"47affab92622893273981942c85f03c7","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../math.js":"6086e082317ce6ce8a1b47fb09fed63b","../pointer/EventType.js":"2bb176dc27cc0bfb6fce96f692a99140","../pointer/PointerEventHandler.js":"7a6d760eec19f147b7580e67d1822e2b"}],b68e1acda4a4a7f475fa4d4164d1f3dc:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../events.js"),i=s(t("../events/EventType.js")),o=s(t("./Control.js")),a=t("../css.js");function s(t){return t&&t.__esModule?t:{default:t}}var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=function(t){function e(e){var r=this,o=e||{};(r=t.call(this,{element:document.createElement("div"),target:o.target})||this).extent=o.extent?o.extent:null;var s=void 0!==o.className?o.className:"ol-zoom-extent",u=void 0!==o.label?o.label:"E",c=void 0!==o.tipLabel?o.tipLabel:"Fit to extent",l=document.createElement("button");l.setAttribute("type","button"),l.title=c,l.appendChild("string"==typeof u?document.createTextNode(u):u),(0,n.listen)(l,i.default.CLICK,r.handleClick_,r);var f=s+" "+a.CLASS_UNSELECTABLE+" "+a.CLASS_CONTROL,d=r.element;return d.className=f,d.appendChild(l),r}return c(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fit(e)},e}(o.default);r.default=l},{"../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","./Control.js":"3635be78329f50daffde3ad5a708ec9a","../css.js":"f85c5145e7d341bc4a345e62bbff4738"}],dcdb7e22b0472785652f09e3dcd7cd32:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaults=function(t){var e=t||{},r=new n.default,g=new i.default(-.005,.05,100);(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&r.push(new s.default);(void 0===e.doubleClickZoom||e.doubleClickZoom)&&r.push(new o.default({delta:e.zoomDelta,duration:e.zoomDuration}));(void 0===e.dragPan||e.dragPan)&&r.push(new a.default({condition:e.onFocusOnly?h.focus:void 0,kinetic:g}));(void 0===e.pinchRotate||e.pinchRotate)&&r.push(new d.default);(void 0===e.pinchZoom||e.pinchZoom)&&r.push(new p.default({duration:e.zoomDuration}));(void 0===e.keyboard||e.keyboard)&&(r.push(new c.default),r.push(new l.default({delta:e.zoomDelta,duration:e.zoomDuration})));(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&r.push(new f.default({condition:e.onFocusOnly?h.focus:void 0,duration:e.zoomDuration}));(void 0===e.shiftDragZoom||e.shiftDragZoom)&&r.push(new u.default({duration:e.zoomDuration}));return r},Object.defineProperty(r,"DoubleClickZoom",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"DragPan",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"DragRotate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"DragZoom",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"KeyboardPan",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"KeyboardZoom",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"MouseWheelZoom",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"PinchRotate",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"PinchZoom",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"DragAndDrop",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"DragBox",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"DragRotateAndZoom",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"Draw",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"Extent",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"Interaction",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"Modify",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"Pointer",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(r,"Select",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(r,"Snap",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(r,"Translate",{enumerable:!0,get:function(){return P.default}});var n=T(t("./Collection.js")),i=T(t("./Kinetic.js")),o=T(t("./interaction/DoubleClickZoom.js")),a=T(t("./interaction/DragPan.js")),s=T(t("./interaction/DragRotate.js")),u=T(t("./interaction/DragZoom.js")),c=T(t("./interaction/KeyboardPan.js")),l=T(t("./interaction/KeyboardZoom.js")),f=T(t("./interaction/MouseWheelZoom.js")),d=T(t("./interaction/PinchRotate.js")),p=T(t("./interaction/PinchZoom.js")),h=t("./events/condition.js"),g=T(t("./interaction/DragAndDrop.js")),_=T(t("./interaction/DragBox.js")),y=T(t("./interaction/DragRotateAndZoom.js")),m=T(t("./interaction/Draw.js")),v=T(t("./interaction/Extent.js")),b=T(t("./interaction/Interaction.js")),E=T(t("./interaction/Modify.js")),S=T(t("./interaction/Pointer.js")),j=T(t("./interaction/Select.js")),O=T(t("./interaction/Snap.js")),P=T(t("./interaction/Translate.js"));function T(t){return t&&t.__esModule?t:{default:t}}},{"./Collection.js":"6f090fc511268dcb6cf8b42e032e7c46","./Kinetic.js":"b218aa943771342aee66344d881d4cd4","./interaction/DoubleClickZoom.js":"42ac0a1becd364b6613e2582d52d1935","./interaction/DragPan.js":"cc4f1d2f035599b1dce0889e685e9f3e","./interaction/DragRotate.js":"76cff649b16b67cebd348b66e4a6fd78","./interaction/DragZoom.js":"23eed143a66852f99f967756ad38f3aa","./interaction/KeyboardPan.js":"39488489a0884991fa2ff94869bcc9aa","./interaction/KeyboardZoom.js":"1ccabab71927ad524e9136ceb5ec6f4f","./interaction/MouseWheelZoom.js":"714e557b6194dd998574a1920e009fd7","./interaction/PinchRotate.js":"84d587ed74b775e57288e8072402f619","./interaction/PinchZoom.js":"3d4f4f7d3fbfd0936941055a0371fecb","./events/condition.js":"4449d39ce8d8b432db07b1426fa88625","./interaction/DragAndDrop.js":"bc969b5861da9cb386b6b9cc06572c93","./interaction/DragBox.js":"38b47f83f431fa2458695f9e2188eb7b","./interaction/DragRotateAndZoom.js":"222f98da5bd148a9b22e06a597e6f83a","./interaction/Draw.js":"f5ecd104165805afe31b764997e3d776","./interaction/Extent.js":"207526ec6daa8fe5aa6c6aa32c2cb258","./interaction/Interaction.js":"cc9126949131cc64ccbe8ff1befaff45","./interaction/Modify.js":"b4ed784e6ba119d05ec2cae043f21b14","./interaction/Pointer.js":"86978173166ea128b424e3f95491d310","./interaction/Select.js":"e8342bc79049cfaa48b53ca1a6260d64","./interaction/Snap.js":"9b7bff6d876f47a7206412226fac0e51","./interaction/Translate.js":"d70b994219968cd577c6750cdd7a2870"}],"42ac0a1becd364b6613e2582d52d1935":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("../MapBrowserEventType.js"))&&n.__esModule?n:{default:n},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Interaction.js"));var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function u(t){var e=!1;if(t.type==i.default.DBLCLICK){var r=t.originalEvent,n=t.map,a=t.coordinate,s=r.shiftKey?-this.delta_:this.delta_,u=n.getView();(0,o.zoomByDelta)(u,s,a,this.duration_),t.preventDefault(),e=!0}return!e}var c=function(t){function e(e){var r=t.call(this,{handleEvent:u})||this,n=e||{};return r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:250,r}return s(e,t),e}(o.default);r.default=c},{"../MapBrowserEventType.js":"16e9d1f3fb7b220d40b3dda0147708b0","./Interaction.js":"cc9126949131cc64ccbe8ff1befaff45"}],cc9126949131cc64ccbe8ff1befaff45:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pan=function(t,e,r){var n=t.getCenter();if(n){var o=[n[0]+e[0],n[1]+e[1]];t.animate_({duration:void 0!==r?r:250,easing:i.linear,center:t.getConstrainedCenter(o)})}},r.zoomByDelta=function(t,e,r,n){var o=t.getZoom();if(void 0===o)return;var a=t.getConstrainedZoom(o+e),s=t.getResolutionForZoom(a);t.getAnimating()&&t.cancelAnimations();t.animate({resolution:s,anchor:r,duration:void 0!==n?n:250,easing:i.easeOut})},r.default=void 0;var n=a(t("../Object.js")),i=t("../easing.js"),o=a(t("./Property.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});var c=function(t){function e(e){var r=t.call(this)||this;return e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return u(e,t),e.prototype.getActive=function(){return this.get(o.default.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(o.default.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(n.default);r.default=c},{"../Object.js":"6c67600a5761ed2f245039657f77c37b","../easing.js":"8aefdec0c4be6700bf94b7f3aafa0ae8","./Property.js":"82ccbc3098fffd579a068e8c6cd44c46"}],"82ccbc3098fffd579a068e8c6cd44c46":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={ACTIVE:"active"}},{}],cc4f1d2f035599b1dce0889e685e9f3e:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../coordinate.js"),i=t("../easing.js"),o=t("../events/condition.js"),a=t("../functions.js"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Pointer.js"));var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function l(t){return(0,o.noModifierKeys)(t)&&(0,o.primaryAction)(t)}var f=function(t){function e(e){var r=t.call(this,{stopDown:a.FALSE})||this,n=e||{};return r.kinetic_=n.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1,r.condition_=n.condition?n.condition:l,r.noKinetic_=!1,r}return c(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,r=(0,s.centroid)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var i=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],o=t.map.getView();(0,n.scale)(i,o.getResolution()),(0,n.rotate)(i,o.getRotation()),o.adjustCenter(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=r.getCenter(),s=e.getPixelFromCoordinate(a),u=e.getCoordinateFromPixel([s[0]-n*Math.cos(o),s[1]-n*Math.sin(o)]);r.animate({center:r.getConstrainedCenter(u),duration:500,easing:i.easeOut})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(s.default);r.default=f},{"../coordinate.js":"2a3e9645190015dfc3d4ed757193af4c","../easing.js":"8aefdec0c4be6700bf94b7f3aafa0ae8","../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","../functions.js":"cafc68c692964009aaa3cf7333cf2956","./Pointer.js":"86978173166ea128b424e3f95491d310"}],"4449d39ce8d8b432db07b1426fa88625":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.primaryAction=r.penOnly=r.touchOnly=r.mouseOnly=r.targetNotEditable=r.shiftKeyOnly=r.platformModifierKeyOnly=r.noModifierKeys=r.doubleClick=r.singleClick=r.pointerMove=r.never=r.mouseActionButton=r.click=r.always=r.focus=r.altShiftKeysOnly=r.altKeyOnly=void 0;var n,i=(n=t("../MapBrowserEventType.js"))&&n.__esModule?n:{default:n},o=t("../asserts.js"),a=t("../functions.js"),s=t("../has.js");r.altKeyOnly=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};r.altShiftKeysOnly=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};r.focus=function(t){return t.target.getTargetElement()===document.activeElement};var u=a.TRUE;r.always=u;r.click=function(t){return t.type==i.default.CLICK};r.mouseActionButton=function(t){var e=t.originalEvent;return 0==e.button&&!(s.WEBKIT&&s.MAC&&e.ctrlKey)};var c=a.FALSE;r.never=c;r.pointerMove=function(t){return"pointermove"==t.type};r.singleClick=function(t){return t.type==i.default.SINGLECLICK};r.doubleClick=function(t){return t.type==i.default.DBLCLICK};r.noModifierKeys=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};r.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(s.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey};r.shiftKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};r.targetNotEditable=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e};r.mouseOnly=function(t){var e=t.pointerEvent;return(0,o.assert)(void 0!==e,56),"mouse"==e.pointerType};r.touchOnly=function(t){var e=t.pointerEvent;return(0,o.assert)(void 0!==e,56),"touch"===e.pointerType};r.penOnly=function(t){var e=t.pointerEvent;return(0,o.assert)(void 0!==e,56),"pen"===e.pointerType};r.primaryAction=function(t){var e=t.pointerEvent;return(0,o.assert)(void 0!==e,56),e.isPrimary&&0===e.button}},{"../MapBrowserEventType.js":"16e9d1f3fb7b220d40b3dda0147708b0","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../functions.js":"cafc68c692964009aaa3cf7333cf2956","../has.js":"277cbb6fb57ab1c8c5545fe37fb5daba"}],"86978173166ea128b424e3f95491d310":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.centroid=function(t){for(var e=t.length,r=0,n=0,i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return[r/e,n/e]},r.default=void 0;var n=a(t("../MapBrowserEventType.js")),i=a(t("./Interaction.js")),o=t("../obj.js");function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});var c=function(t){function e(e){var r=this,n=e||{};return r=t.call(this,n)||this,n.handleDownEvent&&(r.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(r.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(r.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(r.handleUpEvent=n.handleUpEvent),n.stopDown&&(r.stopDown=n.stopDown),r.handlingDownUpSequence=!1,r.trackedPointers_={},r.targetPointers=[],r}return u(e,t),e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==n.default.POINTERDRAG)this.handleDragEvent(t);else if(t.type==n.default.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==n.default.POINTERDOWN){var i=this.handleDownEvent(t);i&&t.preventDefault(),this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==n.default.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===n.default.POINTERDOWN||e===n.default.POINTERDRAG||e===n.default.POINTERUP}(t)){var e=t.pointerEvent,r=e.pointerId.toString();t.type==n.default.POINTERUP?delete this.trackedPointers_[r]:t.type==n.default.POINTERDOWN?this.trackedPointers_[r]=e:r in this.trackedPointers_&&(this.trackedPointers_[r]=e),this.targetPointers=(0,o.getValues)(this.trackedPointers_)}},e}(i.default);r.default=c},{"../MapBrowserEventType.js":"16e9d1f3fb7b220d40b3dda0147708b0","./Interaction.js":"cc9126949131cc64ccbe8ff1befaff45","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],"76cff649b16b67cebd348b66e4a6fd78":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../rotationconstraint.js"),o=t("../events/condition.js"),a=t("../functions.js"),s=(n=t("./Pointer.js"))&&n.__esModule?n:{default:n};var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{stopDown:a.FALSE})||this).condition_=n.condition?n.condition:o.altShiftKeysOnly,r.lastAngle_=void 0,r.duration_=void 0!==n.duration?n.duration:250,r}return c(e,t),e.prototype.handleDragEvent=function(t){if((0,o.mouseOnly)(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==i.disable){var n=e.getSize(),a=t.pixel,s=Math.atan2(n[1]/2-a[1],a[0]-n[0]/2);if(void 0!==this.lastAngle_){var u=s-this.lastAngle_;r.adjustRotation(-u)}this.lastAngle_=s}}},e.prototype.handleUpEvent=function(t){return!(0,o.mouseOnly)(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!(0,o.mouseOnly)(t)&&(!(!(0,o.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}(s.default);r.default=l},{"../rotationconstraint.js":"a9242152a2fff024565f25bb59c1ea72","../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","../functions.js":"cafc68c692964009aaa3cf7333cf2956","./Pointer.js":"86978173166ea128b424e3f95491d310"}],"23eed143a66852f99f967756ad38f3aa":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../easing.js"),o=t("../events/condition.js"),a=t("../extent.js"),s=(n=t("./DragBox.js"))&&n.__esModule?n:{default:n};var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function l(){var t=this.getMap(),e=t.getView(),r=t.getSize(),n=this.getGeometry().getExtent();if(this.out_){var o=e.calculateExtent(r),s=(0,a.createOrUpdateFromCoordinates)([t.getPixelFromCoordinate((0,a.getBottomLeft)(n)),t.getPixelFromCoordinate((0,a.getTopRight)(n))]),u=e.getResolutionForExtent(s,r);(0,a.scaleFromCenter)(o,1/u),n=o}var c=e.getConstrainedResolution(e.getResolutionForExtent(n,r)),l=e.getConstrainedCenter((0,a.getCenter)(n),c);e.animate({resolution:c,center:l,duration:this.duration_,easing:i.easeOut})}var f=function(t){function e(e){var r=this,n=e||{},i=n.condition?n.condition:o.shiftKeyOnly;return(r=t.call(this,{condition:i,className:n.className||"ol-dragzoom",minArea:n.minArea,onBoxEnd:l})||this).duration_=void 0!==n.duration?n.duration:200,r.out_=void 0!==n.out&&n.out,r}return c(e,t),e}(s.default);r.default=f},{"../easing.js":"8aefdec0c4be6700bf94b7f3aafa0ae8","../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./DragBox.js":"38b47f83f431fa2458695f9e2188eb7b"}],"38b47f83f431fa2458695f9e2188eb7b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(t("../events/Event.js")),i=t("../events/condition.js"),o=t("../functions.js"),a=u(t("./Pointer.js")),s=u(t("../render/Box.js"));function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f="boxstart",d="boxdrag",p="boxend",h=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.coordinate=r,i.mapBrowserEvent=n,i}return l(e,t),e}(n.default),g=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.box_=new s.default(n.className||"ol-dragbox"),r.minArea_=void 0!==n.minArea?n.minArea:64,r.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:o.VOID,r.startPixel_=null,r.condition_=n.condition?n.condition:i.always,r.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:r.defaultBoxEndCondition,r}return l(e,t),e.prototype.defaultBoxEndCondition=function(t,e,r){var n=r[0]-e[0],i=r[1]-e[1];return n*n+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){(0,i.mouseOnly)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new h(d,t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!(0,i.mouseOnly)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new h(p,t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!!(0,i.mouseOnly)(t)&&(!(!(0,i.mouseActionButton)(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new h(f,t.coordinate,t)),!0))},e}(a.default);r.default=g},{"../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","../functions.js":"cafc68c692964009aaa3cf7333cf2956","./Pointer.js":"86978173166ea128b424e3f95491d310","../render/Box.js":"4180fcf0e01c32b50e6cbab5444a2625"}],"4180fcf0e01c32b50e6cbab5444a2625":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(t("../Disposable.js")),i=o(t("../geom/Polygon.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){var r=t.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return s(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r=this.element_.style;r.left=Math.min(t[0],e[0])+"px",r.top=Math.min(t[1],e[1])+"px",r.width=Math.abs(e[0]-t[0])+"px",r.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new i.default([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(n.default);r.default=u},{"../Disposable.js":"d4605e3cdc6ca501dd4bed20a4731b8c","../geom/Polygon.js":"24ebc1624175b8546601860191490c20"}],"39488489a0884991fa2ff94869bcc9aa":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../coordinate.js"),i=u(t("../events/EventType.js")),o=u(t("../events/KeyCode.js")),a=t("../events/condition.js"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Interaction.js"));function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function f(t){var e=!1;if(t.type==i.default.KEYDOWN){var r=t.originalEvent.keyCode;if(this.condition_(t)&&(r==o.default.DOWN||r==o.default.LEFT||r==o.default.RIGHT||r==o.default.UP)){var a=t.map.getView(),u=a.getResolution()*this.pixelDelta_,c=0,l=0;r==o.default.DOWN?l=-u:r==o.default.LEFT?c=-u:r==o.default.RIGHT?c=u:l=u;var f=[c,l];(0,n.rotate)(f,a.getRotation()),(0,s.pan)(a,f,this.duration_),t.preventDefault(),e=!0}}return!e}var d=function(t){function e(e){var r=t.call(this,{handleEvent:f})||this,n=e||{};return r.defaultCondition_=function(t){return(0,a.noModifierKeys)(t)&&(0,a.targetNotEditable)(t)},r.condition_=void 0!==n.condition?n.condition:r.defaultCondition_,r.duration_=void 0!==n.duration?n.duration:100,r.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,r}return l(e,t),e}(s.default);r.default=d},{"../coordinate.js":"2a3e9645190015dfc3d4ed757193af4c","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../events/KeyCode.js":"16c29f037f79c94d6ede4bae01115191","../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","./Interaction.js":"cc9126949131cc64ccbe8ff1befaff45"}],"16c29f037f79c94d6ede4bae01115191":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={LEFT:37,UP:38,RIGHT:39,DOWN:40}},{}],"1ccabab71927ad524e9136ceb5ec6f4f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("../events/EventType.js"))&&n.__esModule?n:{default:n},o=t("../events/condition.js"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Interaction.js"));var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function c(t){var e=!1;if(t.type==i.default.KEYDOWN||t.type==i.default.KEYPRESS){var r=t.originalEvent.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var n=t.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_,s=n.getView();(0,a.zoomByDelta)(s,o,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var l=function(t){function e(e){var r=t.call(this,{handleEvent:c})||this,n=e||{};return r.condition_=n.condition?n.condition:o.targetNotEditable,r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:100,r}return u(e,t),e}(a.default);r.default=l},{"../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","./Interaction.js":"cc9126949131cc64ccbe8ff1befaff45"}],"714e557b6194dd998574a1920e009fd7":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Mode=void 0;var n,i=t("../events/condition.js"),o=(n=t("../events/EventType.js"))&&n.__esModule?n:{default:n},a=t("../has.js"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Interaction.js")),u=t("../math.js");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f={TRACKPAD:"trackpad",WHEEL:"wheel"};r.Mode=f;var d=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,r.duration_=void 0!==n.duration?n.duration:250,r.timeout_=void 0!==n.timeout?n.timeout:80,r.useAnchor_=void 0===n.useAnchor||n.useAnchor,r.condition_=n.condition?n.condition:i.always,r.lastAnchor_=null,r.startTime_=void 0,r.timeoutId_,r.mode_=void 0,r.trackpadEventGap_=400,r.trackpadTimeoutId_,r.trackpadDeltaPerZoom_=300,r}return l(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,Math.sign(this.lastDelta_),this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==o.default.WHEEL&&e!==o.default.MOUSEWHEEL)return!0;t.preventDefault();var r,n=t.map,i=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==o.default.WHEEL?(r=i.deltaY,a.FIREFOX&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=a.DEVICE_PIXEL_RATIO),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)):t.type==o.default.MOUSEWHEEL&&(r=-i.wheelDeltaY,a.SAFARI&&(r/=3)),0===r)return!1;this.lastDelta_=r;var s=Date.now();if(void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?f.TRACKPAD:f.WHEEL),this.mode_===f.TRACKPAD){var u=n.getView();return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):u.beginInteraction(),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.trackpadEventGap_),u.adjustZoom(-r/this.trackpadDeltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1}this.totalDelta_+=r;var c=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),c),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=(0,u.clamp)(this.totalDelta_,-this.maxDelta_,this.maxDelta_);(0,s.zoomByDelta)(e,-r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(s.default);r.default=d},{"../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../has.js":"277cbb6fb57ab1c8c5545fe37fb5daba","./Interaction.js":"cc9126949131cc64ccbe8ff1befaff45","../math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],"84d587ed74b775e57288e8072402f619":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../functions.js"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Pointer.js")),o=t("../rotationconstraint.js");var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){var r=this,i=e||{},o=i;return o.stopDown||(o.stopDown=n.FALSE),(r=t.call(this,o)||this).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==i.threshold?i.threshold:.3,r.duration_=void 0!==i.duration?i.duration:250,r}return s(e,t),e.prototype.handleDragEvent=function(t){var e=0,r=this.targetPointers[0],n=this.targetPointers[1],a=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(void 0!==this.lastAngle_){var s=a-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=s}this.lastAngle_=a;var u=t.map,c=u.getView();if(c.getConstraints().rotation!==o.disable){var l=u.getViewport().getBoundingClientRect(),f=(0,i.centroid)(this.targetPointers);f[0]-=l.left,f[1]-=l.top,this.anchor_=u.getCoordinateFromPixel(f),this.rotating_&&(u.render(),c.adjustRotation(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(i.default);r.default=u},{"../functions.js":"cafc68c692964009aaa3cf7333cf2956","./Pointer.js":"86978173166ea128b424e3f95491d310","../rotationconstraint.js":"a9242152a2fff024565f25bb59c1ea72"}],"3d4f4f7d3fbfd0936941055a0371fecb":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../functions.js"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Pointer.js"));var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e){var r=this,i=e||{},o=i;return o.stopDown||(o.stopDown=n.FALSE),(r=t.call(this,o)||this).anchor_=null,r.duration_=void 0!==i.duration?i.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return a(e,t),e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],o=r.clientX-n.clientX,a=r.clientY-n.clientY,s=Math.sqrt(o*o+a*a);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var u=t.map,c=u.getView();1!=e&&(this.lastScaleDelta_=e);var l=u.getViewport().getBoundingClientRect(),f=(0,i.centroid)(this.targetPointers);f[0]-=l.left,f[1]-=l.top,this.anchor_=u.getCoordinateFromPixel(f),u.render(),c.adjustResolution(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(i.default);r.default=s},{"../functions.js":"cafc68c692964009aaa3cf7333cf2956","./Pointer.js":"86978173166ea128b424e3f95491d310"}],bc969b5861da9cb386b6b9cc06572c93:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../functions.js"),i=t("../events.js"),o=c(t("../events/Event.js")),a=c(t("../events/EventType.js")),s=c(t("./Interaction.js")),u=t("../proj.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d="addfeatures",p=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.features=n,o.file=r,o.projection=i,o}return f(e,t),e}(o.default);function h(t){for(var e=t.dataTransfer.files,r=0,n=e.length;r<n;++r){var i=e.item(r),o=new FileReader;o.addEventListener(a.default.LOAD,this.handleResult_.bind(this,i)),o.readAsText(i)}}function g(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var _=function(t){function e(e){var r=this,i=e||{};return(r=t.call(this,{handleEvent:n.TRUE})||this).formatConstructors_=i.formatConstructors?i.formatConstructors:[],r.projection_=i.projection?(0,u.get)(i.projection):null,r.dropListenKeys_=null,r.source_=i.source||null,r.target=i.target?i.target:null,r}return f(e,t),e.prototype.handleResult_=function(t,e){var r=e.target.result,n=this.getMap(),i=this.projection_;i||(i=n.getView().getProjection());for(var o=this.formatConstructors_,a=[],s=0,u=o.length;s<u;++s){var c=new o[s];if((a=this.tryReadFeatures_(c,r,{featureProjection:i}))&&a.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(a)),this.dispatchEvent(new p(d,t,a,i))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[(0,i.listen)(e,a.default.DROP,h,this),(0,i.listen)(e,a.default.DRAGENTER,g,this),(0,i.listen)(e,a.default.DRAGOVER,g,this),(0,i.listen)(e,a.default.DROP,g,this)]}},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),e?this.registerListeners_():this.unregisterListeners_()},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(i.unlistenByKey),this.dropListenKeys_=null)},e}(s.default);r.default=_},{"../functions.js":"cafc68c692964009aaa3cf7333cf2956","../events.js":"47affab92622893273981942c85f03c7","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","./Interaction.js":"cc9126949131cc64ccbe8ff1befaff45","../proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],"222f98da5bd148a9b22e06a597e6f83a":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../events/condition.js"),o=(n=t("./Pointer.js"))&&n.__esModule?n:{default:n};var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).condition_=n.condition?n.condition:i.shiftKeyOnly,r.lastAngle_=void 0,r.lastMagnitude_=void 0,r.lastScaleDelta_=0,r.duration_=void 0!==n.duration?n.duration:400,r}return s(e,t),e.prototype.handleDragEvent=function(t){if((0,i.mouseOnly)(t)){var e=t.map,r=e.getSize(),n=t.pixel,o=n[0]-r[0]/2,a=r[1]/2-n[1],s=Math.atan2(a,o),u=Math.sqrt(o*o+a*a),c=e.getView();if(void 0!==this.lastAngle_){var l=this.lastAngle_-s;c.adjustRotation(l)}this.lastAngle_=s,void 0!==this.lastMagnitude_&&c.adjustResolution(this.lastMagnitude_/u),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/u),this.lastMagnitude_=u}},e.prototype.handleUpEvent=function(t){if(!(0,i.mouseOnly)(t))return!0;var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!(0,i.mouseOnly)(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},e}(o.default);r.default=u},{"../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","./Pointer.js":"86978173166ea128b424e3f95491d310"}],f5ecd104165805afe31b764997e3d776:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createRegularPolygon=function(t,e){return function(r,n){var i=r[0],o=r[1],a=Math.sqrt((0,u.squaredDistance)(i,o)),s=n||(0,S.fromCircle)(new h.default(i),t),c=e;if(!e){var l=o[0]-i[0],f=o[1]-i[1];c=Math.atan(f/l)-(l<0?Math.PI:0)}return(0,S.makeRegular)(s,i,a,c),s}},r.createBox=function(){return function(t,e){var r=(0,d.boundingExtent)(t),n=[[(0,d.getBottomLeft)(r),(0,d.getBottomRight)(r),(0,d.getTopRight)(r),(0,d.getTopLeft)(r),(0,d.getBottomLeft)(r)]],i=e;return i?i.setCoordinates(n):i=new S.default(n),i}},r.default=void 0;var n=C(t("../events/EventType.js")),i=C(t("../Feature.js")),o=C(t("../MapBrowserEventType.js")),a=C(t("../MapBrowserPointerEvent.js")),s=t("../Object.js"),u=t("../coordinate.js"),c=t("../events.js"),l=C(t("../events/Event.js")),f=t("../events/condition.js"),d=t("../extent.js"),p=t("../functions.js"),h=C(t("../geom/Circle.js")),g=C(t("../geom/GeometryType.js")),_=C(t("../geom/LineString.js")),y=C(t("../geom/MultiLineString.js")),m=C(t("../geom/MultiPoint.js")),v=C(t("../geom/MultiPolygon.js")),b=t("../pointer/MouseSource.js"),E=C(t("../geom/Point.js")),S=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("../geom/Polygon.js")),j=C(t("./Pointer.js")),O=C(t("./Property.js")),P=C(t("../layer/Vector.js")),T=C(t("../source/Vector.js")),x=t("../style/Style.js");function C(t){return t&&t.__esModule?t:{default:t}}var I,w=(I=function(t,e){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}I(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),R={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},N="drawstart",M="drawend",L=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return w(e,t),e}(l.default);var A=function(t){function e(e){var r=this,n=e;n.stopDown||(n.stopDown=p.FALSE),(r=t.call(this,n)||this).shouldHandle_=!1,r.downPx_=null,r.downTimeout_,r.lastDragTime_,r.freehand_=!1,r.source_=e.source?e.source:null,r.features_=e.features?e.features:null,r.snapTolerance_=e.snapTolerance?e.snapTolerance:12,r.type_=e.type,r.mode_=function(t){var e;t===g.default.POINT||t===g.default.MULTI_POINT?e=R.POINT:t===g.default.LINE_STRING||t===g.default.MULTI_LINE_STRING?e=R.LINE_STRING:t===g.default.POLYGON||t===g.default.MULTI_POLYGON?e=R.POLYGON:t===g.default.CIRCLE&&(e=R.CIRCLE);return e}(r.type_),r.stopClick_=!!e.stopClick,r.minPoints_=e.minPoints?e.minPoints:r.mode_===R.POLYGON?3:2,r.maxPoints_=e.maxPoints?e.maxPoints:1/0,r.finishCondition_=e.finishCondition?e.finishCondition:p.TRUE;var i,o=e.geometryFunction;if(!o)if(r.type_===g.default.CIRCLE)o=function(t,e){var r=e||new h.default([NaN,NaN]),n=(0,u.squaredDistance)(t[0],t[1]);return r.setCenterAndRadius(t[0],Math.sqrt(n)),r};else{var a,l=r.mode_;l===R.POINT?a=E.default:l===R.LINE_STRING?a=_.default:l===R.POLYGON&&(a=S.default),o=function(t,e){var r=e;return r?l===R.POLYGON?t[0].length?r.setCoordinates([t[0].concat([t[0][0]])]):r.setCoordinates([]):r.setCoordinates(t):r=new a(t),r}}return r.geometryFunction_=o,r.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,r.finishCoordinate_=null,r.sketchFeature_=null,r.sketchPoint_=null,r.sketchCoords_=null,r.sketchLine_=null,r.sketchLineCoords_=null,r.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,r.overlay_=new P.default({source:new T.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=(0,x.createEditingStyle)(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),r.geometryName_=e.geometryName,r.condition_=e.condition?e.condition:f.noModifierKeys,r.freehandCondition_,e.freehand?r.freehandCondition_=f.always:r.freehandCondition_=e.freehandCondition?e.freehandCondition:f.shiftKeyOnly,(0,c.listen)(r,(0,s.getChangeEventType)(O.default.ACTIVE),r.updateState_,r),r}return w(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===n.default.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==R.POINT&&this.freehandCondition_(e);var r=e.type===o.default.POINTERMOVE,i=!0;!this.freehand_&&this.lastDragTime_&&e.type===o.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===o.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),i=!1):this.freehand_&&e.type===o.default.POINTERDOWN?i=!1:r?(i=e.type===o.default.POINTERMOVE)&&this.freehand_?i=this.handlePointerMove_(e):(e.pointerEvent.pointerType==b.POINTER_TYPE||e.type===o.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===o.default.DBLCLICK&&(i=!1),t.prototype.handleEvent.call(this,e)&&i},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new a.default(o.default.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var r=this.mode_===R.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||r?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===R.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,r=t.pixel,n=e[0]-r[0],i=e[1]-r[1],o=n*n+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var r=!1,n=[this.finishCoordinate_];if(this.mode_===R.LINE_STRING)r=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===R.POLYGON){var i=this.sketchCoords_;r=i[0].length>this.minPoints_,n=[i[0][0],i[0][i[0].length-2]]}if(r)for(var o=t.map,a=0,s=n.length;a<s;a++){var u=n[a],c=o.getPixelFromCoordinate(u),l=t.pixel,f=l[0]-c[0],d=l[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(f*f+d*d)<=p){this.finishCoordinate_=u;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new i.default(new E.default(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===R.POINT?this.sketchCoords_=e.slice():this.mode_===R.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new i.default(new _.default(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new i.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new L(N,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,r,n,o=t.coordinate,a=this.sketchFeature_.getGeometry();(this.mode_===R.POINT?r=this.sketchCoords_:this.mode_===R.POLYGON?(r=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(o=this.finishCoordinate_.slice())):r=(e=this.sketchCoords_)[e.length-1],r[0]=o[0],r[1]=o[1],this.geometryFunction_(this.sketchCoords_,a),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(o);if(a.getType()==g.default.POLYGON&&this.mode_!==R.POLYGON){this.sketchLine_||(this.sketchLine_=new i.default);var s=a.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),n.changed()):(n=new _.default(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,r,n=t.coordinate,i=this.sketchFeature_.getGeometry();this.mode_===R.LINE_STRING?(this.finishCoordinate_=n.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(n.slice()),this.geometryFunction_(r,i)):this.mode_===R.POLYGON&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(n.slice()),e&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,i)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===R.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===R.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,r=t.getGeometry();this.mode_===R.LINE_STRING?(e.pop(),this.geometryFunction_(e,r)):this.mode_===R.POLYGON&&(e[0].pop(),this.geometryFunction_(e,r),e=r.getCoordinates()),this.type_===g.default.MULTI_POINT?t.setGeometry(new m.default([e])):this.type_===g.default.MULTI_LINE_STRING?t.setGeometry(new y.default([e])):this.type_===g.default.MULTI_POLYGON&&t.setGeometry(new v.default([e])),this.dispatchEvent(new L(M,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new L(N,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(j.default);r.default=A},{"../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","../MapBrowserEventType.js":"16e9d1f3fb7b220d40b3dda0147708b0","../MapBrowserPointerEvent.js":"051b6b89475cbbcfe393a6f6ab0fea28","../Object.js":"6c67600a5761ed2f245039657f77c37b","../coordinate.js":"2a3e9645190015dfc3d4ed757193af4c","../events.js":"47affab92622893273981942c85f03c7","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../functions.js":"cafc68c692964009aaa3cf7333cf2956","../geom/Circle.js":"04948a964f5038f7dcef46d11d8353eb","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","../geom/MultiPoint.js":"add6c8112f59ed049722d4a2b686edc3","../geom/MultiPolygon.js":"ca93ec74bdb7f70f03ca08d5bb711551","../pointer/MouseSource.js":"1004b3a7ee3334a98330537a234037de","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../geom/Polygon.js":"24ebc1624175b8546601860191490c20","./Pointer.js":"86978173166ea128b424e3f95491d310","./Property.js":"82ccbc3098fffd579a068e8c6cd44c46","../layer/Vector.js":"49de066443bc6516b98f0fae1c556dd4","../source/Vector.js":"95cd5d20039b261bf342469b43fe7572","../style/Style.js":"83d3e6a8b05474094d91379cf54baf97"}],"04948a964f5038f7dcef46d11d8353eb":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../extent.js"),i=u(t("./GeometryType.js")),o=u(t("./SimpleGeometry.js")),a=t("./flat/deflate.js"),s=t("./flat/transform.js");function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e,r,n){var i=t.call(this)||this;if(void 0!==n&&void 0===r)i.setFlatCoordinates(n,e);else{var o=r||0;i.setCenterAndRadius(e,o,n)}return i}return l(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<n){if(0===s)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var c=this.getRadius()/Math.sqrt(s);r[0]=i[0]+c*o,r[1]=i[1]+c*a;for(u=2;u<this.stride;++u)r[u]=i[u]}return r.length=this.stride,s}return n},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,n=t-r[0],i=e-r[1];return n*n+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return(0,n.createOrUpdate)(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return i.default.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if((0,n.intersects)(t,e)){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||(t[1]<=r[1]&&t[3]>=r[1]||(0,n.forEachCorner)(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,i=(0,a.deflateCoordinate)(n,0,t,this.stride);n[i++]=n[0]+e;for(var o=1,s=this.stride;o<s;++o)n[i++]=n[o];n.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter((0,s.rotate)(r,0,r.length,n,t,e,r)),this.changed()},e.prototype.translate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter((0,s.translate)(r,0,r.length,n,t,e,r)),this.changed()},e}(o.default);f.prototype.transform;var d=f;r.default=d},{"../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./SimpleGeometry.js":"2c201efc98ebdf5eedf2ad5e7989cb8b","./flat/deflate.js":"20562fe5b89ba49209b8e67a87a11b60","./flat/transform.js":"4c8bbdedb02c72e6aff9d71cb3a76316"}],"232c0f187f10187b51922cf90ab97b62":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../array.js"),i=t("../extent.js"),o=g(t("./GeometryLayout.js")),a=g(t("./GeometryType.js")),s=g(t("./LineString.js")),u=g(t("./SimpleGeometry.js")),c=t("./flat/closest.js"),l=t("./flat/deflate.js"),f=t("./flat/inflate.js"),d=t("./flat/interpolate.js"),p=t("./flat/intersectsextent.js"),h=t("./flat/simplify.js");function g(t){return t&&t.__esModule?t:{default:t}}var _,y=(_=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),m=function(t){function e(e,r,i){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,r);else if(void 0!==r&&i)o.setFlatCoordinates(r,e),o.ends_=i;else{for(var a=o.getLayout(),s=e,u=[],c=[],l=0,f=s.length;l<f;++l){var d=s[l];0===l&&(a=d.getLayout()),(0,n.extend)(u,d.getFlatCoordinates()),c.push(u.length)}o.setFlatCoordinates(a,u),o.ends_=c}return o}return y(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?(0,n.extend)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,n){return n<(0,i.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,c.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,c.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=o.default.XYM&&this.layout!=o.default.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,i=void 0!==r&&r;return(0,d.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,t,n,i)},e.prototype.getCoordinates=function(){return(0,f.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new s.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[],i=0,o=0,a=e.length;o<a;++o){var u=e[o],c=new s.default(t.slice(i,u),r);n.push(c),i=u}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,i=this.ends_,o=this.stride,a=0,s=i.length;a<s;++a){var u=i[a],c=(0,d.interpolatePoint)(e,r,u,o,.5);(0,n.extend)(t,c),r=u}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=(0,h.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,n),new e(r,o.default.XY,n)},e.prototype.getType=function(){return a.default.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return(0,p.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,l.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(u.default);r.default=m},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","./GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./LineString.js":"5d6eefef200c67688f4e433510e8c318","./SimpleGeometry.js":"2c201efc98ebdf5eedf2ad5e7989cb8b","./flat/closest.js":"8ea74ee08b8715b1dff5a6fbe306bc3b","./flat/deflate.js":"20562fe5b89ba49209b8e67a87a11b60","./flat/inflate.js":"41316cc397979197f0ec65ed178d2a19","./flat/interpolate.js":"ef56ba89fe9aeda1c21bb532787a31ed","./flat/intersectsextent.js":"e0bf5a56fa9c6ecc259fd8e4cf84e1a5","./flat/simplify.js":"a98715e91b730c5e8c7932dde8ddd333"}],add6c8112f59ed049722d4a2b686edc3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../array.js"),i=t("../extent.js"),o=f(t("./GeometryType.js")),a=f(t("./Point.js")),s=f(t("./SimpleGeometry.js")),u=t("./flat/deflate.js"),c=t("./flat/inflate.js"),l=t("../math.js");function f(t){return t&&t.__esModule?t:{default:t}}var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=function(t){function e(e,r){var n=t.call(this)||this;return r&&!Array.isArray(e[0])?n.setFlatCoordinates(r,e):n.setCoordinates(e,r),n}return p(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?(0,n.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){if(n<(0,i.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;for(var o=this.flatCoordinates,a=this.stride,s=0,u=o.length;s<u;s+=a){var c=(0,l.squaredDistance)(t,e,o[s],o[s+1]);if(c<n){n=c;for(var f=0;f<a;++f)r[f]=o[s+f];r.length=a}}return n},e.prototype.getCoordinates=function(){return(0,c.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new a.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,n=[],i=0,o=t.length;i<o;i+=r){var s=new a.default(t.slice(i,i+r),e);n.push(s)}return n},e.prototype.getType=function(){return o.default.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,n=0,o=e.length;n<o;n+=r){var a=e[n],s=e[n+1];if((0,i.containsXY)(t,a,s))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,u.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.default);r.default=h},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","./SimpleGeometry.js":"2c201efc98ebdf5eedf2ad5e7989cb8b","./flat/deflate.js":"20562fe5b89ba49209b8e67a87a11b60","./flat/inflate.js":"41316cc397979197f0ec65ed178d2a19","../math.js":"6086e082317ce6ce8a1b47fb09fed63b"}],ca93ec74bdb7f70f03ca08d5bb711551:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../array.js"),i=t("../extent.js"),o=b(t("./GeometryLayout.js")),a=b(t("./GeometryType.js")),s=b(t("./MultiPoint.js")),u=b(t("./Polygon.js")),c=b(t("./SimpleGeometry.js")),l=t("./flat/area.js"),f=t("./flat/center.js"),d=t("./flat/closest.js"),p=t("./flat/contains.js"),h=t("./flat/deflate.js"),g=t("./flat/inflate.js"),_=t("./flat/interiorpoint.js"),y=t("./flat/intersectsextent.js"),m=t("./flat/orient.js"),v=t("./flat/simplify.js");function b(t){return t&&t.__esModule?t:{default:t}}var E,S=(E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),j=function(t){function e(e,r,i){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){for(var a=o.getLayout(),s=e,u=[],c=[],l=0,f=s.length;l<f;++l){var d=s[l];0===l&&(a=d.getLayout());for(var p=u.length,h=d.getEnds(),g=0,_=h.length;g<_;++g)h[g]+=p;(0,n.extend)(u,d.getFlatCoordinates()),c.push(h)}r=a,e=u,i=c}return void 0!==r&&i?(o.setFlatCoordinates(r,e),o.endss_=i):o.setCoordinates(e,r),o}return S(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var r=this.flatCoordinates.length;(0,n.extend)(this.flatCoordinates,t.getFlatCoordinates());for(var i=0,o=(e=t.getEnds().slice()).length;i<o;++i)e[i]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,r=new Array(t),n=0;n<t;++n)r[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,r)},e.prototype.closestPointXY=function(t,e,r,n){return n<(0,i.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,d.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,d.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return(0,p.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return(0,l.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,m.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,g.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=(0,f.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,_.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new s.default(this.getFlatInteriorPoints().slice(),o.default.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,m.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,m.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=(0,v.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,n),new e(r,o.default.XY,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var r=this.endss_[t-1];e=r[r.length-1]}var n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new u.default(this.flatCoordinates.slice(e,i),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o].slice(),c=s[s.length-1];if(0!==i)for(var l=0,f=s.length;l<f;++l)s[l]-=i;var d=new u.default(e.slice(i,c),t,s);n.push(d),i=c}return n},e.prototype.getType=function(){return a.default.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return(0,y.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,h.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var n=r[r.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(c.default);r.default=j},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","./GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./MultiPoint.js":"add6c8112f59ed049722d4a2b686edc3","./Polygon.js":"24ebc1624175b8546601860191490c20","./SimpleGeometry.js":"2c201efc98ebdf5eedf2ad5e7989cb8b","./flat/area.js":"9fd79ea550c6d746cf09954b6b51dd5c","./flat/center.js":"593af12274f09ac471b9aba7462b982d","./flat/closest.js":"8ea74ee08b8715b1dff5a6fbe306bc3b","./flat/contains.js":"ee43659791d4226c3d24b329b87cd966","./flat/deflate.js":"20562fe5b89ba49209b8e67a87a11b60","./flat/inflate.js":"41316cc397979197f0ec65ed178d2a19","./flat/interiorpoint.js":"13a1a64f3cf9ef20a02b0e546fc0638c","./flat/intersectsextent.js":"e0bf5a56fa9c6ecc259fd8e4cf84e1a5","./flat/orient.js":"639aa6020d1095fcc76ca0ab863c78fa","./flat/simplify.js":"a98715e91b730c5e8c7932dde8ddd333"}],"593af12274f09ac471b9aba7462b982d":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.linearRingss=function(t,e,r,i){for(var o=[],a=(0,n.createEmpty)(),s=0,u=r.length;s<u;++s){var c=r[s];a=(0,n.createOrUpdateFromFlatCoordinates)(t,e,c[0],i),o.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=c[c.length-1]}return o};var n=t("../../extent.js")},{"../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b"}],"207526ec6daa8fe5aa6c6aa32c2cb258":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=g(t("../Feature.js")),i=g(t("../MapBrowserEventType.js")),o=t("../coordinate.js"),a=g(t("../events/Event.js")),s=t("../extent.js"),u=g(t("../geom/GeometryType.js")),c=g(t("../geom/Point.js")),l=t("../geom/Polygon.js"),f=g(t("./Pointer.js")),d=g(t("../layer/Vector.js")),p=g(t("../source/Vector.js")),h=t("../style/Style.js");function g(t){return t&&t.__esModule?t:{default:t}}var _,y=(_=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),m={EXTENTCHANGED:"extentchanged"},v=function(t){function e(e){var r=t.call(this,m.EXTENTCHANGED)||this;return r.extent=e,r}return y(e,t),e}(a.default);function b(){var t=(0,h.createEditingStyle)();return function(e,r){return t[u.default.POINT]}}function E(t){return function(e){return(0,s.boundingExtent)([t,e])}}function S(t,e){return t[0]==e[0]?function(r){return(0,s.boundingExtent)([t,[r[0],e[1]]])}:t[1]==e[1]?function(r){return(0,s.boundingExtent)([t,[e[0],r[1]]])}:null}var j=function(t){function e(e){var r,n=this,i=e||{};return(n=t.call(this,i)||this).extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,e||(e={}),n.extentOverlay_=new d.default({source:new p.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(r=(0,h.createEditingStyle)(),function(t,e){return r[u.default.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new d.default({source:new p.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:b(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&n.setExtent(e.extent),n}return y(e,t),e.prototype.snapToVertex_=function(t,e){var r=e.getCoordinateFromPixel(t),n=this.getExtent();if(n){var i=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(n);i.sort(function(t,e){return(0,o.squaredDistanceToSegment)(r,t)-(0,o.squaredDistanceToSegment)(r,e)});var a=i[0],s=(0,o.closestOnSegment)(r,a),u=e.getPixelFromCoordinate(s);if((0,o.distance)(t,u)<=this.pixelTolerance_){var c=e.getPixelFromCoordinate(a[0]),l=e.getPixelFromCoordinate(a[1]),f=(0,o.squaredDistance)(u,c),d=(0,o.squaredDistance)(u,l),p=Math.sqrt(Math.min(f,d));return this.snappedToVertex_=p<=this.pixelTolerance_,this.snappedToVertex_&&(s=f>d?a[1]:a[0]),s}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,r=t.map,n=this.snapToVertex_(e,r);n||(n=r.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry((0,l.fromExtent)(t)):e.setGeometry(void 0):(e=t?new n.default((0,l.fromExtent)(t)):new n.default({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new n.default(new c.default(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=i.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,r=t.map,n=this.getExtent(),i=this.snapToVertex_(e,r),o=function(t){var e=null,r=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?r=n[3]:t[1]==n[3]&&(r=n[1]),null!==e&&null!==r?[e,r]:null};if(i&&n){var a=i[0]==n[0]||i[0]==n[2]?i[0]:null,s=i[1]==n[1]||i[1]==n[3]?i[1]:null;null!==a&&null!==s?this.pointerHandler_=E(o(i)):null!==a?this.pointerHandler_=S(o([a,n[1]]),o([a,n[3]])):null!==s&&(this.pointerHandler_=S(o([n[0],s]),o([n[2],s])))}else i=r.getCoordinateFromPixel(e),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=E(i);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtent();return e&&0!==(0,s.getArea)(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new v(this.extent_))},e}(f.default);r.default=j},{"../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","../MapBrowserEventType.js":"16e9d1f3fb7b220d40b3dda0147708b0","../coordinate.js":"2a3e9645190015dfc3d4ed757193af4c","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../geom/Polygon.js":"24ebc1624175b8546601860191490c20","./Pointer.js":"86978173166ea128b424e3f95491d310","../layer/Vector.js":"49de066443bc6516b98f0fae1c556dd4","../source/Vector.js":"95cd5d20039b261bf342469b43fe7572","../style/Style.js":"83d3e6a8b05474094d91379cf54baf97"}],b4ed784e6ba119d05ec2cae043f21b14:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ModifyEvent=void 0;var n=t("../util.js"),i=j(t("../Collection.js")),o=j(t("../CollectionEventType.js")),a=j(t("../Feature.js")),s=j(t("../MapBrowserEventType.js")),u=t("../array.js"),c=t("../coordinate.js"),l=t("../events.js"),f=j(t("../events/Event.js")),d=j(t("../events/EventType.js")),p=t("../events/condition.js"),h=t("../extent.js"),g=j(t("../geom/GeometryType.js")),_=j(t("../geom/Point.js")),y=j(t("./Pointer.js")),m=j(t("../layer/Vector.js")),v=j(t("../source/Vector.js")),b=j(t("../source/VectorEventType.js")),E=j(t("../structs/RBush.js")),S=t("../style/Style.js");function j(t){return t&&t.__esModule?t:{default:t}}var O,P=(O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),T=1,x="modifystart",C="modifyend",I=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.features=r,i.mapBrowserEvent=n,i}return P(e,t),e}(f.default);function w(t,e){return t.index-e.index}function R(t,e){var r=e.geometry;if(r.getType()===g.default.CIRCLE){var n=r;if(e.index===T){var i=(0,c.squaredDistance)(n.getCenter(),t),o=Math.sqrt(i)-n.getRadius();return o*o}}return(0,c.squaredDistanceToSegment)(t,e.segment)}function N(t,e){var r=e.geometry;return r.getType()===g.default.CIRCLE&&e.index===T?r.getClosestPoint(t):(0,c.closestOnSegment)(t,e.segment)}r.ModifyEvent=I;var M=function(t){function e(e){var r,n,a=t.call(this,e)||this;if(a.condition_=e.condition?e.condition:p.primaryAction,a.defaultDeleteCondition_=function(t){return(0,p.altKeyOnly)(t)&&(0,p.singleClick)(t)},a.deleteCondition_=e.deleteCondition?e.deleteCondition:a.defaultDeleteCondition_,a.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:p.always,a.vertexFeature_=null,a.vertexSegments_=null,a.lastPixel_=[0,0],a.ignoreNextSingleClick_=!1,a.modified_=!1,a.rBush_=new E.default,a.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,a.snappedToVertex_=!1,a.changingFeature_=!1,a.dragSegments_=[],a.overlay_=new m.default({source:new v.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(r=(0,S.createEditingStyle)(),function(t,e){return r[g.default.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),a.SEGMENT_WRITERS_={Point:a.writePointGeometry_,LineString:a.writeLineStringGeometry_,LinearRing:a.writeLineStringGeometry_,Polygon:a.writePolygonGeometry_,MultiPoint:a.writeMultiPointGeometry_,MultiLineString:a.writeMultiLineStringGeometry_,MultiPolygon:a.writeMultiPolygonGeometry_,Circle:a.writeCircleGeometry_,GeometryCollection:a.writeGeometryCollectionGeometry_},a.source_=null,e.source?(a.source_=e.source,n=new i.default(a.source_.getFeatures()),(0,l.listen)(a.source_,b.default.ADDFEATURE,a.handleSourceAdd_,a),(0,l.listen)(a.source_,b.default.REMOVEFEATURE,a.handleSourceRemove_,a)):n=e.features,!n)throw new Error("The modify interaction requires features or a source");return a.features_=n,a.features_.forEach(a.addFeature_.bind(a)),(0,l.listen)(a.features_,o.default.ADD,a.handleFeatureAdd_,a),(0,l.listen)(a.features_,o.default.REMOVE,a.handleFeatureRemove_,a),a.lastPointerEvent_=null,a}return P(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),(0,l.listen)(t,d.default.CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new I(x,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),(0,l.unlisten)(t,d.default.CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,r=[];e.forEach(function(e){t===e.feature&&r.push(e)});for(var n=r.length-1;n>=0;--n){for(var i=r[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);e.remove(i)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,geometry:e,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert((0,h.boundingExtent)(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),c={feature:t,geometry:e,depth:[n],index:a,segment:u};this.rBush_.insert((0,h.boundingExtent)(u),c)}},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),c={feature:t,geometry:e,depth:[n],index:a,segment:u};this.rBush_.insert((0,h.boundingExtent)(u),c)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],c=0,l=u.length-1;c<l;++c){var f=u.slice(c,c+2),d={feature:t,geometry:e,depth:[a,n],index:c,segment:f};this.rBush_.insert((0,h.boundingExtent)(f),d)}},e.prototype.writeCircleGeometry_=function(t,e){var r=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[r,r]},i={feature:t,geometry:e,index:T,segment:[r,r]},o=[n,i];n.featureSegments=i.featureSegments=o,this.rBush_.insert((0,h.createOrUpdateFromCoordinate)(r),n),this.rBush_.insert(e.getExtent(),i)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n)this.SEGMENT_WRITERS_[r[n].getType()].call(this,t,r[n])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new a.default(new _.default(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=s.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(r=!(e.type!=s.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==s.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!r);var r},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,r=0,n=this.dragSegments_.length;r<n;++r){for(var i=this.dragSegments_[r],o=i[0],a=o.depth,s=o.geometry,u=void 0,l=o.segment,f=i[1];e.length<s.getStride();)e.push(l[f][e.length]);switch(s.getType()){case g.default.POINT:u=e,l[0]=l[1]=e;break;case g.default.MULTI_POINT:(u=s.getCoordinates())[o.index]=e,l[0]=l[1]=e;break;case g.default.LINE_STRING:(u=s.getCoordinates())[o.index+f]=e,l[f]=e;break;case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(u=s.getCoordinates())[a[0]][o.index+f]=e,l[f]=e;break;case g.default.MULTI_POLYGON:(u=s.getCoordinates())[a[1]][a[0]][o.index+f]=e,l[f]=e;break;case g.default.CIRCLE:l[0]=l[1]=e,0===o.index?(this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,s.setRadius((0,c.distance)(s.getCenter(),e)),this.changingFeature_=!1)}u&&this.setGeometryCoordinates_(s,u)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var i=[],o=r.getGeometry().getCoordinates(),a=(0,h.boundingExtent)([o]),s=this.rBush_.getInExtent(a),u={};s.sort(w);for(var l=0,f=s.length;l<f;++l){var d=s[l],p=d.segment,_=(0,n.getUid)(d.feature),y=d.depth;if(y&&(_+="-"+y.join("-")),u[_]||(u[_]=new Array(2)),d.geometry.getType()===g.default.CIRCLE&&d.index===T){var m=N(e,d);(0,c.equals)(m,o)&&!u[_][0]&&(this.dragSegments_.push([d,0]),u[_][0]=d)}else if((0,c.equals)(p[0],o)&&!u[_][0])this.dragSegments_.push([d,0]),u[_][0]=d;else if((0,c.equals)(p[1],o)&&!u[_][1]){if((d.geometry.getType()===g.default.LINE_STRING||d.geometry.getType()===g.default.MULTI_LINE_STRING)&&u[_][0]&&0===u[_][0].index)continue;this.dragSegments_.push([d,1]),u[_][1]=d}else(0,n.getUid)(p)in this.vertexSegments_&&!u[_][0]&&!u[_][1]&&this.insertVertexCondition_(t)&&i.push([d,o])}i.length&&this.willModifyFeatures_(t);for(var v=i.length-1;v>=0;--v)this.insertVertex_.apply(this,i[v])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var r=this.dragSegments_[e][0],n=r.geometry;if(n.getType()===g.default.CIRCLE){var i=n.getCenter(),o=r.featureSegments[0],a=r.featureSegments[1];o.segment[0]=o.segment[1]=i,a.segment[0]=a.segment[1]=i,this.rBush_.update((0,h.createOrUpdateFromCoordinate)(i),o),this.rBush_.update(n.getExtent(),a)}else this.rBush_.update((0,h.boundingExtent)(r.segment),r)}return this.modified_&&(this.dispatchEvent(new I(C,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var r=e.getCoordinateFromPixel(t),i=(0,h.buffer)((0,h.createOrUpdateFromCoordinate)(r),e.getView().getResolution()*this.pixelTolerance_),o=this.rBush_.getInExtent(i);if(o.length>0){o.sort(function(t,e){return R(r,t)-R(r,e)});var a=o[0],s=a.segment,u=N(r,a),l=e.getPixelFromCoordinate(u),f=(0,c.distance)(t,l);if(f<=this.pixelTolerance_){var d={};if(a.geometry.getType()===g.default.CIRCLE&&a.index===T)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u);else{var p=e.getPixelFromCoordinate(s[0]),_=e.getPixelFromCoordinate(s[1]),y=(0,c.squaredDistance)(l,p),m=(0,c.squaredDistance)(l,_);f=Math.sqrt(Math.min(y,m)),this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(u=y>m?s[1]:s[0]),this.createOrUpdateVertexFeature_(u);for(var v=1,b=o.length;v<b;++v){var E=o[v].segment;if(!((0,c.equals)(s[0],E[0])&&(0,c.equals)(s[1],E[1])||(0,c.equals)(s[0],E[1])&&(0,c.equals)(s[1],E[0])))break;d[(0,n.getUid)(E)]=!0}}return d[(0,n.getUid)(s)]=!0,void(this.vertexSegments_=d)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var r,n=t.segment,i=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(r=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case g.default.MULTI_POLYGON:(r=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case g.default.LINE_STRING:(r=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,r);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(o,s,a,1);var c={segment:[n[0],e],feature:i,geometry:o,depth:a,index:s};u.insert((0,h.boundingExtent)(c.segment),c),this.dragSegments_.push([c,1]);var l={segment:[e,n[1]],feature:i,geometry:o,depth:a,index:s+1};u.insert((0,h.boundingExtent)(l.segment),l),this.dragSegments_.push([l,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=s.default.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);var e=this.removeVertex_();return this.dispatchEvent(new I(C,this.features_,t)),this.modified_=!1,e}return!1},e.prototype.removeVertex_=function(){var t,e,r,i,o,a,s,u,c,l,f,d=this.dragSegments_,p={},_=!1;for(o=d.length-1;o>=0;--o)l=(r=d[o])[0],f=(0,n.getUid)(l.feature),l.depth&&(f+="-"+l.depth.join("-")),f in p||(p[f]={}),0===r[1]?(p[f].right=l,p[f].index=l.index):1==r[1]&&(p[f].left=l,p[f].index=l.index+1);for(f in p){switch(c=p[f].right,s=p[f].left,(u=(a=p[f].index)-1)<0&&(u=0),t=e=(i=(l=void 0!==s?s:c).geometry).getCoordinates(),_=!1,i.getType()){case g.default.MULTI_LINE_STRING:e[l.depth[0]].length>2&&(e[l.depth[0]].splice(a,1),_=!0);break;case g.default.LINE_STRING:e.length>2&&(e.splice(a,1),_=!0);break;case g.default.MULTI_POLYGON:t=t[l.depth[1]];case g.default.POLYGON:(t=t[l.depth[0]]).length>4&&(a==t.length-1&&(a=0),t.splice(a,1),_=!0,0===a&&(t.pop(),t.push(t[0]),u=t.length-1))}if(_){this.setGeometryCoordinates_(i,e);var y=[];if(void 0!==s&&(this.rBush_.remove(s),y.push(s.segment[0])),void 0!==c&&(this.rBush_.remove(c),y.push(c.segment[1])),void 0!==s&&void 0!==c){var m={depth:l.depth,feature:l.feature,geometry:l.geometry,index:u,segment:y};this.rBush_.insert((0,h.boundingExtent)(m.segment),m)}this.updateSegmentIndices_(i,a,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d.length=0}}return _},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,r,n){this.rBush_.forEachInExtent(t.getExtent(),function(i){i.geometry===t&&(void 0===r||void 0===i.depth||(0,u.equals)(i.depth,r))&&i.index>e&&(i.index+=n)})},e}(y.default);r.default=M},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../Collection.js":"6f090fc511268dcb6cf8b42e032e7c46","../CollectionEventType.js":"1a284b36b7148c11d579a4e84e9735c1","../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","../MapBrowserEventType.js":"16e9d1f3fb7b220d40b3dda0147708b0","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../coordinate.js":"2a3e9645190015dfc3d4ed757193af4c","../events.js":"47affab92622893273981942c85f03c7","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","./Pointer.js":"86978173166ea128b424e3f95491d310","../layer/Vector.js":"49de066443bc6516b98f0fae1c556dd4","../source/Vector.js":"95cd5d20039b261bf342469b43fe7572","../source/VectorEventType.js":"5a513e143aeb1c0e5d6fc723e7649eae","../structs/RBush.js":"fd701e760b3fc72cad0c10aedd2407c9","../style/Style.js":"83d3e6a8b05474094d91379cf54baf97"}],e8342bc79049cfaa48b53ca1a6260d64:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=_(t("../CollectionEventType.js")),o=t("../array.js"),a=t("../events.js"),s=_(t("../events/Event.js")),u=t("../events/condition.js"),c=t("../functions.js"),l=_(t("../geom/GeometryType.js")),f=_(t("./Interaction.js")),d=_(t("../layer/Vector.js")),p=t("../obj.js"),h=_(t("../source/Vector.js")),g=t("../style/Style.js");function _(t){return t&&t.__esModule?t:{default:t}}var y,m=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),v={SELECT:"select"},b=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.selected=r,o.deselected=n,o.mapBrowserEvent=i,o}return m(e,t),e}(s.default);function E(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),r=this.removeCondition_(t),n=this.toggleCondition_(t),i=!e&&!r&&!n,a=t.map,s=this.getFeatures(),c=[],l=[];if(i){(0,p.clear)(this.featureLayerAssociation_),a.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return l.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=s.getLength()-1;f>=0;--f){var d=s.item(f),h=l.indexOf(d);h>-1?l.splice(h,1):(s.remove(d),c.push(d))}0!==l.length&&s.extend(l)}else{a.forEachFeatureAtPixel(t.pixel,function(t,i){if(this.filter_(t,i))return!e&&!n||(0,o.includes)(s.getArray(),t)?(r||n)&&(0,o.includes)(s.getArray(),t)&&(c.push(t),this.removeFeatureLayerAssociation_(t)):(l.push(t),this.addFeatureLayerAssociation_(t,i)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var g=c.length-1;g>=0;--g)s.remove(c[g]);s.extend(l)}return(l.length>0||c.length>0)&&this.dispatchEvent(new b(v.SELECT,l,c,t)),(0,u.pointerMove)(t)}function S(){var t=(0,g.createEditingStyle)();return(0,o.extend)(t[l.default.POLYGON],t[l.default.LINE_STRING]),(0,o.extend)(t[l.default.GEOMETRY_COLLECTION],t[l.default.LINE_STRING]),function(e,r){return e.getGeometry()?t[e.getGeometry().getType()]:null}}var j=function(t){function e(e){var r=t.call(this,{handleEvent:E})||this,n=e||{};r.condition_=n.condition?n.condition:u.singleClick,r.addCondition_=n.addCondition?n.addCondition:u.never,r.removeCondition_=n.removeCondition?n.removeCondition:u.never,r.toggleCondition_=n.toggleCondition?n.toggleCondition:u.shiftKeyOnly,r.multi_=!!n.multi&&n.multi,r.filter_=n.filter?n.filter:c.TRUE,r.hitTolerance_=n.hitTolerance?n.hitTolerance:0;var s,l=new d.default({source:new h.default({useSpatialIndex:!1,features:n.features,wrapX:n.wrapX}),style:n.style?n.style:S(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(r.featureOverlay_=l,n.layers)if("function"==typeof n.layers)s=n.layers;else{var f=n.layers;s=function(t){return(0,o.includes)(f,t)}}else s=c.TRUE;r.layerFilter_=s,r.featureLayerAssociation_={};var p=r.getFeatures();return(0,a.listen)(p,i.default.ADD,r.addFeature_,r),(0,a.listen)(p,i.default.REMOVE,r.removeFeature_,r),r}return m(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[(0,n.getUid)(t)]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[(0,n.getUid)(t)]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap(),n=this.getFeatures();r&&n.forEach(r.unskipFeature.bind(r)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&n.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[(0,n.getUid)(t)]},e}(f.default);r.default=j},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../CollectionEventType.js":"1a284b36b7148c11d579a4e84e9735c1","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../events.js":"47affab92622893273981942c85f03c7","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../events/condition.js":"4449d39ce8d8b432db07b1426fa88625","../functions.js":"cafc68c692964009aaa3cf7333cf2956","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./Interaction.js":"cc9126949131cc64ccbe8ff1befaff45","../layer/Vector.js":"49de066443bc6516b98f0fae1c556dd4","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../source/Vector.js":"95cd5d20039b261bf342469b43fe7572","../style/Style.js":"83d3e6a8b05474094d91379cf54baf97"}],"9b7bff6d876f47a7206412226fac0e51":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=_(t("../CollectionEventType.js")),o=t("../coordinate.js"),a=t("../events.js"),s=_(t("../events/EventType.js")),u=t("../extent.js"),c=t("../functions.js"),l=_(t("../geom/GeometryType.js")),f=t("../geom/Polygon.js"),d=_(t("./Pointer.js")),p=t("../obj.js"),h=_(t("../source/VectorEventType.js")),g=_(t("../structs/RBush.js"));function _(t){return t&&t.__esModule?t:{default:t}}var y,m=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function v(t){return t.feature?t.feature:t.element?t.element:void 0}var b=function(t){function e(e){var r=this,n=e||{},i=n;return i.handleDownEvent||(i.handleDownEvent=c.TRUE),i.stopDown||(i.stopDown=c.FALSE),(r=t.call(this,i)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelCoordinate_=null,r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.sortByDistance_=function(t,e){var r=(0,o.squaredDistanceToSegment)(this.pixelCoordinate_,t.segment),n=(0,o.squaredDistanceToSegment)(this.pixelCoordinate_,e.segment);return r-n}.bind(r),r.rBush_=new g.default,r.SEGMENT_WRITERS_={Point:r.writePointGeometry_,LineString:r.writeLineStringGeometry_,LinearRing:r.writeLineStringGeometry_,Polygon:r.writePolygonGeometry_,MultiPoint:r.writeMultiPointGeometry_,MultiLineString:r.writeMultiLineStringGeometry_,MultiPolygon:r.writeMultiPolygonGeometry_,GeometryCollection:r.writeGeometryCollectionGeometry_,Circle:r.writeCircleGeometry_},r}return m(e,t),e.prototype.addFeature=function(t,e){var r=void 0===e||e,i=(0,n.getUid)(t),o=t.getGeometry();if(o){var c=this.SEGMENT_WRITERS_[o.getType()];c&&(this.indexedFeaturesExtents_[i]=o.getExtent((0,u.createEmpty)()),c.call(this,t,o))}r&&(this.featureChangeListenerKeys_[i]=(0,a.listen)(t,s.default.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var r=this.snapTo(e.pixel,e.coordinate,e.map);return r.snapped&&(e.coordinate=r.vertex.slice(0,2),e.pixel=r.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=v(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=v(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var r=(0,n.getUid)(e);r in this.pendingFeatures_||(this.pendingFeatures_[r]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=(0,p.getValues)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var r=void 0===e||e,i=(0,n.getUid)(t),o=this.indexedFeaturesExtents_[i];if(o){var s=this.rBush_,u=[];s.forEachInExtent(o,function(e){t===e.feature&&u.push(e)});for(var c=u.length-1;c>=0;--c)s.remove(u[c])}r&&((0,a.unlistenByKey)(this.featureChangeListenerKeys_[i]),delete this.featureChangeListenerKeys_[i])},e.prototype.setMap=function(e){var r=this.getMap(),n=this.featuresListenerKeys_,o=this.getFeatures_();r&&(n.forEach(a.unlistenByKey),n.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push((0,a.listen)(this.features_,i.default.ADD,this.handleFeatureAdd_,this),(0,a.listen)(this.features_,i.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push((0,a.listen)(this.source_,h.default.ADDFEATURE,this.handleFeatureAdd_,this),(0,a.listen)(this.source_,h.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,r){var n=r.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),i=r.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),a=(0,u.boundingExtent)([n,i]),s=this.rBush_.getInExtent(a);this.vertex_&&!this.edge_&&(s=s.filter(function(t){return t.feature.getGeometry().getType()!==l.default.CIRCLE}));var c,f,d,p,h=!1,g=null,_=null;if(s.length>0){this.pixelCoordinate_=e,s.sort(this.sortByDistance_);var y=s[0].segment,m=s[0].feature.getGeometry().getType()===l.default.CIRCLE;this.vertex_&&!this.edge_?(c=r.getPixelFromCoordinate(y[0]),f=r.getPixelFromCoordinate(y[1]),d=(0,o.squaredDistance)(t,c),p=(0,o.squaredDistance)(t,f),Math.sqrt(Math.min(d,p))<=this.pixelTolerance_&&(h=!0,g=d>p?y[1]:y[0],_=r.getPixelFromCoordinate(g))):this.edge_&&(g=m?(0,o.closestOnCircle)(e,s[0].feature.getGeometry()):(0,o.closestOnSegment)(e,y),_=r.getPixelFromCoordinate(g),(0,o.distance)(t,_)<=this.pixelTolerance_&&(h=!0,this.vertex_&&!m&&(c=r.getPixelFromCoordinate(y[0]),f=r.getPixelFromCoordinate(y[1]),d=(0,o.squaredDistance)(_,c),p=(0,o.squaredDistance)(_,f),Math.sqrt(Math.min(d,p))<=this.pixelTolerance_&&(g=d>p?y[1]:y[0],_=r.getPixelFromCoordinate(g))))),h&&(_=[Math.round(_[0]),Math.round(_[1])])}return{snapped:h,vertex:g,vertexPixel:_}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){for(var r=(0,f.fromCircle)(e).getCoordinates()[0],n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,segment:o};this.rBush_.insert((0,u.boundingExtent)(o),a)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=this.SEGMENT_WRITERS_[r[n].getType()];i&&i.call(this,t,r[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,segment:o};this.rBush_.insert((0,u.boundingExtent)(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var c=o.slice(a,a+2),l={feature:t,segment:c};this.rBush_.insert((0,u.boundingExtent)(c),l)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var c=o[a],l=0,f=c.length-1;l<f;++l){var d=c.slice(l,l+2),p={feature:t,segment:d};this.rBush_.insert((0,u.boundingExtent)(d),p)}},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var c=o.slice(a,a+2),l={feature:t,segment:c};this.rBush_.insert((0,u.boundingExtent)(c),l)}},e}(d.default);r.default=b},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../CollectionEventType.js":"1a284b36b7148c11d579a4e84e9735c1","../coordinate.js":"2a3e9645190015dfc3d4ed757193af4c","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../functions.js":"cafc68c692964009aaa3cf7333cf2956","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../geom/Polygon.js":"24ebc1624175b8546601860191490c20","./Pointer.js":"86978173166ea128b424e3f95491d310","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../source/VectorEventType.js":"5a513e143aeb1c0e5d6fc723e7649eae","../structs/RBush.js":"fd701e760b3fc72cad0c10aedd2407c9"}],d70b994219968cd577c6750cdd7a2870:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.TranslateEvent=void 0;var n=f(t("../Collection.js")),i=t("../Object.js"),o=t("../events.js"),a=f(t("../events/Event.js")),s=t("../functions.js"),u=t("../array.js"),c=f(t("./Pointer.js")),l=f(t("./Property.js"));function f(t){return t&&t.__esModule?t:{default:t}}var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h="translatestart",g="translating",_="translateend",y=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.features=r,i.coordinate=n,i}return p(e,t),e}(a.default);r.TranslateEvent=y;var m=function(t){function e(e){var r,n=this,a=e||{};if((n=t.call(this,a)||this).lastCoordinate_=null,n.features_=void 0!==a.features?a.features:null,a.layers)if("function"==typeof a.layers)r=a.layers;else{var c=a.layers;r=function(t){return(0,u.includes)(c,t)}}else r=s.TRUE;return n.layerFilter_=r,n.filter_=a.filter?a.filter:s.TRUE,n.hitTolerance_=a.hitTolerance?a.hitTolerance:0,n.lastFeature_=null,(0,o.listen)(n,(0,i.getChangeEventType)(l.default.ACTIVE),n.handleActiveChanged_,n),n}return p(e,t),e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new n.default([this.lastFeature_]);return this.dispatchEvent(new y(h,e,t.coordinate)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new n.default([this.lastFeature_]);return this.dispatchEvent(new y(_,e,t.coordinate)),!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,r=e[0]-this.lastCoordinate_[0],i=e[1]-this.lastCoordinate_[1],o=this.features_||new n.default([this.lastFeature_]);o.forEach(function(t){var e=t.getGeometry();e.translate(r,i),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new y(g,o,e))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||(0,u.includes)(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(c.default);r.default=m},{"../Collection.js":"6f090fc511268dcb6cf8b42e032e7c46","../Object.js":"6c67600a5761ed2f245039657f77c37b","../events.js":"47affab92622893273981942c85f03c7","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../functions.js":"cafc68c692964009aaa3cf7333cf2956","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","./Pointer.js":"86978173166ea128b424e3f95491d310","./Property.js":"82ccbc3098fffd579a068e8c6cd44c46"}],"0d7a2d2c130d373853ebb848728aee0f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./structs/LRUCache.js"))&&n.__esModule?n:{default:n},o=t("./tilecoord.js");var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=(0,o.fromKey)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove((0,o.getKey)(t.tileCoord)),t.dispose())}.bind(this))}},e}(i.default);r.default=u},{"./structs/LRUCache.js":"9434da164ac7e8055b4d84766e5a6da8","./tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18"}],"7ef1a68c2d6255b0b11db8cdb1792f18":[function(t,e,r){"use strict";function n(t,e,r){return t+"/"+e+"/"+r}Object.defineProperty(r,"__esModule",{value:!0}),r.createOrUpdate=function(t,e,r,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]},r.getKeyZXY=n,r.getKey=function(t){return n(t[0],t[1],t[2])},r.fromKey=function(t){return t.split("/").map(Number)},r.hash=function(t){return(t[1]<<t[0])+t[2]},r.withinExtentAndZ=function(t,e){var r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o,a=e.getExtent();o=a?e.getTileRangeForExtentAndZ(a,r):e.getFullTileRange(r);return!o||o.containsXY(n,i)}},{}],"2907bc9189da59ab4885682af56a1740":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createOrUpdate=function(t,e,r,i,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=r,o.maxY=i,o):new n(t,e,r,i)},r.default=void 0;var n=function(){function t(t,e,r,n){this.minX=t,this.maxX=e,this.minY=r,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();var i=n;r.default=i},{}],"81f8ac747f5f7ceec55a05875db09968":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./util.js"),i=s(t("./Tile.js")),o=s(t("./TileState.js")),a=t("./dom.js");function s(t){return t&&t.__esModule?t:{default:t}}var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,{transition:0})||this;return s.context_={},s.executorGroups={},s.loadingSourceTiles=0,s.errorSourceTileKeys={},s.replayState_={},s.wantedResolution,s.getSourceTiles_=o,s.removeSourceTiles_=a,s.sourceTileGrid_=i,s.sourceZ=-1,s.hifi=!1,s.wrappedTileCoord=n,s}return c(e,t),e.prototype.disposeInternal=function(){for(var e in this.removeSourceTiles_(this),this.context_){var r=this.context_[e].canvas;r.width=r.height=0}for(var e in this.executorGroups)for(var n=this.executorGroups[e],i=0,a=n.length;i<a;++i)n[i].disposeInternal();this.setState(o.default.ABORT),t.prototype.disposeInternal.call(this)},e.prototype.getContext=function(t){var e=(0,n.getUid)(t);return e in this.context_||(this.context_[e]=(0,a.createCanvasContext2D)()),this.context_[e]},e.prototype.hasContext=function(t){return(0,n.getUid)(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=(0,n.getUid)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles_(this)},e}(i.default);r.default=l},{"./util.js":"4bb2f7213adce7213216789f3fd3a27b","./Tile.js":"81b8476e359c6fd98b69f8a2aa011224","./TileState.js":"db929d9360c0941c511bb453a25f591f","./dom.js":"0ade60b4014b5f1918822f5d81f5a358"}],e87dd3cf0c48628d84f21f6160fdd314:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(t("./Tile.js")),i=o(t("./TileState.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.consumers=0,s.extent=null,s.format_=i,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=o,s.url_=n,s}return s(e,t),e.prototype.disposeInternal=function(){this.setState(i.default.ABORT),t.prototype.disposeInternal.call(this)},e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.load=function(){this.state==i.default.IDLE&&(this.setState(i.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(i.default.ERROR)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(i.default.LOADED)},e.prototype.setLoader=function(t){this.loader_=t},e}(n.default);r.default=u},{"./Tile.js":"81b8476e359c6fd98b69f8a2aa011224","./TileState.js":"db929d9360c0941c511bb453a25f591f"}],f1f6723dd857e499535771c93bd4014b:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BingMaps",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"CartoDB",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Cluster",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"IIIF",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"ImageArcGISRest",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"ImageCanvas",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"ImageMapGuide",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"ImageStatic",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"ImageWMS",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"OSM",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"Raster",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"Source",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"Stamen",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"Tile",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"TileArcGISRest",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"TileDebug",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"TileImage",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"TileJSON",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"TileWMS",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(r,"UrlTile",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(r,"UTFGrid",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(r,"VectorTile",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(r,"WMTS",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(r,"XYZ",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"Zoomify",{enumerable:!0,get:function(){return I.default}});var n=w(t("./source/BingMaps.js")),i=w(t("./source/CartoDB.js")),o=w(t("./source/Cluster.js")),a=w(t("./source/IIIF.js")),s=w(t("./source/Image.js")),u=w(t("./source/ImageArcGISRest.js")),c=w(t("./source/ImageCanvas.js")),l=w(t("./source/ImageMapGuide.js")),f=w(t("./source/ImageStatic.js")),d=w(t("./source/ImageWMS.js")),p=w(t("./source/OSM.js")),h=w(t("./source/Raster.js")),g=w(t("./source/Source.js")),_=w(t("./source/Stamen.js")),y=w(t("./source/Tile.js")),m=w(t("./source/TileArcGISRest.js")),v=w(t("./source/TileDebug.js")),b=w(t("./source/TileImage.js")),E=w(t("./source/TileJSON.js")),S=w(t("./source/TileWMS.js")),j=w(t("./source/UrlTile.js")),O=w(t("./source/UTFGrid.js")),P=w(t("./source/Vector.js")),T=w(t("./source/VectorTile.js")),x=w(t("./source/WMTS.js")),C=w(t("./source/XYZ.js")),I=w(t("./source/Zoomify.js"));function w(t){return t&&t.__esModule?t:{default:t}}},{"./source/BingMaps.js":"f44e3d21cedd2680f980a337b21527d7","./source/CartoDB.js":"ab163e01437f97dddb3fedf01142928e","./source/Cluster.js":"2ec6c1c1a00c4a6a0f58f4e93160d22c","./source/IIIF.js":"f699745e4db89ecb07ad25ea3f8b0eb5","./source/Image.js":"0d557ad8d5bf433364223abc399fcf00","./source/ImageArcGISRest.js":"3d11e902ffb52c3b374ff6c4f02bf679","./source/ImageCanvas.js":"36a690aa6af6985692c07fd3c287eee6","./source/ImageMapGuide.js":"91dae402a7692aa9bfc63e25f098d799","./source/ImageStatic.js":"13ec5324b6be5d2ef6825c1b8b7f4c49","./source/ImageWMS.js":"7262ed0a668c45c94b880668b88d703f","./source/OSM.js":"f719f6304814109b4dfb530be0546a38","./source/Raster.js":"d8a5bd9fcec25ff0b7a48ebfea432347","./source/Source.js":"c0ef99a14a1dba4f0de89682688995af","./source/Stamen.js":"fce415c59433cd1f689258c78f8e2e7b","./source/Tile.js":"0de545ec02c1ee8840fe79b6a804760d","./source/TileArcGISRest.js":"46d35a4e0e4e38a8ffb2cae6de508f79","./source/TileDebug.js":"591e93c3cfdfb136d1a788d291289664","./source/TileImage.js":"0c76cda638b1ee6818638d4dcd4bc115","./source/TileJSON.js":"bb518d458cc03d1168267c09774ee282","./source/TileWMS.js":"d48bb0d85ccf34cdde4956ec73823b4c","./source/UrlTile.js":"b7ef810066c963b64d57642abaae57ec","./source/UTFGrid.js":"8d3580009a303fbda54d17e08112778c","./source/Vector.js":"95cd5d20039b261bf342469b43fe7572","./source/VectorTile.js":"0236fbf4804982a8db6d9652e73bd7cc","./source/WMTS.js":"b68bc00724327aece80d0ca447a33ad6","./source/XYZ.js":"f476ca94e3360e8401635d9c9a05ed59","./source/Zoomify.js":"257132d15b16c03f16124a7fe987fb86"}],f44e3d21cedd2680f980a337b21527d7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.quadKey=h,r.default=void 0;var n=t("../tileurlfunction.js"),i=t("../extent.js"),o=t("../net.js"),a=t("../proj.js"),s=f(t("./State.js")),u=f(t("./TileImage.js")),c=t("../tilecoord.js"),l=t("../tilegrid.js");function f(t){return t&&t.__esModule?t:{default:t}}var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function h(t){var e,r,n=t[0],i=new Array(n),o=1<<n-1;for(e=0;e<n;++e)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),i[e]=String.fromCharCode(r),o>>=1;return i.join("")}var g=function(t){function e(e){var r=this,n=void 0!==e.hidpi&&e.hidpi;(r=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:(0,a.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:s.default.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this).hidpi_=n,r.culture_=void 0!==e.culture?e.culture:"en-us",r.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,r.apiKey_=e.key,r.imagerySet_=e.imagerySet;var i="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+r.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+r.apiKey_+"&c="+r.culture_;return(0,o.jsonp)(i,r.handleImageryMetadataResponse.bind(r),void 0,"jsonp"),r}return p(e,t),e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],r=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,o=this.getProjection(),u=(0,l.extentFromProjection)(o),f=this.hidpi_?2:1,d=e.imageWidth==e.imageHeight?e.imageWidth/f:[e.imageWidth/f,e.imageHeight/f],p=(0,l.createXYZ)({extent:u,minZoom:e.zoomMin,maxZoom:r,tileSize:d});this.tileGrid=p;var g=this.culture_,_=this.hidpi_;if(this.tileUrlFunction=(0,n.createFromTileUrlFunctions)(e.imageUrlSubdomains.map(function(t){var r=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",g);return function(t,e,i){if(t){(0,c.createOrUpdate)(t[0],t[1],t[2],r);var o=n;return _&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",h(r))}}})),e.imageryProviders){var y=(0,a.getTransformFromProjections)((0,a.get)("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var r=[],n=t.viewState,o=this.getTileGrid(),a=o.getZForResolution(n.resolution,this.zDirection),s=o.getTileCoordForCoordAndZ(n.center,a)[0];return e.imageryProviders.map(function(e){for(var n=!1,o=e.coverageAreas,a=0,u=o.length;a<u;++a){var c=o[a];if(s>=c.zoomMin&&s<=c.zoomMax){var l=c.bbox,f=[l[1],l[0],l[3],l[2]],d=(0,i.applyTransform)(f,y);if((0,i.intersects)(d,t.extent)){n=!0;break}}}n&&r.push(e.attribution)}),r.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),r}.bind(this))}this.setState(s.default.READY)}else this.setState(s.default.ERROR)},e}(u.default);r.default=g},{"../tileurlfunction.js":"68ab585614811729ae137a2bee299fb9","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../net.js":"d6358117d067bc4db8ea258f0750638f","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","./State.js":"909be2fc812ab85b41263e2e8ec87f92","./TileImage.js":"0c76cda638b1ee6818638d4dcd4bc115","../tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18","../tilegrid.js":"a88f43c5b504c5272463bedf917d269f"}],"68ab585614811729ae137a2bee299fb9":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createFromTemplate=a,r.createFromTemplates=function(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=a(t[i],e);return s(n)},r.createFromTileUrlFunctions=s,r.nullTileUrlFunction=function(t,e,r){return},r.expandUrl=function(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(t.replace(r[0],String.fromCharCode(o)));return e}if(r=r=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)e.push(t.replace(r[0],s.toString()));return e}return e.push(t),e};var n=t("./asserts.js"),i=t("./math.js"),o=t("./tilecoord.js");function a(t,e){var r=/\{z\}/g,i=/\{x\}/g,o=/\{y\}/g,a=/\{-y\}/g;return function(s,u,c){return s?t.replace(r,s[0].toString()).replace(i,s[1].toString()).replace(o,s[2].toString()).replace(a,function(){var t=s[0],r=e.getFullTileRange(t);return(0,n.assert)(r,55),(r.getHeight()-s[2]-1).toString()}):void 0}}function s(t){return 1===t.length?t[0]:function(e,r,n){if(e){var a=(0,o.hash)(e),s=(0,i.modulo)(a,t.length);return t[s](e,r,n)}}}},{"./asserts.js":"7e662a02bc41c2814316b69c70da50e2","./math.js":"6086e082317ce6ce8a1b47fb09fed63b","./tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18"}],d6358117d067bc4db8ea258f0750638f:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jsonp=function(t,e,r,i){var o=document.createElement("script"),a="olc_"+(0,n.getUid)(e);function s(){delete window[a],o.parentNode.removeChild(o)}o.async=!0,o.src=t+(-1==t.indexOf("?")?"?":"&")+(i||"callback")+"="+a;var u=setTimeout(function(){s(),r&&r()},1e4);window[a]=function(t){clearTimeout(u),s(),e(t)},document.getElementsByTagName("head")[0].appendChild(o)};var n=t("./util.js")},{"./util.js":"4bb2f7213adce7213216789f3fd3a27b"}],"0c76cda638b1ee6818638d4dcd4bc115":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../reproj/common.js"),i=t("../util.js"),o=g(t("../ImageTile.js")),a=g(t("../TileCache.js")),s=g(t("../TileState.js")),u=t("../events.js"),c=g(t("../events/EventType.js")),l=t("../proj.js"),f=g(t("../reproj/Tile.js")),d=g(t("./UrlTile.js")),p=t("../tilecoord.js"),h=t("../tilegrid.js");function g(t){return t&&t.__esModule?t:{default:t}}var _,y=(_=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function m(t,e){t.getImage().src=e}var v=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:m,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:o.default,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return y(e,t),e.prototype.canExpireCache=function(){if(!n.ENABLE_RASTER_REPROJECTION)return t.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},e.prototype.expireCache=function(e,r){if(n.ENABLE_RASTER_REPROJECTION){var i=this.getTileCacheForProjection(e);for(var o in this.tileCache.expireCache(this.tileCache==i?r:{}),this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==i?r:{})}}else t.prototype.expireCache.call(this,e,r)},e.prototype.getGutterForProjection=function(t){return n.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!(0,l.equivalent)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(n.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!(0,l.equivalent)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(e){if(!n.ENABLE_RASTER_REPROJECTION)return t.prototype.getTileGridForProjection.call(this,e);var r=this.getProjection();if(!this.tileGrid||r&&!(0,l.equivalent)(r,e)){var o=(0,i.getUid)(e);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=(0,h.getForProjection)(e)),this.tileGridForProjection[o]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(e){if(!n.ENABLE_RASTER_REPROJECTION)return t.prototype.getTileCacheForProjection.call(this,e);var r=this.getProjection();if(!r||(0,l.equivalent)(r,e))return this.tileCache;var o=(0,i.getUid)(e);return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new a.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},e.prototype.createTile_=function(t,e,r,n,i,o){var a=[t,e,r],l=this.getTileCoordForTileUrlFunction(a,i),f=l?this.tileUrlFunction(l,n,i):void 0,d=new this.tileClass(a,void 0!==f?s.default.IDLE:s.default.EMPTY,void 0!==f?f:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=o,(0,u.listen)(d,c.default.CHANGE,this.handleTileChange,this),d},e.prototype.getTile=function(t,e,r,i,o){var a=this.getProjection();if(n.ENABLE_RASTER_REPROJECTION&&a&&o&&!(0,l.equivalent)(a,o)){var s=this.getTileCacheForProjection(o),u=[t,e,r],c=void 0,d=(0,p.getKey)(u);s.containsKey(d)&&(c=s.get(d));var h=this.getKey();if(c&&c.key==h)return c;var g=this.getTileGridForProjection(a),_=this.getTileGridForProjection(o),y=this.getTileCoordForTileUrlFunction(u,o),m=new f.default(a,g,o,_,u,y,this.getTilePixelRatio(i),this.getGutter(),function(t,e,r,n){return this.getTileInternal(t,e,r,n,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return m.key=h,c?(m.interimTile=c,m.refreshInterimChain(),s.replace(d,m)):s.set(d,m),m}return this.getTileInternal(t,e,r,i,a||o)},e.prototype.getTileInternal=function(t,e,r,n,i){var o=null,a=(0,p.getKeyZXY)(t,e,r),u=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=u){var c=o;o=this.createTile_(t,e,r,n,i,u),c.getState()==s.default.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,r,n,i,u),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(n.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){if(n.ENABLE_RASTER_REPROJECTION){var r=(0,l.get)(t);if(r){var o=(0,i.getUid)(r);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}}},e}(d.default);r.default=v},{"../reproj/common.js":"04f971eba4b8d267c5190b5d1c22082b","../util.js":"4bb2f7213adce7213216789f3fd3a27b","../ImageTile.js":"f5618d867cebf758b815d3c31642717d","../TileCache.js":"0d7a2d2c130d373853ebb848728aee0f","../TileState.js":"db929d9360c0941c511bb453a25f591f","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../reproj/Tile.js":"617972286f3d8e30f00a500cb4c0fd4c","./UrlTile.js":"b7ef810066c963b64d57642abaae57ec","../tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18","../tilegrid.js":"a88f43c5b504c5272463bedf917d269f"}],"04f971eba4b8d267c5190b5d1c22082b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ENABLE_RASTER_REPROJECTION=r.ERROR_THRESHOLD=void 0;r.ERROR_THRESHOLD=.5;r.ENABLE_RASTER_REPROJECTION=!0},{}],"617972286f3d8e30f00a500cb4c0fd4c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./common.js"),i=d(t("../Tile.js")),o=d(t("../TileState.js")),a=t("../events.js"),s=d(t("../events/EventType.js")),u=t("../extent.js"),c=t("../math.js"),l=t("../reproj.js"),f=d(t("./Triangulation.js"));function d(t){return t&&t.__esModule?t:{default:t}}var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g=function(t){function e(e,r,i,a,s,d,p,h,g,_,y){var m=t.call(this,s,o.default.IDLE)||this;m.renderEdges_=void 0!==y&&y,m.pixelRatio_=p,m.gutter_=h,m.canvas_=null,m.sourceTileGrid_=r,m.targetTileGrid_=a,m.wrappedTileCoord_=d||s,m.sourceTiles_=[],m.sourcesListenerKeys_=null,m.sourceZ_=0;var v=a.getTileCoordExtent(m.wrappedTileCoord_),b=m.targetTileGrid_.getExtent(),E=m.sourceTileGrid_.getExtent(),S=b?(0,u.getIntersection)(v,b):v;if(0===(0,u.getArea)(S))return m.state=o.default.EMPTY,m;var j=e.getExtent();j&&(E=E?(0,u.getIntersection)(E,j):j);var O=a.getResolution(m.wrappedTileCoord_[0]),P=(0,u.getCenter)(S),T=(0,l.calculateSourceResolution)(e,i,P,O);if(!isFinite(T)||T<=0)return m.state=o.default.EMPTY,m;var x=void 0!==_?_:n.ERROR_THRESHOLD;if(m.triangulation_=new f.default(e,i,S,E,T*x),0===m.triangulation_.getTriangles().length)return m.state=o.default.EMPTY,m;m.sourceZ_=r.getZForResolution(T);var C=m.triangulation_.calculateSourceExtent();if(E&&(e.canWrapX()?(C[1]=(0,c.clamp)(C[1],E[1],E[3]),C[3]=(0,c.clamp)(C[3],E[1],E[3])):C=(0,u.getIntersection)(C,E)),(0,u.getArea)(C)){for(var I=r.getTileRangeForExtentAndZ(C,m.sourceZ_),w=I.minX;w<=I.maxX;w++)for(var R=I.minY;R<=I.maxY;R++){var N=g(m.sourceZ_,w,R,p);N&&m.sourceTiles_.push(N)}0===m.sourceTiles_.length&&(m.state=o.default.EMPTY)}else m.state=o.default.EMPTY;return m}return h(e,t),e.prototype.disposeInternal=function(){this.state==o.default.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,n){e&&e.getState()==o.default.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=o.default.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),n="number"==typeof r?r:r[0],i="number"==typeof r?r:r[1],a=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,l.render)(n,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),a,u,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=o.default.LOADED}this.changed()},e.prototype.load=function(){if(this.state==o.default.IDLE){this.state=o.default.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,n){var i=e.getState();if(i==o.default.IDLE||i==o.default.LOADING){t++;var u=(0,a.listen)(e,s.default.CHANGE,function(r){var n=e.getState();n!=o.default.LOADED&&n!=o.default.ERROR&&n!=o.default.EMPTY||((0,a.unlistenByKey)(u),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(u)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,r){t.getState()==o.default.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(a.unlistenByKey),this.sourcesListenerKeys_=null},e}(i.default);r.default=g},{"./common.js":"04f971eba4b8d267c5190b5d1c22082b","../Tile.js":"81b8476e359c6fd98b69f8a2aa011224","../TileState.js":"db929d9360c0941c511bb453a25f591f","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../math.js":"6086e082317ce6ce8a1b47fb09fed63b","../reproj.js":"ea9dae885791891a5369b19277c94389","./Triangulation.js":"1693f881fd402e2cf984e02dfc82785f"}],ea9dae885791891a5369b19277c94389:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculateSourceResolution=function(t,e,r,n){var o=(0,a.transform)(r,e,t),s=(0,a.getPointResolution)(e,n,r),u=e.getMetersPerUnit();void 0!==u&&(s*=u);var c=t.getMetersPerUnit();void 0!==c&&(s/=c);var l=t.getExtent();if(!l||(0,i.containsCoordinate)(l,o)){var f=(0,a.getPointResolution)(t,s,o)/s;isFinite(f)&&f>0&&(s/=f)}return s},r.render=function(t,e,r,a,u,c,l,f,d,p,h){var g=(0,n.createCanvasContext2D)(Math.round(r*t),Math.round(r*e));if(0===d.length)return g.canvas;g.scale(r,r);var _=(0,i.createEmpty)();d.forEach(function(t,e,r){(0,i.extend)(_,t.extent)});var y=(0,i.getWidth)(_),m=(0,i.getHeight)(_),v=(0,n.createCanvasContext2D)(Math.round(r*y/a),Math.round(r*m/a)),b=r/a;d.forEach(function(t,e,r){var n=t.extent[0]-_[0],o=-(t.extent[3]-_[3]),a=(0,i.getWidth)(t.extent),s=(0,i.getHeight)(t.extent);v.drawImage(t.image,p,p,t.image.width-2*p,t.image.height-2*p,n*b,o*b,a*b,s*b)});var E=(0,i.getTopLeft)(l);f.getTriangles().forEach(function(t,e,n){var i=t.source,u=t.target,l=i[0][0],f=i[0][1],d=i[1][0],p=i[1][1],h=i[2][0],y=i[2][1],m=(u[0][0]-E[0])/c,b=-(u[0][1]-E[1])/c,S=(u[1][0]-E[0])/c,j=-(u[1][1]-E[1])/c,O=(u[2][0]-E[0])/c,P=-(u[2][1]-E[1])/c,T=l,x=f;l=0,f=0;var C=[[d-=T,p-=x,0,0,S-m],[h-=T,y-=x,0,0,O-m],[0,0,d,p,j-b],[0,0,h,y,P-b]],I=(0,o.solveLinearSystem)(C);if(I){g.save(),g.beginPath();var w=(m+S+O)/3,R=(b+j+P)/3,N=s(w,R,m,b),M=s(w,R,S,j),L=s(w,R,O,P);g.moveTo(M[0],M[1]),g.lineTo(N[0],N[1]),g.lineTo(L[0],L[1]),g.clip(),g.transform(I[0],I[2],I[1],I[3],m,b),g.translate(_[0]-T,_[3]-x),g.scale(a/r,-a/r),g.drawImage(v.canvas,0,0),g.restore()}}),h&&(g.save(),g.strokeStyle="black",g.lineWidth=1,f.getTriangles().forEach(function(t,e,r){var n=t.target,i=(n[0][0]-E[0])/c,o=-(n[0][1]-E[1])/c,a=(n[1][0]-E[0])/c,s=-(n[1][1]-E[1])/c,u=(n[2][0]-E[0])/c,l=-(n[2][1]-E[1])/c;g.beginPath(),g.moveTo(a,s),g.lineTo(i,o),g.lineTo(u,l),g.closePath(),g.stroke()}),g.restore());return g.canvas};var n=t("./dom.js"),i=t("./extent.js"),o=t("./math.js"),a=t("./proj.js");function s(t,e,r,n){var i=r-t,o=n-e,a=Math.sqrt(i*i+o*o);return[Math.round(r+i/a),Math.round(n+o/a)]}},{"./dom.js":"0ade60b4014b5f1918822f5d81f5a358","./extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./math.js":"6086e082317ce6ce8a1b47fb09fed63b","./proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],"1693f881fd402e2cf984e02dfc82785f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../extent.js"),i=t("../math.js"),o=t("../proj.js"),a=10,s=function(){function t(t,e,r,i,s){this.sourceProj_=t,this.targetProj_=e;var u={},c=(0,o.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return u[e]||(u[e]=c(t)),u[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&(0,n.getWidth)(i)==(0,n.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,n.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,n.getWidth)(this.targetProj_.getExtent()):null;var l=(0,n.getTopLeft)(r),f=(0,n.getTopRight)(r),d=(0,n.getBottomRight)(r),p=(0,n.getBottomLeft)(r),h=this.transformInv_(l),g=this.transformInv_(f),_=this.transformInv_(d),y=this.transformInv_(p);if(this.addQuad_(l,f,d,p,h,g,_,y,a),this.wrapsXInSource_){var m=1/0;this.triangles_.forEach(function(t,e,r){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-m>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-m>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-m>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}u={}}return t.prototype.addTriangle_=function(t,e,r,n,i,o){this.triangles_.push({source:[n,i,o],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,o,a,s,u,c,l){var f=(0,n.boundingExtent)([a,s,u,c]),d=this.sourceWorldWidth_?(0,n.getWidth)(f)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,h=this.sourceProj_.canWrapX()&&d>.5&&d<1,g=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var _=(0,n.boundingExtent)([t,e,r,o]);g=(0,n.getWidth)(_)/this.targetWorldWidth_>.25||g}!h&&this.sourceProj_.isGlobal()&&d&&(g=d>.25||g)}if(g||!this.maxSourceExtent_||(0,n.intersects)(f,this.maxSourceExtent_)){if(!(g||isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(c[0])&&isFinite(c[1]))){if(!(l>0))return;g=!0}if(l>0){if(!g){var y=[(t[0]+r[0])/2,(t[1]+r[1])/2],m=this.transformInv_(y),v=void 0;if(h)v=((0,i.modulo)(a[0],p)+(0,i.modulo)(u[0],p))/2-(0,i.modulo)(m[0],p);else v=(a[0]+u[0])/2-m[0];var b=(a[1]+u[1])/2-m[1];g=v*v+b*b>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var E=[(e[0]+r[0])/2,(e[1]+r[1])/2],S=this.transformInv_(E),j=[(o[0]+t[0])/2,(o[1]+t[1])/2],O=this.transformInv_(j);this.addQuad_(t,e,E,j,a,s,S,O,l-1),this.addQuad_(j,E,r,o,O,S,u,c,l-1)}else{var P=[(t[0]+e[0])/2,(t[1]+e[1])/2],T=this.transformInv_(P),x=[(r[0]+o[0])/2,(r[1]+o[1])/2],C=this.transformInv_(x);this.addQuad_(t,P,x,o,a,T,C,c,l-1),this.addQuad_(P,e,r,x,T,s,u,C,l-1)}return}}if(h){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,r,o,a,u,c),this.addTriangle_(t,e,r,a,s,u)}},t.prototype.calculateSourceExtent=function(){var t=(0,n.createEmpty)();return this.triangles_.forEach(function(e,r,i){var o=e.source;(0,n.extendCoordinate)(t,o[0]),(0,n.extendCoordinate)(t,o[1]),(0,n.extendCoordinate)(t,o[2])}),t},t.prototype.getTriangles=function(){return this.triangles_},t}();r.default=s},{"../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../math.js":"6086e082317ce6ce8a1b47fb09fed63b","../proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],b7ef810066c963b64d57642abaae57ec:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=c(t("../TileState.js")),o=t("../tileurlfunction.js"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Tile.js")),s=c(t("./TileEventType.js")),u=t("../tilecoord.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.generateTileUrlFunction_=!e.tileUrlFunction,r.tileLoadFunction=e.tileLoadFunction,r.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(r):o.nullTileUrlFunction,r.urls=null,e.urls?r.setUrls(e.urls):e.url&&r.setUrl(e.url),r.tileLoadingKeys_={},r}return f(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,r=t.target,o=(0,n.getUid)(r),u=r.getState();u==i.default.LOADING?(this.tileLoadingKeys_[o]=!0,e=s.default.TILELOADSTART):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=u==i.default.ERROR?s.default.TILELOADERROR:u==i.default.LOADED||u==i.default.ABORT?s.default.TILELOADEND:void 0),null!=e&&this.dispatchEvent(new a.TileSourceEvent(e,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=(0,o.expandUrl)(t);this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,o.createFromTemplates)(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,r){var n=(0,u.getKeyZXY)(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(a.default);r.default=d},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../TileState.js":"db929d9360c0941c511bb453a25f591f","../tileurlfunction.js":"68ab585614811729ae137a2bee299fb9","./Tile.js":"0de545ec02c1ee8840fe79b6a804760d","./TileEventType.js":"3c7df278d5cd4b72b564e29bc6e8fe16","../tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18"}],"0de545ec02c1ee8840fe79b6a804760d":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.TileSourceEvent=void 0;var n=t("../util.js"),i=d(t("../TileCache.js")),o=d(t("../TileState.js")),a=d(t("../events/Event.js")),s=t("../proj.js"),u=t("../size.js"),c=d(t("./Source.js")),l=t("../tilecoord.js"),f=t("../tilegrid.js");function d(t){return t&&t.__esModule?t:{default:t}}var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=e.cacheSize;if(void 0===n){var o=[256,256],a=e.tileGrid;a&&(0,u.toSize)(a.getTileSize(a.getMinZoom()),o);var s="undefined"!=typeof screen,c=s?screen.availWidth||screen.width:1920,l=s?screen.availHeight||screen.height:1080;n=4*Math.ceil(c/o[0])*Math.ceil(l/o[1])}return r.tileCache=new i.default(n),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return h(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,r,n){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var a,s,u,c=!0,f=r.minX;f<=r.maxX;++f)for(var d=r.minY;d<=r.maxY;++d)s=(0,l.getKeyZXY)(e,f,d),u=!1,i.containsKey(s)&&(u=(a=i.get(s)).getState()===o.default.LOADED)&&(u=!1!==n(a)),u||(c=!1);return c},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,r,i,o){return(0,n.abstract)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:(0,f.getForProjection)(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!(0,s.equivalent)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,r){var n=this.getTileGridForProjection(r),i=this.getTilePixelRatio(e),o=(0,u.toSize)(n.getTileSize(t),this.tmpSize);return 1==i?o:(0,u.scale)(o,i,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var r=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=(0,f.wrapX)(n,t,r)),(0,l.withinExtentAndZ)(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,r,n){},e}(c.default),_=function(t){function e(e,r){var n=t.call(this,e)||this;return n.tile=r,n}return h(e,t),e}(a.default);r.TileSourceEvent=_;var y=g;r.default=y},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../TileCache.js":"0d7a2d2c130d373853ebb848728aee0f","../TileState.js":"db929d9360c0941c511bb453a25f591f","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../size.js":"f20e5446e37aa2c395fbeb406aabfc05","./Source.js":"c0ef99a14a1dba4f0de89682688995af","../tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18","../tilegrid.js":"a88f43c5b504c5272463bedf917d269f"}],a88f43c5b504c5272463bedf917d269f:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getForProjection=function(t){var e=t.getDefaultTileGrid();e||(e=p(t),t.setDefaultTileGrid(e));return e},r.wrapX=function(t,e,r){var n=e[0],i=t.getTileCoordCenter(e),a=h(r);if((0,o.containsCoordinate)(a,i))return e;var s=(0,o.getWidth)(a),u=Math.ceil((a[0]-i[0])/s);return i[0]+=s*u,t.getTileCoordForCoordAndZ(i,n)},r.createForExtent=f,r.createXYZ=function(t){var e=t||{},r=e.extent||(0,s.get)("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:d(r,e.maxZoom,e.tileSize)};return new c.default(n)},r.createForProjection=p,r.extentFromProjection=h;var n=t("./tilegrid/common.js"),i=t("./size.js"),o=t("./extent.js"),a=l(t("./extent/Corner.js")),s=t("./proj.js"),u=l(t("./proj/Units.js")),c=l(t("./tilegrid/TileGrid.js"));function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e,r,n){var i=void 0!==n?n:a.default.TOP_LEFT,s=d(t,e,r);return new c.default({extent:t,origin:(0,o.getCorner)(t,i),resolutions:s,tileSize:r})}function d(t,e,r){for(var a=void 0!==e?e:n.DEFAULT_MAX_ZOOM,s=(0,o.getHeight)(t),u=(0,o.getWidth)(t),c=(0,i.toSize)(void 0!==r?r:n.DEFAULT_TILE_SIZE),l=Math.max(u/c[0],s/c[1]),f=a+1,d=new Array(f),p=0;p<f;++p)d[p]=l/Math.pow(2,p);return d}function p(t,e,r,n){return f(h(t),e,r,n)}function h(t){var e=(t=(0,s.get)(t)).getExtent();if(!e){var r=180*s.METERS_PER_UNIT[u.default.DEGREES]/t.getMetersPerUnit();e=(0,o.createOrUpdate)(-r,-r,r,r)}return e}},{"./tilegrid/common.js":"fd4f185cc527989274b79f8b54a07cff","./size.js":"f20e5446e37aa2c395fbeb406aabfc05","./extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./extent/Corner.js":"9dc214fac697a2e5ae241e6598d3bc0d","./proj.js":"62f54c55d8828c04c9cb79fe6933946b","./proj/Units.js":"aed7c8d781fca9ae0c0fa9c24383e0e4","./tilegrid/TileGrid.js":"a9f6734d343c9d26a5988a218ad7a1fa"}],a9f6734d343c9d26a5988a218ad7a1fa:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./common.js"),i=t("../asserts.js"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("../TileRange.js")),a=t("../array.js"),s=t("../extent.js"),u=t("../math.js"),c=t("../size.js"),l=t("../tilecoord.js");var f=[0,0,0],d=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,i.assert)((0,a.isSorted)(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var r=0,u=this.resolutions_.length-1;r<u;++r)if(e){if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}else e=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,i.assert)(this.origins_.length==this.resolutions_.length,20));var c=t.extent;void 0===c||this.origin_||this.origins_||(this.origin_=(0,s.getTopLeft)(c)),(0,i.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,i.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:n.DEFAULT_TILE_SIZE,(0,i.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==c?c:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new o.default(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):c&&this.calculateTileRanges_(c)}return t.prototype.forEachTileCoord=function(t,e,r){for(var n=this.getTileRangeForExtentAndZ(t,e),i=n.minX,o=n.maxX;i<=o;++i)for(var a=n.minY,s=n.maxY;a<=s;++a)r([e,i,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,r,n){var i,a,s,u=null,c=t[0]-1;for(2===this.zoomFactor_?(a=t[1],s=t[2]):u=this.getTileCoordExtent(t,n);c>=this.minZoom;){if(2===this.zoomFactor_?(a=Math.floor(a/2),s=Math.floor(s/2),i=(0,o.createOrUpdate)(a,a,s,s,r)):i=this.getTileRangeForExtentAndZ(u,c,r),e(c,i))return!0;--c}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],i=2*t[2];return(0,o.createOrUpdate)(n,n+1,i,i+1,e)}var a=this.getTileCoordExtent(t,r);return this.getTileRangeForExtentAndZ(a,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,r){var n=this.getOrigin(t),i=this.getResolution(t),o=(0,c.toSize)(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*o[0]*i,u=n[0]+(e.maxX+1)*o[0]*i,l=n[1]+e.minY*o[1]*i,f=n[1]+(e.maxY+1)*o[1]*i;return(0,s.createOrUpdate)(a,l,u,f,r)},t.prototype.getTileRangeForExtentAndZ=function(t,e,r){var n=f;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var i=n[1],a=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),(0,o.createOrUpdate)(i,n[1],a,n[2],r)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=(0,c.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]},t.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=(0,c.toSize)(this.getTileSize(t[0]),this.tmpSize_),o=r[0]+t[1]*i[0]*n,a=r[1]-(t[2]+1)*i[1]*n,u=o+i[0]*n,l=a+i[1]*n;return(0,s.createOrUpdate)(o,a,u,l,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,r,n,i){var o=this.getZForResolution(r),a=r/this.getResolution(o),s=this.getOrigin(o),u=(0,c.toSize)(this.getTileSize(o),this.tmpSize_),f=n?.5:0,d=n?.5:0,p=Math.floor((t-s[0])/r+f),h=Math.floor((s[1]-e)/r+d),g=a*p/u[0],_=a*h/u[1];return n?(g=Math.ceil(g)-1,_=Math.ceil(_)-1):(g=Math.floor(g),_=Math.floor(_)),(0,l.createOrUpdate)(o,g,_,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,r,n,i){var o=this.getOrigin(r),a=this.getResolution(r),s=(0,c.toSize)(this.getTileSize(r),this.tmpSize_),u=n?.5:0,f=n?.5:0,d=Math.floor((t-o[0])/a+u),p=Math.floor((o[1]-e)/a+f),h=d/s[0],g=p/s[1];return n?(h=Math.ceil(h)-1,g=Math.ceil(g)-1):(h=Math.floor(h),g=Math.floor(g)),(0,l.createOrUpdate)(r,h,g,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){var r=(0,a.linearFindNearest)(this.resolutions_,t,e||0);return(0,u.clamp)(r,this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r},t}();r.default=d},{"./common.js":"fd4f185cc527989274b79f8b54a07cff","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../TileRange.js":"2907bc9189da59ab4885682af56a1740","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../math.js":"6086e082317ce6ce8a1b47fb09fed63b","../size.js":"f20e5446e37aa2c395fbeb406aabfc05","../tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18"}],"3c7df278d5cd4b72b564e29bc6e8fe16":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},{}],ab163e01437f97dddb3fedf01142928e:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../obj.js"),i=a(t("./State.js")),o=a(t("./XYZ.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX})||this;return r.account_=e.account,r.mapId_=e.map||"",r.config_=e.config||{},r.templateCache_={},r.initializeMap_(),r}return u(e,t),e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){(0,n.assign)(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",e),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var r=e.target;if(!r.status||r.status>=200&&r.status<300){var n=void 0;try{n=JSON.parse(r.responseText)}catch(t){return void this.setState(i.default.ERROR)}this.applyTemplate_(n),this.templateCache_[t]=n,this.setState(i.default.READY)}else this.setState(i.default.ERROR)},e.prototype.handleInitError_=function(t){this.setState(i.default.ERROR)},e.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(o.default);r.default=c},{"../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","./State.js":"909be2fc812ab85b41263e2e8ec87f92","./XYZ.js":"f476ca94e3360e8401635d9c9a05ed59"}],f476ca94e3360e8401635d9c9a05ed59:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./TileImage.js"))&&n.__esModule?n:{default:n},o=t("../tilegrid.js");var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){var r=e||{},n=void 0!==r.projection?r.projection:"EPSG:3857",i=void 0!==r.tileGrid?r.tileGrid:(0,o.createXYZ)({extent:(0,o.extentFromProjection)(n),maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:r.opaque,projection:n,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this}return s(e,t),e}(i.default);r.default=u},{"./TileImage.js":"0c76cda638b1ee6818638d4dcd4bc115","../tilegrid.js":"a88f43c5b504c5272463bedf917d269f"}],"2ec6c1c1a00c4a6a0f58f4e93160d22c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=t("../asserts.js"),o=p(t("../Feature.js")),a=p(t("../geom/GeometryType.js")),s=t("../coordinate.js"),u=t("../events.js"),c=p(t("../events/EventType.js")),l=t("../extent.js"),f=p(t("../geom/Point.js")),d=p(t("./Vector.js"));function p(t){return t&&t.__esModule?t:{default:t}}var h,g=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),_=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return r.resolution=void 0,r.distance=void 0!==e.distance?e.distance:20,r.features=[],r.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return(0,i.assert)(e.getType()==a.default.POINT,10),e},r.source=e.source,(0,u.listen)(r.source,c.default.CHANGE,r.refresh,r),r}return g(e,t),e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,r){this.source.loadFeatures(t,e,r),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var t=(0,l.createEmpty)(),e=this.distance*this.resolution,r=this.source.getFeatures(),i={},o=0,a=r.length;o<a;o++){var s=r[o];if(!((0,n.getUid)(s)in i)){var u=this.geometryFunction(s);if(u){var c=u.getCoordinates();(0,l.createOrUpdateFromCoordinate)(c,t),(0,l.buffer)(t,e,t);var f=this.source.getFeaturesInExtent(t);f=f.filter(function(t){var e=(0,n.getUid)(t);return!(e in i)&&(i[e]=!0,!0)}),this.features.push(this.createCluster(f))}}}}},e.prototype.createCluster=function(t){for(var e=[0,0],r=t.length-1;r>=0;--r){var n=this.geometryFunction(t[r]);n?(0,s.add)(e,n.getCoordinates()):t.splice(r,1)}(0,s.scale)(e,1/t.length);var i=new o.default(new f.default(e));return i.set("features",t),i},e}(d.default);r.default=_},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../coordinate.js":"2a3e9645190015dfc3d4ed757193af4c","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","./Vector.js":"95cd5d20039b261bf342469b43fe7572"}],f699745e4db89ecb07ad25ea3f8b0eb5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../tilegrid/common.js"),i=t("../extent.js"),o=t("./Zoomify.js"),a=t("../format/IIIFInfo.js"),s=t("../asserts.js"),u=l(t("../tilegrid/TileGrid.js")),c=l(t("./TileImage.js"));function l(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function p(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var h=function(t){function e(e){var r=this,c=e||{},l=c.url||"";l+=l.lastIndexOf("/")===l.length-1||""===l?"":"/";var f=c.version||a.Versions.VERSION2,d=c.sizes||[],h=c.size;(0,s.assert)(null!=h&&Array.isArray(h)&&2==h.length&&!isNaN(h[0])&&h[0]>0&&!isNaN(h[1])&&h[1]>0,60);var g,_,y,m=h[0],v=h[1],b=c.tileSize,E=c.tilePixelRatio||1,S=c.format||"jpg",j=c.quality||(c.version==a.Versions.VERSION1?"native":"default"),O=c.resolutions||[],P=c.supports||[],T=c.extent||[0,-v,m,0],x=null!=d&&Array.isArray(d)&&d.length>0,C=null!=b&&("number"==typeof b&&Number.isInteger(b)&&b>0||Array.isArray(b)&&b.length>0),I=null!=P&&Array.isArray(P)&&(P.includes("regionByPx")||P.includes("regionByPct"))&&(P.includes("sizeByWh")||P.includes("sizeByH")||P.includes("sizeByW")||P.includes("sizeByPct"));if(O.sort(function(t,e){return e-t}),C||I)if(null!=b&&("number"==typeof b&&Number.isInteger(b)&&b>0?(g=b,_=b):Array.isArray(b)&&b.length>0&&((1==b.length||null==b[1]&&Number.isInteger(b[0]))&&(g=b[0],_=b[0]),2==b.length&&(Number.isInteger(b[0])&&Number.isInteger(b[1])?(g=b[0],_=b[1]):null==b[0]&&Number.isInteger(b[1])&&(g=b[1],_=b[1])))),void 0!==g&&void 0!==_||(g=n.DEFAULT_TILE_SIZE,_=n.DEFAULT_TILE_SIZE),0==O.length)for(var w=y=Math.max(Math.ceil(Math.log(m/g)/Math.LN2),Math.ceil(Math.log(v/_)/Math.LN2));w>=0;w--)O.push(Math.pow(2,w));else{var R=Math.max.apply(Math,O);y=Math.round(Math.log(R)/Math.LN2)}else if(g=m,_=v,O=[],x){d.sort(function(t,e){return t[0]-e[0]}),y=-1;var N=[];for(w=0;w<d.length;w++){var M=m/d[w][0];O.length>0&&O[O.length-1]==M?N.push(w):(O.push(M),y++)}if(N.length>0)for(w=0;w<N.length;w++)d.splice(N[w]-w,1)}else O.push(1),d.push([m,v]),y=0;var L=new u.default({tileSize:[g,_],extent:T,origin:(0,i.getTopLeft)(T),resolutions:O}),A=o.CustomTile.bind(null,E,L);return(r=t.call(this,{attributions:c.attributions,attributionsCollapsible:c.attributionsCollapsible,cacheSize:c.cacheSize,crossOrigin:c.crossOrigin,projection:c.projection,reprojectionErrorThreshold:c.reprojectionErrorThreshold,state:c.state,tileClass:A,tileGrid:L,tilePixelRatio:c.tilePixelRatio,tileUrlFunction:function(t,e,r){var n,i,o=t[0];if(!(o>y)){var s=t[1],u=t[2],c=O[o];if(!(void 0===s||void 0===u||void 0===c||s<0||Math.ceil(m/c/g)<=s||u<0||Math.ceil(v/c/_)<=u)){if(I||C){var h=s*g*c,b=u*_*c,E=g*c,T=_*c,w=g,R=_;if(h+E>m&&(E=m-h),b+T>v&&(T=v-b),h+g*c>m&&(w=Math.floor((m-h+c-1)/c)),b+_*c>v&&(R=Math.floor((v-b+c-1)/c)),0==h&&E==m&&0==b&&T==v)n="full";else if(!I||P.includes("regionByPx"))n=h+","+b+","+E+","+T;else if(P.includes("regionByPct")){n="pct:"+p(h/m*100)+","+p(b/v*100)+","+p(E/m*100)+","+p(T/v*100)}f!=a.Versions.VERSION3||I&&!P.includes("sizeByWh")?!I||P.includes("sizeByW")?i=w+",":P.includes("sizeByH")?i=","+R:P.includes("sizeByWh")?i=w+","+R:P.includes("sizeByPct")&&(i="pct:"+p(100/c)):i=w+","+R}else if(n="full",x){var N=d[o][0],M=d[o][1];i=f==a.Versions.VERSION3?N==m&&M==v?"max":N+","+M:N==m?"full":N+","}else i=f==a.Versions.VERSION3?"max":"full";return l+n+"/"+i+"/0/"+j+"."+S}}},transition:c.transition})||this).zDirection=c.zDirection,r}return d(e,t),e}(c.default);r.default=h},{"../tilegrid/common.js":"fd4f185cc527989274b79f8b54a07cff","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Zoomify.js":"257132d15b16c03f16124a7fe987fb86","../format/IIIFInfo.js":"9f5df990e276c53cc7e8f08e331df039","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../tilegrid/TileGrid.js":"a9f6734d343c9d26a5988a218ad7a1fa","./TileImage.js":"0c76cda638b1ee6818638d4dcd4bc115"}],"257132d15b16c03f16124a7fe987fb86":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CustomTile=void 0;var n=t("../tilegrid/common.js"),i=p(t("../ImageTile.js")),o=p(t("../TileState.js")),a=t("../tileurlfunction.js"),s=t("../asserts.js"),u=t("../dom.js"),c=t("../extent.js"),l=t("../size.js"),f=p(t("./TileImage.js")),d=p(t("../tilegrid/TileGrid.js"));function p(t){return t&&t.__esModule?t:{default:t}}var h,g=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),_={DEFAULT:"default",TRUNCATED:"truncated"},y=function(t){function e(e,r,n,i,o,a,s,u){var c=t.call(this,n,i,o,a,s,u)||this;return c.zoomifyImage_=null,c.tileSize_=(0,l.toSize)(r.getTileSize(n[0])).map(function(t){return t*e}),c}return g(e,t),e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==o.default.LOADED){var r=this.tileSize_;if(e.width==r[0]&&e.height==r[1])return this.zoomifyImage_=e,e;var n=(0,u.createCanvasContext2D)(r[0],r[1]);return n.drawImage(e,0,0),this.zoomifyImage_=n.canvas,n.canvas}return e},e}(i.default);r.CustomTile=y;var m=function(t){function e(e){var r=this,i=e||{},o=i.size,u=void 0!==i.tierSizeCalculation?i.tierSizeCalculation:_.DEFAULT,l=o[0],f=o[1],p=i.extent||[0,-o[1],o[0],0],h=[],g=i.tileSize||n.DEFAULT_TILE_SIZE,m=i.tilePixelRatio||1,v=g;switch(u){case _.DEFAULT:for(;l>v||f>v;)h.push([Math.ceil(l/v),Math.ceil(f/v)]),v+=v;break;case _.TRUNCATED:for(var b=l,E=f;b>v||E>v;)h.push([Math.ceil(b/v),Math.ceil(E/v)]),b>>=1,E>>=1;break;default:(0,s.assert)(!1,53)}h.push([1,1]),h.reverse();for(var S=[1],j=[0],O=1,P=h.length;O<P;O++)S.push(1<<O),j.push(h[O-1][0]*h[O-1][1]+j[O-1]);S.reverse();var T=new d.default({tileSize:g,extent:p,origin:(0,c.getTopLeft)(p),resolutions:S}),x=i.url;x&&-1==x.indexOf("{TileGroup}")&&-1==x.indexOf("{tileIndex}")&&(x+="{TileGroup}/{z}-{x}-{y}.jpg");var C=(0,a.expandUrl)(x);var I=(0,a.createFromTileUrlFunctions)(C.map(function(t){return function(e,r,n){if(e){var i=e[0],o=e[1],a=e[2],s=o+a*h[i][0],u=T.getTileSize(i),c=Array.isArray(u)?u[0]:u,l={z:i,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+j[i])/c|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return l[e]})}}})),w=y.bind(null,m,T);return(r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,tilePixelRatio:m,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:w,tileGrid:T,tileUrlFunction:I,transition:i.transition})||this).zDirection=i.zDirection,r}return g(e,t),e}(f.default);r.default=m},{"../tilegrid/common.js":"fd4f185cc527989274b79f8b54a07cff","../ImageTile.js":"f5618d867cebf758b815d3c31642717d","../TileState.js":"db929d9360c0941c511bb453a25f591f","../tileurlfunction.js":"68ab585614811729ae137a2bee299fb9","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../size.js":"f20e5446e37aa2c395fbeb406aabfc05","./TileImage.js":"0c76cda638b1ee6818638d4dcd4bc115","../tilegrid/TileGrid.js":"a9f6734d343c9d26a5988a218ad7a1fa"}],"9f5df990e276c53cc7e8f08e331df039":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Versions=r.default=void 0;var n=t("../asserts.js"),i={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"};r.Versions=i;var o={};o[i.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},o[i.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},o[i.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},o.none={none:{supports:[],formats:[],qualities:[]}};var a=new RegExp("^https?://library.stanford.edu/iiif/image-api/(1.1/)?compliance.html#level[0-2]$"),s=new RegExp("^https?://iiif.io/api/image/2/level[0-2](.json)?$"),u=new RegExp("(^https?://iiif.io/api/image/3/level[0-2](.json)?$)|(^level[0-2]$)");var c={};c[i.VERSION1]=function(t){var e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=o[i.VERSION1].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),supports:e.supports,formats:e.formats.concat([void 0===t.imageInfo.formats?[]:t.imageInfo.formats]),qualities:e.qualities.concat([void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities]),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},c[i.VERSION2]=function(t){var e=t.getComplianceLevelSupportedFeatures(),r=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,n=r&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],i=r&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=r&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t){return[t.width,t.height]}),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t){return t.width})[0],t.imageInfo.tiles.map(function(t){return void 0===t.height?t.width:t.height})[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t){return t.scaleFactors})[0],supports:e.supports.concat(n),formats:e.formats.concat(i),qualities:e.qualities.concat(o)}},c[i.VERSION3]=function(t){var e=t.getComplianceLevelSupportedFeatures(),r=void 0===t.imageInfo.extraFormats?e.formats:e.formats.concat(t.imageInfo.extraFormats),n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter(function(t){return["jpg","png","gif"].includes(t)}).reduce(function(t,e){return void 0===t&&r.includes(e)?e:t},void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map(function(t){return[t.width,t.height]}),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map(function(t){return t.width})[0],t.imageInfo.tiles.map(function(t){return t.height})[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map(function(t){return t.scaleFactors})[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:e.supports.concat(t.imageInfo.extraFeatures),formats:r,qualities:void 0===t.imageInfo.extraQualities?e.qualities:e.qualities.concat(t.imageInfo.extraQualities),preferredFormat:n}};var l=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return i.VERSION1;case"http://iiif.io/api/image/2/context.json":return i.VERSION2;case"http://iiif.io/api/image/3/context.json":return i.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(i.VERSION1)&&this.imageInfo.identifier)return i.VERSION1}(0,n.assert)(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case i.VERSION1:if(a.test(this.imageInfo.profile))return this.imageInfo.profile;break;case i.VERSION3:if(u.test(this.imageInfo.profile))return this.imageInfo.profile;break;case i.VERSION2:if("string"==typeof this.imageInfo.profile&&s.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&s.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var e=this.getComplianceLevelEntryFromProfile(t);if(void 0!==e){var r=e.match(/level[0-2](\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?o.none.none:o[t][e]}},t.prototype.getTileSourceOptions=function(t){var e=t||{},r=this.getImageApiVersion();if(void 0!==r){var n=void 0===r?void 0:c[r](this);if(void 0!==n)return{url:n.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:void 0!==e.format&&n.formats.includes(e.format)?e.format:void 0!==n.preferredFormat?n.preferredFormat:"jpg",supports:n.supports,quality:e.quality&&n.qualities.includes(e.quality)?e.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort(function(t,e){return e-t}):void 0,tileSize:n.tileSize}}},t}();r.default=l},{"../asserts.js":"7e662a02bc41c2814316b69c70da50e2"}],"0d557ad8d5bf433364223abc399fcf00":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultImageLoadFunction=function(t,e){t.getImage().src=e},r.default=r.ImageSourceEvent=void 0;var n=t("../util.js"),i=t("../reproj/common.js"),o=d(t("../ImageState.js")),a=t("../array.js"),s=d(t("../events/Event.js")),u=t("../extent.js"),c=t("../proj.js"),l=d(t("../reproj/Image.js")),f=d(t("./Source.js"));function d(t){return t&&t.__esModule?t:{default:t}}var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g="imageloadstart",_="imageloadend",y="imageloaderror",m=function(t){function e(e,r){var n=t.call(this,e)||this;return n.image=r,n}return h(e,t),e}(s.default);r.ImageSourceEvent=m;var v=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return r.resolutions_=void 0!==e.resolutions?e.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r}return h(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=(0,a.linearFindNearest)(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,r,n){var o=this.getProjection();if(i.ENABLE_RASTER_REPROJECTION&&o&&n&&!(0,c.equivalent)(o,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,c.equivalent)(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&(0,u.equals)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new l.default(o,n,t,e,r,function(t,e,r){return this.getImageInternal(t,e,r,o)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return o&&(n=o),this.getImageInternal(t,e,r,n)},e.prototype.getImageInternal=function(t,e,r,i){return(0,n.abstract)()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case o.default.LOADING:this.loading=!0,this.dispatchEvent(new m(g,e));break;case o.default.LOADED:this.loading=!1,this.dispatchEvent(new m(_,e));break;case o.default.ERROR:this.loading=!1,this.dispatchEvent(new m(y,e))}},e}(f.default);r.default=v},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../reproj/common.js":"04f971eba4b8d267c5190b5d1c22082b","../ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../reproj/Image.js":"eb33c874ad12d7c913751c84378df2af","./Source.js":"c0ef99a14a1dba4f0de89682688995af"}],eb33c874ad12d7c913751c84378df2af:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./common.js"),i=f(t("../ImageBase.js")),o=f(t("../ImageState.js")),a=t("../events.js"),s=f(t("../events/EventType.js")),u=t("../extent.js"),c=t("../reproj.js"),l=f(t("./Triangulation.js"));function f(t){return t&&t.__esModule?t:{default:t}}var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=function(t){function e(e,r,i,a,s,f){var d=this,p=e.getExtent(),h=r.getExtent(),g=h?(0,u.getIntersection)(i,h):i,_=(0,u.getCenter)(g),y=(0,c.calculateSourceResolution)(e,r,_,a),m=n.ERROR_THRESHOLD,v=new l.default(e,r,g,p,y*m),b=f(v.calculateSourceExtent(),y,s),E=b?o.default.IDLE:o.default.EMPTY,S=b?b.getPixelRatio():1;return(d=t.call(this,i,a,S,E)||this).targetProj_=r,d.maxSourceExtent_=p,d.triangulation_=v,d.targetResolution_=a,d.targetExtent_=i,d.sourceImage_=b,d.sourcePixelRatio_=S,d.canvas_=null,d.sourceListenerKey_=null,d}return p(e,t),e.prototype.disposeInternal=function(){this.state==o.default.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==o.default.LOADED){var e=(0,u.getWidth)(this.targetExtent_)/this.targetResolution_,r=(0,u.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,c.render)(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==o.default.IDLE){this.state=o.default.LOADING,this.changed();var t=this.sourceImage_.getState();t==o.default.LOADED||t==o.default.ERROR?this.reproject_():(this.sourceListenerKey_=(0,a.listen)(this.sourceImage_,s.default.CHANGE,function(t){var e=this.sourceImage_.getState();e!=o.default.LOADED&&e!=o.default.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){(0,a.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(i.default);r.default=h},{"./common.js":"04f971eba4b8d267c5190b5d1c22082b","../ImageBase.js":"54001c5f437a635b9754afca9674430b","../ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../reproj.js":"ea9dae885791891a5369b19277c94389","./Triangulation.js":"1693f881fd402e2cf984e02dfc82785f"}],"3d11e902ffb52c3b374ff6c4f02bf679":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=f(t("../Image.js")),i=t("../asserts.js"),o=t("../events.js"),a=f(t("../events/EventType.js")),s=t("../extent.js"),u=t("../obj.js"),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Image.js")),l=t("../uri.js");function f(t){return t&&t.__esModule?t:{default:t}}var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.hidpi_=void 0===n.hidpi||n.hidpi,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:c.defaultImageLoadFunction,r.params_=n.params||{},r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return p(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,i){if(void 0===this.url_)return null;e=this.findNearestResolution(e),r=this.hidpi_?r:1;var c=this.image_;if(c&&this.renderedRevision_==this.getRevision()&&c.getResolution()==e&&c.getPixelRatio()==r&&(0,s.containsExtent)(c.getExtent(),t))return c;var l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};(0,u.assign)(l,this.params_);var f=((t=t.slice())[0]+t[2])/2,d=(t[1]+t[3])/2;if(1!=this.ratio_){var p=this.ratio_*(0,s.getWidth)(t)/2,h=this.ratio_*(0,s.getHeight)(t)/2;t[0]=f-p,t[1]=d-h,t[2]=f+p,t[3]=d+h}var g=e/r,_=Math.ceil((0,s.getWidth)(t)/g),y=Math.ceil((0,s.getHeight)(t)/g);t[0]=f-g*_/2,t[2]=f+g*_/2,t[1]=d-g*y/2,t[3]=d+g*y/2,this.imageSize_[0]=_,this.imageSize_[1]=y;var m=this.getRequestUrl_(t,this.imageSize_,r,i,l);return this.image_=new n.default(t,e,r,m,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),(0,o.listen)(this.image_,a.default.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,o){var a=n.getCode().split(":").pop();o.SIZE=e[0]+","+e[1],o.BBOX=t.join(","),o.BBOXSR=a,o.IMAGESR=a,o.DPI=Math.round(90*r);var s=this.url_,u=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return u==s&&(0,i.assert)(!1,50),(0,l.appendParams)(u,o)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){(0,u.assign)(this.params_,t),this.image_=null,this.changed()},e}(c.default);r.default=h},{"../Image.js":"9e2ed74bba157eada38f7cb6b59a611e","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","./Image.js":"0d557ad8d5bf433364223abc399fcf00","../uri.js":"823ffa9cb748e0c3ab6711c6947e976c"}],"823ffa9cb748e0c3ab6711c6947e976c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.appendParams=function(t,e){var r=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&r.push(t+"="+encodeURIComponent(e[t]))});var n=r.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}},{}],"36a690aa6af6985692c07fd3c287eee6":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(t("../ImageCanvas.js")),i=t("../extent.js"),o=a(t("./Image.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions,state:n.state})||this).canvasFunction_=n.canvasFunction,r.canvas_=null,r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return u(e,t),e.prototype.getImageInternal=function(t,e,r,o){e=this.findNearestResolution(e);var a=this.canvas_;if(a&&this.renderedRevision_==this.getRevision()&&a.getResolution()==e&&a.getPixelRatio()==r&&(0,i.containsExtent)(a.getExtent(),t))return a;t=t.slice(),(0,i.scaleFromCenter)(t,this.ratio_);var s=[(0,i.getWidth)(t)/e*r,(0,i.getHeight)(t)/e*r],u=this.canvasFunction_.call(this,t,e,r,s,o);return u&&(a=new n.default(t,e,r,u)),this.canvas_=a,this.renderedRevision_=this.getRevision(),a},e}(o.default);r.default=c},{"../ImageCanvas.js":"3854c6d9681cc6b35ae1491618c153e2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Image.js":"0d557ad8d5bf433364223abc399fcf00"}],"91dae402a7692aa9bfc63e25f098d799":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(t("../Image.js")),i=t("../events.js"),o=l(t("../events/EventType.js")),a=t("../extent.js"),s=t("../obj.js"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Image.js")),c=t("../uri.js");function l(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});var p=function(t){function e(e){var r=t.call(this,{projection:e.projection,resolutions:e.resolutions})||this;return r.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,r.params_=e.params||{},r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:u.defaultImageLoadFunction,r.hidpi_=void 0===e.hidpi||e.hidpi,r.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,r.ratio_=void 0!==e.ratio?e.ratio:1,r.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,r.image_=null,r.renderedRevision_=0,r}return d(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,s){e=this.findNearestResolution(e),r=this.hidpi_?r:1;var u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==e&&u.getPixelRatio()==r&&(0,a.containsExtent)(u.getExtent(),t))return u;1!=this.ratio_&&(t=t.slice(),(0,a.scaleFromCenter)(t,this.ratio_));var c=[(0,a.getWidth)(t)/e*r,(0,a.getHeight)(t)/e*r];if(void 0!==this.url_){var l=this.getUrl(this.url_,this.params_,t,c,s);u=new n.default(t,e,r,l,this.crossOrigin_,this.imageLoadFunction_),(0,i.listen)(u,o.default.CHANGE,this.handleImageChange,this)}else u=null;return this.image_=u,this.renderedRevision_=this.getRevision(),u},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){(0,s.assign)(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,r,n,i){var o=function(t,e,r,n){var i=(0,a.getWidth)(t),o=(0,a.getHeight)(t),s=e[0],u=e[1],c=.0254/n;return u*i>s*o?i*r/(s*c):o*r/(u*c)}(r,n,this.metersPerUnit_,this.displayDpi_),u=(0,a.getCenter)(r),l={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:u[0],SETVIEWCENTERY:u[1]};return(0,s.assign)(l,e),(0,c.appendParams)(t,l)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(u.default);r.default=p},{"../Image.js":"9e2ed74bba157eada38f7cb6b59a611e","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","./Image.js":"0d557ad8d5bf433364223abc399fcf00","../uri.js":"823ffa9cb748e0c3ab6711c6947e976c"}],"13ec5324b6be5d2ef6825c1b8b7f4c49":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=f(t("../Image.js")),i=f(t("../ImageState.js")),o=t("../dom.js"),a=t("../events.js"),s=f(t("../events/EventType.js")),u=t("../extent.js"),c=t("../proj.js"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Image.js"));function f(t){return t&&t.__esModule?t:{default:t}}var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=function(t){function e(e){var r=this,i=void 0!==e.crossOrigin?e.crossOrigin:null,o=void 0!==e.imageLoadFunction?e.imageLoadFunction:l.defaultImageLoadFunction;return(r=t.call(this,{attributions:e.attributions,projection:(0,c.get)(e.projection)})||this).url_=e.url,r.imageExtent_=e.imageExtent,r.image_=new n.default(r.imageExtent_,void 0,1,r.url_,i,o),r.imageSize_=e.imageSize?e.imageSize:null,(0,a.listen)(r.image_,s.default.CHANGE,r.handleImageChange,r),r}return p(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,r,n){return(0,u.intersects)(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==i.default.LOADED){var r=this.image_.getExtent(),n=this.image_.getImage(),a=void 0,s=void 0;this.imageSize_?(a=this.imageSize_[0],s=this.imageSize_[1]):(a=n.width,s=n.height);var c=(0,u.getHeight)(r)/s,l=Math.ceil((0,u.getWidth)(r)/c);if(l!=a){var f=(0,o.createCanvasContext2D)(l,s),d=f.canvas;f.drawImage(n,0,0,a,s,0,0,d.width,d.height),this.image_.setImage(d)}}t.prototype.handleImageChange.call(this,e)},e}(l.default);r.default=h},{"../Image.js":"9e2ed74bba157eada38f7cb6b59a611e","../ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","./Image.js":"0d557ad8d5bf433364223abc399fcf00"}],"7262ed0a668c45c94b880668b88d703f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./common.js"),i=_(t("../Image.js")),o=t("../asserts.js"),a=t("../events.js"),s=_(t("../events/EventType.js")),u=t("../extent.js"),c=t("../obj.js"),l=t("../proj.js"),f=t("../reproj.js"),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Image.js")),p=_(t("./WMSServerType.js")),h=t("../string.js"),g=t("../uri.js");function _(t){return t&&t.__esModule?t:{default:t}}var y,m=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),v=[101,101],b=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:d.defaultImageLoadFunction,r.params_=n.params||{},r.v13_=!0,r.updateV13_(),r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return m(e,t),e.prototype.getGetFeatureInfoUrl=function(t,e,r,i){if(void 0!==this.url_){var o=(0,l.get)(r),a=this.getProjection();a&&a!==o&&(e=(0,f.calculateSourceResolution)(a,o,t,e),t=(0,l.transform)(t,o,a));var s=(0,u.getForViewAndSize)(t,e,0,v),d={SERVICE:"WMS",VERSION:n.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};(0,c.assign)(d,this.params_,i);var p=Math.floor((t[0]-s[0])/e),h=Math.floor((s[3]-t[1])/e);return d[this.v13_?"I":"X"]=p,d[this.v13_?"J":"Y"]=h,this.getRequestUrl_(s,v,1,a||o,d)}},e.prototype.getGetLegendGraphicUrl=function(t,e){var r=this.params_.LAYERS,i=!Array.isArray(r)||1===this.params_.LAYERS.length;if(void 0!==this.url_&&i){var o={SERVICE:"WMS",VERSION:n.DEFAULT_WMS_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png",LAYER:r};if(void 0!==t){var a=this.getProjection()?this.getProjection().getMetersPerUnit():1;o.SCALE=t*a*39.37*(25.4/.28)}return(0,c.assign)(o,e),(0,g.appendParams)(this.url_,o)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,o){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var l=e/r,f=(0,u.getCenter)(t),d=Math.ceil((0,u.getWidth)(t)/l),p=Math.ceil((0,u.getHeight)(t)/l),h=(0,u.getForViewAndSize)(f,l,0,[d,p]),g=Math.ceil(this.ratio_*(0,u.getWidth)(t)/l),_=Math.ceil(this.ratio_*(0,u.getHeight)(t)/l),y=(0,u.getForViewAndSize)(f,l,0,[g,_]),m=this.image_;if(m&&this.renderedRevision_==this.getRevision()&&m.getResolution()==e&&m.getPixelRatio()==r&&(0,u.containsExtent)(m.getExtent(),h))return m;var v={SERVICE:"WMS",VERSION:n.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};(0,c.assign)(v,this.params_),this.imageSize_[0]=Math.round((0,u.getWidth)(y)/l),this.imageSize_[1]=Math.round((0,u.getHeight)(y)/l);var b=this.getRequestUrl_(y,this.imageSize_,r,o,v);return this.image_=new i.default(y,e,r,b,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),(0,a.listen)(this.image_,s.default.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){if((0,o.assert)(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=r)switch(this.serverType_){case p.default.GEOSERVER:var a=90*r+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+a:i.FORMAT_OPTIONS="dpi:"+a;break;case p.default.MAPSERVER:i.MAP_RESOLUTION=90*r;break;case p.default.CARMENTA_SERVER:case p.default.QGIS:i.DPI=90*r;break;default:(0,o.assert)(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var s,u=n.getAxisOrientation();return s=this.v13_&&"ne"==u.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=s.join(","),(0,g.appendParams)(this.url_,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){(0,c.assign)(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||n.DEFAULT_WMS_VERSION;this.v13_=(0,h.compareVersions)(t,"1.3")>=0},e}(d.default);r.default=b},{"./common.js":"a17a590c3db1c53685d2b8499a67f659","../Image.js":"9e2ed74bba157eada38f7cb6b59a611e","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../reproj.js":"ea9dae885791891a5369b19277c94389","./Image.js":"0d557ad8d5bf433364223abc399fcf00","./WMSServerType.js":"9025e2a52f344a821d14be5339837e0e","../string.js":"8e4790f1251a6b3a187ceda3eb6e4980","../uri.js":"823ffa9cb748e0c3ab6711c6947e976c"}],a17a590c3db1c53685d2b8499a67f659:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_WMS_VERSION=void 0;r.DEFAULT_WMS_VERSION="1.3.0"},{}],"9025e2a52f344a821d14be5339837e0e":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},{}],f719f6304814109b4dfb530be0546a38:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ATTRIBUTION=void 0;var n,i=(n=t("./XYZ.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.';r.ATTRIBUTION=s;var u=function(t){function e(e){var r,n=e||{};r=void 0!==n.attributions?n.attributions:[s];var i=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",o=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,cacheSize:n.cacheSize,crossOrigin:i,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:o,wrapX:n.wrapX,attributionsCollapsible:!1})||this}return a(e,t),e}(i.default);r.default=u},{"./XYZ.js":"f476ca94e3360e8401635d9c9a05ed59"}],d8a5bd9fcec25ff0b7a48ebfea432347:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.RasterSourceEvent=void 0;var n=v(t("../ImageCanvas.js")),i=v(t("../TileQueue.js")),o=t("../dom.js"),a=t("../events.js"),s=v(t("../events/Event.js")),u=v(t("../events/EventType.js")),c=t("pixelworks/lib/index.js"),l=t("../extent.js"),f=v(t("../layer/Image.js")),d=v(t("../layer/Tile.js")),p=t("../obj.js"),h=t("../transform.js"),g=v(t("./Image.js")),_=v(t("./Tile.js")),y=v(t("./State.js")),m=v(t("./Source.js"));function v(t){return t&&t.__esModule?t:{default:t}}var b,E=(b=function(t,e){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),S="beforeoperations",j="afteroperations",O={PIXEL:"pixel",IMAGE:"image"},P=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.extent=r.extent,i.resolution=r.viewState.resolution/r.pixelRatio,i.data=n,i}return E(e,t),e}(s.default);r.RasterSourceEvent=P;var T=function(t){function e(e){var r,n=t.call(this,{projection:null})||this;n.worker_=null,n.operationType_=void 0!==e.operationType?e.operationType:O.PIXEL,n.threads_=void 0!==e.threads?e.threads:1,n.layers_=function(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=I(t[n]);return r}(e.sources);for(var o=0,s=n.layers_.length;o<s;++o)(0,a.listen)(n.layers_[o],u.default.CHANGE,n.changed,n);return n.tileQueue_=new i.default(function(){return 1},n.changed.bind(n)),n.requestedFrameState_,n.renderedImageCanvas_=null,n.renderedRevision_,n.frameState_={animate:!1,coordinateToPixelTransform:(0,h.create)(),extent:null,focus:null,index:0,layerIndex:0,layerStatesArray:(r=n.layers_,r.map(function(t){return t.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:(0,h.create)(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:n.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},declutterItems:[]},n.setAttributions(function(t){for(var r=[],n=0,i=e.sources.length;n<i;++n){var o=e.sources[n],a=(o instanceof m.default?o:o.getSource()).getAttributions();if("function"==typeof a){var s=a(t);r.push.apply(r,s)}}return 0!==r.length?r:null}),void 0!==e.operation&&n.setOperation(e.operation,e.lib),n}return E(e,t),e.prototype.setOperation=function(t,e){this.worker_=new c.Processor({operation:t,imageOps:this.operationType_===O.IMAGE,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,r){var n=(0,p.assign)({},this.frameState_);n.viewState=(0,p.assign)({},n.viewState);var i=(0,l.getCenter)(t);n.extent=t.slice(),n.focus=i,n.size[0]=Math.round((0,l.getWidth)(t)/e),n.size[1]=Math.round((0,l.getHeight)(t)/e),n.time=1/0;var o=n.viewState;return o.center=i,o.projection=r,o.resolution=e,n},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,r=this.layers_.length;e<r;++e)if(this.layers_[e].getSource().getState()!==y.default.READY){t=!1;break}return t},e.prototype.getImage=function(t,e,r,n){if(!this.allSourcesReady_())return null;var i=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=i,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===o&&(0,l.equals)(t,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),i.tileQueue.loadMoreTiles(16,16),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.layers_.length,r=new Array(e),n=0;n<e;++n){t.layerIndex=n;var i=C(this.layers_[n],t);if(!i)return;r[n]=i}var o={};this.dispatchEvent(new P(S,t,o)),this.worker_.process(r,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,r,i){if(!e&&r){var a=t.extent,s=t.viewState.resolution;if(s===this.requestedFrameState_.viewState.resolution&&(0,l.equals)(a,this.requestedFrameState_.extent)){var u;if(this.renderedImageCanvas_)u=this.renderedImageCanvas_.getImage().getContext("2d");else{var c=Math.round((0,l.getWidth)(a)/s),f=Math.round((0,l.getHeight)(a)/s);u=(0,o.createCanvasContext2D)(c,f),this.renderedImageCanvas_=new n.default(a,s,1,u.canvas)}u.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new P(j,t,i))}}},e.prototype.getImageInternal=function(){return null},e}(g.default),x=null;function C(t,e){var r=t.getRenderer();if(!r)throw new Error("Unsupported layer type: "+t);if(!r.prepareFrame(e))return null;var n,i=e.size[0],a=e.size[1],s=r.renderFrame(e,null);if(s&&(n=s.firstElementChild),!(n instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+n);if(n.width===i&&n.height===a)return n.getContext("2d").getImageData(0,0,i,a);if(x){var u=x.canvas;u.width!==i||u.height!==a?x=(0,o.createCanvasContext2D)(i,a):x.clearRect(0,0,i,a)}else x=(0,o.createCanvasContext2D)(i,a);return x.drawImage(n,0,0,i,a),x.getImageData(0,0,i,a)}function I(t){var e;return t instanceof m.default?t instanceof _.default?e=new d.default({source:t}):t instanceof g.default&&(e=new f.default({source:t})):e=t,e}var w=T;r.default=w},{"../ImageCanvas.js":"3854c6d9681cc6b35ae1491618c153e2","../TileQueue.js":"8bd91d2f5f2962889b9878108717f72c","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../events.js":"47affab92622893273981942c85f03c7","../events/Event.js":"6dbbd13650258c4cddfa7496bc99a0c6","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","pixelworks/lib/index.js":"103d57c4448c486271a4dcecd51de247","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../layer/Image.js":"8284ca9af4c27460c7239f9a2bffa0d4","../layer/Tile.js":"6cec6db28ae80db9e70344fd61ebb91c","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928","./Image.js":"0d557ad8d5bf433364223abc399fcf00","./Tile.js":"0de545ec02c1ee8840fe79b6a804760d","./State.js":"909be2fc812ab85b41263e2e8ec87f92","./Source.js":"c0ef99a14a1dba4f0de89682688995af"}],"103d57c4448c486271a4dcecd51de247":[function(t,e,r){var n=t("./processor");r.Processor=n},{"./processor":"76f53377b0341ce0fd6e36036f7b061c"}],"76f53377b0341ce0fd6e36036f7b061c":[function(t,e,r){var n=t("./util").newImageData;function i(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function r(t,r,n){return e?new ImageData(t,r,n):{data:t,width:r,height:n}}return function(e){var n,i,o=e.buffers,a=e.meta,s=e.imageOps,u=e.width,c=e.height,l=o.length,f=o[0].byteLength;if(s){var d=new Array(l);for(i=0;i<l;++i)d[i]=r(new Uint8ClampedArray(o[i]),u,c);n=t(d,a).data}else{n=new Uint8ClampedArray(f);var p=new Array(l),h=new Array(l);for(i=0;i<l;++i)p[i]=new Uint8ClampedArray(o[i]),h[i]=[0,0,0,0];for(var g=0;g<f;g+=4){for(var _=0;_<l;++_){var y=p[_];h[_][0]=y[g],h[_][1]=y[g+1],h[_][2]=y[g+2],h[_][3]=y[g+3]}var m=t(h,a);n[g]=m[0],n[g+1]=m[1],n[g+2]=m[2],n[g+3]=m[3]}}return n.buffer}}function o(t,e){var r=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+i.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Blob(r,{type:"text/javascript"}),o=URL.createObjectURL(n),a=new Worker(o);return a.addEventListener("message",e),a}function a(t){var e;this._imageOps=!!t.imageOps;var r=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var n=0;n<e;++n)r[n]=o(t,this._onWorkerMessage.bind(this,n));else r[0]=function(t,e){var r=i(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:r(t),meta:t.meta}})},0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}a.prototype.process=function(t,e,r){this._enqueue({inputs:t,meta:e,callback:r}),this._dispatch()},a.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},a.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},a.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,r=t.inputs[0].height,n=t.inputs.map(function(t){return t.data.buffer}),i=this._workers.length;if(this._running=i,1===i)this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:r},n);else for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var u=s*a,c=[],l=0,f=n.length;l<f;++l)c.push(n[s].slice(u,u+a));this._workers[s].postMessage({buffers:c,meta:t.meta,imageOps:this._imageOps,width:e,height:r},c)}}},a.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},a.prototype._resolveJob=function(){var t,e,r=this._job,i=this._workers.length;if(1===i)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=r.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(o);for(var a=4*Math.ceil(o/4/i),s=0;s<i;++s){var u=this._dataLookup[s].buffer,c=s*a;t.set(new Uint8ClampedArray(u),c),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},r.callback(null,n(t,r.inputs[0].width,r.inputs[0].height),e),this._dispatch()},e.exports=a},{"./util":"8c6609876a5c8a96d7b2333943a3d240"}],"8c6609876a5c8a96d7b2333943a3d240":[function(t,e,r){var n=!0;try{new ImageData(10,10)}catch(t){n=!1}var i=document.createElement("canvas").getContext("2d");r.newImageData=function(t,e,r){if(n)return new ImageData(t,e,r);var o=i.createImageData(e,r);return o.data.set(t),o}},{}],"8284ca9af4c27460c7239f9a2bffa0d4":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(t("./BaseImage.js")),i=o(t("../renderer/canvas/ImageLayer.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.createRenderer=function(){return new i.default(this)},e}(n.default);r.default=u},{"./BaseImage.js":"9b943ff37c9b84c5fa122de87654d198","../renderer/canvas/ImageLayer.js":"eb687ec715ee4e05a6890140ed35600d"}],"9b943ff37c9b84c5fa122de87654d198":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Layer.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e){var r=e||{};return t.call(this,r)||this}return a(e,t),e}(i.default);r.default=s},{"./Layer.js":"59dd6581292a9dd63695ea43a8043d57"}],eb687ec715ee4e05a6890140ed35600d:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../../reproj/common.js"),i=u(t("../../ViewHint.js")),o=t("../../extent.js"),a=u(t("./Layer.js")),s=t("../../transform.js");function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e){var r=t.call(this,e)||this;return r.image_=null,r}return l(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,a=t.viewState,s=a.resolution,u=this.getLayer().getSource(),c=t.viewHints,l=t.extent;if(void 0!==e.extent&&(l=(0,o.getIntersection)(l,e.extent)),!c[i.default.ANIMATING]&&!c[i.default.INTERACTING]&&!(0,o.isEmpty)(l)){var f=a.projection;if(!n.ENABLE_RASTER_REPROJECTION){var d=u.getProjection();d&&(f=d)}var p=u.getImage(l,s,r,f);p&&this.loadImage(p)&&(this.image_=p)}return!!this.image_},e.prototype.renderFrame=function(t,e){var r=this.image_,n=r.getExtent(),i=r.getResolution(),a=r.getPixelRatio(),u=t.layerStatesArray[t.layerIndex],c=t.pixelRatio,l=t.viewState,f=l.center,d=l.resolution,p=t.size,h=c*i/(d*a),g=Math.round(p[0]*c),_=Math.round(p[1]*c),y=l.rotation;y&&(g=_=Math.round(Math.sqrt(g*g+_*_)));(0,s.compose)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,y,-g/2,-_/2),(0,s.makeInverse)(this.inversePixelTransform,this.pixelTransform),this.useContainer(e,this.pixelTransform,u.opacity);var m=this.context,v=m.canvas;v.width!=g||v.height!=_?(v.width=g,v.height=_):this.containerReused||m.clearRect(0,0,g,_);var b=u.extent,E=void 0!==b&&!(0,o.containsExtent)(b,t.extent)&&(0,o.intersects)(b,t.extent);E&&this.clip(m,t,b);var S=r.getImage(),j=(0,s.compose)(this.tempTransform_,g/2,_/2,h,h,0,a*(n[0]-f[0])/i,a*(f[1]-n[3])/i);this.renderedResolution=i*c/a;var O=j[4],P=j[5],T=S.width*j[0],x=S.height*j[3];if(this.preRender(m,t),T>=.5&&x>=.5){var C=u.opacity,I=void 0;1!==C&&(I=this.context.globalAlpha,this.context.globalAlpha=C),this.context.drawImage(S,0,0,+S.width,+S.height,Math.round(O),Math.round(P),Math.round(T),Math.round(x)),1!==C&&(this.context.globalAlpha=I)}this.postRender(m,t),E&&m.restore();var w=(0,s.toString)(this.pixelTransform);return w!==v.style.transform&&(v.style.transform=w),this.container},e}(a.default);r.default=f},{"../../reproj/common.js":"04f971eba4b8d267c5190b5d1c22082b","../../ViewHint.js":"1c64ac73cc5dd7506e286fe17f1044a9","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Layer.js":"138b040d9b7f26238eddda7e17500920","../../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928"}],"6cec6db28ae80db9e70344fd61ebb91c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(t("./BaseTile.js")),i=o(t("../renderer/canvas/TileLayer.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.createRenderer=function(){return new i.default(this)},e}(n.default);r.default=u},{"./BaseTile.js":"608e2d89963a4392074720ba4a0896cc","../renderer/canvas/TileLayer.js":"253559ffa0338265cad297653934ba98"}],"608e2d89963a4392074720ba4a0896cc":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(t("./Layer.js")),i=a(t("./TileProperty.js")),o=t("../obj.js");function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e){var r=this,n=e||{},i=(0,o.assign)({},n);return delete i.preload,delete i.useInterimTilesOnError,(r=t.call(this,i)||this).setPreload(void 0!==n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return u(e,t),e.prototype.getPreload=function(){return this.get(i.default.PRELOAD)},e.prototype.setPreload=function(t){this.set(i.default.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(i.default.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(i.default.USE_INTERIM_TILES_ON_ERROR,t)},e}(n.default);r.default=c},{"./Layer.js":"59dd6581292a9dd63695ea43a8043d57","./TileProperty.js":"a3d0c99365e7364da8583d058de82e8d","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],a3d0c99365e7364da8583d058de82e8d:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},{}],"253559ffa0338265cad297653934ba98":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../../util.js"),i=l(t("../../TileRange.js")),o=l(t("../../TileState.js")),a=t("../../extent.js"),s=l(t("./Layer.js")),u=t("../../transform.js"),c=t("../../array.js");function l(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p=function(t){function e(e){var r=t.call(this,e)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=(0,a.createEmpty)(),r.tmpTileRange_=new i.default(0,0,0,0),r}return d(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==o.default.LOADED||r==o.default.EMPTY||r==o.default.ERROR&&!n},e.prototype.getTile=function(t,e,r,n){var i=n.pixelRatio,a=n.viewState.projection,s=this.getLayer(),u=s.getSource().getTile(t,e,r,i,a);return u.getState()==o.default.ERROR&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):u.setState(o.default.LOADED)),this.isDrawableTile(u)||(u=u.getInterimTile()),u},e.prototype.loadedTileCallback=function(e,r,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,r,n)},e.prototype.prepareFrame=function(t){return!0},e.prototype.renderFrame=function(t,e){var r=t.layerStatesArray[t.layerIndex],i=t.viewState,s=i.projection,l=i.resolution,f=i.center,d=i.rotation,p=t.pixelRatio,h=this.getLayer(),g=h.getSource(),_=g.getRevision(),y=g.getTileGridForProjection(s),m=y.getZForResolution(l,g.zDirection),v=y.getResolution(m),b=t.extent;r.extent&&(b=(0,a.getIntersection)(b,r.extent));var E=g.getTilePixelRatio(p),S=Math.round(t.size[0]*E),j=Math.round(t.size[1]*E);d&&(S=j=Math.round(Math.sqrt(S*S+j*j)));var O=v*S/2/E,P=v*j/2/E,T=[f[0]-O,f[1]-P,f[0]+O,f[1]+P],x=y.getTileRangeForExtentAndZ(b,m),C={};C[m]={};var I=this.createLoadedTileFinder(g,s,C),w=this.tmpExtent,R=this.tmpTileRange_;this.newTiles_=!1;for(var N=x.minX;N<=x.maxX;++N)for(var M=x.minY;M<=x.maxY;++M){var L=this.getTile(m,N,M,t);if(this.isDrawableTile(L)){var A=(0,n.getUid)(this);if(L.getState()==o.default.LOADED){C[m][L.tileCoord.toString()]=L;var F=L.inTransition(A);this.newTiles_||!F&&-1!==this.renderedTiles.indexOf(L)||(this.newTiles_=!0)}if(1===L.getAlpha(A,t.time))continue}var D=y.getTileCoordChildTileRange(L.tileCoord,R,w),k=!1;D&&(k=I(m+1,D)),k||y.forEachTileCoordParentTileRange(L.tileCoord,I,R,w)}var G=v/l;(0,u.compose)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/E,1/E,d,-S/2,-j/2),this.useContainer(e,this.pixelTransform,r.opacity);var U=this.context,B=U.canvas;(0,u.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,u.compose)(this.tempTransform_,S/2,j/2,G,G,0,-S/2,-j/2),B.width!=S||B.height!=j?(B.width=S,B.height=j):this.containerReused||U.clearRect(0,0,S,j),r.extent&&this.clipUnrotated(U,t,r.extent),this.preRender(U,t),this.renderedTiles.length=0;var z,V,Y,X=Object.keys(C).map(Number);X.sort(c.numberSafeCompareFunction),1!==r.opacity||this.containerReused&&!g.getOpaque(t.viewState.projection)?(z=[],V=[]):X=X.reverse();for(var q=X.length-1;q>=0;--q){var W=X[q],H=g.getTilePixelSize(W,p,s),K=y.getResolution(W)/v,Z=H[0]*K*G,J=H[1]*K*G,Q=y.getTileCoordForCoordAndZ((0,a.getTopLeft)(T),W),$=y.getTileCoordExtent(Q),tt=(0,u.apply)(this.tempTransform_,[E*($[0]-T[0])/v,E*(T[3]-$[3])/v]),et=E*g.getGutterForProjection(s),rt=C[W];for(var nt in rt){var it=(L=rt[nt]).tileCoord,ot=tt[0]-(Q[1]-it[1])*Z,at=Math.round(ot+Z),st=tt[1]-(Q[2]-it[2])*J,ut=Math.round(st+J),ct=at-(N=Math.round(ot)),lt=ut-(M=Math.round(st)),ft=m===W;if(!(F=ft&&1!==L.getAlpha((0,n.getUid)(this),t.time)))if(z){U.save(),Y=[N,M,N+ct,M,N+ct,M+lt,N,M+lt];for(var dt=0,pt=z.length;dt<pt;++dt)if(m!==W&&W<V[dt]){var ht=z[dt];U.beginPath(),U.moveTo(Y[0],Y[1]),U.lineTo(Y[2],Y[3]),U.lineTo(Y[4],Y[5]),U.lineTo(Y[6],Y[7]),U.moveTo(ht[6],ht[7]),U.lineTo(ht[4],ht[5]),U.lineTo(ht[2],ht[3]),U.lineTo(ht[0],ht[1]),U.clip()}z.push(Y),V.push(W)}else U.clearRect(N,M,ct,lt);this.drawTileImage(L,t,N,M,ct,lt,et,ft,r.opacity),z&&!F&&U.restore(),this.renderedTiles.push(L),this.updateUsedTiles(t.usedTiles,g,L)}}this.renderedRevision=_,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!(0,a.equals)(this.renderedExtent_,T),this.renderedExtent_=T,this.manageTilePyramid(t,g,y,p,s,b,m,h.getPreload()),this.updateCacheSize_(t,g),this.scheduleExpireCache(t,g),this.postRender(U,t),r.extent&&U.restore();var gt=(0,u.toString)(this.pixelTransform);return gt!==B.style.transform&&(B.style.transform=gt),this.container},e.prototype.drawTileImage=function(t,e,r,i,o,a,s,u,c){var l=this.getTileImage(t);if(l){var f=(0,n.getUid)(this),d=u?t.getAlpha(f,e.time):1,p=c*d,h=p!==this.context.globalAlpha;h&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,r,i,o,a),h&&this.context.restore(),1!==d?e.animate=!0:u&&t.endTransition(f)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var i=(0,n.getUid)(t);i in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,e,r){var i=(0,n.getUid)(e);i in t||(t[i]={}),t[i][r.getKey()]=!0},e.prototype.updateCacheSize_=function(t,e){var r=(0,n.getUid)(e),i=0;r in t.usedTiles&&(i+=Object.keys(t.usedTiles[r]).length),r in t.wantedTiles&&(i+=Object.keys(t.wantedTiles[r]).length);var o=e.tileCache;o.highWaterMark<i&&(o.highWaterMark=i)},e.prototype.manageTilePyramid=function(t,e,r,i,a,s,u,c,l){var f=(0,n.getUid)(e);f in t.wantedTiles||(t.wantedTiles[f]={});var d,p,h,g,_,y,m=t.wantedTiles[f],v=t.tileQueue;for(y=r.getMinZoom();y<=u;++y)for(p=r.getTileRangeForExtentAndZ(s,y,p),h=r.getResolution(y),g=p.minX;g<=p.maxX;++g)for(_=p.minY;_<=p.maxY;++_)u-y<=c?((d=e.getTile(y,g,_,i,a)).getState()==o.default.IDLE&&(m[d.getKey()]=!0,v.isKeyQueued(d.getKey())||v.enqueue([d,f,r.getTileCoordCenter(d.tileCoord),h])),void 0!==l&&l(d)):e.useTile(y,g,_,a)},e}(s.default);p.prototype.getLayer;var h=p;r.default=h},{"../../util.js":"4bb2f7213adce7213216789f3fd3a27b","../../TileRange.js":"2907bc9189da59ab4885682af56a1740","../../TileState.js":"db929d9360c0941c511bb453a25f591f","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Layer.js":"138b040d9b7f26238eddda7e17500920","../../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928","../../array.js":"8f42dda010c04e4c3f5a3f294914ec2a"}],fce415c59433cd1f689258c78f8e2e7b:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("./OSM.js"),o=(n=t("./XYZ.js"))&&n.__esModule?n:{default:n};var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',i.ATTRIBUTION],c={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},l={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},f=function(t){function e(e){var r=e.layer.indexOf("-"),n=-1==r?e.layer:e.layer.slice(0,r),i=l[n],o=c[e.layer],a=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension;return t.call(this,{attributions:u,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:null!=e.maxZoom?e.maxZoom:i.maxZoom,minZoom:null!=e.minZoom?e.minZoom:i.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:a,wrapX:e.wrapX})||this}return s(e,t),e}(o.default);r.default=f},{"./OSM.js":"f719f6304814109b4dfb530be0546a38","./XYZ.js":"f476ca94e3360e8401635d9c9a05ed59"}],"46d35a4e0e4e38a8ffb2cae6de508f79":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../extent.js"),o=t("../math.js"),a=t("../obj.js"),s=t("../size.js"),u=(n=t("./TileImage.js"))&&n.__esModule?n:{default:n},c=t("../tilecoord.js"),l=t("../uri.js");var f,d=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function p(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){var i=n.getTileCoordExtent(t,this.tmpExtent_),o=(0,s.toSize)(n.getTileSize(t[0]),this.tmpSize);1!=e&&(o=(0,s.scale)(o,e,this.tmpSize));var u={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return(0,a.assign)(u,this.params_),this.getRequestUrl_(t,o,i,e,r,u)}}var h=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:p,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).params_=n.params||{},r.tmpExtent_=(0,i.createEmpty)(),r.setKey(r.getKeyForParams_()),r}return d(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,a){var s=this.urls;if(s){var u,f=i.getCode().split(":").pop();if(a.SIZE=e[0]+","+e[1],a.BBOX=r.join(","),a.BBOXSR=f,a.IMAGESR=f,a.DPI=Math.round(a.DPI?a.DPI*n:90*n),1==s.length)u=s[0];else u=s[(0,o.modulo)((0,c.hash)(t),s.length)];var d=u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,l.appendParams)(d,a)}},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.updateParams=function(t){(0,a.assign)(this.params_,t),this.setKey(this.getKeyForParams_())},e}(u.default);r.default=h},{"../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../math.js":"6086e082317ce6ce8a1b47fb09fed63b","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../size.js":"f20e5446e37aa2c395fbeb406aabfc05","./TileImage.js":"0c76cda638b1ee6818638d4dcd4bc115","../tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18","../uri.js":"823ffa9cb748e0c3ab6711c6947e976c"}],"591e93c3cfdfb136d1a788d291289664":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(t("../Tile.js")),i=c(t("../TileState.js")),o=t("../dom.js"),a=t("../size.js"),s=c(t("./XYZ.js")),u=t("../tilecoord.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=function(t){function e(e,r,n){var o=t.call(this,e,i.default.LOADED)||this;return o.tileSize_=r,o.text_=n,o.canvas_=null,o}return f(e,t),e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=(0,o.createCanvasContext2D)(t[0],t[1]);return e.strokeStyle="grey",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="grey",e.strokeStyle="white",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.lineWidth=4,e.strokeText(this.text_,t[0]/2,t[1]/2,t[0]),e.fillText(this.text_,t[0]/2,t[1]/2,t[0]),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(n.default),p=function(t){function e(e){var r=e||{};return t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection})||this}return f(e,t),e.prototype.getTile=function(t,e,r){var n=(0,u.getKeyZXY)(t,e,r);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var i=(0,a.toSize)(this.tileGrid.getTileSize(t)),o=[t,e,r],s=this.getTileCoordForTileUrlFunction(o),c=void 0;c=s?"z:"+s[0]+" x:"+s[1]+" y:"+s[2]:"none";var l=new d(o,i,c);return this.tileCache.set(n,l),l},e}(s.default);r.default=p},{"../Tile.js":"81b8476e359c6fd98b69f8a2aa011224","../TileState.js":"db929d9360c0941c511bb453a25f591f","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../size.js":"f20e5446e37aa2c395fbeb406aabfc05","./XYZ.js":"f476ca94e3360e8401635d9c9a05ed59","../tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18"}],bb518d458cc03d1168267c09774ee282:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../tileurlfunction.js"),i=t("../asserts.js"),o=t("../extent.js"),a=t("../net.js"),s=t("../proj.js"),u=f(t("./State.js")),c=f(t("./TileImage.js")),l=t("../tilegrid.js");function f(t){return t&&t.__esModule?t:{default:t}}var d,p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:(0,s.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:u.default.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this;if(r.tileJSON_=null,r.tileSize_=e.tileSize,e.url)if(e.jsonp)(0,a.jsonp)(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):(0,i.assert)(!1,51);return r}return p(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,r=(0,s.get)("EPSG:4326"),i=this.getProjection();if(void 0!==t.bounds){var a=(0,s.getTransformFromProjections)(r,i);e=(0,o.applyTransform)(t.bounds,a)}var c=t.minzoom||0,f=t.maxzoom||22,d=(0,l.createXYZ)({extent:(0,l.extentFromProjection)(i),maxZoom:f,minZoom:c,tileSize:this.tileSize_});if(this.tileGrid=d,this.tileUrlFunction=(0,n.createFromTemplates)(t.tiles,d),void 0!==t.attribution&&!this.getAttributions()){var p=void 0!==e?e:r.getExtent();this.setAttributions(function(e){return(0,o.intersects)(p,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState(u.default.READY)},e.prototype.handleTileJSONError=function(){this.setState(u.default.ERROR)},e}(c.default);r.default=h},{"../tileurlfunction.js":"68ab585614811729ae137a2bee299fb9","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../net.js":"d6358117d067bc4db8ea258f0750638f","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","./State.js":"909be2fc812ab85b41263e2e8ec87f92","./TileImage.js":"0c76cda638b1ee6818638d4dcd4bc115","../tilegrid.js":"a88f43c5b504c5272463bedf917d269f"}],d48bb0d85ccf34cdde4956ec73823b4c:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./common.js"),i=t("../asserts.js"),o=t("../extent.js"),a=t("../obj.js"),s=t("../math.js"),u=t("../proj.js"),c=t("../reproj.js"),l=t("../size.js"),f=_(t("./TileImage.js")),d=_(t("./WMSServerType.js")),p=t("../tilecoord.js"),h=t("../string.js"),g=t("../uri.js");function _(t){return t&&t.__esModule?t:{default:t}}var y,m=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function v(t,e,r){var i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),!(i.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var s=i.getResolution(t[0]),u=i.getTileCoordExtent(t,this.tmpExtent_),c=(0,l.toSize)(i.getTileSize(t[0]),this.tmpSize),f=this.gutter_;0!==f&&(c=(0,l.buffer)(c,f,this.tmpSize),u=(0,o.buffer)(u,s*f,u)),1!=e&&(c=(0,l.scale)(c,e,this.tmpSize));var d={SERVICE:"WMS",VERSION:n.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return(0,a.assign)(d,this.params_),this.getRequestUrl_(t,c,u,e,r,d)}}var b=function(t){function e(e){var r=this,n=e||{},i=n.params||{},a=!("TRANSPARENT"in i)||i.TRANSPARENT;return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:!a,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:v,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).gutter_=void 0!==n.gutter?n.gutter:0,r.params_=i,r.v13_=!0,r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=(0,o.createEmpty)(),r.updateV13_(),r.setKey(r.getKeyForParams_()),r}return m(e,t),e.prototype.getGetFeatureInfoUrl=function(t,e,r,i){var s=(0,u.get)(r),f=this.getProjection(),d=this.getTileGrid();d||(d=this.getTileGridForProjection(s));var p=d.getZForResolution(e,this.zDirection),h=d.getTileCoordForCoordAndZ(t,p);if(!(d.getResolutions().length<=h[0])){var g=d.getResolution(h[0]),_=d.getTileCoordExtent(h,this.tmpExtent_),y=(0,l.toSize)(d.getTileSize(h[0]),this.tmpSize),m=this.gutter_;0!==m&&(y=(0,l.buffer)(y,m,this.tmpSize),_=(0,o.buffer)(_,g*m,_)),f&&f!==s&&(g=(0,c.calculateSourceResolution)(f,s,t,g),_=(0,u.transformExtent)(_,s,f),t=(0,u.transform)(t,s,f));var v={SERVICE:"WMS",VERSION:n.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};(0,a.assign)(v,this.params_,i);var b=Math.floor((t[0]-_[0])/g),E=Math.floor((_[3]-t[1])/g);return v[this.v13_?"I":"X"]=b,v[this.v13_?"J":"Y"]=E,this.getRequestUrl_(h,y,_,1,f||s,v)}},e.prototype.getGetLegendGraphicUrl=function(t,e){var r=this.params_.LAYERS,i=!Array.isArray(r)||1===this.params_.LAYERS.length;if(void 0!==this.urls[0]&&i){var o={SERVICE:"WMS",VERSION:n.DEFAULT_WMS_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png",LAYER:r};if(void 0!==t){var s=this.getProjection()?this.getProjection().getMetersPerUnit():1;o.SCALE=t*s*39.37*(25.4/.28)}return(0,a.assign)(o,e),(0,g.appendParams)(this.urls[0],o)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,o,a){var u=this.urls;if(u){if(a.WIDTH=e[0],a.HEIGHT=e[1],a[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=n)switch(this.serverType_){case d.default.GEOSERVER:var c=90*n+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+c:a.FORMAT_OPTIONS="dpi:"+c;break;case d.default.MAPSERVER:a.MAP_RESOLUTION=90*n;break;case d.default.CARMENTA_SERVER:case d.default.QGIS:a.DPI=90*n;break;default:(0,i.assert)(!1,52)}var l,f=o.getAxisOrientation(),h=r;if(this.v13_&&"ne"==f.substr(0,2)){var _=void 0;_=r[0],h[0]=r[1],h[1]=_,_=r[2],h[2]=r[3],h[3]=_}if(a.BBOX=h.join(","),1==u.length)l=u[0];else l=u[(0,s.modulo)((0,p.hash)(t),u.length)];return(0,g.appendParams)(l,a)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.updateParams=function(t){(0,a.assign)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||n.DEFAULT_WMS_VERSION;this.v13_=(0,h.compareVersions)(t,"1.3")>=0},e}(f.default);r.default=b},{"./common.js":"a17a590c3db1c53685d2b8499a67f659","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../math.js":"6086e082317ce6ce8a1b47fb09fed63b","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../reproj.js":"ea9dae885791891a5369b19277c94389","../size.js":"f20e5446e37aa2c395fbeb406aabfc05","./TileImage.js":"0c76cda638b1ee6818638d4dcd4bc115","./WMSServerType.js":"9025e2a52f344a821d14be5339837e0e","../tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18","../string.js":"8e4790f1251a6b3a187ceda3eb6e4980","../uri.js":"823ffa9cb748e0c3ab6711c6947e976c"}],"8d3580009a303fbda54d17e08112778c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CustomTile=void 0;var n=_(t("../Tile.js")),i=_(t("../TileState.js")),o=t("../tileurlfunction.js"),a=t("../asserts.js"),s=t("../events.js"),u=_(t("../events/EventType.js")),c=t("../extent.js"),l=t("../net.js"),f=t("../proj.js"),d=_(t("./State.js")),p=_(t("./Tile.js")),h=t("../tilecoord.js"),g=t("../tilegrid.js");function _(t){return t&&t.__esModule?t:{default:t}}var y,m=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),v=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r)||this;return s.src_=n,s.extent_=i,s.preemptive_=o,s.grid_=null,s.keys_=null,s.data_=null,s.jsonp_=a,s}return m(e,t),e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if("string"!=typeof n)return null;var i=n.charCodeAt(Math.floor(e*n.length));i>=93&&i--,i>=35&&i--;var o=null;if((i-=32)in this.keys_){var a=this.keys_[i];o=this.data_&&a in this.data_?this.data_[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,r){this.state==i.default.IDLE&&!0===r?((0,s.listenOnce)(this,u.default.CHANGE,function(r){e(this.getData(t))},this),this.loadInternal_()):!0===r?setTimeout(function(){e(this.getData(t))}.bind(this),0):e(this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=i.default.ERROR,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=i.default.EMPTY,this.changed()},e.prototype.loadInternal_=function(){if(this.state==i.default.IDLE)if(this.state=i.default.LOADING,this.jsonp_)(0,l.jsonp)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(r)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_&&this.loadInternal_()},e}(n.default);r.CustomTile=v;var b=function(t){function e(e){var r=t.call(this,{projection:(0,f.get)("EPSG:3857"),state:d.default.LOADING})||this;if(r.preemptive_=void 0===e.preemptive||e.preemptive,r.tileUrlFunction_=o.nullTileUrlFunction,r.template_=void 0,r.jsonp_=e.jsonp||!1,e.url)if(r.jsonp_)(0,l.jsonp)(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):(0,a.assert)(!1,51);return r}return m(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,r,n){if(this.tileGrid){var i=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,i);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,r,n)}else!0===n?setTimeout(function(){r(null)},0):r(null)},e.prototype.handleTileJSONError=function(){this.setState(d.default.ERROR)},e.prototype.handleTileJSONResponse=function(t){var e,r=(0,f.get)("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=(0,f.getTransformFromProjections)(r,n);e=(0,c.applyTransform)(t.bounds,i)}var a=t.minzoom||0,s=t.maxzoom||22,u=(0,g.createXYZ)({extent:(0,g.extentFromProjection)(n),maxZoom:s,minZoom:a});this.tileGrid=u,this.template_=t.template;var l=t.grids;if(l){if(this.tileUrlFunction_=(0,o.createFromTemplates)(l,u),void 0!==t.attribution){var p=void 0!==e?e:r.getExtent();this.setAttributions(function(e){return(0,c.intersects)(p,e.extent)?[t.attribution]:null})}this.setState(d.default.READY)}else this.setState(d.default.ERROR)},e.prototype.getTile=function(t,e,r,n,o){var a=(0,h.getKeyZXY)(t,e,r);if(this.tileCache.containsKey(a))return this.tileCache.get(a);var s=[t,e,r],u=this.getTileCoordForTileUrlFunction(s,o),c=this.tileUrlFunction_(u,n,o),l=new v(s,void 0!==c?i.default.IDLE:i.default.EMPTY,void 0!==c?c:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache.set(a,l),l},e.prototype.useTile=function(t,e,r){var n=(0,h.getKeyZXY)(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(p.default);r.default=b},{"../Tile.js":"81b8476e359c6fd98b69f8a2aa011224","../TileState.js":"db929d9360c0941c511bb453a25f591f","../tileurlfunction.js":"68ab585614811729ae137a2bee299fb9","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../net.js":"d6358117d067bc4db8ea258f0750638f","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","./State.js":"909be2fc812ab85b41263e2e8ec87f92","./Tile.js":"0de545ec02c1ee8840fe79b6a804760d","../tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18","../tilegrid.js":"a88f43c5b504c5272463bedf917d269f"}],"0236fbf4804982a8db6d9652e73bd7cc":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultLoadFunction=b,r.default=void 0;var n=_(t("../TileState.js")),i=_(t("../VectorRenderTile.js")),o=_(t("../VectorTile.js")),a=t("../size.js"),s=_(t("./UrlTile.js")),u=t("../tilecoord.js"),c=t("../tilegrid.js"),l=t("../extent.js"),f=t("../events.js"),d=_(t("../events/EventType.js")),p=t("../featureloader.js"),h=t("../obj.js"),g=t("../array.js");function _(t){return t&&t.__esModule?t:{default:t}}var y,m=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),v=function(t){function e(e){var r=this,n=e.projection||"EPSG:3857",i=e.extent||(0,c.extentFromProjection)(n),a=e.tileGrid||(0,c.createXYZ)({extent:i,maxZoom:e.maxZoom||22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:a,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:b,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,r.loadingTiles_={},r.sourceTileByCoordKey_={},r.sourceTilesByTileKey_={},r.overlaps_=null==e.overlaps||e.overlaps,r.tileClass=e.tileClass?e.tileClass:o.default,r.tileGrids_={},r}return m(e,t),e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileByCoordKey_={},this.sourceTilesByTileKey_={}},e.prototype.getSourceTiles=function(t,e,r){var i=r.wrappedTileCoord,o=this.getTileGridForProjection(e),a=o.getTileCoordExtent(i),s=i[0],c=o.getResolution(s);(0,l.buffer)(a,-1/c,a);var p=this.tileGrid,_=p.getExtent();_&&(0,l.getIntersection)(a,_,a);var y=p.getZForResolution(c,1),m=p.getMinZoom(),v=this.sourceTilesByTileKey_[r.getKey()];if(v&&v.length>0&&v[0].tileCoord[0]===y)return v;var b,E,S=[],j=y+1;do{--j,b=!0,E=!0,p.forEachTileCoord(a,j,function(i){var o,a=(0,u.getKey)(i);if(a in this.sourceTileByCoordKey_){var s=(o=this.sourceTileByCoordKey_[a]).getState();if(s===n.default.LOADED||s===n.default.ERROR||s===n.default.EMPTY)return E=E&&s===n.default.EMPTY,void S.push(o)}else if(j===y){var c=this.tileUrlFunction(i,t,e);void 0!==c&&((o=new this.tileClass(i,n.default.IDLE,c,this.format_,this.tileLoadFunction)).extent=p.getTileCoordExtent(i),o.projection=e,o.resolution=p.getResolution(i[0]),this.sourceTileByCoordKey_[a]=o,E=!1,(0,f.listen)(o,d.default.CHANGE,this.handleTileChange,this),o.load())}else E=!1;if(b=!1,o&&o.getState()!==n.default.EMPTY&&r.getState()===n.default.IDLE){r.loadingSourceTiles++;var l=(0,f.listen)(o,d.default.CHANGE,function(){var t=o.getState(),e=o.getKey();t!==n.default.LOADED&&t!==n.default.ERROR||(t===n.default.LOADED?((0,f.unlistenByKey)(l),r.loadingSourceTiles--,delete r.errorSourceTileKeys[e]):t===n.default.ERROR&&(r.errorSourceTileKeys[e]=!0),r.loadingSourceTiles-Object.keys(r.errorSourceTileKeys).length==0&&(r.hifi=!0,r.sourceZ=y,r.setState((0,h.isEmpty)(r.errorSourceTileKeys)?n.default.LOADED:n.default.ERROR)))})}}.bind(this)),b||(S.length=0)}while(!b&&j>m);return E||r.getState()!==n.default.IDLE||r.setState(n.default.LOADING),(b||E)&&(r.hifi=y===j,r.sourceZ=j,r.getState()<n.default.LOADED?r.setState(E?n.default.EMPTY:n.default.LOADED):v&&(0,g.equals)(S,v)||(this.removeSourceTiles(r),this.addSourceTiles(r,S))),S},e.prototype.addSourceTiles=function(t,e){this.sourceTilesByTileKey_[t.getKey()]=e;for(var r=0,n=e.length;r<n;++r)e[r].consumers++},e.prototype.removeSourceTiles=function(t){var e=t.getKey();if(e in this.sourceTilesByTileKey_)for(var r=this.sourceTilesByTileKey_[e],n=0,i=r.length;n<i;++n){var o=r[n];o.consumers--,0===o.consumers&&(o.dispose(),delete this.sourceTileByCoordKey_[(0,u.getKey)(o.tileCoord)])}delete this.sourceTilesByTileKey_[e]},e.prototype.getTile=function(t,e,r,o,a){var s,c=(0,u.getKeyZXY)(t,e,r),f=this.getKey();if(this.tileCache.containsKey(c)&&(s=this.tileCache.get(c)).key===f)return s;var d=[t,e,r],p=this.getTileGrid().getExtent(),h=!0;if(p){var g=this.getTileGridForProjection(a),_=g.getTileCoordExtent(d);(0,l.buffer)(_,-1/g.getResolution(t),_),h=(0,l.intersects)(p,_)}var y=h?this.getTileCoordForTileUrlFunction(d,a):null,m=new i.default(d,null!==y?n.default.IDLE:n.default.EMPTY,y,this.tileGrid,this.getSourceTiles.bind(this,o,a),this.removeSourceTiles.bind(this));return m.key=f,s?(m.interimTile=s,m.refreshInterimChain(),this.tileCache.replace(c,m)):this.tileCache.set(c,m),m},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),r=this.tileGrids_[e];if(!r){var n=this.tileGrid;r=this.tileGrids_[e]=(0,c.createForProjection)(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0)}return r},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,r){var n=this.getTileGridForProjection(r),i=(0,a.toSize)(n.getTileSize(t),this.tmpSize);return[Math.round(i[0]*e),Math.round(i[1]*e)]},e}(s.default);function b(t,e){var r=(0,p.loadFeaturesXhr)(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(r)}r.default=v},{"../TileState.js":"db929d9360c0941c511bb453a25f591f","../VectorRenderTile.js":"81f8ac747f5f7ceec55a05875db09968","../VectorTile.js":"e87dd3cf0c48628d84f21f6160fdd314","../size.js":"f20e5446e37aa2c395fbeb406aabfc05","./UrlTile.js":"b7ef810066c963b64d57642abaae57ec","../tilecoord.js":"7ef1a68c2d6255b0b11db8cdb1792f18","../tilegrid.js":"a88f43c5b504c5272463bedf917d269f","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../featureloader.js":"247dc89d29ce8855e158f2f5ca38a528","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a"}],b68bc00724327aece80d0ca447a33ad6:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.optionsFromCapabilities=function(t,e){var r=t.Contents.Layer,n=(0,i.find)(r,function(t,r,n){return t.Identifier==e.layer});if(null===n)return null;var a,u=t.Contents.TileMatrixSet;a=n.TileMatrixSetLink.length>1?"projection"in e?(0,i.findIndex)(n.TileMatrixSetLink,function(t,r,n){var o=(0,i.find)(u,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,a=(0,s.get)(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,s.get)(o),c=(0,s.get)(e.projection);return a&&c?(0,s.equivalent)(a,c):o==e.projection}):(0,i.findIndex)(n.TileMatrixSetLink,function(t,r,n){return t.TileMatrixSet==e.matrixSet}):0;a<0&&(a=0);var f=n.TileMatrixSetLink[a].TileMatrixSet,d=n.TileMatrixSetLink[a].TileMatrixSetLimits,p=n.Format[0];"format"in e&&(p=e.format);(a=(0,i.findIndex)(n.Style,function(t,r,n){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(a=0);var h=n.Style[a].Identifier,g={};"Dimension"in n&&n.Dimension.forEach(function(t,e,r){var n=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),g[n]=i});var _,y=t.Contents.TileMatrixSet,m=(0,i.find)(y,function(t,e,r){return t.Identifier==f}),v=m.SupportedCRS;v&&(_=(0,s.get)(v.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,s.get)(v));if("projection"in e){var b=(0,s.get)(e.projection);b&&(_&&!(0,s.equivalent)(b,_)||(_=b))}var E,S,j=n.WGS84BoundingBox;if(void 0!==j){var O=(0,s.get)("EPSG:4326").getExtent();S=j[0]==O[0]&&j[2]==O[2],E=(0,s.transformExtent)(j,"EPSG:4326",_);var P=_.getExtent();P&&((0,o.containsExtent)(P,E)||(E=void 0))}var T=(0,l.createFromCapabilitiesMatrixSet)(m,E,d),x=[],C=e.requestEncoding;if(C=void 0!==C?C:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var I=t.OperationsMetadata.GetTile.DCP.HTTP.Get,w=0,R=I.length;w<R;++w)if(I[w].Constraint){var N=(0,i.find)(I[w].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===C&&(C=N[0]),C!==c.default.KVP)break;(0,i.includes)(N,c.default.KVP)&&x.push(I[w].href)}else I[w].href&&(C=c.default.KVP,x.push(I[w].href));0===x.length&&(C=c.default.REST,n.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(p=t.format,x.push(t.template))}));return{urls:x,layer:e.layer,matrixSet:f,format:p,projection:_,requestEncoding:C,tileGrid:T,style:h,dimensions:g,wrapX:S,crossOrigin:e.crossOrigin}},r.default=void 0;var n=t("../tileurlfunction.js"),i=t("../array.js"),o=t("../extent.js"),a=t("../obj.js"),s=t("../proj.js"),u=d(t("./TileImage.js")),c=d(t("./WMTSRequestEncoding.js")),l=t("../tilegrid/WMTS.js"),f=t("../uri.js");function d(t){return t&&t.__esModule?t:{default:t}}var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g=function(t){function e(e){var r=this,i=void 0!==e.requestEncoding?e.requestEncoding:c.default.KVP,o=e.tileGrid,a=e.urls;return void 0===a&&void 0!==e.url&&(a=(0,n.expandUrl)(e.url)),(r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:n.nullTileUrlFunction,urls:a,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:"1.0.0",r.format_=void 0!==e.format?e.format:"image/jpeg",r.dimensions_=void 0!==e.dimensions?e.dimensions:{},r.layer_=e.layer,r.matrixSet_=e.matrixSet,r.style_=e.style,r.requestEncoding_=i,r.setKey(r.getKeyForDimensions_()),a&&a.length>0&&(r.tileUrlFunction=(0,n.createFromTileUrlFunctions)(a.map(_.bind(r)))),r}return h(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction((0,n.createFromTileUrlFunctions)(t.map(_.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var r in this.dimensions_)e[t++]=r+"-"+this.dimensions_[r];return e.join("/")},e.prototype.updateDimensions=function(t){(0,a.assign)(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(u.default);function _(t){var e=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==c.default.KVP&&(0,a.assign)(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==c.default.KVP?(0,f.appendParams)(t,r):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t});var n=this.tileGrid,i=this.dimensions_;return function(r,o,s){if(r){var u={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};(0,a.assign)(u,i);var l=t;return l=e==c.default.KVP?(0,f.appendParams)(l,u):l.replace(/\{(\w+?)\}/g,function(t,e){return u[e]})}}}r.default=g},{"../tileurlfunction.js":"68ab585614811729ae137a2bee299fb9","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","./TileImage.js":"0c76cda638b1ee6818638d4dcd4bc115","./WMTSRequestEncoding.js":"9d4c4153067f114fb180619cee71f678","../tilegrid/WMTS.js":"5c16e10d6904ba79e8bee3cdc5e76397","../uri.js":"823ffa9cb748e0c3ab6711c6947e976c"}],"9d4c4153067f114fb180619cee71f678":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={KVP:"KVP",REST:"REST"}},{}],"5c16e10d6904ba79e8bee3cdc5e76397":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createFromCapabilitiesMatrixSet=function(t,e,r){var n=[],a=[],s=[],u=[],l=[],f=void 0!==r?r:[],d=t.SupportedCRS,p=(0,o.get)(d.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,o.get)(d),h=p.getMetersPerUnit(),g="ne"==p.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(e){if(!(f.length>0)||(0,i.find)(f,function(r){return e.Identifier==r.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===r.TileMatrix})){a.push(e.Identifier);var r=28e-5*e.ScaleDenominator/h,o=e.TileWidth,c=e.TileHeight;g?s.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):s.push(e.TopLeftCorner),n.push(r),u.push(o==c?o:[o,c]),l.push([e.MatrixWidth,e.MatrixHeight])}}),new c({extent:e,origins:s,resolutions:n,matrixIds:a,tileSizes:u,sizes:l})},r.default=void 0;var n,i=t("../array.js"),o=t("../proj.js"),a=(n=t("./TileGrid.js"))&&n.__esModule?n:{default:n};var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e){var r=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return r.matrixIds_=e.matrixIds,r}return u(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(a.default),l=c;r.default=l},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","./TileGrid.js":"a9f6734d343c9d26a5988a218ad7a1fa"}],"07ac77b6d0e5d362ff4f6a5805e97e83":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Group",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Heatmap",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Layer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Tile",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"VectorImage",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"VectorTile",{enumerable:!0,get:function(){return l.default}});var n=f(t("./layer/Group.js")),i=f(t("./layer/Heatmap.js")),o=f(t("./layer/Image.js")),a=f(t("./layer/Layer.js")),s=f(t("./layer/Tile.js")),u=f(t("./layer/Vector.js")),c=f(t("./layer/VectorImage.js")),l=f(t("./layer/VectorTile.js"));function f(t){return t&&t.__esModule?t:{default:t}}},{"./layer/Group.js":"fe9e2446a3d2d9fdc16d7af51e3294f8","./layer/Heatmap.js":"4cfd06ab43d83ab4489ac62eccfbc432","./layer/Image.js":"8284ca9af4c27460c7239f9a2bffa0d4","./layer/Layer.js":"59dd6581292a9dd63695ea43a8043d57","./layer/Tile.js":"6cec6db28ae80db9e70344fd61ebb91c","./layer/Vector.js":"49de066443bc6516b98f0fae1c556dd4","./layer/VectorImage.js":"b3b5c81bfcfde4b9cc5c4772ab009321","./layer/VectorTile.js":"482fbc03de8cbc2a88d15aec2fcf61a9"}],"4cfd06ab43d83ab4489ac62eccfbc432":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../events.js"),i=t("../Object.js"),o=t("../dom.js"),a=c(t("./Vector.js")),s=t("../obj.js"),u=c(t("../renderer/webgl/PointsLayer.js"));function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},p=["#00f","#0ff","#0f0","#ff0","#f00"];var h=function(t){function e(e){var r=this,o=e||{},a=(0,s.assign)({},o);delete a.gradient,delete a.radius,delete a.blur,delete a.weight,(r=t.call(this,a)||this).gradient_=null,(0,n.listen)(r,(0,i.getChangeEventType)(d.GRADIENT),r.handleGradientChanged_,r),r.setGradient(o.gradient?o.gradient:p),r.setBlur(void 0!==o.blur?o.blur:15),r.setRadius(void 0!==o.radius?o.radius:8);var u=o.weight?o.weight:"weight";return r.weightFunction_="string"==typeof u?function(t){return t.get(u)}:u,r.setRenderOrder(null),r}return f(e,t),e.prototype.getBlur=function(){return this.get(d.BLUR)},e.prototype.getGradient=function(){return this.get(d.GRADIENT)},e.prototype.getRadius=function(){return this.get(d.RADIUS)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=(0,o.createCanvasContext2D)(1,256),r=e.createLinearGradient(0,0,1,256),n=1/(t.length-1),i=0,a=t.length;i<a;++i)r.addColorStop(i*n,t[i]);return e.fillStyle=r,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set(d.BLUR,t)},e.prototype.setGradient=function(t){this.set(d.GRADIENT,t)},e.prototype.setRadius=function(t){this.set(d.RADIUS,t)},e.prototype.createRenderer=function(){return new u.default(this,{vertexShader:"\n        precision mediump float;\n        attribute vec2 a_position;\n        attribute vec2 a_texCoord;\n        attribute vec2 a_offsets;\n        attribute float a_opacity;\n\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n\n        varying vec2 v_texCoord;\n        varying float v_opacity;\n\n        void main(void) {\n          vec4 offsets = u_offsetScaleMatrix * vec4(a_offsets, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets * u_size;\n          v_texCoord = a_texCoord;\n          v_opacity = a_opacity;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_opacity;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_opacity;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",uniforms:{u_size:function(){return 2*(this.get(d.RADIUS)+this.get(d.BLUR))}.bind(this),u_blurSlope:function(){return this.get(d.RADIUS)/Math.max(1,this.get(d.BLUR))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:this.gradient_}}],opacityCallback:this.weightFunction_})},e}(a.default);r.default=h},{"../events.js":"47affab92622893273981942c85f03c7","../Object.js":"6c67600a5761ed2f245039657f77c37b","../dom.js":"0ade60b4014b5f1918822f5d81f5a358","./Vector.js":"49de066443bc6516b98f0fae1c556dd4","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../renderer/webgl/PointsLayer.js":"c76c731a801894173290ce98afcbbbb9"}],c76c731a801894173290ce98afcbbbb9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=h(t("../../webgl/Buffer.js")),i=t("../../webgl.js"),o=t("../../webgl/Helper.js"),a=h(t("../../geom/GeometryType.js")),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Layer.js")),u=h(t("../../ViewHint.js")),c=t("../../extent.js"),l=t("../../transform.js"),f=t("../../worker/webgl.js"),d=t("../../util.js"),p=h(t("../../webgl/RenderTarget.js"));function h(t){return t&&t.__esModule?t:{default:t}}var g,_=(g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),y="\n  precision mediump float;\n  attribute vec2 a_position;\n  attribute vec2 a_texCoord;\n  attribute float a_rotateWithView;\n  attribute vec2 a_offsets;\n  attribute float a_opacity;\n  attribute vec4 a_color;\n\n  uniform mat4 u_projectionMatrix;\n  uniform mat4 u_offsetScaleMatrix;\n  uniform mat4 u_offsetRotateMatrix;\n\n  varying vec2 v_texCoord;\n  varying float v_opacity;\n  varying vec4 v_color;\n\n  void main(void) {\n    mat4 offsetMatrix = u_offsetScaleMatrix;\n    if (a_rotateWithView == 1.0) {\n      offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n    }\n    vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n    gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n    v_texCoord = a_texCoord;\n    v_opacity = a_opacity;\n    v_color = a_color;\n  }",m="\n  precision mediump float;\n\n  uniform sampler2D u_texture;\n\n  varying vec2 v_texCoord;\n  varying float v_opacity;\n  varying vec4 v_color;\n\n  void main(void) {\n    if (v_opacity == 0.0) {\n      discard;\n    }\n    vec4 textureColor = texture2D(u_texture, v_texCoord);\n    gl_FragColor = v_color * textureColor;\n    gl_FragColor.a *= v_opacity;\n    gl_FragColor.rgb *= gl_FragColor.a;\n  }",v="\n  precision mediump float;\n\n  uniform sampler2D u_texture;\n\n  varying vec2 v_texCoord;\n  varying float v_opacity;\n  varying vec4 v_color;\n\n  void main(void) {\n    if (v_opacity == 0.0) {\n      discard;\n    }\n    vec4 textureColor = texture2D(u_texture, v_texCoord);\n    if (textureColor.a < 0.1) {\n      discard;\n    }\n    gl_FragColor = v_color;\n  }",b=function(t){function e(e,r){var a=this,u=r||{},d=u.uniforms||{};d.u_texture=u.texture||(0,s.getBlankImageData)();var h=(0,l.create)();return d[o.DefaultUniform.PROJECTION_MATRIX]=h,(a=t.call(this,e,{uniforms:d,postProcesses:u.postProcesses})||this).sourceRevision_=-1,a.verticesBuffer_=new n.default(i.ARRAY_BUFFER,i.DYNAMIC_DRAW),a.hitVerticesBuffer_=new n.default(i.ARRAY_BUFFER,i.DYNAMIC_DRAW),a.indicesBuffer_=new n.default(i.ELEMENT_ARRAY_BUFFER,i.DYNAMIC_DRAW),a.program_=a.helper.getProgram(u.fragmentShader||m,u.vertexShader||y),a.hitProgram_=a.helper.getProgram(v,u.vertexShader||y),a.sizeCallback_=u.sizeCallback||function(){return 1},a.coordCallback_=u.coordCallback||function(t,e){return t.getGeometry().getCoordinates()[e]},a.opacityCallback_=u.opacityCallback||function(){return 1},a.texCoordCallback_=u.texCoordCallback||function(t,e){return e<2?0:1},a.colorArray_=[1,1,1,1],a.colorCallback_=u.colorCallback||function(t,e){return this.colorArray_},a.rotateWithViewCallback_=u.rotateWithViewCallback||function(){return!1},a.previousExtent_=(0,c.createEmpty)(),a.currentTransform_=h,a.renderTransform_=(0,l.create)(),a.invertRenderTransform_=(0,l.create)(),a.renderInstructions_=new Float32Array(0),a.hitRenderInstructions_=new Float32Array(0),a.hitRenderTarget_=new p.default(a.helper),a.worker_=(0,f.create)(),a.worker_.addEventListener("message",function(t){var e=t.data;if(e.type===s.WebGLWorkerMessageType.GENERATE_BUFFERS){var r=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,(0,l.makeInverse)(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):this.renderInstructions_=new Float32Array(t.data.renderInstructions)}}.bind(a)),a}return _(e,t),e.prototype.renderFrame=function(t){var e=this.indicesBuffer_.getArray()?this.indicesBuffer_.getArray().length:0;this.helper.drawElements(0,e),this.helper.finalizeDraw(t);var r=this.helper.getCanvas(),n=t.layerStatesArray[t.layerIndex].opacity;return n!==parseFloat(r.style.opacity)&&(r.style.opacity=n),this.renderHitDetection(t),this.hitRenderTarget_.clearCachedData(),r},e.prototype.prepareFrame=function(t){var e=this.getLayer().getSource(),r=t.viewState,n=s.POINT_VERTEX_STRIDE,a=this.sourceRevision_<e.getRevision();if(a){this.sourceRevision_=e.getRevision();var f=r.projection,d=r.resolution;e.loadFeatures([-1/0,-1/0,1/0,1/0],d,f)}var p=!t.viewHints[u.default.ANIMATING]&&!t.viewHints[u.default.INTERACTING],h=!(0,c.equals)(this.previousExtent_,t.extent);(a||h)&&p&&(this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()),this.helper.makeProjectionTransform(t,this.currentTransform_),(0,l.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_);var g=Float32Array.BYTES_PER_ELEMENT;return this.helper.enableAttributeArray(o.DefaultAttrib.POSITION,2,i.FLOAT,g*n,0),this.helper.enableAttributeArray(o.DefaultAttrib.OFFSETS,2,i.FLOAT,g*n,2*g),this.helper.enableAttributeArray(o.DefaultAttrib.TEX_COORD,2,i.FLOAT,g*n,4*g),this.helper.enableAttributeArray(o.DefaultAttrib.OPACITY,1,i.FLOAT,g*n,6*g),this.helper.enableAttributeArray(o.DefaultAttrib.ROTATE_WITH_VIEW,1,i.FLOAT,g*n,7*g),this.helper.enableAttributeArray(o.DefaultAttrib.COLOR,4,i.FLOAT,g*n,8*g),!0},e.prototype.rebuildBuffers_=function(t){var e=this.getLayer().getSource(),r=(0,l.create)();this.helper.makeProjectionTransform(t,r);var n,i=e.getFeatures(),o=s.POINT_INSTRUCTIONS_COUNT*i.length;this.renderInstructions_&&this.renderInstructions_.length===o||(this.renderInstructions_=new Float32Array(o)),this.hitRenderInstructions_&&this.hitRenderInstructions_.length===o||(this.hitRenderInstructions_=new Float32Array(o));for(var u,c,f,p,h,g,_,y,m=[],v=[],b=0,E=0;E<i.length;E++)(n=i[E]).getGeometry()&&n.getGeometry().getType()===a.default.POINT&&(m[0]=this.coordCallback_(n,0),m[1]=this.coordCallback_(n,1),(0,l.apply)(r,m),u=this.texCoordCallback_(n,0),c=this.texCoordCallback_(n,1),f=this.texCoordCallback_(n,2),p=this.texCoordCallback_(n,3),h=this.sizeCallback_(n),g=this.opacityCallback_(n),_=this.rotateWithViewCallback_(n),y=this.colorCallback_(n,this.colorArray_),(0,s.writePointFeatureInstructions)(this.renderInstructions_,b,m[0],m[1],u,c,f,p,h,g,_,y),b=(0,s.writePointFeatureInstructions)(this.hitRenderInstructions_,b,m[0],m[1],u,c,f,p,h,g>0?Number((0,d.getUid)(n)):0,_,(0,s.colorEncodeId)(b+7,v)));var S={type:s.WebGLWorkerMessageType.GENERATE_BUFFERS,renderInstructions:this.renderInstructions_.buffer};S.projectionTransform=r,this.worker_.postMessage(S,[this.renderInstructions_.buffer]),this.renderInstructions_=null;var j={type:s.WebGLWorkerMessageType.GENERATE_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer};j.projectionTransform=r,j.hitDetection=!0,this.worker_.postMessage(j,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){if(this.hitRenderInstructions_){var o=(0,l.apply)(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0],o[1]),u=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=(0,s.colorDecodeId)(u),f=this.hitRenderInstructions_[c],d=Math.floor(f).toString(),p=this.getLayer().getSource().getFeatureByUid(d);return p?n(p,this.getLayer()):void 0}},e.prototype.renderHitDetection=function(t){this.hitRenderTarget_.setSize(t.size),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_);var e=s.POINT_VERTEX_STRIDE,r=Float32Array.BYTES_PER_ELEMENT;this.helper.enableAttributeArray(o.DefaultAttrib.POSITION,2,i.FLOAT,r*e,0),this.helper.enableAttributeArray(o.DefaultAttrib.OFFSETS,2,i.FLOAT,r*e,2*r),this.helper.enableAttributeArray(o.DefaultAttrib.TEX_COORD,2,i.FLOAT,r*e,4*r),this.helper.enableAttributeArray(o.DefaultAttrib.OPACITY,1,i.FLOAT,r*e,6*r),this.helper.enableAttributeArray(o.DefaultAttrib.ROTATE_WITH_VIEW,1,i.FLOAT,r*e,7*r),this.helper.enableAttributeArray(o.DefaultAttrib.COLOR,4,i.FLOAT,r*e,8*r);var n=this.indicesBuffer_.getArray()?this.indicesBuffer_.getArray().length:0;this.helper.drawElements(0,n)},e}(s.default);r.default=b},{"../../webgl/Buffer.js":"faa9264ac827cd7b7d29e0b878a32264","../../webgl.js":"4afdcd2aaf5e3cb70a906f53d70b327e","../../webgl/Helper.js":"14e256ef4fa28721b4c574f68d5f75c6","../../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","./Layer.js":"b04d965ee2d7171693d6a912db01204c","../../ViewHint.js":"1c64ac73cc5dd7506e286fe17f1044a9","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928","../../worker/webgl.js":"4e8c0ef8b4fb9e38b60f37ef21e4396d","../../util.js":"4bb2f7213adce7213216789f3fd3a27b","../../webgl/RenderTarget.js":"43a6b817c9cb61b230a0440b93a5cf18"}],faa9264ac827cd7b7d29e0b878a32264:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getArrayClassForType=a,r.default=r.BufferUsage=void 0;var n=t("../webgl.js"),i=t("../asserts.js"),o={STATIC_DRAW:n.STATIC_DRAW,STREAM_DRAW:n.STREAM_DRAW,DYNAMIC_DRAW:n.DYNAMIC_DRAW};function a(t){switch(t){case n.ARRAY_BUFFER:return Float32Array;case n.ELEMENT_ARRAY_BUFFER:return Uint32Array;default:return Float32Array}}r.BufferUsage=o;var s=function(){function t(t,e){this.array=null,this.type=t,(0,i.assert)(t===n.ARRAY_BUFFER||t===n.ELEMENT_ARRAY_BUFFER,62),this.usage=void 0!==e?e:o.STATIC_DRAW}return t.prototype.ofSize=function(t){this.array=new(a(this.type))(t)},t.prototype.fromArray=function(t){this.array=a(this.type).from(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(a(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t}();r.default=s},{"../webgl.js":"4afdcd2aaf5e3cb70a906f53d70b327e","../asserts.js":"7e662a02bc41c2814316b69c70da50e2"}],"4afdcd2aaf5e3cb70a906f53d70b327e":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getContext=o,r.getSupportedExtensions=function(){if(!n){var t=o(document.createElement("canvas"));t&&(n=t.getSupportedExtensions())}return n},r.FLOAT=r.UNSIGNED_INT=r.UNSIGNED_SHORT=r.UNSIGNED_BYTE=r.DYNAMIC_DRAW=r.STATIC_DRAW=r.STREAM_DRAW=r.ELEMENT_ARRAY_BUFFER=r.ARRAY_BUFFER=void 0;r.ARRAY_BUFFER=34962;r.ELEMENT_ARRAY_BUFFER=34963;r.STREAM_DRAW=35040;r.STATIC_DRAW=35044;r.DYNAMIC_DRAW=35048;r.UNSIGNED_BYTE=5121;r.UNSIGNED_SHORT=5123;r.UNSIGNED_INT=5125;r.FLOAT=5126;var n,i=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function o(t,e){for(var r=i.length,n=0;n<r;++n)try{var o=t.getContext(i[n],e);if(o)return o}catch(t){}return null}},{}],"14e256ef4fa28721b4c574f68d5f75c6":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.DefaultAttrib=r.DefaultUniform=r.ShaderType=void 0;var n=t("../util.js"),i=h(t("../Disposable.js")),o=t("../events.js"),a=t("../obj.js"),s=h(t("../webgl/ContextEventType.js")),u=t("../transform.js"),c=t("../vec/mat4.js"),l=h(t("./PostProcessingPass.js")),f=t("../webgl.js"),d=t("../array.js"),p=t("../asserts.js");function h(t){return t&&t.__esModule?t:{default:t}}var g,_=(g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});r.ShaderType={FRAGMENT_SHADER:35632,VERTEX_SHADER:35633};var y={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix"};r.DefaultUniform=y;r.DefaultAttrib={POSITION:"a_position",TEX_COORD:"a_texCoord",OPACITY:"a_opacity",ROTATE_WITH_VIEW:"a_rotateWithView",OFFSETS:"a_offsets",COLOR:"a_color"};var m=function(t){function e(e){var r=t.call(this)||this,n=e||{};r.canvas_=document.createElement("canvas"),r.canvas_.style.position="absolute",r.gl_=(0,f.getContext)(r.canvas_);var i=r.getGL();if(r.bufferCache_={},r.shaderCache_=[],r.programCache_=[],r.currentProgram_=null,(0,p.assert)((0,d.includes)((0,f.getSupportedExtensions)(),"OES_element_index_uint"),63),i.getExtension("OES_element_index_uint"),(0,o.listen)(r.canvas_,s.default.LOST,r.handleWebGLContextLost,r),(0,o.listen)(r.canvas_,s.default.RESTORED,r.handleWebGLContextRestored,r),r.offsetRotateMatrix_=(0,u.create)(),r.offsetScaleMatrix_=(0,u.create)(),r.tmpMat4_=(0,c.create)(),r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],n.uniforms)for(var a in n.uniforms)r.uniforms_.push({name:a,value:n.uniforms[a]});return r.postProcessPasses_=n.postProcesses?n.postProcesses.map(function(t){return new l.default({webGlContext:i,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})}):[new l.default({webGlContext:i})],r.shaderCompileErrors_=null,r}return _(e,t),e.prototype.bindBuffer=function(t){var e=this.getGL(),r=(0,n.getUid)(t),i=this.bufferCache_[r];if(!i){var o=e.createBuffer();i=this.bufferCache_[r]={buffer:t,webGlBuffer:o}}e.bindBuffer(t.getType(),i.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=(0,n.getUid)(t),i=this.bufferCache_[r];e.isContextLost()||e.deleteBuffer(i.buffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){(0,o.unlistenAll)(this.canvas_);var t=this.getGL();if(!t.isContextLost()){for(var e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(var e in this.programCache_)t.deleteProgram(this.programCache_[e]);for(var e in this.shaderCache_)t.deleteShader(this.shaderCache_[e])}},e.prototype.prepareDraw=function(t){var e=this.getGL(),r=this.getCanvas(),n=t.size,i=t.pixelRatio;r.width=n[0]*i,r.height=n[1]*i,r.style.width=n[0]+"px",r.style.height=n[1]+"px",e.useProgram(this.currentProgram_);for(var o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(t);e.bindTexture(e.TEXTURE_2D,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var n=this.getGL();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,t.size[0],t.size[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL(),n=r.UNSIGNED_INT,i=e-t,o=4*t;r.drawElements(r.TRIANGLES,i,n,o)},e.prototype.finalizeDraw=function(t){for(var e=0;e<this.postProcessPasses_.length;e++)this.postProcessPasses_[e].apply(t,this.postProcessPasses_[e+1]||null)},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,n=(0,u.reset)(this.offsetScaleMatrix_);(0,u.scale)(n,2/e[0],2/e[1]);var i=(0,u.reset)(this.offsetRotateMatrix_);0!==r&&(0,u.rotate)(i,-r),this.setUniformMatrixValue(y.OFFSET_SCALE_MATRIX,(0,c.fromTransform)(this.tmpMat4_,n)),this.setUniformMatrixValue(y.OFFSET_ROTATION_MATRIX,(0,c.fromTransform)(this.tmpMat4_,i))},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=0;this.uniforms_.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(this.getUniformLocation(i.name),n++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,(0,c.fromTransform)(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0)},e.prototype.compileShader=function(t,e){var r=this.getGL(),n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),this.shaderCache_.push(n),n},e.prototype.getProgram=function(t,e){var r=this.getGL(),n=this.compileShader(t,r.FRAGMENT_SHADER),i=this.compileShader(e,r.VERTEX_SHADER);this.shaderCompileErrors_=null,r.getShaderInfoLog(n)&&(this.shaderCompileErrors_="Fragment shader compilation failed:\n"+r.getShaderInfoLog(n)),r.getShaderInfoLog(i)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||"")+"Vertex shader compilation failed:\n"+r.getShaderInfoLog(i));var o=r.createProgram();return r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),this.programCache_.push(o),o},e.prototype.getShaderCompileErrors=function(){return this.shaderCompileErrors_},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,n=t.viewState.rotation,i=t.viewState.resolution,o=t.viewState.center;return(0,u.reset)(e),(0,u.compose)(e,0,0,2/(i*r[0]),2/(i*r[1]),-n,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray=function(t,e,r,n,i){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,r,!1,n,i))},e.prototype.handleWebGLContextLost=function(){(0,a.clear)(this.bufferCache_),(0,a.clear)(this.shaderCache_),(0,a.clear)(this.programCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var n=this.getGL(),i=r||n.createTexture(),o=n.RGBA,a=n.RGBA,s=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,0,o,a,s,e):n.texImage2D(n.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i},e}(i.default);r.default=m},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../Disposable.js":"d4605e3cdc6ca501dd4bed20a4731b8c","../events.js":"47affab92622893273981942c85f03c7","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../webgl/ContextEventType.js":"d36bbd05336ce7b7e84f9bb9bc70485d","../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928","../vec/mat4.js":"9fef7ace92e80c92161c04db0375fc7a","./PostProcessingPass.js":"5acdf170e9ed2553049ddec83ca4be70","../webgl.js":"4afdcd2aaf5e3cb70a906f53d70b327e","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../asserts.js":"7e662a02bc41c2814316b69c70da50e2"}],d36bbd05336ce7b7e84f9bb9bc70485d:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"}},{}],"9fef7ace92e80c92161c04db0375fc7a":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.fromTransform=function(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}},{}],"5acdf170e9ed2553049ddec83ca4be70":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",i="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n",o=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||n),e.compileShader(r);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,t.fragmentShader||i),e.compileShader(o),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,o),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.uniforms_.push({value:t.uniforms[r],location:e.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),r=e.canvas,n=t.size;if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r.width*this.scaleRatio_,r.height*this.scaleRatio_),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var i=e.RGBA,o=e.RGBA,a=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,i,r.width*this.scaleRatio_,r.height*this.scaleRatio_,0,o,a,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e){var r=this.getGL(),n=r.canvas;r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,n.width,n.height),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,n.width,n.height),r.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(t),r.drawArrays(r.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=1;this.uniforms_.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,e.width,e.height,0,r.UNSIGNED_BYTE,new Uint8Array(e.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(i.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void r.uniform2f(i.location,e[0],e[1]);case 3:return void r.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void r.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(i.location,e)})},t}();r.default=o},{}],b04d965ee2d7171693d6a912db01204c:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.writePointFeatureInstructions=function(t,e,r,n,i,o,a,s,u,c,l,f){var d=e;return t[d++]=r,t[d++]=n,t[d++]=i,t[d++]=o,t[d++]=a,t[d++]=s,t[d++]=u,t[d++]=c,t[d++]=l?1:0,t[d++]=f[0],t[d++]=f[1],t[d++]=f[2],t[d++]=f[3],d},r.writePointFeatureToBuffers=function(t,e,r,n,i,o){var a=o>f?o:f,s=t[e+0],u=t[e+1],g=t[e+2],_=t[e+3],y=t[e+4],m=t[e+5],v=t[e+6],b=t[e+7],E=t[e+8],S=t[e+9],j=t[e+10],O=t[e+11],P=t[e+12],T=d,x=T+a-f,C=c;C.length=a-f;for(var I=0;I<C.length;I++)C[I]=t[e+f+I];var w=i?i.vertexPosition:0,R=i?i.indexPosition:0,N=w/x;return p(r,w,s,u,-v/2,-v/2,g,_,b,E,S,j,O,P),h(r,w+T,C),p(r,w+=x,s,u,+v/2,-v/2,y,_,b,E,S,j,O,P),h(r,w+T,C),p(r,w+=x,s,u,+v/2,+v/2,y,m,b,E,S,j,O,P),h(r,w+T,C),p(r,w+=x,s,u,-v/2,+v/2,g,m,b,E,S,j,O,P),h(r,w+T,C),w+=x,n[R++]=N,n[R++]=N+1,n[R++]=N+3,n[R++]=N+1,n[R++]=N+2,n[R++]=N+3,l.vertexPosition=w,l.indexPosition=R,l},r.getBlankImageData=function(){var t=document.createElement("canvas").getContext("2d").createImageData(1,1);return t.data[0]=t.data[1]=t.data[2]=t.data[3]=255,t},r.colorEncodeId=function(t,e){var r=e||[];return r[0]=Math.floor(t/256/256/256)/255,r[1]=Math.floor(t/256/256)%256/255,r[2]=Math.floor(t/256)%256/255,r[3]=t%256/255,r},r.colorDecodeId=function(t){var e=0;return e+=Math.round(256*t[0]*256*256*255),e+=Math.round(256*t[1]*256*255),e+=Math.round(256*t[2]*255),e+=Math.round(255*t[3])},r.default=r.POINT_VERTEX_STRIDE=r.POINT_INSTRUCTIONS_COUNT=r.WebGLWorkerMessageType=void 0;var n=o(t("../Layer.js")),i=o(t("../../webgl/Helper.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});r.WebGLWorkerMessageType={GENERATE_BUFFERS:"GENERATE_BUFFERS"};var u=function(t){function e(e,r){var n=t.call(this,e)||this,o=r||{};return n.helper=new i.default({postProcesses:o.postProcesses,uniforms:o.uniforms}),n}return s(e,t),e.prototype.disposeInternal=function(){t.prototype.disposeInternal.call(this)},e.prototype.getShaderCompileErrors=function(){return this.helper.getShaderCompileErrors()},e}(n.default);var c=[],l={vertexPosition:0,indexPosition:0},f=13;r.POINT_INSTRUCTIONS_COUNT=f;var d=12;function p(t,e,r,n,i,o,a,s,u,c,l,f,d,p){t[e+0]=r,t[e+1]=n,t[e+2]=i,t[e+3]=o,t[e+4]=a,t[e+5]=s,t[e+6]=u,t[e+7]=c,t[e+8]=l,t[e+9]=f,t[e+10]=d,t[e+11]=p}function h(t,e,r){r.length&&t.set(r,e)}r.POINT_VERTEX_STRIDE=d;var g=u;r.default=g},{"../Layer.js":"bd2ade48316cf7594e760d320a72bee3","../../webgl/Helper.js":"14e256ef4fa28721b4c574f68d5f75c6"}],"4e8c0ef8b4fb9e38b60f37ef21e4396d":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){return new Worker(i)};var n=new Blob(['var n="function"==typeof Object.assign?Object.assign:function(n,e){if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(n),t=1,o=arguments.length;t<o;++t){var i=arguments[t];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(r[f]=i[f])}return r};var e="GENERATE_BUFFERS",r=[],t={vertexPosition:0,indexPosition:0},o=13,i=12;function f(n,e,r,t,o,i,f,u,a,s,l,v,c,b){n[e+0]=r,n[e+1]=t,n[e+2]=o,n[e+3]=i,n[e+4]=f,n[e+5]=u,n[e+6]=a,n[e+7]=s,n[e+8]=l,n[e+9]=v,n[e+10]=c,n[e+11]=b}function u(n,e,r){r.length&&n.set(r,e)}function a(n,e,a,s,l,v){var c=v>o?v:o,b=n[e+0],g=n[e+1],d=n[e+2],h=n[e+3],x=n[e+4],y=n[e+5],P=n[e+6],w=n[e+7],p=n[e+8],A=n[e+9],E=n[e+10],j=n[e+11],F=n[e+12],O=i,B=O+c-o,m=r;m.length=c-o;for(var C=0;C<m.length;C++)m[C]=n[e+o+C];var I=l?l.vertexPosition:0,R=l?l.indexPosition:0,T=I/B;return f(a,I,b,g,-P/2,-P/2,d,h,w,p,A,E,j,F),u(a,I+O,m),f(a,I+=B,b,g,+P/2,-P/2,x,h,w,p,A,E,j,F),u(a,I+O,m),f(a,I+=B,b,g,+P/2,+P/2,x,y,w,p,A,E,j,F),u(a,I+O,m),f(a,I+=B,b,g,-P/2,+P/2,d,y,w,p,A,E,j,F),u(a,I+O,m),I+=B,s[R++]=T,s[R++]=T+1,s[R++]=T+3,s[R++]=T+1,s[R++]=T+2,s[R++]=T+3,t.vertexPosition=I,t.indexPosition=R,t}onmessage=function(r){var t=r.data;if(t.type===e){for(var f=new Float32Array(t.renderInstructions),u=t.customAttributesCount||0,s=o+u,l=f.length/s,v=4*l*(i+u),c=new Uint32Array(6*l),b=new Float32Array(v),g=null,d=0;d<f.length;d+=s)g=a(f,d,b,c,g,s);var h=n({vertexBuffer:b.buffer,indexBuffer:c.buffer,renderInstructions:f.buffer},t);postMessage(h,[b.buffer,c.buffer,f.buffer])}};'],{type:"application/javascript"}),i=URL.createObjectURL(n)},{}],"43a6b817c9cb61b230a0440b93a5cf18":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../array.js"),i=new Uint8Array(4),o=function(){function t(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){(0,n.equals)(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){this.readAll();var r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return i[0]=this.data_[4*r],i[1]=this.data_[4*r+1],i[2]=this.data_[4*r+2],i[3]=this.data_[4*r+3],i},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}();r.default=o},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a"}],b3b5c81bfcfde4b9cc5c4772ab009321:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(t("./BaseVector.js")),i=t("../obj.js"),o=a(t("../renderer/canvas/VectorImageLayer.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e){var r=this,n=e||{},o=(0,i.assign)({},n);return delete o.imageRatio,(r=t.call(this,o)||this).imageRatio_=void 0!==n.imageRatio?n.imageRatio:1,r}return u(e,t),e.prototype.getImageRatio=function(){return this.imageRatio_},e.prototype.createRenderer=function(){return new o.default(this)},e}(n.default);r.default=c},{"./BaseVector.js":"7d0994c50d0f4ce072278459045b4f9f","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../renderer/canvas/VectorImageLayer.js":"2c9eea7eebec63048ad9ae2f58422af8"}],"2c9eea7eebec63048ad9ae2f58422af8":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=h(t("../../ImageCanvas.js")),i=h(t("../../ViewHint.js")),o=t("../../array.js"),a=t("../../extent.js"),s=t("../../obj.js"),u=h(t("./ImageLayer.js")),c=h(t("./VectorLayer.js")),l=t("../../events.js"),f=h(t("../../events/EventType.js")),d=h(t("../../ImageState.js")),p=t("../../render.js");function h(t){return t&&t.__esModule?t:{default:t}}var g,_=(g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),y=function(t){function e(e){var r=t.call(this,e)||this;return r.skippedFeatures_=[],r.vectorRenderer_=new c.default(e),r.layerImageRatio_=e.getImageRatio(),r}return _(e,t),e.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},e.prototype.prepareFrame=function(t){var e=t.pixelRatio,r=t.viewState.resolution,u=t.viewHints,c=this.vectorRenderer_,h=t.extent;if(1!==this.layerImageRatio_&&(h=h.slice(0),(0,a.scaleFromCenter)(h,this.layerImageRatio_)),!u[i.default.ANIMATING]&&!u[i.default.INTERACTING]&&!(0,a.isEmpty)(h)){var g=this.skippedFeatures_;c.useContainer(null,null,1);var _=c.context,y=(0,s.assign)({},t,{declutterItems:[],size:[(0,a.getWidth)(h)/r,(0,a.getHeight)(h)/r],viewState:(0,s.assign)({},t.viewState,{rotation:0})}),m=Object.keys(y.skippedFeatureUids).sort(),v=new n.default(h,r,e,_.canvas,function(t){!c.prepareFrame(y)||!c.replayGroupChanged&&(0,o.equals)(g,m)||(c.renderFrame(y,null),(0,p.renderDeclutterItems)(y,null),g=m,t())});(0,l.listen)(v,f.default.CHANGE,function(){v.getState()===d.default.LOADED&&(this.image_=v,this.skippedFeatures_=g)},this),v.load()}if(this.image_){var b=this.image_,E=b.getResolution(),S=b.getPixelRatio();this.renderedResolution=E*e/S}return!!this.image_},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.forEachFeatureAtCoordinate=function(e,r,n,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,r,n,i,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,r,n,i,o)},e}(u.default);r.default=y},{"../../ImageCanvas.js":"3854c6d9681cc6b35ae1491618c153e2","../../ViewHint.js":"1c64ac73cc5dd7506e286fe17f1044a9","../../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","./ImageLayer.js":"eb687ec715ee4e05a6890140ed35600d","./VectorLayer.js":"3564c0c8505a8986e03bfa3aa8a5f309","../../events.js":"47affab92622893273981942c85f03c7","../../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../../ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2","../../render.js":"c56a55f11fca331cab1321bc7ee520c8"}],"482fbc03de8cbc2a88d15aec2fcf61a9":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../asserts.js"),i=c(t("./TileProperty.js")),o=c(t("./BaseVector.js")),a=c(t("./VectorTileRenderType.js")),s=c(t("../renderer/canvas/VectorTileLayer.js")),u=t("../obj.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=function(t){function e(e){var r=this,i=e||{},o=(0,u.assign)({},i);delete o.preload,delete o.useInterimTilesOnError,r=t.call(this,o)||this;var s=i.renderMode||a.default.HYBRID;return(0,n.assert)(null==s||s==a.default.IMAGE||s==a.default.HYBRID,28),r.renderMode_=s,r.setPreload(i.preload?i.preload:0),r.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),r}return f(e,t),e.prototype.createRenderer=function(){return new s.default(this)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(i.default.PRELOAD)},e.prototype.getUseInterimTilesOnError=function(){return this.get(i.default.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setPreload=function(t){this.set(i.default.PRELOAD,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(i.default.USE_INTERIM_TILES_ON_ERROR,t)},e}(o.default);r.default=d},{"../asserts.js":"7e662a02bc41c2814316b69c70da50e2","./TileProperty.js":"a3d0c99365e7364da8583d058de82e8d","./BaseVector.js":"7d0994c50d0f4ce072278459045b4f9f","./VectorTileRenderType.js":"28b01895b3d70da6a4e88232f105f144","../renderer/canvas/VectorTileLayer.js":"09097fccad2a5562de02ad1015747570","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],"28b01895b3d70da6a4e88232f105f144":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={IMAGE:"image",HYBRID:"hybrid"}},{}],"09097fccad2a5562de02ad1015747570":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../../util.js"),i=t("../../dom.js"),o=m(t("../../TileState.js")),a=m(t("../../ViewHint.js")),s=t("../../events.js"),u=m(t("../../events/EventType.js")),c=t("../../extent.js"),l=m(t("../../layer/VectorTileRenderType.js")),f=m(t("../../render/canvas/BuilderType.js")),d=m(t("../../render/canvas/BuilderGroup.js")),p=m(t("./TileLayer.js")),h=t("../vector.js"),g=t("../../transform.js"),_=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("../../render/canvas/ExecutorGroup.js")),y=t("../../obj.js");function m(t){return t&&t.__esModule?t:{default:t}}var v,b=(v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),E={image:[f.default.POLYGON,f.default.CIRCLE,f.default.LINE_STRING,f.default.IMAGE,f.default.TEXT],hybrid:[f.default.POLYGON,f.default.LINE_STRING]},S={image:[f.default.DEFAULT],hybrid:[f.default.IMAGE,f.default.TEXT,f.default.DEFAULT]},j=function(t){function e(e){var r=t.call(this,e)||this;return r.overlayContext_=null,r.overlayContextUid_,r.overlayPixelTransform_=(0,g.create)(),r.inverseOverlayPixelTransform_=(0,g.create)(),r.dirty_=!1,r.renderedLayerRevision_,r.renderTileImageQueue_={},r.tileListenerKeys_={},r.tmpTransform_=(0,g.create)(),r}return b(e,t),e.prototype.useContainer=function(e,r,o){var a;e&&2===e.childElementCount&&((a=e.lastElementChild.getContext("2d"))||(e=null));var s=this.containerReused;if(t.prototype.useContainer.call(this,e,r,o),s&&(this.overlayContext_=a||null,this.overlayContextUid_=a?(0,n.getUid)(a):void 0),!this.overlayContext_){var u=(0,i.createCanvasContext2D)(),c=u.canvas.style;c.position="absolute",c.transformOrigin="top left",this.overlayContext_=u,this.overlayContextUid_=(0,n.getUid)(u)}1===this.container.childElementCount&&this.container.appendChild(this.overlayContext_.canvas)},e.prototype.prepareTile=function(t,e,r,i){var a=!1,u=(0,n.getUid)(t),c=t.getState();return(c===o.default.LOADED&&t.hifi||c===o.default.ERROR||c===o.default.ABORT)&&u in this.tileListenerKeys_&&((0,s.unlistenByKey)(this.tileListenerKeys_[u]),delete this.tileListenerKeys_[u]),c!==o.default.LOADED&&c!==o.default.ERROR||(this.updateExecutorGroup_(t,e,r),this.tileImageNeedsRender_(t,e,r)&&(a=!0,i&&(this.renderTileImageQueue_[u]=t))),a},e.prototype.getTile=function(e,r,i,c){var l=t.prototype.getTile.call(this,e,r,i,c),f=c.pixelRatio,d=c.viewState,p=d.resolution,h=d.projection;if(l.getState()<o.default.LOADED){l.wantedResolution=p;var g=(0,n.getUid)(l);if(!(g in this.tileListenerKeys_)){var _=(0,s.listen)(l,u.default.CHANGE,this.prepareTile.bind(this,l,f,h,!0));this.tileListenerKeys_[g]=_}}else{var y=c.viewHints;!!(y[a.default.ANIMATING]||y[a.default.INTERACTING])&&l.wantedResolution||(l.wantedResolution=p),this.prepareTile(l,f,h,!1)&&this.renderTileImage_(l,c)}return l},e.prototype.isDrawableTile=function(e){return t.prototype.isDrawableTile.call(this,e)&&e.hasContext(this.getLayer())},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){e.layerStatesArray[e.layerIndex].hasOverlay=!0;var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,r){var i=this.getLayer(),a=i.getRevision(),s=i.getRenderOrder()||null,u=t.wantedResolution,l=t.getReplayState(i);if(l.dirty||l.renderedResolution!==u||l.renderedRevision!=a||l.renderedRenderOrder!=s||l.renderedZ!==t.sourceZ){var f=i.getSource(),p=f.getTileGrid(),g=f.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),y=f.getSourceTiles(e,r,t),m=(0,n.getUid)(i),v=t.executorGroups[m];if(v)for(var b=0,E=v.length;b<E;++b)v[b].dispose();t.executorGroups[m]=[];for(var S=function(r,n){var a=y[r];if(a.getState()!=o.default.LOADED)return"continue";var v=a.tileCoord,b=p.getTileCoordExtent(v),E=(0,c.getIntersection)(g,b),S=(0,c.equals)(b,E)?null:(0,c.buffer)(E,i.getRenderBuffer()*u,j.tmpExtent);l.dirty=!1;var O=new d.default(0,E,u,e,i.getDeclutter()),P=(0,h.getSquaredTolerance)(u,e),T=function(t){var e,r=t.getStyleFunction()||i.getStyleFunction();if(r&&(e=r(t,u)),e){var n=this.renderFeature(t,P,e,O);this.dirty_=this.dirty_||n,l.dirty=l.dirty||n}},x=a.getFeatures();s&&s!==l.renderedRenderOrder&&x.sort(s);for(var C=0,I=x.length;C<I;++C){var w=x[C];S&&!(0,c.intersects)(S,w.getGeometry().getExtent())||T.call(j,w)}var R=O.finish(),N=i.getDeclutter()&&1===y.length?null:E,M=new _.default(N,u,e,f.getOverlaps(),R,i.getRenderBuffer());t.executorGroups[m].push(M)},j=this,O=0,P=y.length;O<P;++O)S(O);l.renderedRevision=a,l.renderedZ=t.sourceZ,l.renderedRenderOrder=s,l.renderedResolution=u}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,i,o){var a=e.viewState.resolution,s=e.viewState.rotation;r=null==r?0:r;var u,l,f,d=this.getLayer(),p=d.getDeclutter(),h=d.getSource().getTileGridForProjection(e.viewState.projection),g={},_=this.renderedTiles,y=function(){var e=_[l],f=h.getTileCoordExtent(e.wrappedTileCoord),y=(0,c.containsCoordinate)(f,t);if(!p&&!y)return"continue";for(var m=e.executorGroups[(0,n.getUid)(d)],v=0,b=m.length;v<b;++v){var E=m[v];u=u||E.forEachFeatureAtCoordinate(t,a,s,r,{},function(t){if(y||o&&-1!==o.indexOf(t)){var e=t.getId();if(void 0===e&&(e=(0,n.getUid)(t)),!(e in g))return g[e]=!0,i(t,d)}},d.getDeclutter()?o:null)}};for(l=0,f=_.length;l<f;++l)y();return u},e.prototype.handleFontsChanged=function(){(0,y.clear)(this.renderTileImageQueue_);var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderFrame=function(e,r){var i=e.viewHints,s=!(i[a.default.ANIMATING]||i[a.default.INTERACTING]);this.renderQueuedTileImages_(s,e),t.prototype.renderFrame.call(this,e,r);var u=this.getLayer(),c=u.getRenderMode();if(c===l.default.IMAGE)return this.container;var f=u.getSource(),d=e.usedTiles[(0,n.getUid)(f)];for(var p in this.renderTileImageQueue_)d&&p in d||delete this.renderTileImageQueue_[p];var h=this.overlayContext_,y=u.getDeclutter()?{}:null,m=S[c],v=e.pixelRatio,b=e.viewState.rotation,E=e.size;(0,g.makeScale)(this.overlayPixelTransform_,1/v,1/v),(0,g.makeInverse)(this.inverseOverlayPixelTransform_,this.overlayPixelTransform_);var j=h.canvas,O=Math.round(E[0]*v),P=Math.round(E[1]*v);if(j.width!=O||j.height!=P){j.width=O,j.height=P;var T=(0,g.toString)(this.overlayPixelTransform_);j.style.transform!==T&&(j.style.transform=T)}else(0,n.getUid)(h)===this.overlayContextUid_&&h.clearRect(0,0,O,P);for(var x=this.renderedTiles,C=f.getTileGridForProjection(e.viewState.projection),I=[],w=[],R=x.length-1;R>=0;--R){var N=x[R];if(N.getState()!=o.default.ABORT)for(var M=N.tileCoord,L=C.getTileCoordExtent(N.wrappedTileCoord),A=C.getTileCoordExtent(M,this.tmpExtent)[0]-L[0],F=this.getRenderTransform(e,O,P,A),D=N.executorGroups[(0,n.getUid)(u)],k=!1,G=0,U=D.length;G<U;++G){var B=D[G];if(B.hasExecutors(m)){var z=N.tileCoord[0],V=void 0;if(!y&&!k){V=B.getClipCoords(F),h.save();for(var Y=0,X=I.length;Y<X;++Y){var q=I[Y];z<w[Y]&&(h.beginPath(),h.moveTo(V[0],V[1]),h.lineTo(V[2],V[3]),h.lineTo(V[4],V[5]),h.lineTo(V[6],V[7]),h.moveTo(q[6],q[7]),h.lineTo(q[4],q[5]),h.lineTo(q[2],q[3]),h.lineTo(q[0],q[1]),h.clip())}}B.execute(h,F,b,{},s,m,y),y||k||(h.restore(),I.push(V),w.push(z),k=!0)}}}if(y){var W=e.layerStatesArray[e.layerIndex];(0,_.replayDeclutter)(y,h,b,W.opacity,s,e.declutterItems)}return this.container},e.prototype.renderQueuedTileImages_=function(t,e){for(var r in this.renderTileImageQueue_){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var n=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(n,e)}},e.prototype.renderFeature=function(t,e,r,n){if(!r)return!1;var i=!1;if(Array.isArray(r))for(var o=0,a=r.length;o<a;++o)i=(0,h.renderFeature)(n,t,r[o],e,this.handleStyleImageChange_,this)||i;else i=(0,h.renderFeature)(n,t,r,e,this.handleStyleImageChange_,this);return i},e.prototype.tileImageNeedsRender_=function(t,e,r){var n=this.getLayer(),i=t.getReplayState(n),o=n.getRevision(),a=t.sourceZ,s=t.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==o||i.renderedTileZ!==a},e.prototype.renderTileImage_=function(t,e){var r=this.getLayer(),i=t.getReplayState(r),o=r.getRevision(),a=t.executorGroups[(0,n.getUid)(r)];i.renderedTileRevision=o,i.renderedTileZ=t.sourceZ;var s=t.wrappedTileCoord,u=s[0],c=r.getSource(),l=e.pixelRatio,f=e.viewState.projection,d=c.getTileGridForProjection(f),p=d.getResolution(t.tileCoord[0]),h=e.pixelRatio/t.wantedResolution*p,_=d.getResolution(u),y=t.getContext(r);l=Math.max(l,h/l);var m=c.getTilePixelSize(u,l,f);y.canvas.width=m[0],y.canvas.height=m[1];var v=l/h;if(1!==v){var b=(0,g.reset)(this.tmpTransform_);(0,g.scale)(b,v,v),y.setTransform.apply(y,b)}var S=d.getTileCoordExtent(s,this.tmpExtent),j=h/_,O=(0,g.reset)(this.tmpTransform_);(0,g.scale)(O,j,-j),(0,g.translate)(O,-S[0],-S[3]);for(var P=0,T=a.length;P<T;++P){a[P].execute(y,O,0,{},!0,E[r.getRenderMode()])}i.renderedTileResolution=t.wantedResolution},e.prototype.getDataAtPixel=function(e,r,n){var i=t.prototype.getDataAtPixel.call(this,e,r,n);if(i)return i;var o=(0,g.apply)(this.inverseOverlayPixelTransform_,e.slice()),a=this.overlayContext_;try{i=a.getImageData(Math.round(o[0]),Math.round(o[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:i}return 0===i[3]?null:i},e}(p.default);r.default=j},{"../../util.js":"4bb2f7213adce7213216789f3fd3a27b","../../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../../TileState.js":"db929d9360c0941c511bb453a25f591f","../../ViewHint.js":"1c64ac73cc5dd7506e286fe17f1044a9","../../events.js":"47affab92622893273981942c85f03c7","../../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../../layer/VectorTileRenderType.js":"28b01895b3d70da6a4e88232f105f144","../../render/canvas/BuilderType.js":"7e31f2f3ef882284ed0c3e4e447170db","../../render/canvas/BuilderGroup.js":"eee3dd2c9a1fbdc6efef8e57e1727fe4","./TileLayer.js":"253559ffa0338265cad297653934ba98","../vector.js":"7ed977cc1b741c8030677466fc217cc6","../../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928","../../render/canvas/ExecutorGroup.js":"60c90e6a3a28991a1f6db9ce252a5bd6","../../obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],"1f47e0122321da9468197863144a77af":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"EsriJSON",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"GeoJSON",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"GML",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"GPX",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"IGC",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"IIIFInfo",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"KML",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"MVT",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"OWS",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"Polyline",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"TopoJSON",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"WFS",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"WKT",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"WMSCapabilities",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"WMSGetFeatureInfo",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"WMTSCapabilities",{enumerable:!0,get:function(){return m.default}});var n=v(t("./format/EsriJSON.js")),i=v(t("./format/GeoJSON.js")),o=v(t("./format/GML.js")),a=v(t("./format/GPX.js")),s=v(t("./format/IGC.js")),u=v(t("./format/IIIFInfo.js")),c=v(t("./format/KML.js")),l=v(t("./format/MVT.js")),f=v(t("./format/OWS.js")),d=v(t("./format/Polyline.js")),p=v(t("./format/TopoJSON.js")),h=v(t("./format/WFS.js")),g=v(t("./format/WKT.js")),_=v(t("./format/WMSCapabilities.js")),y=v(t("./format/WMSGetFeatureInfo.js")),m=v(t("./format/WMTSCapabilities.js"));function v(t){return t&&t.__esModule?t:{default:t}}},{"./format/EsriJSON.js":"532bd6b0142759f53bc7fb7a0402cc18","./format/GeoJSON.js":"cd6860fd4d8dbcd98aec3bed2480aa06","./format/GML.js":"d287fc049ce1a99ef209d16a1022c0d0","./format/GPX.js":"ec8ca29a01549852dfd65ffae1d255b8","./format/IGC.js":"9dec52dae9b5ee3d448051201efa9840","./format/IIIFInfo.js":"9f5df990e276c53cc7e8f08e331df039","./format/KML.js":"d57bb1c2d21981c19b5dcfc1d58ada23","./format/MVT.js":"20f2898efd9fb7ebd944ab43cb8fa987","./format/OWS.js":"dc3611ac06e430e80aee9bcef3ef4d2e","./format/Polyline.js":"427a655ca5fd1077e22cf7ba306347d1","./format/TopoJSON.js":"6dd1b7ff1e0eb7ed23cb5a69ef0b3ae3","./format/WFS.js":"06a9c55150bfb3ffc98c92f54ce610c3","./format/WKT.js":"ac226baebccf96d1e1874944827aa6b9","./format/WMSCapabilities.js":"2a6683663dd3802c50bcb9b8260d076b","./format/WMSGetFeatureInfo.js":"96d7b891667fafe5b580b0207a1cd399","./format/WMTSCapabilities.js":"5652310bda530ec913c50bb7d7798880"}],"532bd6b0142759f53bc7fb7a0402cc18":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=E(t("../Feature.js")),i=t("../asserts.js"),o=t("../extent.js"),a=t("./Feature.js"),s=E(t("./JSONFeature.js")),u=E(t("../geom/GeometryLayout.js")),c=E(t("../geom/GeometryType.js")),l=E(t("../geom/LineString.js")),f=E(t("../geom/LinearRing.js")),d=E(t("../geom/MultiLineString.js")),p=E(t("../geom/MultiPoint.js")),h=E(t("../geom/MultiPolygon.js")),g=E(t("../geom/Point.js")),_=E(t("../geom/Polygon.js")),y=t("../geom/flat/deflate.js"),m=t("../geom/flat/orient.js"),v=t("../obj.js"),b=t("../proj.js");function E(t){return t&&t.__esModule?t:{default:t}}var S,j=(S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),O={};O[c.default.POINT]=function(t){var e;e=void 0!==t.m&&void 0!==t.z?new g.default([t.x,t.y,t.z,t.m],u.default.XYZM):void 0!==t.z?new g.default([t.x,t.y,t.z],u.default.XYZ):void 0!==t.m?new g.default([t.x,t.y,t.m],u.default.XYM):new g.default([t.x,t.y]);return e},O[c.default.LINE_STRING]=function(t){var e=x(t);return new l.default(t.paths[0],e)},O[c.default.POLYGON]=function(t){var e=x(t);return new _.default(t.rings,e)},O[c.default.MULTI_POINT]=function(t){var e=x(t);return new p.default(t.points,e)},O[c.default.MULTI_LINE_STRING]=function(t){var e=x(t);return new d.default(t.paths,e)},O[c.default.MULTI_POLYGON]=function(t){var e=x(t);return new h.default(t.rings,e)};var P={};function T(t,e){var r,n,i;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)i=c.default.POINT;else if(t.points)i=c.default.MULTI_POINT;else if(t.paths){i=1===t.paths.length?c.default.LINE_STRING:c.default.MULTI_LINE_STRING}else if(t.rings){var s=t,u=x(s),l=function(t,e){var r,n,i=[],a=[],s=[];for(r=0,n=t.length;r<n;++r){i.length=0,(0,y.deflateCoordinates)(i,0,t[r],e.length),(0,m.linearRingIsClockwise)(i,0,i.length,e.length)?a.push([t[r]]):s.push(t[r])}for(;s.length;){var u=s.shift(),c=!1;for(r=a.length-1;r>=0;r--){var l=a[r][0];if((0,o.containsExtent)(new f.default(l).getExtent(),new f.default(u).getExtent())){a[r].push(u),c=!0;break}}c||a.push([u.reverse()])}return a}(s.rings,u);1===l.length?(i=c.default.POLYGON,t=Object.assign({},t,((r={}).rings=l[0],r))):(i=c.default.MULTI_POLYGON,t=Object.assign({},t,((n={}).rings=l,n)))}var d=O[i];return(0,a.transformGeometryWithOptions)(d(t),!1,e)}function x(t){var e=u.default.XY;return!0===t.hasZ&&!0===t.hasM?e=u.default.XYZM:!0===t.hasZ?e=u.default.XYZ:!0===t.hasM&&(e=u.default.XYM),e}function C(t){var e=t.getLayout();return{hasZ:e===u.default.XYZ||e===u.default.XYZM,hasM:e===u.default.XYM||e===u.default.XYZM}}function I(t,e){return(0,P[t.getType()])((0,a.transformGeometryWithOptions)(t,!0,e),e)}P[c.default.POINT]=function(t,e){var r,n=t.getCoordinates(),o=t.getLayout();o===u.default.XYZ?r={x:n[0],y:n[1],z:n[2]}:o===u.default.XYM?r={x:n[0],y:n[1],m:n[2]}:o===u.default.XYZM?r={x:n[0],y:n[1],z:n[2],m:n[3]}:o===u.default.XY?r={x:n[0],y:n[1]}:(0,i.assert)(!1,34);return r},P[c.default.LINE_STRING]=function(t,e){var r=C(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:[t.getCoordinates()]}},P[c.default.POLYGON]=function(t,e){var r=C(t);return{hasZ:r.hasZ,hasM:r.hasM,rings:t.getCoordinates(!1)}},P[c.default.MULTI_POINT]=function(t,e){var r=C(t);return{hasZ:r.hasZ,hasM:r.hasM,points:t.getCoordinates()}},P[c.default.MULTI_LINE_STRING]=function(t,e){var r=C(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:t.getCoordinates()}},P[c.default.MULTI_POLYGON]=function(t,e){for(var r=C(t),n=t.getCoordinates(!1),i=[],o=0;o<n.length;o++)for(var a=n[o].length-1;a>=0;a--)i.push(n[o][a]);return{hasZ:r.hasZ,hasM:r.hasM,rings:i}};var w=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).geometryName_=n.geometryName,r}return j(e,t),e.prototype.readFeatureFromObject=function(t,e){var r=t,i=T(r.geometry,e),o=new n.default;return this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(i),e&&e.idField&&r.attributes[e.idField]&&o.setId(r.attributes[e.idField]),r.attributes&&o.setProperties(r.attributes,!0),o},e.prototype.readFeaturesFromObject=function(t,e){var r=e||{};if(t.features){var n=[],i=t.features;r.idField=t.objectIdFieldName;for(var o=0,a=i.length;o<a;++o)n.push(this.readFeatureFromObject(i[o],r));return n}return[this.readFeatureFromObject(t,r)]},e.prototype.readGeometryFromObject=function(t,e){return T(t,e)},e.prototype.readProjectionFromObject=function(t){if(t.spatialReference&&void 0!==t.spatialReference.wkid){var e=t.spatialReference.wkid;return(0,b.get)("EPSG:"+e)}return null},e.prototype.writeGeometryObject=function(t,e){return I(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={},n=t.getGeometry();n&&(r.geometry=I(n,e),e&&e.featureProjection&&(r.geometry.spatialReference={wkid:Number((0,b.get)(e.featureProjection).getCode().split(":").pop())}));var i=t.getProperties();return delete i[t.getGeometryName()],(0,v.isEmpty)(i)?r.attributes={}:r.attributes=i,r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{features:r}},e}(s.default);r.default=w},{"../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./JSONFeature.js":"9804d8bb69b1e739caf780d8d4458fdf","../geom/GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/LinearRing.js":"a52e9a2ff90bf362305e8edc5337b90f","../geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","../geom/MultiPoint.js":"add6c8112f59ed049722d4a2b686edc3","../geom/MultiPolygon.js":"ca93ec74bdb7f70f03ca08d5bb711551","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../geom/Polygon.js":"24ebc1624175b8546601860191490c20","../geom/flat/deflate.js":"20562fe5b89ba49209b8e67a87a11b60","../geom/flat/orient.js":"639aa6020d1095fcc76ca0ab863c78fa","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],"06f1ec3e33740e0e95d83eeba81c2628":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transformGeometryWithOptions=function(t,e,r){var n,i=r?(0,a.get)(r.featureProjection):null,o=r?(0,a.get)(r.dataProjection):null;n=i&&o&&!(0,a.equivalent)(i,o)?(e?t.clone():t).transform(e?i:o,e?o:i):t;if(e&&r&&void 0!==r.decimals){var s=Math.pow(10,r.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*s)/s;return t})}return n},r.transformExtentWithOptions=function(t,e){var r=e?(0,a.get)(e.featureProjection):null,n=e?(0,a.get)(e.dataProjection):null;return r&&n&&!(0,a.equivalent)(r,n)?(0,a.transformExtent)(t,n,r):t},r.default=void 0;var n,i=t("../obj.js"),o=t("../util.js"),a=t("../proj.js"),s=(n=t("../proj/Units.js"))&&n.__esModule?n:{default:n};var u=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var r;if(e){var n=e.dataProjection?(0,a.get)(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===s.default.TILE_PIXELS&&(n=(0,a.get)(n)).setWorldExtent(e.extent),r={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(r)},t.prototype.adaptOptions=function(t){return(0,i.assign)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return(0,o.abstract)()},t.prototype.readFeature=function(t,e){return(0,o.abstract)()},t.prototype.readFeatures=function(t,e){return(0,o.abstract)()},t.prototype.readGeometry=function(t,e){return(0,o.abstract)()},t.prototype.readProjection=function(t){return(0,o.abstract)()},t.prototype.writeFeature=function(t,e){return(0,o.abstract)()},t.prototype.writeFeatures=function(t,e){return(0,o.abstract)()},t.prototype.writeGeometry=function(t,e){return(0,o.abstract)()},t}();r.default=u},{"../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../util.js":"4bb2f7213adce7213216789f3fd3a27b","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../proj/Units.js":"aed7c8d781fca9ae0c0fa9c24383e0e4"}],"9804d8bb69b1e739caf780d8d4458fdf":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=a(t("./Feature.js")),o=a(t("./FormatType.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function c(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var l=function(t){function e(){return t.call(this)||this}return u(e,t),e.prototype.getType=function(){return o.default.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(c(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(c(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return(0,n.abstract)()},e.prototype.readFeaturesFromObject=function(t,e){return(0,n.abstract)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(c(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return(0,n.abstract)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(c(t))},e.prototype.readProjectionFromObject=function(t){return(0,n.abstract)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return(0,n.abstract)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return(0,n.abstract)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return(0,n.abstract)()},e}(i.default);r.default=l},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./FormatType.js":"3fdcfb54449c5e8ac10a643260b11524"}],cd6860fd4d8dbcd98aec3bed2480aa06:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../asserts.js"),i=y(t("../Feature.js")),o=t("./Feature.js"),a=y(t("./JSONFeature.js")),s=y(t("../geom/GeometryCollection.js")),u=y(t("../geom/LineString.js")),c=y(t("../geom/MultiLineString.js")),l=y(t("../geom/MultiPoint.js")),f=y(t("../geom/MultiPolygon.js")),d=y(t("../geom/Point.js")),p=y(t("../geom/Polygon.js")),h=t("../obj.js"),g=t("../proj.js"),_=y(t("../geom/GeometryType.js"));function y(t){return t&&t.__esModule?t:{default:t}}var m,v=(m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function b(t,e){if(!t)return null;var r;switch(t.type){case _.default.POINT:r=function(t){return new d.default(t.coordinates)}(t);break;case _.default.LINE_STRING:r=function(t){return new u.default(t.coordinates)}(t);break;case _.default.POLYGON:r=function(t){return new p.default(t.coordinates)}(t);break;case _.default.MULTI_POINT:r=function(t){return new l.default(t.coordinates)}(t);break;case _.default.MULTI_LINE_STRING:r=function(t){return new c.default(t.coordinates)}(t);break;case _.default.MULTI_POLYGON:r=function(t){return new f.default(t.coordinates)}(t);break;case _.default.GEOMETRY_COLLECTION:r=function(t,e){var r=t.geometries.map(function(t){return b(t,e)});return new s.default(r)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return(0,o.transformGeometryWithOptions)(r,!1,e)}function E(t,e){var r,n=(t=(0,o.transformGeometryWithOptions)(t,!0,e)).getType();switch(n){case _.default.POINT:r=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case _.default.LINE_STRING:r=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case _.default.POLYGON:r=function(t,e){var r;e&&(r=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(r)}}(t,e);break;case _.default.MULTI_POINT:r=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case _.default.MULTI_LINE_STRING:r=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case _.default.MULTI_POLYGON:r=function(t,e){var r;e&&(r=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}(t,e);break;case _.default.GEOMETRY_COLLECTION:r=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var r=(0,h.assign)({},e);return delete r.featureProjection,E(t,r)})}}(t,e);break;case _.default.CIRCLE:r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return r}var S=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).dataProjection=(0,g.get)(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(r.defaultFeatureProjection=(0,g.get)(n.featureProjection)),r.geometryName_=n.geometryName,r.extractGeometryName_=n.extractGeometryName,r}return v(e,t),e.prototype.readFeatureFromObject=function(t,e){var r=null,n=b((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),o=new i.default;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&o.setGeometryName(r.geometry_name),o.setGeometry(n),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o},e.prototype.readFeaturesFromObject=function(t,e){var r=null;if("FeatureCollection"===t.type){r=[];for(var n=t.features,i=0,o=n.length;i<o;++i)r.push(this.readFeatureFromObject(n[i],e))}else r=[this.readFeatureFromObject(t,e)];return r},e.prototype.readGeometryFromObject=function(t,e){return b(t,e)},e.prototype.readProjectionFromObject=function(t){var e,r=t.crs;return r?"name"==r.type?e=(0,g.get)(r.properties.name):(0,n.assert)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(r.id=n);var i=t.getGeometry();i&&(r.geometry=E(i,e));var o=t.getProperties();return delete o[t.getGeometryName()],(0,h.isEmpty)(o)||(r.properties=o),r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:r}},e.prototype.writeGeometryObject=function(t,e){return E(t,this.adaptOptions(e))},e}(a.default);r.default=S},{"../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./JSONFeature.js":"9804d8bb69b1e739caf780d8d4458fdf","../geom/GeometryCollection.js":"ee4ef29a7926f6500b27a04087228ab9","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","../geom/MultiPoint.js":"add6c8112f59ed049722d4a2b686edc3","../geom/MultiPolygon.js":"ca93ec74bdb7f70f03ca08d5bb711551","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../geom/Polygon.js":"24ebc1624175b8546601860191490c20","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb"}],ee4ef29a7926f6500b27a04087228ab9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../events.js"),i=c(t("../events/EventType.js")),o=t("../extent.js"),a=c(t("./Geometry.js")),s=c(t("./GeometryType.js")),u=t("../obj.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function d(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t[r].clone());return e}var p=function(t){function e(e){var r=t.call(this)||this;return r.geometries_=e||null,r.listenGeometriesChange_(),r}return f(e,t),e.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)(0,n.unlisten)(this.geometries_[t],i.default.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)(0,n.listen)(this.geometries_[t],i.default.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,r,n){if(n<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;for(var i=this.geometries_,a=0,s=i.length;a<s;++a)n=i[a].closestPointXY(t,e,r,n);return n},e.prototype.containsXY=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){(0,o.createOrUpdateEmpty)(t);for(var e=this.geometries_,r=0,n=e.length;r<n;++r)(0,o.extend)(t,e[r].getExtent());return t},e.prototype.getGeometries=function(){return d(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&((0,u.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var r=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(r))return this.simplifiedGeometryCache[r];for(var n=[],i=this.geometries_,o=!1,a=0,s=i.length;a<s;++a){var c=i[a],l=c.getSimplifiedGeometry(t);n.push(l),l!==c&&(o=!0)}if(o){var f=new e(null);return f.setGeometriesArray(n),this.simplifiedGeometryCache[r]=f,f}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return s.default.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)if(e[r].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,r){var n=r;n||(n=(0,o.getCenter)(this.getExtent()));for(var i=this.geometries_,a=0,s=i.length;a<s;++a)i[a].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(d(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(a.default);r.default=p},{"../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Geometry.js":"cb1f241dba30bfea6138fe8d7d7ce73f","./GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384"}],d287fc049ce1a99ef209d16a1022c0d0:[function(t,e,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=((n=t("./GML3.js"))&&n.__esModule?n:{default:n}).default;i.prototype.writeFeatures,i.prototype.writeFeaturesNode;var o=i;r.default=o},{"./GML3.js":"d460f1ab66d83425bdd5508c15614eec"}],d460f1ab66d83425bdd5508c15614eec:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../array.js"),i=t("../extent.js"),o=t("./Feature.js"),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./GMLBase.js")),s=t("./xsd.js"),u=_(t("../geom/GeometryLayout.js")),c=_(t("../geom/LineString.js")),l=_(t("../geom/MultiLineString.js")),f=_(t("../geom/MultiPolygon.js")),d=_(t("../geom/Polygon.js")),p=t("../obj.js"),h=t("../proj.js"),g=t("../xml.js");function _(t){return t&&t.__esModule?t:{default:t}}var y,m=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),v=a.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",b={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},E=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).surface_=void 0!==n.surface&&n.surface,r.curve_=void 0!==n.curve&&n.curve,r.multiCurve_=void 0===n.multiCurve||n.multiCurve,r.multiSurface_=void 0===n.multiSurface||n.multiSurface,r.schemaLocation=n.schemaLocation?n.schemaLocation:v,r.hasZ=void 0!==n.hasZ&&n.hasZ,r}return m(e,t),e.prototype.readMultiCurve_=function(t,e){var r=(0,g.pushParseAndPop)([],this.MULTICURVE_PARSERS_,t,e,this);return r?new l.default(r):void 0},e.prototype.readMultiSurface_=function(t,e){var r=(0,g.pushParseAndPop)([],this.MULTISURFACE_PARSERS_,t,e,this);if(r)return new f.default(r)},e.prototype.curveMemberParser_=function(t,e){(0,g.parseNode)(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){(0,g.parseNode)(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return(0,g.pushParseAndPop)([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return(0,g.pushParseAndPop)([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return(0,g.pushParseAndPop)([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return(0,g.pushParseAndPop)([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser_=function(t,e){var r=(0,g.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.exteriorParser_=function(t,e){var r=(0,g.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.readSurface_=function(t,e){var r=(0,g.pushParseAndPop)([null],this.SURFACE_PARSERS_,t,e,this);if(r&&r[0]){var i,o=r[0],a=[o.length],s=void 0;for(s=1,i=r.length;s<i;++s)(0,n.extend)(o,r[s]),a.push(o.length);return new d.default(o,u.default.XYZ,a)}},e.prototype.readCurve_=function(t,e){var r=(0,g.pushParseAndPop)([null],this.CURVE_PARSERS_,t,e,this);return r?new c.default(r,u.default.XYZ):void 0},e.prototype.readEnvelope_=function(t,e){var r=(0,g.pushParseAndPop)([null],this.ENVELOPE_PARSERS_,t,e,this);return(0,i.createOrUpdate)(r[1][0],r[1][1],r[2][0],r[2][1])},e.prototype.readFlatPos_=function(t,e){for(var r,n=(0,g.getAllTextContent)(t,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];r=i.exec(n);)o.push(parseFloat(r[1])),n=n.substr(r[0].length);if(""===n){var a=e[0].srsName,s="enu";if(a)s=(0,h.get)(a).getAxisOrientation();if("neu"===s){var u,c=void 0;for(c=0,u=o.length;c<u;c+=3){var l=o[c],f=o[c+1];o[c]=f,o[c+1]=l}}var d=o.length;if(2==d&&o.push(0),0!==d)return o}},e.prototype.readFlatPosList_=function(t,e){var r=(0,g.getAllTextContent)(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],i=n.srsName,o=n.srsDimension,a="enu";i&&(a=(0,h.get)(i).getAxisOrientation());var u,c,l,f=r.split(/\s+/),d=2;t.getAttribute("srsDimension")?d=(0,s.readNonNegativeIntegerString)(t.getAttribute("srsDimension")):t.getAttribute("dimension")?d=(0,s.readNonNegativeIntegerString)(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?d=(0,s.readNonNegativeIntegerString)(t.parentNode.getAttribute("srsDimension")):o&&(d=(0,s.readNonNegativeIntegerString)(o));for(var p=[],_=0,y=f.length;_<y;_+=d)u=parseFloat(f[_]),c=parseFloat(f[_+1]),l=3===d?parseFloat(f[_+2]):0,"en"===a.substr(0,2)?p.push(u,c,l):p.push(c,u,l);return p},e.prototype.writePos_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);var a=n.srsName,u="enu";a&&(u=(0,h.get)(a).getAxisOrientation());var c,l=e.getCoordinates();(c="en"===u.substr(0,2)?l[0]+" "+l[1]:l[1]+" "+l[0],i)&&(c+=" "+(l[2]||0));(0,s.writeStringTextNode)(t,c)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=(0,h.get)(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];r&&(i+=" "+(t[2]||0));return i},e.prototype.writePosList_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);for(var a,u=n.srsName,c=e.getCoordinates(),l=c.length,f=new Array(l),d=0;d<l;++d)a=c[d],f[d]=this.getCoords_(a,u,i);(0,s.writeStringTextNode)(t,f.join(" "))},e.prototype.writePoint_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=(0,g.createElementNS)(t.namespaceURI,"pos");t.appendChild(i),this.writePos_(i,e,r)},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];(0,g.pushSerializeAndPop)({node:t},this.ENVELOPE_SERIALIZERS_,g.OBJECT_PROPERTY_NODE_FACTORY,i,r,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=(0,g.createElementNS)(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),(0,g.createElementNS)(i.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();(0,g.pushSerializeAndPop)({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=(0,g.createElementNS)(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.writeCurveOrLineString_=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=(0,g.createElementNS)(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)}else if("Curve"===t.nodeName){var o=(0,g.createElementNS)(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();(0,g.pushSerializeAndPop)({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,r){var n=r[r.length-1],i=n.srsName,o=n.hasZ;i&&t.setAttribute("srsName",i);var a=e.getPoints();(0,g.pushSerializeAndPop)({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS_,(0,g.makeSimpleNodeFactory)("pointMember"),a,r,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();(0,g.pushSerializeAndPop)({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeRing_=function(t,e,r){var n=(0,g.createElementNS)(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,r)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r))},e.prototype.writePointMember_=function(t,e,r){var n=(0,g.createElementNS)(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,r)},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,r))},e.prototype.writeSurfacePatches_=function(t,e,r){var n=(0,g.createElementNS)(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r)},e.prototype.writeCurveSegments_=function(t,e,r){var n=(0,g.createElementNS)(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,r)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],a=(0,p.assign)({},i);a.node=t,n=Array.isArray(e)?(0,o.transformExtentWithOptions)(e,i):(0,o.transformGeometryWithOptions)(e,!0,i),(0,g.pushSerializeAndPop)(a,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var u=e.getProperties(),c=[],l=[];for(var f in u){var d=u[f];null!==d&&(c.push(f),l.push(d),f==a||"function"==typeof d.getSimplifiedGeometry?f in i.serializers[o]||(i.serializers[o][f]=(0,g.makeChildAppender)(this.writeGeometryElement,this)):f in i.serializers[o]||(i.serializers[o][f]=(0,g.makeChildAppender)(s.writeStringTextNode)))}var h=(0,p.assign)({},i);h.node=t,(0,g.pushSerializeAndPop)(h,i.serializers,(0,g.makeSimpleNodeFactory)(void 0,o),l,r,c)},e.prototype.writeFeatureMembers_=function(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a={};a[o]={},a[o][i]=(0,g.makeChildAppender)(this.writeFeatureElement,this);var s=(0,p.assign)({},n);s.node=t,(0,g.pushSerializeAndPop)(s,a,(0,g.makeSimpleNodeFactory)(i,o),e,r)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return(0,g.createElementNS)(this.namespace,b[n.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.curve,u=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"LineString"===n&&!0===s?n="Curve":"MultiLineString"===n&&!0===u&&(n="MultiCurve"),(0,g.createElementNS)(this.namespace,n)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var r=(0,g.createElementNS)(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&(0,p.assign)(n,e),this.writeGeometryElement(r,t,[n]),r},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=(0,g.createElementNS)(this.namespace,"featureMembers");r.setAttributeNS(g.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",this.schemaLocation);var n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&(0,p.assign)(n,e),this.writeFeatureMembers_(r,t,[n]),r},e}(a.default);E.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:(0,g.makeReplacer)(E.prototype.readFlatPos_),posList:(0,g.makeReplacer)(E.prototype.readFlatPosList_)}},E.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:E.prototype.interiorParser_,exterior:E.prototype.exteriorParser_}},E.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:(0,g.makeReplacer)(a.default.prototype.readPoint),MultiPoint:(0,g.makeReplacer)(a.default.prototype.readMultiPoint),LineString:(0,g.makeReplacer)(a.default.prototype.readLineString),MultiLineString:(0,g.makeReplacer)(a.default.prototype.readMultiLineString),LinearRing:(0,g.makeReplacer)(a.default.prototype.readLinearRing),Polygon:(0,g.makeReplacer)(a.default.prototype.readPolygon),MultiPolygon:(0,g.makeReplacer)(a.default.prototype.readMultiPolygon),Surface:(0,g.makeReplacer)(E.prototype.readSurface_),MultiSurface:(0,g.makeReplacer)(E.prototype.readMultiSurface_),Curve:(0,g.makeReplacer)(E.prototype.readCurve_),MultiCurve:(0,g.makeReplacer)(E.prototype.readMultiCurve_),Envelope:(0,g.makeReplacer)(E.prototype.readEnvelope_)}},E.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:(0,g.makeArrayPusher)(E.prototype.curveMemberParser_),curveMembers:(0,g.makeArrayPusher)(E.prototype.curveMemberParser_)}},E.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:(0,g.makeArrayPusher)(E.prototype.surfaceMemberParser_),surfaceMembers:(0,g.makeArrayPusher)(E.prototype.surfaceMemberParser_)}},E.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:(0,g.makeArrayPusher)(a.default.prototype.readLineString),Curve:(0,g.makeArrayPusher)(E.prototype.readCurve_)}},E.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:(0,g.makeArrayPusher)(a.default.prototype.readPolygon),Surface:(0,g.makeArrayPusher)(E.prototype.readSurface_)}},E.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:(0,g.makeReplacer)(E.prototype.readPatch_)}},E.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:(0,g.makeReplacer)(E.prototype.readSegment_)}},E.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:(0,g.makeArrayPusher)(E.prototype.readFlatPosList_),upperCorner:(0,g.makeArrayPusher)(E.prototype.readFlatPosList_)}},E.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:(0,g.makeReplacer)(E.prototype.readPolygonPatch_)}},E.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:(0,g.makeReplacer)(E.prototype.readLineStringSegment_)}},E.prototype.writeFeatures,E.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:(0,g.makeChildAppender)(E.prototype.writeRing_),interior:(0,g.makeChildAppender)(E.prototype.writeRing_)}},E.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:(0,g.makeChildAppender)(s.writeStringTextNode),upperCorner:(0,g.makeChildAppender)(s.writeStringTextNode)}},E.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:(0,g.makeChildAppender)(E.prototype.writeSurfaceOrPolygonMember_),polygonMember:(0,g.makeChildAppender)(E.prototype.writeSurfaceOrPolygonMember_)}},E.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:(0,g.makeChildAppender)(E.prototype.writePointMember_)}},E.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:(0,g.makeChildAppender)(E.prototype.writeLineStringOrCurveMember_),curveMember:(0,g.makeChildAppender)(E.prototype.writeLineStringOrCurveMember_)}},E.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:(0,g.makeChildAppender)(E.prototype.writeCurveOrLineString_),MultiCurve:(0,g.makeChildAppender)(E.prototype.writeMultiCurveOrLineString_),Point:(0,g.makeChildAppender)(E.prototype.writePoint_),MultiPoint:(0,g.makeChildAppender)(E.prototype.writeMultiPoint_),LineString:(0,g.makeChildAppender)(E.prototype.writeCurveOrLineString_),MultiLineString:(0,g.makeChildAppender)(E.prototype.writeMultiCurveOrLineString_),LinearRing:(0,g.makeChildAppender)(E.prototype.writeLinearRing_),Polygon:(0,g.makeChildAppender)(E.prototype.writeSurfaceOrPolygon_),MultiPolygon:(0,g.makeChildAppender)(E.prototype.writeMultiSurfaceOrPolygon_),Surface:(0,g.makeChildAppender)(E.prototype.writeSurfaceOrPolygon_),MultiSurface:(0,g.makeChildAppender)(E.prototype.writeMultiSurfaceOrPolygon_),Envelope:(0,g.makeChildAppender)(E.prototype.writeEnvelope)}};var S=E;r.default=S},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./GMLBase.js":"8f14f3315ba94680a34f3fa72cfc106b","./xsd.js":"7518937bcd6f92347c49c8067c3024ce","../geom/GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","../geom/MultiPolygon.js":"ca93ec74bdb7f70f03ca08d5bb711551","../geom/Polygon.js":"24ebc1624175b8546601860191490c20","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],"8f14f3315ba94680a34f3fa72cfc106b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.GMLNS=void 0;var n=t("../array.js"),i=m(t("../Feature.js")),o=t("./Feature.js"),a=m(t("./XMLFeature.js")),s=m(t("../geom/GeometryLayout.js")),u=m(t("../geom/LineString.js")),c=m(t("../geom/LinearRing.js")),l=m(t("../geom/MultiLineString.js")),f=m(t("../geom/MultiPoint.js")),d=m(t("../geom/MultiPolygon.js")),p=m(t("../geom/Point.js")),h=m(t("../geom/Polygon.js")),g=t("../obj.js"),_=t("../proj.js"),y=t("../xml.js");function m(t){return t&&t.__esModule?t:{default:t}}var v,b=(v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),E="http://www.opengis.net/gml";r.GMLNS=E;var S=/^[\s\xa0]*$/,j=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType=n.featureType,r.featureNS=n.featureNS,r.srsName=n.srsName,r.schemaLocation="",r.FEATURE_COLLECTION_PARSERS={},r.FEATURE_COLLECTION_PARSERS[r.namespace]={featureMember:(0,y.makeArrayPusher)(r.readFeaturesInternal),featureMembers:(0,y.makeReplacer)(r.readFeaturesInternal)},r}return b(e,t),e.prototype.readFeaturesInternal=function(t,e){var r=t.localName,n=null;if("FeatureCollection"==r)n=(0,y.pushParseAndPop)([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==r||"featureMember"==r){var i=e[0],o=i.featureType,a=i.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,u=t.childNodes.length;s<u;++s){var c=t.childNodes[s];if(1===c.nodeType){var l=c.nodeName.split(":").pop();if(-1===o.indexOf(l)){var f="",d=0,p=c.namespaceURI;for(var h in a){if(a[h]===p){f=h;break}++d}f||(a[f="p"+d]=p),o.push(f+":"+l)}}}"featureMember"!=r&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){var g=a;(a={}).p0=g}var _={},m=Array.isArray(o)?o:[o];for(var v in a){var b={};for(s=0,u=m.length;s<u;++s){(-1===m[s].indexOf(":")?"p0":m[s].split(":")[0])===v&&(b[m[s].split(":").pop()]="featureMembers"==r?(0,y.makeArrayPusher)(this.readFeatureElement,this):(0,y.makeReplacer)(this.readFeatureElement,this))}_[a[v]]=b}n="featureMember"==r?(0,y.pushParseAndPop)(void 0,_,t,e):(0,y.pushParseAndPop)([],_,t,e)}return null===n&&(n=[]),n},e.prototype.readGeometryElement=function(t,e){var r=e[0];r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension");var n=(0,y.pushParseAndPop)(null,this.GEOMETRY_PARSERS,t,e,this);return n?Array.isArray(n)?(0,o.transformExtentWithOptions)(n,r):(0,o.transformGeometryWithOptions)(n,!1,r):void 0},e.prototype.readFeatureElementInternal=function(t,e,r){for(var n,o={},a=t.firstElementChild;a;a=a.nextElementSibling){var s=void 0,u=a.localName;0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)?(s=(0,y.getAllTextContent)(a,!1),S.test(s)&&(s=void 0)):(r&&(s=this.readGeometryElement(a,e)),s?"boundedBy"!==u&&(n=u):s=this.readFeatureElementInternal(a,e,!1)),o[u]?(o[u]instanceof Array||(o[u]=[o[u]]),o[u].push(s)):o[u]=s;var c=a.attributes.length;if(c>0){o[u]={_content_:o[u]};for(var l=0;l<c;l++){var f=a.attributes[l].name;o[u][f]=a.attributes[l].value}}}if(r){var d=new i.default(o);n&&d.setGeometryName(n);var p=t.getAttribute("fid")||(0,y.getAttributeNS)(t,this.namespace,"id");return p&&d.setId(p),d}return o},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new p.default(r,s.default.XYZ)},e.prototype.readMultiPoint=function(t,e){var r=(0,y.pushParseAndPop)([],this.MULTIPOINT_PARSERS_,t,e,this);return r?new f.default(r):void 0},e.prototype.readMultiLineString=function(t,e){var r=(0,y.pushParseAndPop)([],this.MULTILINESTRING_PARSERS_,t,e,this);if(r)return new l.default(r)},e.prototype.readMultiPolygon=function(t,e){var r=(0,y.pushParseAndPop)([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(r)return new d.default(r)},e.prototype.pointMemberParser_=function(t,e){(0,y.parseNode)(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){(0,y.parseNode)(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){(0,y.parseNode)(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);return r?new u.default(r,s.default.XYZ):void 0},e.prototype.readFlatLinearRing_=function(t,e){var r=(0,y.pushParseAndPop)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);return r||void 0},e.prototype.readLinearRing=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new c.default(r,s.default.XYZ)},e.prototype.readPolygon=function(t,e){var r=(0,y.pushParseAndPop)([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(r&&r[0]){var i,o=r[0],a=[o.length],u=void 0;for(u=1,i=r.length;u<i;++u)(0,n.extend)(o,r[u]),a.push(o.length);return new h.default(o,s.default.XYZ,a)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return(0,y.pushParseAndPop)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){var r=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){var r={featureType:this.featureType,featureNS:this.featureNS};return e&&(0,g.assign)(r,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[r])||[]},e.prototype.readProjectionFromNode=function(t){return(0,_.get)(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(a.default);j.prototype.namespace=E,j.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},j.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},j.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},j.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:(0,y.makeArrayPusher)(j.prototype.pointMemberParser_),pointMembers:(0,y.makeArrayPusher)(j.prototype.pointMemberParser_)}},j.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:(0,y.makeArrayPusher)(j.prototype.lineStringMemberParser_),lineStringMembers:(0,y.makeArrayPusher)(j.prototype.lineStringMemberParser_)}},j.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:(0,y.makeArrayPusher)(j.prototype.polygonMemberParser_),polygonMembers:(0,y.makeArrayPusher)(j.prototype.polygonMemberParser_)}},j.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:(0,y.makeArrayPusher)(j.prototype.readFlatCoordinatesFromNode_)}},j.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:(0,y.makeArrayPusher)(j.prototype.readLineString)}},j.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:(0,y.makeArrayPusher)(j.prototype.readPolygon)}},j.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:(0,y.makeReplacer)(j.prototype.readFlatLinearRing_)}};var O=j;r.default=O},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./XMLFeature.js":"8ac25dddd1dec15e16c39865ffe055b3","../geom/GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/LinearRing.js":"a52e9a2ff90bf362305e8edc5337b90f","../geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","../geom/MultiPoint.js":"add6c8112f59ed049722d4a2b686edc3","../geom/MultiPolygon.js":"ca93ec74bdb7f70f03ca08d5bb711551","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../geom/Polygon.js":"24ebc1624175b8546601860191490c20","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],"8ac25dddd1dec15e16c39865ffe055b3":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=t("../array.js"),o=u(t("../format/Feature.js")),a=u(t("../format/FormatType.js")),s=t("../xml.js");function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=new XMLSerializer,e}return l(e,t),e.prototype.getType=function(){return a.default.XML},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var r=(0,s.parse)(t);return this.readFeatureFromDocument(r,e)}return(0,s.isDocument)(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var r=(0,s.parse)(t);return this.readFeaturesFromDocument(r,e)}return(0,s.isDocument)(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var r=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&(0,i.extend)(r,this.readFeaturesFromNode(n,e));return r},e.prototype.readFeaturesFromNode=function(t,e){return(0,n.abstract)()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var r=(0,s.parse)(t);return this.readGeometryFromDocument(r,e)}return(0,s.isDocument)(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=(0,s.parse)(t);return this.readProjectionFromDocument(e)}return(0,s.isDocument)(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeGeometryNode=function(t,e){return null},e}(o.default);r.default=f},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../format/Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","../format/FormatType.js":"3fdcfb54449c5e8ac10a643260b11524","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],"0817d09676cef4229f4563c39c1f9ff1":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createElementNS=o,r.getAllTextContent=function(t,e){return a(t,e,[]).join("")},r.getAllTextContent_=a,r.isDocument=function(t){return"documentElement"in t},r.getAttributeNS=function(t,e,r){return t.getAttributeNS(e,r)||""},r.parse=function(t){return(new DOMParser).parseFromString(t,"application/xml")},r.makeArrayExtender=function(t,e){return function(r,i){var o=t.call(void 0!==e?e:this,r,i);if(void 0!==o){var a=i[i.length-1];(0,n.extend)(a,o)}}},r.makeArrayPusher=function(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&n[n.length-1].push(i)}},r.makeReplacer=function(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&(n[n.length-1]=i)}},r.makeObjectPropertyPusher=function(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);if(void 0!==o){var a=i[i.length-1],s=void 0!==e?e:n.localName;(s in a?a[s]:a[s]=[]).push(o)}}},r.makeObjectPropertySetter=function(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);void 0!==o&&(i[i.length-1][void 0!==e?e:n.localName]=o)}},r.makeChildAppender=function(t,e){return function(r,n,i){t.call(void 0!==e?e:this,r,n,i),i[i.length-1].node.appendChild(r)}},r.makeArraySerializer=function(t,e){var r,n;return function(e,i,o){if(void 0===r){r={};var a={};a[e.localName]=t,r[e.namespaceURI]=a,n=s(e.localName)}l(r,n,i,o)}},r.makeSimpleNodeFactory=s,r.makeSequence=function(t,e){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=t[e[i]];return n},r.makeStructureNS=function(t,e,r){var n,i,o=void 0!==r?r:{};for(n=0,i=t.length;n<i;++n)o[t[n]]=e;return o},r.parseNode=c,r.pushParseAndPop=function(t,e,r,n,i){return n.push(t),c(e,r,n,i),n.pop()},r.serialize=l,r.pushSerializeAndPop=function(t,e,r,n,i,o,a){return i.push(t),l(e,r,n,i,o,a),i.pop()},r.OBJECT_PROPERTY_NODE_FACTORY=r.XML_SCHEMA_INSTANCE_URI=r.DOCUMENT=void 0;var n=t("./array.js"),i=document.implementation.createDocument("","",null);r.DOCUMENT=i;function o(t,e){return i.createElementNS(t,e)}function a(t,e,r){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(t.nodeValue);else{var n=void 0;for(n=t.firstChild;n;n=n.nextSibling)a(n,e,r)}return r}function s(t,e){var r=t;return function(t,n,i){var a=n[n.length-1].node,s=r;return void 0===s&&(s=i),o(void 0!==e?e:a.namespaceURI,s)}}r.XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance";var u=s();function c(t,e,r,n){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(n,i,r)}}}function l(t,e,r,n,i,o){for(var a,s,u=(void 0!==i?i:r).length,c=0;c<u;++c)void 0!==(a=r[c])&&void 0!==(s=e.call(void 0!==o?o:this,a,n,void 0!==i?i[c]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,n)}r.OBJECT_PROPERTY_NODE_FACTORY=u},{"./array.js":"8f42dda010c04e4c3f5a3f294914ec2a"}],"7518937bcd6f92347c49c8067c3024ce":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.readBoolean=function(t){return o((0,n.getAllTextContent)(t,!1))},r.readBooleanString=o,r.readDateTime=function(t){var e=(0,n.getAllTextContent)(t,!1),r=Date.parse(e);return isNaN(r)?void 0:r/1e3},r.readDecimal=function(t){return a((0,n.getAllTextContent)(t,!1))},r.readDecimalString=a,r.readNonNegativeInteger=function(t){return s((0,n.getAllTextContent)(t,!1))},r.readNonNegativeIntegerString=s,r.readString=function(t){return(0,n.getAllTextContent)(t,!1).trim()},r.writeBooleanTextNode=function(t,e){u(t,e?"1":"0")},r.writeCDATASection=function(t,e){t.appendChild(n.DOCUMENT.createCDATASection(e))},r.writeDateTimeTextNode=function(t,e){var r=new Date(1e3*e),o=r.getUTCFullYear()+"-"+(0,i.padNumber)(r.getUTCMonth()+1,2)+"-"+(0,i.padNumber)(r.getUTCDate(),2)+"T"+(0,i.padNumber)(r.getUTCHours(),2)+":"+(0,i.padNumber)(r.getUTCMinutes(),2)+":"+(0,i.padNumber)(r.getUTCSeconds(),2)+"Z";t.appendChild(n.DOCUMENT.createTextNode(o))},r.writeDecimalTextNode=function(t,e){var r=e.toPrecision();t.appendChild(n.DOCUMENT.createTextNode(r))},r.writeNonNegativeIntegerTextNode=function(t,e){var r=e.toString();t.appendChild(n.DOCUMENT.createTextNode(r))},r.writeStringTextNode=u;var n=t("../xml.js"),i=t("../string.js");function o(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function a(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function s(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function u(t,e){t.appendChild(n.DOCUMENT.createTextNode(e))}},{"../xml.js":"0817d09676cef4229f4563c39c1f9ff1","../string.js":"8e4790f1251a6b3a187ceda3eb6e4980"}],ec8ca29a01549852dfd65ffae1d255b8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=g(t("../Feature.js")),i=t("../array.js"),o=t("./Feature.js"),a=g(t("./XMLFeature.js")),s=t("./xsd.js"),u=g(t("../geom/GeometryLayout.js")),c=g(t("../geom/GeometryType.js")),l=g(t("../geom/LineString.js")),f=g(t("../geom/MultiLineString.js")),d=g(t("../geom/Point.js")),p=t("../proj.js"),h=t("../xml.js");function g(t){return t&&t.__esModule?t:{default:t}}var _,y=(_=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),m=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],v={rte:W,trk:H,wpt:K},b=(0,h.makeStructureNS)(m,{rte:(0,h.makeArrayPusher)(W),trk:(0,h.makeArrayPusher)(H),wpt:(0,h.makeArrayPusher)(K)}),E=(0,h.makeStructureNS)(m,{text:(0,h.makeObjectPropertySetter)(s.readString,"linkText"),type:(0,h.makeObjectPropertySetter)(s.readString,"linkType")}),S=(0,h.makeStructureNS)(m,{rte:(0,h.makeChildAppender)(function(t,e,r){var n=r[0],i=e.getProperties(),a={node:t};a.properties=i;var s=e.getGeometry();if(s.getType()==c.default.LINE_STRING){var u=(0,o.transformGeometryWithOptions)(s,!0,n);a.geometryLayout=u.getLayout(),i.rtept=u.getCoordinates()}var l=r[r.length-1].node,f=N[l.namespaceURI],d=(0,h.makeSequence)(i,f);(0,h.pushSerializeAndPop)(a,M,h.OBJECT_PROPERTY_NODE_FACTORY,d,r,f)}),trk:(0,h.makeChildAppender)(function(t,e,r){var n=r[0],i=e.getProperties(),a={node:t};a.properties=i;var s=e.getGeometry();if(s.getType()==c.default.MULTI_LINE_STRING){var u=(0,o.transformGeometryWithOptions)(s,!0,n);i.trkseg=u.getLineStrings()}var l=r[r.length-1].node,f=A[l.namespaceURI],d=(0,h.makeSequence)(i,f);(0,h.pushSerializeAndPop)(a,F,h.OBJECT_PROPERTY_NODE_FACTORY,d,r,f)}),wpt:(0,h.makeChildAppender)(function(t,e,r){var n=r[0],i=r[r.length-1];i.properties=e.getProperties();var a=e.getGeometry();if(a.getType()==c.default.POINT){var s=(0,o.transformGeometryWithOptions)(a,!0,n);i.geometryLayout=s.getLayout(),J(t,s.getCoordinates(),r)}})}),j=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=(0,p.get)("EPSG:4326"),r.readExtensions_=n.readExtensions,r}return y(e,t),e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,r=t.length;e<r;++e){var n=t[e];if(this.readExtensions_){var i=n.get("extensionsNode_")||null;this.readExtensions_(n,i)}n.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!(0,i.includes)(m,t.namespaceURI))return null;var r=v[t.localName];if(!r)return null;var n=r(t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_([n]),n):null},e.prototype.readFeaturesFromNode=function(t,e){if(!(0,i.includes)(m,t.namespaceURI))return[];if("gpx"==t.localName){var r=(0,h.pushParseAndPop)([],b,t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=(0,h.createElementNS)("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",h.XML_SCHEMA_INSTANCE_URI),r.setAttributeNS(h.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),(0,h.pushSerializeAndPop)({node:r},S,z,t,[e]),r},e}(a.default),O=(0,h.makeStructureNS)(m,{name:(0,h.makeObjectPropertySetter)(s.readString),cmt:(0,h.makeObjectPropertySetter)(s.readString),desc:(0,h.makeObjectPropertySetter)(s.readString),src:(0,h.makeObjectPropertySetter)(s.readString),link:X,number:(0,h.makeObjectPropertySetter)(s.readNonNegativeInteger),extensions:q,type:(0,h.makeObjectPropertySetter)(s.readString),rtept:function(t,e){var r=(0,h.pushParseAndPop)({},P,t,e);if(r){var n=e[e.length-1],i=n.flatCoordinates,o=n.layoutOptions;V(i,o,t,r)}}}),P=(0,h.makeStructureNS)(m,{ele:(0,h.makeObjectPropertySetter)(s.readDecimal),time:(0,h.makeObjectPropertySetter)(s.readDateTime)}),T=(0,h.makeStructureNS)(m,{name:(0,h.makeObjectPropertySetter)(s.readString),cmt:(0,h.makeObjectPropertySetter)(s.readString),desc:(0,h.makeObjectPropertySetter)(s.readString),src:(0,h.makeObjectPropertySetter)(s.readString),link:X,number:(0,h.makeObjectPropertySetter)(s.readNonNegativeInteger),type:(0,h.makeObjectPropertySetter)(s.readString),extensions:q,trkseg:function(t,e){var r=e[e.length-1];(0,h.parseNode)(x,t,e);var n=r.flatCoordinates;r.ends.push(n.length)}}),x=(0,h.makeStructureNS)(m,{trkpt:function(t,e){var r=(0,h.pushParseAndPop)({},C,t,e);if(r){var n=e[e.length-1],i=n.flatCoordinates,o=n.layoutOptions;V(i,o,t,r)}}}),C=(0,h.makeStructureNS)(m,{ele:(0,h.makeObjectPropertySetter)(s.readDecimal),time:(0,h.makeObjectPropertySetter)(s.readDateTime)}),I=(0,h.makeStructureNS)(m,{ele:(0,h.makeObjectPropertySetter)(s.readDecimal),time:(0,h.makeObjectPropertySetter)(s.readDateTime),magvar:(0,h.makeObjectPropertySetter)(s.readDecimal),geoidheight:(0,h.makeObjectPropertySetter)(s.readDecimal),name:(0,h.makeObjectPropertySetter)(s.readString),cmt:(0,h.makeObjectPropertySetter)(s.readString),desc:(0,h.makeObjectPropertySetter)(s.readString),src:(0,h.makeObjectPropertySetter)(s.readString),link:X,sym:(0,h.makeObjectPropertySetter)(s.readString),type:(0,h.makeObjectPropertySetter)(s.readString),fix:(0,h.makeObjectPropertySetter)(s.readString),sat:(0,h.makeObjectPropertySetter)(s.readNonNegativeInteger),hdop:(0,h.makeObjectPropertySetter)(s.readDecimal),vdop:(0,h.makeObjectPropertySetter)(s.readDecimal),pdop:(0,h.makeObjectPropertySetter)(s.readDecimal),ageofdgpsdata:(0,h.makeObjectPropertySetter)(s.readDecimal),dgpsid:(0,h.makeObjectPropertySetter)(s.readNonNegativeInteger),extensions:q}),w=["text","type"],R=(0,h.makeStructureNS)(m,{text:(0,h.makeChildAppender)(s.writeStringTextNode),type:(0,h.makeChildAppender)(s.writeStringTextNode)}),N=(0,h.makeStructureNS)(m,["name","cmt","desc","src","link","number","type","rtept"]),M=(0,h.makeStructureNS)(m,{name:(0,h.makeChildAppender)(s.writeStringTextNode),cmt:(0,h.makeChildAppender)(s.writeStringTextNode),desc:(0,h.makeChildAppender)(s.writeStringTextNode),src:(0,h.makeChildAppender)(s.writeStringTextNode),link:(0,h.makeChildAppender)(Z),number:(0,h.makeChildAppender)(s.writeNonNegativeIntegerTextNode),type:(0,h.makeChildAppender)(s.writeStringTextNode),rtept:(0,h.makeArraySerializer)((0,h.makeChildAppender)(J))}),L=(0,h.makeStructureNS)(m,["ele","time"]),A=(0,h.makeStructureNS)(m,["name","cmt","desc","src","link","number","type","trkseg"]),F=(0,h.makeStructureNS)(m,{name:(0,h.makeChildAppender)(s.writeStringTextNode),cmt:(0,h.makeChildAppender)(s.writeStringTextNode),desc:(0,h.makeChildAppender)(s.writeStringTextNode),src:(0,h.makeChildAppender)(s.writeStringTextNode),link:(0,h.makeChildAppender)(Z),number:(0,h.makeChildAppender)(s.writeNonNegativeIntegerTextNode),type:(0,h.makeChildAppender)(s.writeStringTextNode),trkseg:(0,h.makeArraySerializer)((0,h.makeChildAppender)(function(t,e,r){var n={node:t};n.geometryLayout=e.getLayout(),n.properties={},(0,h.pushSerializeAndPop)(n,k,D,e.getCoordinates(),r)}))}),D=(0,h.makeSimpleNodeFactory)("trkpt"),k=(0,h.makeStructureNS)(m,{trkpt:(0,h.makeChildAppender)(J)}),G=(0,h.makeStructureNS)(m,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),U=(0,h.makeStructureNS)(m,{ele:(0,h.makeChildAppender)(s.writeDecimalTextNode),time:(0,h.makeChildAppender)(s.writeDateTimeTextNode),magvar:(0,h.makeChildAppender)(s.writeDecimalTextNode),geoidheight:(0,h.makeChildAppender)(s.writeDecimalTextNode),name:(0,h.makeChildAppender)(s.writeStringTextNode),cmt:(0,h.makeChildAppender)(s.writeStringTextNode),desc:(0,h.makeChildAppender)(s.writeStringTextNode),src:(0,h.makeChildAppender)(s.writeStringTextNode),link:(0,h.makeChildAppender)(Z),sym:(0,h.makeChildAppender)(s.writeStringTextNode),type:(0,h.makeChildAppender)(s.writeStringTextNode),fix:(0,h.makeChildAppender)(s.writeStringTextNode),sat:(0,h.makeChildAppender)(s.writeNonNegativeIntegerTextNode),hdop:(0,h.makeChildAppender)(s.writeDecimalTextNode),vdop:(0,h.makeChildAppender)(s.writeDecimalTextNode),pdop:(0,h.makeChildAppender)(s.writeDecimalTextNode),ageofdgpsdata:(0,h.makeChildAppender)(s.writeDecimalTextNode),dgpsid:(0,h.makeChildAppender)(s.writeNonNegativeIntegerTextNode)}),B={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function z(t,e,r){var n=t.getGeometry();if(n){var i=B[n.getType()];if(i){var o=e[e.length-1].node;return(0,h.createElementNS)(o.namespaceURI,i)}}}function V(t,e,r,n){return t.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in n?(t.push(n.ele),delete n.ele,e.hasZ=!0):t.push(0),"time"in n?(t.push(n.time),delete n.time,e.hasM=!0):t.push(0),t}function Y(t,e,r){var n=u.default.XY,i=2;if(t.hasZ&&t.hasM?(n=u.default.XYZM,i=4):t.hasZ?(n=u.default.XYZ,i=3):t.hasM&&(n=u.default.XYM,i=3),4!==i){for(var o=0,a=e.length/4;o<a;o++)e[o*i]=e[4*o],e[o*i+1]=e[4*o+1],t.hasZ&&(e[o*i+2]=e[4*o+2]),t.hasM&&(e[o*i+2]=e[4*o+3]);if(e.length=e.length/4*i,r)for(o=0,a=r.length;o<a;o++)r[o]=r[o]/4*i}return n}function X(t,e){var r=e[e.length-1],n=t.getAttribute("href");null!==n&&(r.link=n),(0,h.parseNode)(E,t,e)}function q(t,e){e[e.length-1].extensionsNode_=t}function W(t,e){var r=e[0],i=(0,h.pushParseAndPop)({flatCoordinates:[],layoutOptions:{}},O,t,e);if(i){var a=i.flatCoordinates;delete i.flatCoordinates;var s=i.layoutOptions;delete i.layoutOptions;var u=Y(s,a),c=new l.default(a,u);(0,o.transformGeometryWithOptions)(c,!1,r);var f=new n.default(c);return f.setProperties(i,!0),f}}function H(t,e){var r=e[0],i=(0,h.pushParseAndPop)({flatCoordinates:[],ends:[],layoutOptions:{}},T,t,e);if(i){var a=i.flatCoordinates;delete i.flatCoordinates;var s=i.ends;delete i.ends;var u=i.layoutOptions;delete i.layoutOptions;var c=Y(u,a,s),l=new f.default(a,c,s);(0,o.transformGeometryWithOptions)(l,!1,r);var d=new n.default(l);return d.setProperties(i,!0),d}}function K(t,e){var r=e[0],i=(0,h.pushParseAndPop)({},I,t,e);if(i){var a={},s=V([],a,t,i),u=Y(a,s),c=new d.default(s,u);(0,o.transformGeometryWithOptions)(c,!1,r);var l=new n.default(c);return l.setProperties(i,!0),l}}function Z(t,e,r){t.setAttribute("href",e);var n=r[r.length-1].properties,i=[n.linkText,n.linkType];(0,h.pushSerializeAndPop)({node:t},R,h.OBJECT_PROPERTY_NODE_FACTORY,i,r,w)}function J(t,e,r){var n=r[r.length-1],i=n.node.namespaceURI,o=n.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case u.default.XYZM:0!==e[3]&&(o.time=e[3]);case u.default.XYZ:0!==e[2]&&(o.ele=e[2]);break;case u.default.XYM:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?L[i]:G[i],s=(0,h.makeSequence)(o,a);(0,h.pushSerializeAndPop)({node:t,properties:o},U,h.OBJECT_PROPERTY_NODE_FACTORY,s,r,a)}var Q=j;r.default=Q},{"../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./XMLFeature.js":"8ac25dddd1dec15e16c39865ffe055b3","./xsd.js":"7518937bcd6f92347c49c8067c3024ce","../geom/GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],"9dec52dae9b5ee3d448051201efa9840":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(t("../Feature.js")),i=t("./Feature.js"),o=c(t("./TextFeature.js")),a=c(t("../geom/GeometryLayout.js")),s=c(t("../geom/LineString.js")),u=t("../proj.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"},p=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,h=/^H.([A-Z]{3}).*?:(.*)/,g=/^HFDTE(\d{2})(\d{2})(\d{2})/,_=/\r\n|\r|\n/,y=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=(0,u.get)("EPSG:4326"),r.altitudeMode_=n.altitudeMode?n.altitudeMode:d.NONE,r}return f(e,t),e.prototype.readFeatureFromText=function(t,e){var r,o,u=this.altitudeMode_,c=t.split(_),l={},f=[],y=2e3,m=0,v=1,b=-1;for(r=0,o=c.length;r<o;++r){var E=c[r],S=void 0;if("B"==E.charAt(0)){if(S=p.exec(E)){var j=parseInt(S[1],10),O=parseInt(S[2],10),P=parseInt(S[3],10),T=parseInt(S[4],10)+parseInt(S[5],10)/6e4;"S"==S[6]&&(T=-T);var x=parseInt(S[7],10)+parseInt(S[8],10)/6e4;if("W"==S[9]&&(x=-x),f.push(x,T),u!=d.NONE){var C=void 0;C=u==d.GPS?parseInt(S[11],10):u==d.BAROMETRIC?parseInt(S[12],10):0,f.push(C)}var I=Date.UTC(y,m,v,j,O,P);I<b&&(I=Date.UTC(y,m,v+1,j,O,P)),f.push(I/1e3),b=I}}else"H"==E.charAt(0)&&((S=g.exec(E))?(v=parseInt(S[1],10),m=parseInt(S[2],10)-1,y=2e3+parseInt(S[3],10)):(S=h.exec(E))&&(l[S[1]]=S[2].trim()))}if(0===f.length)return null;var w=u==d.NONE?a.default.XYM:a.default.XYZM,R=new s.default(f,w),N=new n.default((0,i.transformGeometryWithOptions)(R,!1,e));return N.setProperties(l,!0),N},e.prototype.readFeaturesFromText=function(t,e){var r=this.readFeatureFromText(t,e);return r?[r]:[]},e}(o.default);r.default=y},{"../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./TextFeature.js":"996d9078ce8142005574e8408d2a7091","../geom/GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],"996d9078ce8142005574e8408d2a7091":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=a(t("../format/Feature.js")),o=a(t("../format/FormatType.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function c(t){return"string"==typeof t?t:""}var l=function(t){function e(){return t.call(this)||this}return u(e,t),e.prototype.getType=function(){return o.default.TEXT},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(c(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return(0,n.abstract)()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(c(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return(0,n.abstract)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(c(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return(0,n.abstract)()},e.prototype.readProjection=function(t){return this.readProjectionFromText(c(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return(0,n.abstract)()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return(0,n.abstract)()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return(0,n.abstract)()},e}(i.default);r.default=l},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../format/Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","../format/FormatType.js":"3fdcfb54449c5e8ac10a643260b11524"}],d57bb1c2d21981c19b5dcfc1d58ada23:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultFillStyle=function(){return H},r.getDefaultImageStyle=function(){return Z},r.getDefaultStrokeStyle=function(){return Q},r.getDefaultTextStyle=function(){return $},r.getDefaultStyle=function(){return tt},r.getDefaultStyleArray=function(){return et},r.readFlatCoordinates=ot,r.default=void 0;var n=I(t("../Feature.js")),i=t("../array.js"),o=t("../asserts.js"),a=t("../color.js"),s=t("./Feature.js"),u=I(t("./XMLFeature.js")),c=t("./xsd.js"),l=I(t("../geom/GeometryCollection.js")),f=I(t("../geom/GeometryLayout.js")),d=I(t("../geom/GeometryType.js")),p=I(t("../geom/LineString.js")),h=I(t("../geom/MultiLineString.js")),g=I(t("../geom/MultiPoint.js")),_=I(t("../geom/MultiPolygon.js")),y=I(t("../geom/Point.js")),m=I(t("../geom/Polygon.js")),v=t("../math.js"),b=t("../proj.js"),E=I(t("../style/Fill.js")),S=I(t("../style/Icon.js")),j=I(t("../style/IconAnchorUnits.js")),O=I(t("../style/IconOrigin.js")),P=I(t("../style/Stroke.js")),T=I(t("../style/Style.js")),x=I(t("../style/Text.js")),C=t("../xml.js");function I(t){return t&&t.__esModule?t:{default:t}}var w,R,N,M,L,A,F,D,k=(w=function(t,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),G=["http://www.google.com/kml/ext/2.2"],U=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],B={fraction:j.default.FRACTION,pixels:j.default.PIXELS,insetPixels:j.default.PIXELS},z=(0,C.makeStructureNS)(U,{ExtendedData:At,Region:Ft,MultiGeometry:(0,C.makeObjectPropertySetter)(Tt,"geometry"),LineString:(0,C.makeObjectPropertySetter)(jt,"geometry"),LinearRing:(0,C.makeObjectPropertySetter)(Ot,"geometry"),Point:(0,C.makeObjectPropertySetter)(xt,"geometry"),Polygon:(0,C.makeObjectPropertySetter)(It,"geometry"),Style:(0,C.makeObjectPropertySetter)(Rt),StyleMap:function(t,e){var r=ct(t,e);if(!r)return;var n=e[e.length-1];Array.isArray(r)?n.Style=r:"string"==typeof r?n.styleUrl=r:(0,o.assert)(!1,38)},address:(0,C.makeObjectPropertySetter)(c.readString),description:(0,C.makeObjectPropertySetter)(c.readString),name:(0,C.makeObjectPropertySetter)(c.readString),open:(0,C.makeObjectPropertySetter)(c.readBoolean),phoneNumber:(0,C.makeObjectPropertySetter)(c.readString),styleUrl:(0,C.makeObjectPropertySetter)(at),visibility:(0,C.makeObjectPropertySetter)(c.readBoolean)},(0,C.makeStructureNS)(G,{MultiTrack:(0,C.makeObjectPropertySetter)(function(t,e){var r=(0,C.pushParseAndPop)([],_t,t,e);if(!r)return;return new h.default(r)},"geometry"),Track:(0,C.makeObjectPropertySetter)(mt,"geometry")})),V=(0,C.makeStructureNS)(U,{ExtendedData:At,Region:Ft,Link:function(t,e){(0,C.parseNode)(Y,t,e)},address:(0,C.makeObjectPropertySetter)(c.readString),description:(0,C.makeObjectPropertySetter)(c.readString),name:(0,C.makeObjectPropertySetter)(c.readString),open:(0,C.makeObjectPropertySetter)(c.readBoolean),phoneNumber:(0,C.makeObjectPropertySetter)(c.readString),visibility:(0,C.makeObjectPropertySetter)(c.readBoolean)}),Y=(0,C.makeStructureNS)(U,{href:(0,C.makeObjectPropertySetter)(at)}),X=(0,C.makeStructureNS)(U,{LatLonAltBox:function(t,e){var r=(0,C.pushParseAndPop)({},Gt,t,e);if(!r)return;var n=e[e.length-1],i=[parseFloat(r.west),parseFloat(r.south),parseFloat(r.east),parseFloat(r.north)];n.extent=i,n.altitudeMode=r.altitudeMode,n.minAltitude=parseFloat(r.minAltitude),n.maxAltitude=parseFloat(r.maxAltitude)},Lod:function(t,e){var r=(0,C.pushParseAndPop)({},Ut,t,e);if(!r)return;var n=e[e.length-1];n.minLodPixels=parseFloat(r.minLodPixels),n.maxLodPixels=parseFloat(r.maxLodPixels),n.minFadeExtent=parseFloat(r.minFadeExtent),n.maxFadeExtent=parseFloat(r.maxFadeExtent)}}),q=(0,C.makeStructureNS)(U,["Document","Placemark"]),W=(0,C.makeStructureNS)(U,{Document:(0,C.makeChildAppender)(function(t,e,r){var n={node:t};(0,C.pushSerializeAndPop)(n,Xt,qt,e,r,void 0,this)}),Placemark:(0,C.makeChildAppender)(_e)}),H=null;var K,Z=null;var J,Q=null;var $=null;var tt=null;var et=null;var rt=function(t){function e(e){var r=t.call(this)||this,n=e||{};return et||(R=[255,255,255,1],H=new E.default({color:R}),N=[20,2],M=j.default.PIXELS,L=j.default.PIXELS,A=[64,64],F="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",D=.5,Z=new S.default({anchor:N,anchorOrigin:O.default.BOTTOM_LEFT,anchorXUnits:M,anchorYUnits:L,crossOrigin:"anonymous",rotation:0,scale:D,size:A,src:F}),K="NO_IMAGE",Q=new P.default({color:R,width:1}),J=new P.default({color:[51,51,51,1],width:2}),$=new x.default({font:"bold 16px Helvetica",fill:H,stroke:J,scale:.8}),tt=new T.default({fill:H,image:Z,text:$,stroke:Q,zIndex:0}),et=[tt]),r.dataProjection=(0,b.get)("EPSG:4326"),r.defaultStyle_=n.defaultStyle?n.defaultStyle:et,r.extractStyles_=void 0===n.extractStyles||n.extractStyles,r.writeStyles_=void 0===n.writeStyles||n.writeStyles,r.sharedStyles_={},r.showPointNames_=void 0===n.showPointNames||n.showPointNames,r}return k(e,t),e.prototype.readDocumentOrFolder_=function(t,e){var r=(0,C.makeStructureNS)(U,{Document:(0,C.makeArrayExtender)(this.readDocumentOrFolder_,this),Folder:(0,C.makeArrayExtender)(this.readDocumentOrFolder_,this),Placemark:(0,C.makeArrayPusher)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=(0,C.pushParseAndPop)([],r,t,e,this);return n||void 0},e.prototype.readPlacemark_=function(t,e){var r=(0,C.pushParseAndPop)({geometry:null},z,t,e);if(r){var i=new n.default,o=t.getAttribute("id");null!==o&&i.setId(o);var a=e[0],u=r.geometry;if(u&&(0,s.transformGeometryWithOptions)(u,!1,a),i.setGeometry(u),delete r.geometry,this.extractStyles_){var c=function(t,e,r,n,i){return function(o,a){var s,u=i,c="";if(u){var l=o.getGeometry();l&&(u=l.getType()===d.default.POINT)}if(u&&(c=o.get("name"),u=u&&!!c),t)return u?(s=nt(t[0],c),t.concat(s)):t;if(e){var f=function t(e,r,n){return Array.isArray(e)?e:"string"==typeof e?(!(e in n)&&"#"+e in n&&(e="#"+e),t(n[e],r,n)):r}(e,r,n);return u?(s=nt(f[0],c),f.concat(s)):f}return u?(s=nt(r[0],c),r.concat(s)):r}}(r.Style,r.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(c)}return delete r.Style,i.setProperties(r,!0),i}},e.prototype.readSharedStyle_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=Rt(t,e);if(n){var i=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)i=new URL("#"+r,o).href;else i="#"+r;this.sharedStyles_[i]=n}}},e.prototype.readSharedStyleMap_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=ct(t,e);if(n){var i,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)i=new URL("#"+r,o).href;else i="#"+r;this.sharedStyles_[i]=n}}},e.prototype.readFeatureFromNode=function(t,e){if(!(0,i.includes)(U,t.namespaceURI))return null;var r=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){if(!(0,i.includes)(U,t.namespaceURI))return[];var r,n=t.localName;if("Document"==n||"Folder"==n)return(r=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==n){var o=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return o?[o]:[]}if("kml"==n){r=[];for(var a=t.firstElementChild;a;a=a.nextElementSibling){var s=this.readFeaturesFromNode(a,e);s&&(0,i.extend)(r,s)}return r}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=(0,C.parse)(t);return this.readNameFromDocument(e)}return(0,C.isDocument)(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(e);if(r)return r}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if((0,i.includes)(U,e.namespaceURI)&&"name"==e.localName)return(0,c.readString)(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var r=e.localName;if((0,i.includes)(U,e.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var n=this.readNameFromNode(e);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var r=(0,C.parse)(t);(0,i.extend)(e,this.readNetworkLinksFromDocument(r))}else(0,C.isDocument)(t)?(0,i.extend)(e,this.readNetworkLinksFromDocument(t)):(0,i.extend)(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&(0,i.extend)(e,this.readNetworkLinksFromNode(r));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if((0,i.includes)(U,r.namespaceURI)&&"NetworkLink"==r.localName){var n=(0,C.pushParseAndPop)({},V,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var o=r.localName;!(0,i.includes)(U,r.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||(0,i.extend)(e,this.readNetworkLinksFromNode(r))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var r=(0,C.parse)(t);(0,i.extend)(e,this.readRegionFromDocument(r))}else(0,C.isDocument)(t)?(0,i.extend)(e,this.readRegionFromDocument(t)):(0,i.extend)(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&(0,i.extend)(e,this.readRegionFromNode(r));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if((0,i.includes)(U,r.namespaceURI)&&"Region"==r.localName){var n=(0,C.pushParseAndPop)({},X,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var o=r.localName;!(0,i.includes)(U,r.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||(0,i.extend)(e,this.readRegionFromNode(r))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=(0,C.createElementNS)(U[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",G[0]),r.setAttributeNS(n,"xmlns:xsi",C.XML_SCHEMA_INSTANCE_URI),r.setAttributeNS(C.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:r},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=q[r.namespaceURI],s=(0,C.makeSequence)(o,a);return(0,C.pushSerializeAndPop)(i,W,C.OBJECT_PROPERTY_NODE_FACTORY,s,[e],a,this),r},e}(u.default);function nt(t,e){var r=null,n=[0,0],i="start";if(t.getImage()){var o=t.getImage().getImageSize();if(null===o&&(o=A),2==o.length){var a=t.getImage().getScale();n[0]=a*o[0]/2,n[1]=-a*o[1]/2,i="left"}}if(null!==t.getText()){var s=t.getText();(r=s.clone()).setFont(s.getFont()||$.getFont()),r.setScale(s.getScale()||$.getScale()),r.setFill(s.getFill()||$.getFill()),r.setStroke(s.getStroke()||J)}else r=$.clone();return r.setText(e),r.setOffsetX(n[0]),r.setOffsetY(n[1]),r.setTextAlign(i),new T.default({text:r})}function it(t){var e=(0,C.getAllTextContent)(t,!1),r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(r){var n=r[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function ot(t){for(var e,r=(0,C.getAllTextContent)(t,!1),n=[],i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=i.exec(r);){var o=parseFloat(e[1]),a=parseFloat(e[2]),s=e[3]?parseFloat(e[3]):0;n.push(o,a,s),r=r.substr(e[0].length)}if(""===r)return n}function at(t){var e=(0,C.getAllTextContent)(t,!1).trim(),r=t.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(e,r).href:e}function st(t){return(0,c.readDecimal)(t)}var ut=(0,C.makeStructureNS)(U,{Pair:function(t,e){var r=(0,C.pushParseAndPop)({},Dt,t,e);if(!r)return;var n=r.key;if(n&&"normal"==n){var i=r.styleUrl;i&&(e[e.length-1]=i);var o=r.Style;o&&(e[e.length-1]=o)}}});function ct(t,e){return(0,C.pushParseAndPop)(void 0,ut,t,e)}var lt=(0,C.makeStructureNS)(U,{Icon:(0,C.makeObjectPropertySetter)(function(t,e){var r=(0,C.pushParseAndPop)({},vt,t,e);return r||null}),heading:(0,C.makeObjectPropertySetter)(c.readDecimal),hotSpot:(0,C.makeObjectPropertySetter)(function(t){var e,r=t.getAttribute("xunits"),n=t.getAttribute("yunits");return e="insetPixels"!==r?"insetPixels"!==n?O.default.BOTTOM_LEFT:O.default.TOP_LEFT:"insetPixels"!==n?O.default.BOTTOM_RIGHT:O.default.TOP_RIGHT,{x:parseFloat(t.getAttribute("x")),xunits:B[r],y:parseFloat(t.getAttribute("y")),yunits:B[n],origin:e}}),scale:(0,C.makeObjectPropertySetter)(st)});var ft=(0,C.makeStructureNS)(U,{color:(0,C.makeObjectPropertySetter)(it),scale:(0,C.makeObjectPropertySetter)(st)});var dt=(0,C.makeStructureNS)(U,{color:(0,C.makeObjectPropertySetter)(it),width:(0,C.makeObjectPropertySetter)(c.readDecimal)});var pt=(0,C.makeStructureNS)(U,{color:(0,C.makeObjectPropertySetter)(it),fill:(0,C.makeObjectPropertySetter)(c.readBoolean),outline:(0,C.makeObjectPropertySetter)(c.readBoolean)});var ht=(0,C.makeStructureNS)(U,{coordinates:(0,C.makeReplacer)(ot)});function gt(t,e){return(0,C.pushParseAndPop)(null,ht,t,e)}var _t=(0,C.makeStructureNS)(G,{Track:(0,C.makeArrayPusher)(mt)});var yt=(0,C.makeStructureNS)(U,{when:function(t,e){var r=e[e.length-1].whens,n=(0,C.getAllTextContent)(t,!1),i=Date.parse(n);r.push(isNaN(i)?0:i)}},(0,C.makeStructureNS)(G,{coord:function(t,e){var r=e[e.length-1].flatCoordinates,n=(0,C.getAllTextContent)(t,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(i){var o=parseFloat(i[1]),a=parseFloat(i[2]),s=parseFloat(i[3]);r.push(o,a,s,0)}else r.push(0,0,0,0)}}));function mt(t,e){var r=(0,C.pushParseAndPop)({flatCoordinates:[],whens:[]},yt,t,e);if(r){for(var n=r.flatCoordinates,i=r.whens,o=0,a=Math.min(n.length,i.length);o<a;++o)n[4*o+3]=i[o];return new p.default(n,f.default.XYZM)}}var vt=(0,C.makeStructureNS)(U,{href:(0,C.makeObjectPropertySetter)(at)},(0,C.makeStructureNS)(G,{x:(0,C.makeObjectPropertySetter)(c.readDecimal),y:(0,C.makeObjectPropertySetter)(c.readDecimal),w:(0,C.makeObjectPropertySetter)(c.readDecimal),h:(0,C.makeObjectPropertySetter)(c.readDecimal)}));var bt=(0,C.makeStructureNS)(U,{coordinates:(0,C.makeReplacer)(ot)});function Et(t,e){return(0,C.pushParseAndPop)(null,bt,t,e)}var St=(0,C.makeStructureNS)(U,{extrude:(0,C.makeObjectPropertySetter)(c.readBoolean),tessellate:(0,C.makeObjectPropertySetter)(c.readBoolean),altitudeMode:(0,C.makeObjectPropertySetter)(c.readString)});function jt(t,e){var r=(0,C.pushParseAndPop)({},St,t,e),n=Et(t,e);if(n){var i=new p.default(n,f.default.XYZ);return i.setProperties(r,!0),i}}function Ot(t,e){var r=(0,C.pushParseAndPop)({},St,t,e),n=Et(t,e);if(n){var i=new m.default(n,f.default.XYZ,[n.length]);return i.setProperties(r,!0),i}}var Pt=(0,C.makeStructureNS)(U,{LineString:(0,C.makeArrayPusher)(jt),LinearRing:(0,C.makeArrayPusher)(Ot),MultiGeometry:(0,C.makeArrayPusher)(Tt),Point:(0,C.makeArrayPusher)(xt),Polygon:(0,C.makeArrayPusher)(It)});function Tt(t,e){var r,n=(0,C.pushParseAndPop)([],Pt,t,e);if(!n)return null;if(0===n.length)return new l.default(n);for(var a,s=!0,u=n[0].getType(),c=1,f=n.length;c<f;++c)if((a=n[c]).getType()!=u){s=!1;break}if(s){var p=void 0,y=void 0;if(u==d.default.POINT){var m=n[0];p=m.getLayout(),y=m.getFlatCoordinates();for(c=1,f=n.length;c<f;++c)a=n[c],(0,i.extend)(y,a.getFlatCoordinates());Nt(r=new g.default(y,p),n)}else u==d.default.LINE_STRING?Nt(r=new h.default(n),n):u==d.default.POLYGON?Nt(r=new _.default(n),n):u==d.default.GEOMETRY_COLLECTION?r=new l.default(n):(0,o.assert)(!1,37)}else r=new l.default(n);return r}function xt(t,e){var r=(0,C.pushParseAndPop)({},St,t,e),n=Et(t,e);if(n){var i=new y.default(n,f.default.XYZ);return i.setProperties(r,!0),i}}var Ct=(0,C.makeStructureNS)(U,{innerBoundaryIs:function(t,e){var r=(0,C.pushParseAndPop)(void 0,Bt,t,e);if(r){e[e.length-1].push(r)}},outerBoundaryIs:function(t,e){var r=(0,C.pushParseAndPop)(void 0,zt,t,e);if(r){e[e.length-1][0]=r}}});function It(t,e){var r=(0,C.pushParseAndPop)({},St,t,e),n=(0,C.pushParseAndPop)([null],Ct,t,e);if(n&&n[0]){for(var o=n[0],a=[o.length],s=1,u=n.length;s<u;++s)(0,i.extend)(o,n[s]),a.push(o.length);var c=new m.default(o,f.default.XYZ,a);return c.setProperties(r,!0),c}}var wt=(0,C.makeStructureNS)(U,{IconStyle:function(t,e){var r=(0,C.pushParseAndPop)({},lt,t,e);if(r){var n,i,o,a,s=e[e.length-1],u="Icon"in r?r.Icon:{},c=!("Icon"in r)||Object.keys(u).length>0,l=u.href;l?n=l:c&&(n=F);var f,d=O.default.BOTTOM_LEFT,p=r.hotSpot;p?(i=[p.x,p.y],o=p.xunits,a=p.yunits,d=p.origin):n===F?(i=N,o=M,a=L):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(i=[.5,0],o=j.default.FRACTION,a=j.default.FRACTION);var h,g=u.x,_=u.y;void 0!==g&&void 0!==_&&(f=[g,_]);var y,m=u.w,b=u.h;void 0!==m&&void 0!==b&&(h=[m,b]);var E=r.heading;void 0!==E&&(y=(0,v.toRadians)(E));var P=r.scale;if(c){n==F&&(h=A,void 0===P&&(P=D));var T=new S.default({anchor:i,anchorOrigin:d,anchorXUnits:o,anchorYUnits:a,crossOrigin:"anonymous",offset:f,offsetOrigin:O.default.BOTTOM_LEFT,rotation:y,scale:P,size:h,src:n});s.imageStyle=T}else s.imageStyle=K}},LabelStyle:function(t,e){var r=(0,C.pushParseAndPop)({},ft,t,e);if(r){var n=e[e.length-1],i=new x.default({fill:new E.default({color:"color"in r?r.color:R}),scale:r.scale});n.textStyle=i}},LineStyle:function(t,e){var r=(0,C.pushParseAndPop)({},dt,t,e);if(r){var n=e[e.length-1],i=new P.default({color:"color"in r?r.color:R,width:"width"in r?r.width:1});n.strokeStyle=i}},PolyStyle:function(t,e){var r=(0,C.pushParseAndPop)({},pt,t,e);if(r){var n=e[e.length-1],i=new E.default({color:"color"in r?r.color:R});n.fillStyle=i;var o=r.fill;void 0!==o&&(n.fill=o);var a=r.outline;void 0!==a&&(n.outline=a)}}});function Rt(t,e){var r=(0,C.pushParseAndPop)({},wt,t,e);if(!r)return null;var n,i="fillStyle"in r?r.fillStyle:H,o=r.fill;void 0===o||o||(i=null),"imageStyle"in r?r.imageStyle!=K&&(n=r.imageStyle):n=Z;var a="textStyle"in r?r.textStyle:$,s="strokeStyle"in r?r.strokeStyle:Q,u=r.outline;return void 0===u||u||(s=null),[new T.default({fill:i,image:n,stroke:s,text:a,zIndex:void 0})]}function Nt(t,e){var r,n,i,o=e.length,a=new Array(e.length),s=new Array(e.length),u=new Array(e.length);r=n=i=!1;for(var c=0;c<o;++c){var l=e[c];a[c]=l.get("extrude"),s[c]=l.get("tessellate"),u[c]=l.get("altitudeMode"),r=r||void 0!==a[c],n=n||void 0!==s[c],i=i||u[c]}r&&t.set("extrude",a),n&&t.set("tessellate",s),i&&t.set("altitudeMode",u)}var Mt=(0,C.makeStructureNS)(U,{displayName:(0,C.makeObjectPropertySetter)(c.readString),value:(0,C.makeObjectPropertySetter)(c.readString)});var Lt=(0,C.makeStructureNS)(U,{Data:function(t,e){var r=t.getAttribute("name");(0,C.parseNode)(Mt,t,e);var n=e[e.length-1];null!==r?n[r]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){(0,C.parseNode)(kt,t,e)}});function At(t,e){(0,C.parseNode)(Lt,t,e)}function Ft(t,e){(0,C.parseNode)(X,t,e)}var Dt=(0,C.makeStructureNS)(U,{Style:(0,C.makeObjectPropertySetter)(Rt),key:(0,C.makeObjectPropertySetter)(c.readString),styleUrl:(0,C.makeObjectPropertySetter)(at)});var kt=(0,C.makeStructureNS)(U,{SimpleData:function(t,e){var r=t.getAttribute("name");if(null!==r){var n=(0,c.readString)(t);e[e.length-1][r]=n}}});var Gt=(0,C.makeStructureNS)(U,{altitudeMode:(0,C.makeObjectPropertySetter)(c.readString),minAltitude:(0,C.makeObjectPropertySetter)(c.readDecimal),maxAltitude:(0,C.makeObjectPropertySetter)(c.readDecimal),north:(0,C.makeObjectPropertySetter)(c.readDecimal),south:(0,C.makeObjectPropertySetter)(c.readDecimal),east:(0,C.makeObjectPropertySetter)(c.readDecimal),west:(0,C.makeObjectPropertySetter)(c.readDecimal)});var Ut=(0,C.makeStructureNS)(U,{minLodPixels:(0,C.makeObjectPropertySetter)(c.readDecimal),maxLodPixels:(0,C.makeObjectPropertySetter)(c.readDecimal),minFadeExtent:(0,C.makeObjectPropertySetter)(c.readDecimal),maxFadeExtent:(0,C.makeObjectPropertySetter)(c.readDecimal)});var Bt=(0,C.makeStructureNS)(U,{LinearRing:(0,C.makeReplacer)(gt)});var zt=(0,C.makeStructureNS)(U,{LinearRing:(0,C.makeReplacer)(gt)});function Vt(t,e){for(var r=(0,a.asArray)(e),n=[255*(4==r.length?r[3]:1),r[2],r[1],r[0]],i=0;i<4;++i){var o=Math.floor(n[i]).toString(16);n[i]=1==o.length?"0"+o:o}(0,c.writeStringTextNode)(t,n.join(""))}var Yt=(0,C.makeStructureNS)(U,{Data:(0,C.makeChildAppender)(function(t,e,r){t.setAttribute("name",e.name);var n={node:t},i=e.value;"object"==typeof i?(null!==i&&i.displayName&&(0,C.pushSerializeAndPop)(n,Yt,C.OBJECT_PROPERTY_NODE_FACTORY,[i.displayName],r,["displayName"]),null!==i&&i.value&&(0,C.pushSerializeAndPop)(n,Yt,C.OBJECT_PROPERTY_NODE_FACTORY,[i.value],r,["value"])):(0,C.pushSerializeAndPop)(n,Yt,C.OBJECT_PROPERTY_NODE_FACTORY,[i],r,["value"])}),value:(0,C.makeChildAppender)(function(t,e){(0,c.writeStringTextNode)(t,e)}),displayName:(0,C.makeChildAppender)(function(t,e){(0,c.writeCDATASection)(t,e)})});var Xt=(0,C.makeStructureNS)(U,{Placemark:(0,C.makeChildAppender)(_e)}),qt=function(t,e,r){var n=e[e.length-1].node;return(0,C.createElementNS)(n.namespaceURI,"Placemark")};var Wt=(0,C.makeSimpleNodeFactory)("Data");var Ht=(0,C.makeStructureNS)(U,["href"],(0,C.makeStructureNS)(G,["x","y","w","h"])),Kt=(0,C.makeStructureNS)(U,{href:(0,C.makeChildAppender)(c.writeStringTextNode)},(0,C.makeStructureNS)(G,{x:(0,C.makeChildAppender)(c.writeDecimalTextNode),y:(0,C.makeChildAppender)(c.writeDecimalTextNode),w:(0,C.makeChildAppender)(c.writeDecimalTextNode),h:(0,C.makeChildAppender)(c.writeDecimalTextNode)})),Zt=function(t,e,r){return(0,C.createElementNS)(G[0],"gx:"+r)};var Jt=(0,C.makeStructureNS)(U,["scale","heading","Icon","hotSpot"]),Qt=(0,C.makeStructureNS)(U,{Icon:(0,C.makeChildAppender)(function(t,e,r){var n={node:t},i=r[r.length-1].node,o=Ht[i.namespaceURI],a=(0,C.makeSequence)(e,o);(0,C.pushSerializeAndPop)(n,Kt,C.OBJECT_PROPERTY_NODE_FACTORY,a,r,o),o=Ht[G[0]],a=(0,C.makeSequence)(e,o),(0,C.pushSerializeAndPop)(n,Kt,Zt,a,r,o)}),heading:(0,C.makeChildAppender)(c.writeDecimalTextNode),hotSpot:(0,C.makeChildAppender)(function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}),scale:(0,C.makeChildAppender)(Te)});var $t=(0,C.makeStructureNS)(U,["color","scale"]),te=(0,C.makeStructureNS)(U,{color:(0,C.makeChildAppender)(Vt),scale:(0,C.makeChildAppender)(Te)});var ee=(0,C.makeStructureNS)(U,["color","width"]),re=(0,C.makeStructureNS)(U,{color:(0,C.makeChildAppender)(Vt),width:(0,C.makeChildAppender)(c.writeDecimalTextNode)});var ne={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},ie=function(t,e,r){if(t){var n=e[e.length-1].node;return(0,C.createElementNS)(n.namespaceURI,ne[t.getType()])}},oe=(0,C.makeSimpleNodeFactory)("Point"),ae=(0,C.makeSimpleNodeFactory)("LineString"),se=(0,C.makeSimpleNodeFactory)("LinearRing"),ue=(0,C.makeSimpleNodeFactory)("Polygon"),ce=(0,C.makeStructureNS)(U,{LineString:(0,C.makeChildAppender)(ve),Point:(0,C.makeChildAppender)(ve),Polygon:(0,C.makeChildAppender)(je),GeometryCollection:(0,C.makeChildAppender)(le)});function le(t,e,r){var n,i,a={node:t},s=e.getType();s==d.default.GEOMETRY_COLLECTION?(n=e.getGeometries(),i=ie):s==d.default.MULTI_POINT?(n=e.getPoints(),i=oe):s==d.default.MULTI_LINE_STRING?(n=e.getLineStrings(),i=ae):s==d.default.MULTI_POLYGON?(n=e.getPolygons(),i=ue):(0,o.assert)(!1,39),(0,C.pushSerializeAndPop)(a,ce,i,n,r)}var fe=(0,C.makeStructureNS)(U,{LinearRing:(0,C.makeChildAppender)(ve)});function de(t,e,r){var n={node:t};(0,C.pushSerializeAndPop)(n,fe,se,[e],r)}var pe=(0,C.makeStructureNS)(U,{ExtendedData:(0,C.makeChildAppender)(function(t,e,r){for(var n={node:t},i=e.names,o=e.values,a=i.length,s=0;s<a;s++)(0,C.pushSerializeAndPop)(n,Yt,Wt,[{name:i[s],value:o[s]}],r)}),MultiGeometry:(0,C.makeChildAppender)(le),LineString:(0,C.makeChildAppender)(ve),LinearRing:(0,C.makeChildAppender)(ve),Point:(0,C.makeChildAppender)(ve),Polygon:(0,C.makeChildAppender)(je),Style:(0,C.makeChildAppender)(function(t,e,r){var n={node:t},i={},o=e.getFill(),a=e.getStroke(),s=e.getImage(),u=e.getText();s&&"function"==typeof s.getSrc&&(i.IconStyle=s);u&&(i.LabelStyle=u);a&&(i.LineStyle=a);o&&(i.PolyStyle=o);var c=r[r.length-1].node,l=xe[c.namespaceURI],f=(0,C.makeSequence)(i,l);(0,C.pushSerializeAndPop)(n,Ce,C.OBJECT_PROPERTY_NODE_FACTORY,f,r,l)}),address:(0,C.makeChildAppender)(c.writeStringTextNode),description:(0,C.makeChildAppender)(c.writeStringTextNode),name:(0,C.makeChildAppender)(c.writeStringTextNode),open:(0,C.makeChildAppender)(c.writeBooleanTextNode),phoneNumber:(0,C.makeChildAppender)(c.writeStringTextNode),styleUrl:(0,C.makeChildAppender)(c.writeStringTextNode),visibility:(0,C.makeChildAppender)(c.writeBooleanTextNode)}),he=(0,C.makeStructureNS)(U,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),ge=(0,C.makeSimpleNodeFactory)("ExtendedData");function _e(t,e,r){var n={node:t};e.getId()&&t.setAttribute("id",e.getId());var i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(i||{}).sort().filter(function(t){return!o[t]}),u=e.getStyleFunction();if(u){var c=u(e,0);if(c){var l=Array.isArray(c)?c[0]:c;this.writeStyles_&&(i.Style=l);var f=l.getText();f&&(i.name=f.getText())}}var d=r[r.length-1].node,p=he[d.namespaceURI],h=(0,C.makeSequence)(i,p);if((0,C.pushSerializeAndPop)(n,pe,C.OBJECT_PROPERTY_NODE_FACTORY,h,r,p),a.length>0){var g={names:a,values:(0,C.makeSequence)(i,a)};(0,C.pushSerializeAndPop)(n,pe,ge,[g],r)}var _=r[0],y=e.getGeometry();y&&(y=(0,s.transformGeometryWithOptions)(y,!0,_)),(0,C.pushSerializeAndPop)(n,pe,ie,[y],r)}var ye=(0,C.makeStructureNS)(U,["extrude","tessellate","altitudeMode","coordinates"]),me=(0,C.makeStructureNS)(U,{extrude:(0,C.makeChildAppender)(c.writeBooleanTextNode),tessellate:(0,C.makeChildAppender)(c.writeBooleanTextNode),altitudeMode:(0,C.makeChildAppender)(c.writeStringTextNode),coordinates:(0,C.makeChildAppender)(function(t,e,r){var n,i=r[r.length-1],a=i.layout,s=i.stride;a==f.default.XY||a==f.default.XYM?n=2:a==f.default.XYZ||a==f.default.XYZM?n=3:(0,o.assert)(!1,34);var u=e.length,l="";if(u>0){l+=e[0];for(var d=1;d<n;++d)l+=","+e[d];for(var p=s;p<u;p+=s){l+=" "+e[p];for(d=1;d<n;++d)l+=","+e[p+d]}}(0,c.writeStringTextNode)(t,l)})});function ve(t,e,r){var n=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();var o=e.getProperties();o.coordinates=n;var a=r[r.length-1].node,s=ye[a.namespaceURI],u=(0,C.makeSequence)(o,s);(0,C.pushSerializeAndPop)(i,me,C.OBJECT_PROPERTY_NODE_FACTORY,u,r,s)}var be=(0,C.makeStructureNS)(U,{outerBoundaryIs:(0,C.makeChildAppender)(de),innerBoundaryIs:(0,C.makeChildAppender)(de)}),Ee=(0,C.makeSimpleNodeFactory)("innerBoundaryIs"),Se=(0,C.makeSimpleNodeFactory)("outerBoundaryIs");function je(t,e,r){var n=e.getLinearRings(),i=n.shift(),o={node:t};(0,C.pushSerializeAndPop)(o,be,Ee,n,r),(0,C.pushSerializeAndPop)(o,be,Se,[i],r)}var Oe=(0,C.makeStructureNS)(U,{color:(0,C.makeChildAppender)(Vt)}),Pe=(0,C.makeSimpleNodeFactory)("color");function Te(t,e){(0,c.writeDecimalTextNode)(t,Math.round(1e6*e)/1e6)}var xe=(0,C.makeStructureNS)(U,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Ce=(0,C.makeStructureNS)(U,{IconStyle:(0,C.makeChildAppender)(function(t,e,r){var n={node:t},i={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),u={href:o};if(a){u.w=a[0],u.h=a[1];var c=e.getAnchor(),l=e.getOrigin();if(l&&s&&0!==l[0]&&l[1]!==a[1]&&(u.x=l[0],u.y=s[1]-(l[1]+a[1])),c&&(c[0]!==a[0]/2||c[1]!==a[1]/2)){var f={x:c[0],xunits:j.default.PIXELS,y:a[1]-c[1],yunits:j.default.PIXELS};i.hotSpot=f}}i.Icon=u;var d=e.getScale();1!==d&&(i.scale=d);var p=e.getRotation();0!==p&&(i.heading=p);var h=r[r.length-1].node,g=Jt[h.namespaceURI],_=(0,C.makeSequence)(i,g);(0,C.pushSerializeAndPop)(n,Qt,C.OBJECT_PROPERTY_NODE_FACTORY,_,r,g)}),LabelStyle:(0,C.makeChildAppender)(function(t,e,r){var n={node:t},i={},o=e.getFill();o&&(i.color=o.getColor());var a=e.getScale();a&&1!==a&&(i.scale=a);var s=r[r.length-1].node,u=$t[s.namespaceURI],c=(0,C.makeSequence)(i,u);(0,C.pushSerializeAndPop)(n,te,C.OBJECT_PROPERTY_NODE_FACTORY,c,r,u)}),LineStyle:(0,C.makeChildAppender)(function(t,e,r){var n={node:t},i={color:e.getColor(),width:e.getWidth()},o=r[r.length-1].node,a=ee[o.namespaceURI],s=(0,C.makeSequence)(i,a);(0,C.pushSerializeAndPop)(n,re,C.OBJECT_PROPERTY_NODE_FACTORY,s,r,a)}),PolyStyle:(0,C.makeChildAppender)(function(t,e,r){var n={node:t};(0,C.pushSerializeAndPop)(n,Oe,Pe,[e.getColor()],r)})});var Ie=rt;r.default=Ie},{"../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../color.js":"15b4c40f3e4cfb63cb3cc4b2798c1fb2","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./XMLFeature.js":"8ac25dddd1dec15e16c39865ffe055b3","./xsd.js":"7518937bcd6f92347c49c8067c3024ce","../geom/GeometryCollection.js":"ee4ef29a7926f6500b27a04087228ab9","../geom/GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","../geom/MultiPoint.js":"add6c8112f59ed049722d4a2b686edc3","../geom/MultiPolygon.js":"ca93ec74bdb7f70f03ca08d5bb711551","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../geom/Polygon.js":"24ebc1624175b8546601860191490c20","../math.js":"6086e082317ce6ce8a1b47fb09fed63b","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../style/Fill.js":"a869d8160b7ebc75403f3be54b17a332","../style/Icon.js":"7dcc65d0c33e867a07e7d382ffd9942c","../style/IconAnchorUnits.js":"f260d4294894c270be592c067e432bfa","../style/IconOrigin.js":"d4e50e512f9f28579f7345a69dcf452e","../style/Stroke.js":"34d383bc2f5fa713ba7dc14d6c06c96f","../style/Style.js":"83d3e6a8b05474094d91379cf54baf97","../style/Text.js":"a062decc4252836a4aac93094a0a5c97","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],"7dcc65d0c33e867a07e7d382ffd9942c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../util.js"),i=p(t("../ImageState.js")),o=t("../asserts.js"),a=t("../color.js"),s=t("../events.js"),u=p(t("../events/EventType.js")),c=p(t("./IconAnchorUnits.js")),l=t("./IconImage.js"),f=p(t("./IconOrigin.js")),d=p(t("./Image.js"));function p(t){return t&&t.__esModule?t:{default:t}}var h,g=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),_=function(t){function e(e){var r=this,s=e||{},u=void 0!==s.opacity?s.opacity:1,d=void 0!==s.rotation?s.rotation:0,p=void 0!==s.scale?s.scale:1,h=void 0!==s.rotateWithView&&s.rotateWithView;(r=t.call(this,{opacity:u,rotation:d,scale:p,rotateWithView:h})||this).anchor_=void 0!==s.anchor?s.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==s.anchorOrigin?s.anchorOrigin:f.default.TOP_LEFT,r.anchorXUnits_=void 0!==s.anchorXUnits?s.anchorXUnits:c.default.FRACTION,r.anchorYUnits_=void 0!==s.anchorYUnits?s.anchorYUnits:c.default.FRACTION,r.crossOrigin_=void 0!==s.crossOrigin?s.crossOrigin:null;var g=void 0!==s.img?s.img:null,_=void 0!==s.imgSize?s.imgSize:null,y=s.src;(0,o.assert)(!(void 0!==y&&g),4),(0,o.assert)(!g||g&&_,5),void 0!==y&&0!==y.length||!g||(y=g.src||(0,n.getUid)(g)),(0,o.assert)(void 0!==y&&y.length>0,6);var m=void 0!==s.src?i.default.IDLE:i.default.LOADED;return r.color_=void 0!==s.color?(0,a.asArray)(s.color):null,r.iconImage_=(0,l.get)(g,y,_,r.crossOrigin_,m,r.color_),r.offset_=void 0!==s.offset?s.offset:[0,0],r.offsetOrigin_=void 0!==s.offsetOrigin?s.offsetOrigin:f.default.TOP_LEFT,r.origin_=null,r.size_=void 0!==s.size?s.size:null,r}return g(e,t),e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==c.default.FRACTION||this.anchorYUnits_==c.default.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==c.default.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==c.default.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=f.default.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=f.default.TOP_RIGHT&&this.anchorOrigin_!=f.default.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=f.default.BOTTOM_LEFT&&this.anchorOrigin_!=f.default.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=f.default.TOP_LEFT){var e=this.getSize(),r=this.iconImage_.getSize();if(!e||!r)return null;t=t.slice(),this.offsetOrigin_!=f.default.TOP_RIGHT&&this.offsetOrigin_!=f.default.BOTTOM_RIGHT||(t[0]=r[0]-e[0]-t[0]),this.offsetOrigin_!=f.default.BOTTOM_LEFT&&this.offsetOrigin_!=f.default.BOTTOM_RIGHT||(t[1]=r[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return(0,s.listen)(this.iconImage_,u.default.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){(0,s.unlisten)(this.iconImage_,u.default.CHANGE,t,e)},e}(d.default);r.default=_},{"../util.js":"4bb2f7213adce7213216789f3fd3a27b","../ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2","../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../color.js":"15b4c40f3e4cfb63cb3cc4b2798c1fb2","../events.js":"47affab92622893273981942c85f03c7","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","./IconAnchorUnits.js":"f260d4294894c270be592c067e432bfa","./IconImage.js":"56cb05f1216850c66808be8f18814927","./IconOrigin.js":"d4e50e512f9f28579f7345a69dcf452e","./Image.js":"bc8e873dd5632db289baab9fcddb4751"}],f260d4294894c270be592c067e432bfa:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={FRACTION:"fraction",PIXELS:"pixels"}},{}],"56cb05f1216850c66808be8f18814927":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.get=function(t,e,r,n,i,o){var a=s.shared.get(e,n,o);a||(a=new d(t,e,r,n,i,o),s.shared.set(e,n,o,a));return a},r.default=void 0;var n=t("../dom.js"),i=c(t("../events/Target.js")),o=c(t("../events/EventType.js")),a=c(t("../ImageState.js")),s=t("./IconImageCache.js"),u=t("../Image.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=function(t){function e(e,r,n,i,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==i&&(s.image_.crossOrigin=i),s.canvas_=a?document.createElement("canvas"):null,s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=n,s.src_=r,s.tainted_,s}return f(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===a.default.LOADED){this.tainted_=!1;var t=(0,n.createCanvasContext2D)(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(o.default.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=a.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=a.default.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],r=this.size_[1],i=(0,n.createCanvasContext2D)(e,r);i.fillRect(0,0,e,r),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==a.default.IDLE){this.imageState_=a.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,u.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),r=e.data,n=this.color_[0]/255,i=this.color_[1]/255,o=this.color_[2]/255,a=0,s=r.length;a<s;a+=4)r[a]*=n,r[a+1]*=i,r[a+2]*=o;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(i.default);var p=d;r.default=p},{"../dom.js":"0ade60b4014b5f1918822f5d81f5a358","../events/Target.js":"259e75f7f42ffc43fc3e889115e2a322","../events/EventType.js":"3a46c7f45adf3f74e20933a2fda3fba2","../ImageState.js":"1a17f949fb90d1999b4af0ca7025d0a2","./IconImageCache.js":"a4e44e0a5c7b764913a7e624491db1fc","../Image.js":"9e2ed74bba157eada38f7cb6b59a611e"}],d4e50e512f9f28579f7345a69dcf452e:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},{}],"20f2898efd9fb7ebd944ab43cb8fa987":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../asserts.js"),i=b(t("pbf")),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./Feature.js")),a=b(t("./FormatType.js")),s=b(t("../geom/GeometryLayout.js")),u=b(t("../geom/GeometryType.js")),c=b(t("../geom/LineString.js")),l=b(t("../geom/MultiLineString.js")),f=b(t("../geom/MultiPoint.js")),d=b(t("../geom/MultiPolygon.js")),p=b(t("../geom/Point.js")),h=b(t("../geom/Polygon.js")),g=t("../geom/flat/orient.js"),_=b(t("../proj/Projection.js")),y=b(t("../proj/Units.js")),m=b(t("../render/Feature.js")),v=t("../proj.js");function b(t){return t&&t.__esModule?t:{default:t}}var E,S=(E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function j(t,e,r){if(3===t){var n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields(O,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function O(t,e,r){if(15===t)e.version=r.readVarint();else if(1===t)e.name=r.readString();else if(5===t)e.extent=r.readVarint();else if(2===t)e.features.push(r.pos);else if(3===t)e.keys.push(r.readString());else if(4===t){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;)n=1===(t=r.readVarint()>>3)?r.readString():2===t?r.readFloat():3===t?r.readDouble():4===t?r.readVarint64():5===t?r.readVarint():6===t?r.readSVarint():7===t?r.readBoolean():null;e.values.push(n)}}function P(t,e,r){if(1==t)e.id=r.readVarint();else if(2==t)for(var n=r.readVarint()+r.pos;r.pos<n;){var i=e.layer.keys[r.readVarint()],o=e.layer.values[r.readVarint()];e.properties[i]=o}else 3==t?e.type=r.readVarint():4==t&&(e.geometry=r.pos)}function T(t,e,r){t.pos=e.features[r];var n=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(P,i,n),i}var x=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=new _.default({code:"",units:y.default.TILE_PIXELS}),r.featureClass_=n.featureClass?n.featureClass:m.default,r.geometryName_=n.geometryName,r.layerName_=n.layerName?n.layerName:"layer",r.layers_=n.layers?n.layers:null,r.idProperty_=n.idProperty,r}return S(e,t),e.prototype.readRawGeometry_=function(t,e,r,i){t.pos=e.geometry;for(var o=t.readVarint()+t.pos,a=1,s=0,u=0,c=0,l=0,f=0;t.pos<o;){if(!s){var d=t.readVarint();a=7&d,s=d>>3}s--,1===a||2===a?(u+=t.readSVarint(),c+=t.readSVarint(),1===a&&l>f&&(i.push(l),f=l),r.push(u,c),l+=2):7===a?l>f&&(r.push(r[f],r[f+1]),l+=2):(0,n.assert)(!1,59)}l>f&&(i.push(l),f=l)},e.prototype.createFeature_=function(t,e,r){var n,i=e.type;if(0===i)return null;var a,_=e.properties;this.idProperty_?(a=_[this.idProperty_],delete _[this.idProperty_]):a=e.id,_[this.layerName_]=e.layer.name;var y=[],v=[];this.readRawGeometry_(t,e,y,v);var b=function(t,e){var r;1===t?r=1===e?u.default.POINT:u.default.MULTI_POINT:2===t?r=1===e?u.default.LINE_STRING:u.default.MULTI_LINE_STRING:3===t&&(r=u.default.POLYGON);return r}(i,v.length);if(this.featureClass_===m.default)(n=new this.featureClass_(b,y,v,_,a)).transform(r.dataProjection,r.featureProjection);else{var E=void 0;if(b==u.default.POLYGON){for(var S=[],j=0,O=0,P=0,T=v.length;P<T;++P){var x=v[P];(0,g.linearRingIsClockwise)(y,j,x,2)||(S.push(v.slice(O,P)),O=P),j=x}E=S.length>1?new d.default(y,s.default.XY,S):new h.default(y,s.default.XY,v)}else E=b===u.default.POINT?new p.default(y,s.default.XY):b===u.default.LINE_STRING?new c.default(y,s.default.XY):b===u.default.POLYGON?new h.default(y,s.default.XY,v):b===u.default.MULTI_POINT?new f.default(y,s.default.XY):b===u.default.MULTI_LINE_STRING?new l.default(y,s.default.XY,v):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var C=(0,o.transformGeometryWithOptions)(E,!1,r);n.setGeometry(C),n.setId(a),n.setProperties(_,!0)}return n},e.prototype.getType=function(){return a.default.ARRAY_BUFFER},e.prototype.readFeatures=function(t,e){var r=this.layers_,n=this.adaptOptions(e),o=(0,v.get)(n.dataProjection);o.setWorldExtent(n.extent),n.dataProjection=o;var a=new i.default(t),s=a.readFields(j,{}),u=[];for(var c in s)if(!r||-1!=r.indexOf(c)){var l=s[c],f=l?[0,0,l.extent,l.extent]:null;o.setExtent(f);for(var d=0,p=l.length;d<p;++d){var h=T(a,l,d);u.push(this.createFeature_(a,h,n))}}return u},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(o.default);r.default=x},{"../asserts.js":"7e662a02bc41c2814316b69c70da50e2",pbf:"6ab9ceaef3e419528e8c64a7632b4c26","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./FormatType.js":"3fdcfb54449c5e8ac10a643260b11524","../geom/GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","../geom/MultiPoint.js":"add6c8112f59ed049722d4a2b686edc3","../geom/MultiPolygon.js":"ca93ec74bdb7f70f03ca08d5bb711551","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../geom/Polygon.js":"24ebc1624175b8546601860191490c20","../geom/flat/orient.js":"639aa6020d1095fcc76ca0ab863c78fa","../proj/Projection.js":"65c40c3ce72d129e9a962be7485d57de","../proj/Units.js":"aed7c8d781fca9ae0c0fa9c24383e0e4","../render/Feature.js":"e4fe30168dd7bc1f51866b3c4a853c2e","../proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],"6ab9ceaef3e419528e8c64a7632b4c26":[function(t,e,r){"use strict";e.exports=i;var n=t("ieee754");function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;function o(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function s(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function u(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function c(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function l(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function _(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function m(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+4294967296*y(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return a(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){var n="",i=e;for(;i<r;){var o,a,s,u=t[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>r)break;1===l?u<128&&(c=u):2===l?128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===l?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((c=(15&u)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),i+=l}return n}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=o(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;if(e.buf[e.pos++]|=r|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&s(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&s(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,_,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},{ieee754:"78c6795efaf2f79d1ba07d4275978450"}],"78c6795efaf2f79d1ba07d4275978450":[function(t,e,r){r.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,d=r?-1:1,p=t[e+f];for(f+=d,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,h=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+p]=255&a,p+=h,a/=256,c-=8);t[r+p-h]|=128*g}},{}],e4fe30168dd7bc1f51866b3c4a853c2e:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../array.js"),o=t("../extent.js"),a=(n=t("../geom/GeometryType.js"))&&n.__esModule?n:{default:n},s=t("../geom/flat/center.js"),u=t("../geom/flat/interiorpoint.js"),c=t("../geom/flat/interpolate.js"),l=t("../proj.js"),f=t("../geom/flat/transform.js"),d=t("../transform.js");var p=(0,d.create)(),h=function(){function t(t,e,r,n,i){this.extent_,this.id_=i,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=n}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===a.default.POINT?(0,o.createOrUpdateFromCoordinate)(this.flatCoordinates_):(0,o.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=(0,o.getCenter)(this.getExtent());this.flatInteriorPoints_=(0,u.getInteriorPointOfArray)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=(0,s.linearRingss)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,u.getInteriorPointsOfMultiArray)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=(0,c.interpolatePoint)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,o=r.length;n<o;++n){var a=r[n],s=(0,c.interpolatePoint)(t,e,a,2,.5);(0,i.extend)(this.flatMidpoints_,s),e=a}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t,e){var r=(t=(0,l.get)(t)).getExtent(),n=t.getWorldExtent(),i=(0,o.getHeight)(n)/(0,o.getHeight)(r);(0,d.compose)(p,n[0],n[3],i,-i,0,0,0),(0,f.transform2D)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,p,this.flatCoordinates_)},t}();h.prototype.getEnds=h.prototype.getEndss=function(){return this.ends_},h.prototype.getFlatCoordinates=h.prototype.getOrientedFlatCoordinates;var g=h;r.default=g},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../geom/flat/center.js":"593af12274f09ac471b9aba7462b982d","../geom/flat/interiorpoint.js":"13a1a64f3cf9ef20a02b0e546fc0638c","../geom/flat/interpolate.js":"ef56ba89fe9aeda1c21bb532787a31ed","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../geom/flat/transform.js":"4c8bbdedb02c72e6aff9d71cb3a76316","../transform.js":"2cfeb6b6111a4a4a4e18e3429d625928"}],dc3611ac06e430e80aee9bcef3ef4d2e:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("./XLink.js"),o=(n=t("./XML.js"))&&n.__esModule?n:{default:n},a=t("./xsd.js"),s=t("../xml.js");var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=[null,"http://www.opengis.net/ows/1.1"],f=(0,s.makeStructureNS)(l,{ServiceIdentification:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},O,t,e)}),ServiceProvider:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},P,t,e)}),OperationsMetadata:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},b,t,e)})}),d=function(t){function e(){return t.call(this)||this}return c(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=(0,s.pushParseAndPop)({},f,t,[]);return e||null},e}(o.default),p=(0,s.makeStructureNS)(l,{DeliveryPoint:(0,s.makeObjectPropertySetter)(a.readString),City:(0,s.makeObjectPropertySetter)(a.readString),AdministrativeArea:(0,s.makeObjectPropertySetter)(a.readString),PostalCode:(0,s.makeObjectPropertySetter)(a.readString),Country:(0,s.makeObjectPropertySetter)(a.readString),ElectronicMailAddress:(0,s.makeObjectPropertySetter)(a.readString)}),h=(0,s.makeStructureNS)(l,{Value:(0,s.makeObjectPropertyPusher)(function(t,e){return(0,a.readString)(t)})}),g=(0,s.makeStructureNS)(l,{AllowedValues:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},h,t,e)})}),_=(0,s.makeStructureNS)(l,{Phone:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},E,t,e)}),Address:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},p,t,e)})}),y=(0,s.makeStructureNS)(l,{HTTP:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},m,t,e)})}),m=(0,s.makeStructureNS)(l,{Get:(0,s.makeObjectPropertyPusher)(function(t,e){var r=(0,i.readHref)(t);if(!r)return;return(0,s.pushParseAndPop)({href:r},S,t,e)}),Post:void 0}),v=(0,s.makeStructureNS)(l,{DCP:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},y,t,e)})}),b=(0,s.makeStructureNS)(l,{Operation:function(t,e){var r=t.getAttribute("name"),n=(0,s.pushParseAndPop)({},v,t,e);if(!n)return;e[e.length-1][r]=n}}),E=(0,s.makeStructureNS)(l,{Voice:(0,s.makeObjectPropertySetter)(a.readString),Facsimile:(0,s.makeObjectPropertySetter)(a.readString)}),S=(0,s.makeStructureNS)(l,{Constraint:(0,s.makeObjectPropertyPusher)(function(t,e){var r=t.getAttribute("name");if(!r)return;return(0,s.pushParseAndPop)({name:r},g,t,e)})}),j=(0,s.makeStructureNS)(l,{IndividualName:(0,s.makeObjectPropertySetter)(a.readString),PositionName:(0,s.makeObjectPropertySetter)(a.readString),ContactInfo:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},_,t,e)})}),O=(0,s.makeStructureNS)(l,{Abstract:(0,s.makeObjectPropertySetter)(a.readString),AccessConstraints:(0,s.makeObjectPropertySetter)(a.readString),Fees:(0,s.makeObjectPropertySetter)(a.readString),Title:(0,s.makeObjectPropertySetter)(a.readString),ServiceTypeVersion:(0,s.makeObjectPropertySetter)(a.readString),ServiceType:(0,s.makeObjectPropertySetter)(a.readString)}),P=(0,s.makeStructureNS)(l,{ProviderName:(0,s.makeObjectPropertySetter)(a.readString),ProviderSite:(0,s.makeObjectPropertySetter)(i.readHref),ServiceContact:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},j,t,e)})});var T=d;r.default=T},{"./XLink.js":"d7800637286ba2f72c5186c3c2fa1bda","./XML.js":"7ac2587926f3bc4656e1c6f44ca1dce2","./xsd.js":"7518937bcd6f92347c49c8067c3024ce","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],d7800637286ba2f72c5186c3c2fa1bda:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.readHref=function(t){return t.getAttributeNS(n,"href")};var n="http://www.w3.org/1999/xlink"},{}],"7ac2587926f3bc4656e1c6f44ca1dce2":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../xml.js"),i=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=(0,n.parse)(t);return this.readFromDocument(e)}return(0,n.isDocument)(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){},t.prototype.readFromNode=function(t){},t}();r.default=i},{"../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],"427a655ca5fd1077e22cf7ba306347d1":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodeDeltas=_,r.decodeDeltas=y,r.encodeFloats=m,r.decodeFloats=v,r.encodeSignedIntegers=b,r.decodeSignedIntegers=E,r.encodeUnsignedIntegers=S,r.decodeUnsignedIntegers=j,r.encodeUnsignedInteger=O,r.default=void 0;var n=t("../asserts.js"),i=p(t("../Feature.js")),o=t("./Feature.js"),a=p(t("./TextFeature.js")),s=p(t("../geom/GeometryLayout.js")),u=p(t("../geom/LineString.js")),c=t("../geom/SimpleGeometry.js"),l=t("../geom/flat/flip.js"),f=t("../geom/flat/inflate.js"),d=t("../proj.js");function p(t){return t&&t.__esModule?t:{default:t}}var h,g=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function _(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=0,s=t.length;a<s;)for(n=0;n<e;++n,++a){var u=t[a],c=u-o[n];o[n]=u,t[a]=c}return m(t,i)}function y(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=v(t,i),s=0,u=a.length;s<u;)for(n=0;n<e;++n,++s)o[n]+=a[s],a[s]=o[n];return a}function m(t,e){for(var r=e||1e5,n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*r);return b(t)}function v(t,e){for(var r=e||1e5,n=E(t),i=0,o=n.length;i<o;++i)n[i]/=r;return n}function b(t){for(var e=0,r=t.length;e<r;++e){var n=t[e];t[e]=n<0?~(n<<1):n<<1}return S(t)}function E(t){for(var e=j(t),r=0,n=e.length;r<n;++r){var i=e[r];e[r]=1&i?~(i>>1):i>>1}return e}function S(t){for(var e="",r=0,n=t.length;r<n;++r)e+=O(t[r]);return e}function j(t){for(var e=[],r=0,n=0,i=0,o=t.length;i<o;++i){var a=t.charCodeAt(i)-63;r|=(31&a)<<n,a<32?(e.push(r),r=0,n=0):n+=5}return e}function O(t){for(var e,r="";t>=32;)e=63+(32|31&t),r+=String.fromCharCode(e),t>>=5;return e=t+63,r+=String.fromCharCode(e)}var P=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=(0,d.get)("EPSG:4326"),r.factor_=n.factor?n.factor:1e5,r.geometryLayout_=n.geometryLayout?n.geometryLayout:s.default.XY,r}return g(e,t),e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);return new i.default(r)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var r=(0,c.getStrideForLayout)(this.geometryLayout_),n=y(t,r,this.factor_);(0,l.flipXY)(n,0,n.length,r,n);var i=(0,f.inflateCoordinates)(n,0,n.length,r),a=new u.default(i,this.geometryLayout_);return(0,o.transformGeometryWithOptions)(a,!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):((0,n.assert)(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var r=(t=(0,o.transformGeometryWithOptions)(t,!0,this.adaptOptions(e))).getFlatCoordinates(),n=t.getStride();return(0,l.flipXY)(r,0,r.length,n,r),_(r,n,this.factor_)},e}(a.default);r.default=P},{"../asserts.js":"7e662a02bc41c2814316b69c70da50e2","../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./TextFeature.js":"996d9078ce8142005574e8408d2a7091","../geom/GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/SimpleGeometry.js":"2c201efc98ebdf5eedf2ad5e7989cb8b","../geom/flat/flip.js":"b7acab18277277075c36ae98154b998b","../geom/flat/inflate.js":"41316cc397979197f0ec65ed178d2a19","../proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],b7acab18277277075c36ae98154b998b:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flipXY=function(t,e,r,n,i,o){var a,s;void 0!==i?(a=i,s=void 0!==o?o:0):(a=[],s=0);var u=e;for(;u<r;){var c=t[u++];a[s++]=t[u++],a[s++]=c;for(var l=2;l<n;++l)a[s++]=t[u++]}return a.length=s,a}},{}],"6dd1b7ff1e0eb7ed23cb5a69ef0b3ae3":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=p(t("../Feature.js")),i=t("./Feature.js"),o=p(t("./JSONFeature.js")),a=p(t("../geom/LineString.js")),s=p(t("../geom/MultiLineString.js")),u=p(t("../geom/MultiPoint.js")),c=p(t("../geom/MultiPolygon.js")),l=p(t("../geom/Point.js")),f=p(t("../geom/Polygon.js")),d=t("../proj.js");function p(t){return t&&t.__esModule?t:{default:t}}var h,g=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),_=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.layerName_=n.layerName,r.layers_=n.layers?n.layers:null,r.dataProjection=(0,d.get)(n.dataProjection?n.dataProjection:"EPSG:4326"),r}return g(e,t),e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var r=t,n=void 0,i=null,o=null;r.transform&&(i=(n=r.transform).scale,o=n.translate);var a=r.arcs;n&&function(t,e,r){for(var n=0,i=t.length;n<i;++n)E(t[n],e,r)}(a,i,o);var s=[],u=r.objects,c=this.layerName_,l=void 0;for(var f in u)this.layers_&&-1==this.layers_.indexOf(f)||("GeometryCollection"===u[f].type?(l=u[f],s.push.apply(s,v(l,a,i,o,c,f,e))):(l=u[f],s.push(b(l,a,i,o,c,f,e))));return s}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(o.default),y={Point:function(t,e,r){var n=t.coordinates;e&&r&&S(n,e,r);return new l.default(n)},LineString:function(t,e){var r=m(t.arcs,e);return new a.default(r)},Polygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=m(t.arcs[n],e);return new f.default(r)},MultiPoint:function(t,e,r){var n=t.coordinates;if(e&&r)for(var i=0,o=n.length;i<o;++i)S(n[i],e,r);return new u.default(n)},MultiLineString:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=m(t.arcs[n],e);return new s.default(r)},MultiPolygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n){for(var o=t.arcs[n],a=[],s=0,u=o.length;s<u;++s)a[s]=m(o[s],e);r[n]=a}return new c.default(r)}};function m(t,e){for(var r,n,i=[],o=0,a=t.length;o<a;++o)r=t[o],o>0&&i.pop(),n=r>=0?e[r]:e[~r].slice().reverse(),i.push.apply(i,n);for(var s=0,u=i.length;s<u;++s)i[s]=i[s].slice();return i}function v(t,e,r,n,i,o,a){for(var s=t.geometries,u=[],c=0,l=s.length;c<l;++c)u[c]=b(s[c],e,r,n,i,o,a);return u}function b(t,e,r,o,a,s,u){var c,l=t.type,f=y[l];c="Point"===l||"MultiPoint"===l?f(t,r,o):f(t,e);var d=new n.default;d.setGeometry((0,i.transformGeometryWithOptions)(c,!1,u)),void 0!==t.id&&d.setId(t.id);var p=t.properties;return a&&(p||(p={}),p[a]=s),p&&d.setProperties(p,!0),d}function E(t,e,r){for(var n=0,i=0,o=0,a=t.length;o<a;++o){var s=t[o];n+=s[0],i+=s[1],s[0]=n,s[1]=i,S(s,e,r)}}function S(t,e,r){t[0]=t[0]*e[0]+r[0],t[1]=t[1]*e[1]+r[1]}var j=_;r.default=j},{"../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./JSONFeature.js":"9804d8bb69b1e739caf780d8d4458fdf","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","../geom/MultiPoint.js":"add6c8112f59ed049722d4a2b686edc3","../geom/MultiPolygon.js":"ca93ec74bdb7f70f03ca08d5bb711551","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../geom/Polygon.js":"24ebc1624175b8546601860191490c20","../proj.js":"62f54c55d8828c04c9cb79fe6933946b"}],"06a9c55150bfb3ffc98c92f54ce610c3":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.writeFilter=function(t){var e=(0,d.createElementNS)(j,"Filter");return L(e,t,[]),e},r.default=void 0;var n=t("../asserts.js"),i=p(t("./GML2.js")),o=p(t("./GML3.js")),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./GMLBase.js")),s=t("./filter.js"),u=p(t("./XMLFeature.js")),c=t("./xsd.js"),l=t("../obj.js"),f=t("../proj.js"),d=t("../xml.js");function p(t){return t&&t.__esModule?t:{default:t}}var h,g=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),_={"http://www.opengis.net/gml":{boundedBy:(0,d.makeObjectPropertySetter)(a.default.prototype.readGeometryElement,"bounds")}},y={"http://www.opengis.net/wfs":{totalInserted:(0,d.makeObjectPropertySetter)(c.readNonNegativeInteger),totalUpdated:(0,d.makeObjectPropertySetter)(c.readNonNegativeInteger),totalDeleted:(0,d.makeObjectPropertySetter)(c.readNonNegativeInteger)}},m={"http://www.opengis.net/wfs":{TransactionSummary:(0,d.makeObjectPropertySetter)(function(t,e){return(0,d.pushParseAndPop)({},y,t,e)},"transactionSummary"),InsertResults:(0,d.makeObjectPropertySetter)(function(t,e){return(0,d.pushParseAndPop)([],w,t,e)},"insertIds")}},v={"http://www.opengis.net/wfs":{PropertyName:(0,d.makeChildAppender)(c.writeStringTextNode)}},b={"http://www.opengis.net/wfs":{Insert:(0,d.makeChildAppender)(function(t,e,r){var n=r[r.length-1],a=n.featureType,s=n.featureNS,u=n.gmlVersion,c=(0,d.createElementNS)(s,a);t.appendChild(c),2===u?i.default.prototype.writeFeatureElement(c,e,r):o.default.prototype.writeFeatureElement(c,e,r)}),Update:(0,d.makeChildAppender)(function(t,e,r){var i=r[r.length-1];(0,n.assert)(void 0!==e.getId(),27);var o=i.featureType,a=i.featurePrefix,s=i.featureNS,u=N(a,o),c=e.getGeometryName();t.setAttribute("typeName",u),t.setAttributeNS(S,"xmlns:"+a,s);var l=e.getId();if(void 0!==l){for(var f=e.getKeys(),p=[],h=0,g=f.length;h<g;h++){var _=e.get(f[h]);if(void 0!==_){var y=f[h];_&&"function"==typeof _.getSimplifiedGeometry&&(y=c),p.push({name:y,value:_})}}(0,d.pushSerializeAndPop)({gmlVersion:i.gmlVersion,node:t,hasZ:i.hasZ,srsName:i.srsName},b,(0,d.makeSimpleNodeFactory)("Property"),p,r),R(t,l,r)}}),Delete:(0,d.makeChildAppender)(function(t,e,r){var i=r[r.length-1];(0,n.assert)(void 0!==e.getId(),26);var o=i.featureType,a=i.featurePrefix,s=i.featureNS,u=N(a,o);t.setAttribute("typeName",u),t.setAttributeNS(S,"xmlns:"+a,s);var c=e.getId();void 0!==c&&R(t,c,r)}),Property:(0,d.makeChildAppender)(function(t,e,r){var n=(0,d.createElementNS)(O,"Name"),a=r[r.length-1].gmlVersion;if(t.appendChild(n),(0,c.writeStringTextNode)(n,e.name),void 0!==e.value&&null!==e.value){var s=(0,d.createElementNS)(O,"Value");t.appendChild(s),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===a?i.default.prototype.writeGeometryElement(s,e.value,r):o.default.prototype.writeGeometryElement(s,e.value,r):(0,c.writeStringTextNode)(s,e.value)}}),Native:(0,d.makeChildAppender)(function(t,e,r){e.vendorId&&t.setAttribute("vendorId",e.vendorId);void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore));void 0!==e.value&&(0,c.writeStringTextNode)(t,e.value)})}},E="feature",S="http://www.w3.org/2000/xmlns/",j="http://www.opengis.net/ogc",O="http://www.opengis.net/wfs",P="http://www.opengis.net/fes",T={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},x="1.1.0",C=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType_=n.featureType,r.featureNS_=n.featureNS,r.gmlFormat_=n.gmlFormat?n.gmlFormat:new o.default,r.schemaLocation_=n.schemaLocation?n.schemaLocation:T[x],r}return g(e,t),e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var r={node:t};(0,l.assign)(r,{featureType:this.featureType_,featureNS:this.featureNS_}),(0,l.assign)(r,this.getReadOptions(t,e||{}));var n=[r];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[a.GMLNS].featureMember=(0,d.makeArrayPusher)(a.default.prototype.readFeaturesInternal);var i=(0,d.pushParseAndPop)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,n,this.gmlFormat_);return i||(i=[]),i},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=(0,d.parse)(t);return this.readTransactionResponseFromDocument(e)}return(0,d.isDocument)(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=(0,d.parse)(t);return this.readFeatureCollectionMetadataFromDocument(e)}return(0,d.isDocument)(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},r=(0,c.readNonNegativeIntegerString)(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=r,(0,d.pushParseAndPop)(e,_,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return(0,d.pushParseAndPop)({},m,t,[])},e.prototype.writeGetFeature=function(t){var e,r=(0,d.createElementNS)(O,"GetFeature");if(r.setAttribute("service","WFS"),r.setAttribute("version","1.1.0"),t&&(t.handle&&r.setAttribute("handle",t.handle),t.outputFormat&&r.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&r.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&r.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&r.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&r.setAttribute("count",String(t.count)),void 0!==t.viewParams&&r.setAttribute("viewParams",t.viewParams),e=t.filter,t.bbox)){(0,n.assert)(t.geometryName,12);var i=(0,s.bbox)(t.geometryName,t.bbox,t.srsName);e=e?(0,s.and)(e,i):i}r.setAttributeNS(d.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",this.schemaLocation_);var o={node:r};return(0,l.assign)(o,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]}),(0,n.assert)(Array.isArray(t.featureTypes),11),function(t,e,r){var n=r[r.length-1],i=(0,l.assign)({},n);i.node=t,(0,d.pushSerializeAndPop)(i,M,(0,d.makeSimpleNodeFactory)("Query"),e,r)}(r,t.featureTypes,[o]),r},e.prototype.writeTransaction=function(t,e,r,n){var i,o,a=[],s=(0,d.createElementNS)(O,"Transaction"),u=n.version?n.version:x,c="1.0.0"===u?2:3;s.setAttribute("service","WFS"),s.setAttribute("version",u),n&&(i=n.gmlOptions?n.gmlOptions:{},n.handle&&s.setAttribute("handle",n.handle));var f=T[u];s.setAttributeNS(d.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",f);var p=n.featurePrefix?n.featurePrefix:E;return t&&(o=(0,l.assign)({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:p,gmlVersion:c,hasZ:n.hasZ,srsName:n.srsName}),(0,l.assign)(o,i),(0,d.pushSerializeAndPop)(o,b,(0,d.makeSimpleNodeFactory)("Insert"),t,a)),e&&(o=(0,l.assign)({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:p,gmlVersion:c,hasZ:n.hasZ,srsName:n.srsName}),(0,l.assign)(o,i),(0,d.pushSerializeAndPop)(o,b,(0,d.makeSimpleNodeFactory)("Update"),e,a)),r&&(0,d.pushSerializeAndPop)({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:p,gmlVersion:c,srsName:n.srsName},b,(0,d.makeSimpleNodeFactory)("Delete"),r,a),n.nativeElements&&(0,d.pushSerializeAndPop)({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:p,gmlVersion:c,srsName:n.srsName},b,(0,d.makeSimpleNodeFactory)("Native"),n.nativeElements,a),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var r=[{}];return this.gmlFormat_.readGeometryElement(e,r),(0,f.get)(r.pop().srsName)}return null},e}(u.default);var I={"http://www.opengis.net/ogc":{FeatureId:(0,d.makeArrayPusher)(function(t,e){return t.getAttribute("fid")})}};var w={"http://www.opengis.net/wfs":{Feature:function(t,e){(0,d.parseNode)(I,t,e)}}};function R(t,e,r){var n=(0,d.createElementNS)(j,"Filter"),i=(0,d.createElementNS)(j,"FeatureId");n.appendChild(i),i.setAttribute("fid",e),t.appendChild(n)}function N(t,e){var r=(t=t||E)+":";return 0===e.indexOf(r)?e:r+e}var M={"http://www.opengis.net/wfs":{Query:(0,d.makeChildAppender)(function(t,e,r){var n,i=r[r.length-1],o=i.featurePrefix,a=i.featureNS,s=i.propertyNames,u=i.srsName;n=o?N(o,e):e;t.setAttribute("typeName",n),u&&t.setAttribute("srsName",u);a&&t.setAttributeNS(S,"xmlns:"+o,a);var c=(0,l.assign)({},i);c.node=t,(0,d.pushSerializeAndPop)(c,v,(0,d.makeSimpleNodeFactory)("PropertyName"),s,r);var f=i.filter;if(f){var p=(0,d.createElementNS)(j,"Filter");t.appendChild(p),L(p,f,r)}})},"http://www.opengis.net/ogc":{During:(0,d.makeChildAppender)(function(t,e,r){var n=(0,d.createElementNS)(P,"ValueReference");(0,c.writeStringTextNode)(n,e.propertyName),t.appendChild(n);var i=(0,d.createElementNS)(a.GMLNS,"TimePeriod");t.appendChild(i);var o=(0,d.createElementNS)(a.GMLNS,"begin");i.appendChild(o),U(o,e.begin);var s=(0,d.createElementNS)(a.GMLNS,"end");i.appendChild(s),U(s,e.end)}),And:(0,d.makeChildAppender)(A),Or:(0,d.makeChildAppender)(A),Not:(0,d.makeChildAppender)(function(t,e,r){var n={node:t},i=e.condition;(0,d.pushSerializeAndPop)(n,M,(0,d.makeSimpleNodeFactory)(i.getTagName()),[i],r)}),BBOX:(0,d.makeChildAppender)(function(t,e,r){r[r.length-1].srsName=e.srsName,k(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.extent,r)}),Contains:(0,d.makeChildAppender)(function(t,e,r){r[r.length-1].srsName=e.srsName,k(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.geometry,r)}),Intersects:(0,d.makeChildAppender)(function(t,e,r){r[r.length-1].srsName=e.srsName,k(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.geometry,r)}),Within:(0,d.makeChildAppender)(function(t,e,r){r[r.length-1].srsName=e.srsName,k(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.geometry,r)}),PropertyIsEqualTo:(0,d.makeChildAppender)(F),PropertyIsNotEqualTo:(0,d.makeChildAppender)(F),PropertyIsLessThan:(0,d.makeChildAppender)(F),PropertyIsLessThanOrEqualTo:(0,d.makeChildAppender)(F),PropertyIsGreaterThan:(0,d.makeChildAppender)(F),PropertyIsGreaterThanOrEqualTo:(0,d.makeChildAppender)(F),PropertyIsNull:(0,d.makeChildAppender)(function(t,e,r){k(t,e.propertyName)}),PropertyIsBetween:(0,d.makeChildAppender)(function(t,e,r){k(t,e.propertyName);var n=(0,d.createElementNS)(j,"LowerBoundary");t.appendChild(n),G(n,""+e.lowerBoundary);var i=(0,d.createElementNS)(j,"UpperBoundary");t.appendChild(i),G(i,""+e.upperBoundary)}),PropertyIsLike:(0,d.makeChildAppender)(function(t,e,r){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString());k(t,e.propertyName),G(t,""+e.pattern)})}};function L(t,e,r){var n={node:t};(0,d.pushSerializeAndPop)(n,M,(0,d.makeSimpleNodeFactory)(e.getTagName()),[e],r)}function A(t,e,r){for(var n={node:t},i=e.conditions,o=0,a=i.length;o<a;++o){var s=i[o];(0,d.pushSerializeAndPop)(n,M,(0,d.makeSimpleNodeFactory)(s.getTagName()),[s],r)}}function F(t,e,r){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),k(t,e.propertyName),G(t,""+e.expression)}function D(t,e,r){var n=(0,d.createElementNS)(j,t);(0,c.writeStringTextNode)(n,r),e.appendChild(n)}function k(t,e){D("PropertyName",t,e)}function G(t,e){D("Literal",t,e)}function U(t,e){var r=(0,d.createElementNS)(a.GMLNS,"TimeInstant");t.appendChild(r);var n=(0,d.createElementNS)(a.GMLNS,"timePosition");r.appendChild(n),(0,c.writeStringTextNode)(n,e)}var B=C;r.default=B},{"../asserts.js":"7e662a02bc41c2814316b69c70da50e2","./GML2.js":"5a3c8af79f21f95f0d5afa8d9cadf9db","./GML3.js":"d460f1ab66d83425bdd5508c15614eec","./GMLBase.js":"8f14f3315ba94680a34f3fa72cfc106b","./filter.js":"f4b7280d0531d06c8ace578968e0686b","./XMLFeature.js":"8ac25dddd1dec15e16c39865ffe055b3","./xsd.js":"7518937bcd6f92347c49c8067c3024ce","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],"5a3c8af79f21f95f0d5afa8d9cadf9db":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../extent.js"),i=t("./Feature.js"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./GMLBase.js")),a=t("./xsd.js"),s=t("../obj.js"),u=t("../proj.js"),c=t("../xml.js");var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=o.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",p={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},h=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).FEATURE_COLLECTION_PARSERS[o.GMLNS].featureMember=(0,c.makeArrayPusher)(r.readFeaturesInternal),r.schemaLocation=n.schemaLocation?n.schemaLocation:d,r}return f(e,t),e.prototype.readFlatCoordinates_=function(t,e){var r=(0,c.getAllTextContent)(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName,i="enu";if(n){var o=(0,u.get)(n);o&&(i=o.getAxisOrientation())}for(var a=r.trim().split(/\s+/),s=[],l=0,f=a.length;l<f;l++){var d=a[l].split(/,+/),p=parseFloat(d[0]),h=parseFloat(d[1]),g=3===d.length?parseFloat(d[2]):0;"en"===i.substr(0,2)?s.push(p,h,g):s.push(h,p,g)}return s},e.prototype.readBox_=function(t,e){var r=(0,c.pushParseAndPop)([null],this.BOX_PARSERS_,t,e,this);return(0,n.createOrUpdate)(r[1][0],r[1][1],r[1][3],r[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var r=(0,c.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.outerBoundaryIsParser_=function(t,e){var r=(0,c.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"MultiLineString"===n&&!0===s&&(n="MultiCurve"),(0,c.createElementNS)("http://www.opengis.net/gml",n)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,u=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var l=e.getProperties(),f=[],d=[];for(var p in l){var h=l[p];null!==h&&(f.push(p),d.push(h),p==u||"function"==typeof h.getSimplifiedGeometry?p in i.serializers[o]||(i.serializers[o][p]=(0,c.makeChildAppender)(this.writeGeometryElement,this)):p in i.serializers[o]||(i.serializers[o][p]=(0,c.makeChildAppender)(a.writeStringTextNode)))}var g=(0,s.assign)({},i);g.node=t,(0,c.pushSerializeAndPop)(g,i.serializers,(0,c.makeSimpleNodeFactory)(void 0,o),d,r,f)},e.prototype.writeCurveOrLineString_=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)}else if("Curve"===t.nodeName){var o=(0,c.createElementNS)(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,r))},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();(0,c.pushSerializeAndPop)({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeGeometryElement=function(t,e,r){var n,o=r[r.length-1],a=(0,s.assign)({},o);a.node=t,n=Array.isArray(e)?(0,i.transformExtentWithOptions)(e,o):(0,i.transformGeometryWithOptions)(e,!0,o),(0,c.pushSerializeAndPop)(a,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=(0,c.createElementNS)(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,r){for(var n=r[r.length-1],i=n.hasZ,o=n.srsName,s=e.getCoordinates(),u=s.length,c=new Array(u),l=0;l<u;++l){var f=s[l];c[l]=this.getCoords_(f,o,i)}(0,a.writeStringTextNode)(t,c.join(" "))},e.prototype.writeCurveSegments_=function(t,e,r){var n=(0,c.createElementNS)(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,r)},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();(0,c.pushSerializeAndPop)({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=(0,c.createElementNS)(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),(0,c.createElementNS)(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,r){var n=(0,c.createElementNS)(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r)},e.prototype.writeRing_=function(t,e,r){var n=(0,c.createElementNS)(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,r)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=(0,u.get)(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];r&&(i+=","+(t[2]||0));return i},e.prototype.writePoint_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s);var u=e.getCoordinates(),c=this.getCoords_(u,o,i);(0,a.writeStringTextNode)(s,c)},e.prototype.writeMultiPoint_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();(0,c.pushSerializeAndPop)({node:t,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS_,(0,c.makeSimpleNodeFactory)("pointMember"),a,r,void 0,this)},e.prototype.writePointMember_=function(t,e,r){var n=(0,c.createElementNS)(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,r)},e.prototype.writeLinearRing_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();(0,c.pushSerializeAndPop)({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r))},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];(0,c.pushSerializeAndPop)({node:t},this.ENVELOPE_SERIALIZERS_,c.OBJECT_PROPERTY_NODE_FACTORY,i,r,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return(0,c.createElementNS)("http://www.opengis.net/gml",p[n.nodeName])},e}(o.default);h.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:(0,c.makeReplacer)(h.prototype.readFlatCoordinates_)}},h.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:h.prototype.innerBoundaryIsParser_,outerBoundaryIs:h.prototype.outerBoundaryIsParser_}},h.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:(0,c.makeArrayPusher)(h.prototype.readFlatCoordinates_)}},h.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:(0,c.makeReplacer)(o.default.prototype.readPoint),MultiPoint:(0,c.makeReplacer)(o.default.prototype.readMultiPoint),LineString:(0,c.makeReplacer)(o.default.prototype.readLineString),MultiLineString:(0,c.makeReplacer)(o.default.prototype.readMultiLineString),LinearRing:(0,c.makeReplacer)(o.default.prototype.readLinearRing),Polygon:(0,c.makeReplacer)(o.default.prototype.readPolygon),MultiPolygon:(0,c.makeReplacer)(o.default.prototype.readMultiPolygon),Box:(0,c.makeReplacer)(h.prototype.readBox_)}},h.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:(0,c.makeChildAppender)(h.prototype.writeCurveOrLineString_),MultiCurve:(0,c.makeChildAppender)(h.prototype.writeMultiCurveOrLineString_),Point:(0,c.makeChildAppender)(h.prototype.writePoint_),MultiPoint:(0,c.makeChildAppender)(h.prototype.writeMultiPoint_),LineString:(0,c.makeChildAppender)(h.prototype.writeCurveOrLineString_),MultiLineString:(0,c.makeChildAppender)(h.prototype.writeMultiCurveOrLineString_),LinearRing:(0,c.makeChildAppender)(h.prototype.writeLinearRing_),Polygon:(0,c.makeChildAppender)(h.prototype.writeSurfaceOrPolygon_),MultiPolygon:(0,c.makeChildAppender)(h.prototype.writeMultiSurfaceOrPolygon_),Surface:(0,c.makeChildAppender)(h.prototype.writeSurfaceOrPolygon_),MultiSurface:(0,c.makeChildAppender)(h.prototype.writeMultiSurfaceOrPolygon_),Envelope:(0,c.makeChildAppender)(h.prototype.writeEnvelope)}},h.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:(0,c.makeChildAppender)(h.prototype.writeLineStringOrCurveMember_),curveMember:(0,c.makeChildAppender)(h.prototype.writeLineStringOrCurveMember_)}},h.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:(0,c.makeChildAppender)(h.prototype.writeRing_),innerBoundaryIs:(0,c.makeChildAppender)(h.prototype.writeRing_)}},h.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:(0,c.makeChildAppender)(h.prototype.writePointMember_)}},h.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:(0,c.makeChildAppender)(h.prototype.writeSurfaceOrPolygonMember_),polygonMember:(0,c.makeChildAppender)(h.prototype.writeSurfaceOrPolygonMember_)}},h.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:(0,c.makeChildAppender)(a.writeStringTextNode),upperCorner:(0,c.makeChildAppender)(a.writeStringTextNode)}};var g=h;r.default=g},{"../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./GMLBase.js":"8f14f3315ba94680a34f3fa72cfc106b","./xsd.js":"7518937bcd6f92347c49c8067c3024ce","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../proj.js":"62f54c55d8828c04c9cb79fe6933946b","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],f4b7280d0531d06c8ace578968e0686b:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.and=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(n.default,e))},r.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(m.default,e))},r.not=function(t){return new _.default(t)},r.bbox=function(t,e,r){return new i.default(t,e,r)},r.contains=function(t,e,r){return new o.default(t,e,r)},r.intersects=function(t,e,r){return new l.default(t,e,r)},r.within=function(t,e,r){return new v.default(t,e,r)},r.equalTo=function(t,e,r){return new s.default(t,e,r)},r.notEqualTo=function(t,e,r){return new y.default(t,e,r)},r.lessThan=function(t,e){return new h.default(t,e)},r.lessThanOrEqualTo=function(t,e){return new g.default(t,e)},r.greaterThan=function(t,e){return new u.default(t,e)},r.greaterThanOrEqualTo=function(t,e){return new c.default(t,e)},r.isNull=function(t){return new p.default(t)},r.between=function(t,e,r){return new f.default(t,e,r)},r.like=function(t,e,r,n,i,o){return new d.default(t,e,r,n,i,o)},r.during=function(t,e,r){return new a.default(t,e,r)};var n=b(t("./filter/And.js")),i=b(t("./filter/Bbox.js")),o=b(t("./filter/Contains.js")),a=b(t("./filter/During.js")),s=b(t("./filter/EqualTo.js")),u=b(t("./filter/GreaterThan.js")),c=b(t("./filter/GreaterThanOrEqualTo.js")),l=b(t("./filter/Intersects.js")),f=b(t("./filter/IsBetween.js")),d=b(t("./filter/IsLike.js")),p=b(t("./filter/IsNull.js")),h=b(t("./filter/LessThan.js")),g=b(t("./filter/LessThanOrEqualTo.js")),_=b(t("./filter/Not.js")),y=b(t("./filter/NotEqualTo.js")),m=b(t("./filter/Or.js")),v=b(t("./filter/Within.js"));function b(t){return t&&t.__esModule?t:{default:t}}},{"./filter/And.js":"acc5df2c57f38a663a3a355059c73ad7","./filter/Bbox.js":"8981566566e54524df9fe8929e0b7fed","./filter/Contains.js":"7969a2ef3e316cc28788e0fc37c03a28","./filter/During.js":"fc61906aa2d28e5c527c11f825fc69bc","./filter/EqualTo.js":"205bbc2a29bb6f5504db41652b44ce4b","./filter/GreaterThan.js":"7f8369a6db74707b263b50abd198ec73","./filter/GreaterThanOrEqualTo.js":"0ee5be2c4dbc9583aed36f1087c8cd9a","./filter/Intersects.js":"b45876ee0f533e6de3ae5fb54f01e002","./filter/IsBetween.js":"c426bbfddea45b156c316838221921e0","./filter/IsLike.js":"6e3c811630e5867d79e36c12b3b5eaf9","./filter/IsNull.js":"161236e2a89684a21a561d6e9a21915a","./filter/LessThan.js":"87667e7b33d5f89bed079d573a2638a5","./filter/LessThanOrEqualTo.js":"35acc32f4dc419c6cfd904db64123503","./filter/Not.js":"f9d6e49d9562d648cfca55c05f7871cb","./filter/NotEqualTo.js":"be691df11a7ae5405f19e7242b6d93e4","./filter/Or.js":"63344fd1c04cc8440261301b303182c1","./filter/Within.js":"cfd00e47d78f7e403cf43eed1637ad03"}],acc5df2c57f38a663a3a355059c73ad7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./LogicalNary.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return a(e,t),e}(i.default);r.default=s},{"./LogicalNary.js":"3e2a86639bc8c42d2d36927956783a98"}],"3e2a86639bc8c42d2d36927956783a98":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("../../asserts.js"),o=(n=t("./Filter.js"))&&n.__esModule?n:{default:n};var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e,r){var n=t.call(this,e)||this;return n.conditions=r,(0,i.assert)(n.conditions.length>=2,57),n}return s(e,t),e}(o.default);r.default=u},{"../../asserts.js":"7e662a02bc41c2814316b69c70da50e2","./Filter.js":"38cd13ec80e89e844101e35bf24e1a19"}],"38cd13ec80e89e844101e35bf24e1a19":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(){function t(t){this.tagName_=t}return t.prototype.getTagName=function(){return this.tagName_},t}();r.default=n},{}],"8981566566e54524df9fe8929e0b7fed":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Filter.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n){var i=t.call(this,"BBOX")||this;return i.geometryName=e,i.extent=r,i.srsName=n,i}return a(e,t),e}(i.default);r.default=s},{"./Filter.js":"38cd13ec80e89e844101e35bf24e1a19"}],"7969a2ef3e316cc28788e0fc37c03a28":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Spatial.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n){return t.call(this,"Contains",e,r,n)||this}return a(e,t),e}(i.default);r.default=s},{"./Spatial.js":"d4ab2c82b08b70b4a4b10f7110d544f3"}],d4ab2c82b08b70b4a4b10f7110d544f3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Filter.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.geometryName=r||"the_geom",o.geometry=n,o.srsName=i,o}return a(e,t),e}(i.default);r.default=s},{"./Filter.js":"38cd13ec80e89e844101e35bf24e1a19"}],fc61906aa2d28e5c527c11f825fc69bc:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Comparison.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n){var i=t.call(this,"During",e)||this;return i.begin=r,i.end=n,i}return a(e,t),e}(i.default);r.default=s},{"./Comparison.js":"0559cbdbea6c04b3912185b2886ae1b2"}],"0559cbdbea6c04b3912185b2886ae1b2":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Filter.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r){var n=t.call(this,e)||this;return n.propertyName=r,n}return a(e,t),e}(i.default);r.default=s},{"./Filter.js":"38cd13ec80e89e844101e35bf24e1a19"}],"205bbc2a29bb6f5504db41652b44ce4b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./ComparisonBinary.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n){return t.call(this,"PropertyIsEqualTo",e,r,n)||this}return a(e,t),e}(i.default);r.default=s},{"./ComparisonBinary.js":"2523bf61184fab19e6426df4daa8e511"}],"2523bf61184fab19e6426df4daa8e511":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Comparison.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n,i){var o=t.call(this,e,r)||this;return o.expression=n,o.matchCase=i,o}return a(e,t),e}(i.default);r.default=s},{"./Comparison.js":"0559cbdbea6c04b3912185b2886ae1b2"}],"7f8369a6db74707b263b50abd198ec73":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./ComparisonBinary.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThan",e,r)||this}return a(e,t),e}(i.default);r.default=s},{"./ComparisonBinary.js":"2523bf61184fab19e6426df4daa8e511"}],"0ee5be2c4dbc9583aed36f1087c8cd9a":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./ComparisonBinary.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,r)||this}return a(e,t),e}(i.default);r.default=s},{"./ComparisonBinary.js":"2523bf61184fab19e6426df4daa8e511"}],b45876ee0f533e6de3ae5fb54f01e002:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Spatial.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n){return t.call(this,"Intersects",e,r,n)||this}return a(e,t),e}(i.default);r.default=s},{"./Spatial.js":"d4ab2c82b08b70b4a4b10f7110d544f3"}],c426bbfddea45b156c316838221921e0:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Comparison.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n){var i=t.call(this,"PropertyIsBetween",e)||this;return i.lowerBoundary=r,i.upperBoundary=n,i}return a(e,t),e}(i.default);r.default=s},{"./Comparison.js":"0559cbdbea6c04b3912185b2886ae1b2"}],"6e3c811630e5867d79e36c12b3b5eaf9":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Comparison.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n,i,o,a){var s=t.call(this,"PropertyIsLike",e)||this;return s.pattern=r,s.wildCard=void 0!==n?n:"*",s.singleChar=void 0!==i?i:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=a,s}return a(e,t),e}(i.default);r.default=s},{"./Comparison.js":"0559cbdbea6c04b3912185b2886ae1b2"}],"161236e2a89684a21a561d6e9a21915a":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Comparison.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e){return t.call(this,"PropertyIsNull",e)||this}return a(e,t),e}(i.default);r.default=s},{"./Comparison.js":"0559cbdbea6c04b3912185b2886ae1b2"}],"87667e7b33d5f89bed079d573a2638a5":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./ComparisonBinary.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r){return t.call(this,"PropertyIsLessThan",e,r)||this}return a(e,t),e}(i.default);r.default=s},{"./ComparisonBinary.js":"2523bf61184fab19e6426df4daa8e511"}],"35acc32f4dc419c6cfd904db64123503":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./ComparisonBinary.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r){return t.call(this,"PropertyIsLessThanOrEqualTo",e,r)||this}return a(e,t),e}(i.default);r.default=s},{"./ComparisonBinary.js":"2523bf61184fab19e6426df4daa8e511"}],f9d6e49d9562d648cfca55c05f7871cb:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Filter.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e){var r=t.call(this,"Not")||this;return r.condition=e,r}return a(e,t),e}(i.default);r.default=s},{"./Filter.js":"38cd13ec80e89e844101e35bf24e1a19"}],be691df11a7ae5405f19e7242b6d93e4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./ComparisonBinary.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n){return t.call(this,"PropertyIsNotEqualTo",e,r,n)||this}return a(e,t),e}(i.default);r.default=s},{"./ComparisonBinary.js":"2523bf61184fab19e6426df4daa8e511"}],"63344fd1c04cc8440261301b303182c1":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./LogicalNary.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return a(e,t),e}(i.default);r.default=s},{"./LogicalNary.js":"3e2a86639bc8c42d2d36927956783a98"}],cfd00e47d78f7e403cf43eed1637ad03:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./Spatial.js"))&&n.__esModule?n:{default:n};var o,a=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n){return t.call(this,"Within",e,r,n)||this}return a(e,t),e}(i.default);r.default=s},{"./Spatial.js":"d4ab2c82b08b70b4a4b10f7110d544f3"}],ac226baebccf96d1e1874944827aa6b9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=g(t("../Feature.js")),i=t("./Feature.js"),o=g(t("./TextFeature.js")),a=g(t("../geom/GeometryCollection.js")),s=g(t("../geom/GeometryType.js")),u=g(t("../geom/GeometryLayout.js")),c=g(t("../geom/LineString.js")),l=g(t("../geom/MultiLineString.js")),f=g(t("../geom/MultiPoint.js")),d=g(t("../geom/MultiPolygon.js")),p=g(t("../geom/Point.js")),h=g(t("../geom/Polygon.js"));function g(t){return t&&t.__esModule?t:{default:t}}var _,y=(_=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),m={POINT:p.default,LINESTRING:c.default,POLYGON:h.default,MULTIPOINT:f.default,MULTILINESTRING:l.default,MULTIPOLYGON:d.default},v="EMPTY",b="Z",E="M",S=1,j=2,O=3,P=4,T=5,x=6,C={};for(var I in s.default)C[I]=s.default[I].toUpperCase();var w=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),r=this.index_,n=e;if("("==e)t=j;else if(","==e)t=T;else if(")"==e)t=O;else if(this.isNumeric_(e)||"-"==e)t=P,n=this.readNumber_();else if(this.isAlpha_(e))t=S,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=x}return{position:r,value:n,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,r=!1,n=!1;do{"."==t?r=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,r)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),R=function(){function t(t){this.lexer_=t,this.token_,this.layout_=u.default.XY}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=u.default.XY,e=this.token_;if(this.isTokenType(S)){var r=e.value;r===b?t=u.default.XYZ:r===E?t=u.default.XYM:"ZM"===r&&(t=u.default.XYZM),t!==u.default.XY&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(j)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(T));if(this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(j)){var t=this.parsePoint_();if(this.match(O))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(j)){var t=this.parsePointList_();if(this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(j)){var t=this.parseLineStringTextList_();if(this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){if(this.match(j)){var t=void 0;if(t=this.token_.type==j?this.parsePointTextList_():this.parsePointList_(),this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(j)){var t=this.parseLineStringTextList_();if(this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(j)){var t=this.parsePolygonTextList_();if(this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,r=0;r<e;++r){var n=this.token_;if(!this.match(P))break;t.push(n.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(T);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(T);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(T);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(T);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(S)&&this.token_.value==v;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(S)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var r=this.parseGeometryCollectionText_();return new a.default(r)}var n=m[e];if(!n)throw new Error("Invalid geometry type: "+e);var i=void 0;switch(e){case"POINT":i=this.parsePointText_();break;case"LINESTRING":i=this.parseLineStringText_();break;case"POLYGON":i=this.parsePolygonText_();break;case"MULTIPOINT":i=this.parseMultiPointText_();break;case"MULTILINESTRING":i=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":i=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return i||(i=n===m.POINT?[NaN,NaN]:[]),new n(i,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),N=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.splitCollection_=void 0!==n.splitCollection&&n.splitCollection,r}return y(e,t),e.prototype.parse_=function(t){var e=new w(t);return new R(e).parse()},e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);if(r){var i=new n.default;return i.setGeometry(r),i}return null},e.prototype.readFeaturesFromText=function(t,e){for(var r=[],i=this.readGeometryFromText(t,e),o=[],a=0,u=(r=this.splitCollection_&&i.getType()==s.default.GEOMETRY_COLLECTION?i.getGeometriesArray():[i]).length;a<u;++a){var c=new n.default;c.setGeometry(r[a]),o.push(c)}return o},e.prototype.readGeometryFromText=function(t,e){var r=this.parse_(t);return r?(0,i.transformGeometryWithOptions)(r,!1,e):null},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(t[n].getGeometry());var o=new a.default(r);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return D((0,i.transformGeometryWithOptions)(t,!0,e))},e}(o.default);function M(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function L(t){for(var e=t.getCoordinates(),r=[],n=0,i=e.length;n<i;++n)r.push(e[n].join(" "));return r.join(",")}function A(t){for(var e=[],r=t.getLinearRings(),n=0,i=r.length;n<i;++n)e.push("("+L(r[n])+")");return e.join(",")}var F={Point:M,LineString:L,Polygon:A,MultiPoint:function(t){for(var e=[],r=t.getPoints(),n=0,i=r.length;n<i;++n)e.push("("+M(r[n])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],r=t.getLineStrings(),n=0,i=r.length;n<i;++n)e.push("("+L(r[n])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],r=t.getPolygons(),n=0,i=r.length;n<i;++n)e.push("("+A(r[n])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],r=t.getGeometries(),n=0,i=r.length;n<i;++n)e.push(D(r[n]));return e.join(",")}};function D(t){var e=t.getType(),r=(0,F[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var n=function(t){var e=t.getLayout(),r="";return e!==u.default.XYZ&&e!==u.default.XYZM||(r+=b),e!==u.default.XYM&&e!==u.default.XYZM||(r+=E),r}(t);n.length>0&&(e+=" "+n)}return 0===r.length?e+" "+v:e+"("+r+")"}var k=N;r.default=k},{"../Feature.js":"065457fce6f6e7f0c7834d8e02c7c1b3","./Feature.js":"06f1ec3e33740e0e95d83eeba81c2628","./TextFeature.js":"996d9078ce8142005574e8408d2a7091","../geom/GeometryCollection.js":"ee4ef29a7926f6500b27a04087228ab9","../geom/GeometryType.js":"e4c2c0976c836ea34084f8f280358bdb","../geom/GeometryLayout.js":"717cb51d6eb73e3534dd52cdc7ceabd3","../geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","../geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","../geom/MultiPoint.js":"add6c8112f59ed049722d4a2b686edc3","../geom/MultiPolygon.js":"ca93ec74bdb7f70f03ca08d5bb711551","../geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","../geom/Polygon.js":"24ebc1624175b8546601860191490c20"}],"2a6683663dd3802c50bcb9b8260d076b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=t("./XLink.js"),o=(n=t("./XML.js"))&&n.__esModule?n:{default:n},a=t("./xsd.js"),s=t("../xml.js");var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=[null,"http://www.opengis.net/wms"],f=(0,s.makeStructureNS)(l,{Service:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},h,t,e)}),Capability:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},d,t,e)})}),d=(0,s.makeStructureNS)(l,{Request:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},S,t,e)}),Exception:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)([],m,t,e)}),Layer:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},v,t,e)})}),p=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return c(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var e=(0,s.pushParseAndPop)({version:this.version},f,t,[]);return e||null},e}(o.default),h=(0,s.makeStructureNS)(l,{Name:(0,s.makeObjectPropertySetter)(a.readString),Title:(0,s.makeObjectPropertySetter)(a.readString),Abstract:(0,s.makeObjectPropertySetter)(a.readString),KeywordList:(0,s.makeObjectPropertySetter)(N),OnlineResource:(0,s.makeObjectPropertySetter)(i.readHref),ContactInformation:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},g,t,e)}),Fees:(0,s.makeObjectPropertySetter)(a.readString),AccessConstraints:(0,s.makeObjectPropertySetter)(a.readString),LayerLimit:(0,s.makeObjectPropertySetter)(a.readNonNegativeInteger),MaxWidth:(0,s.makeObjectPropertySetter)(a.readNonNegativeInteger),MaxHeight:(0,s.makeObjectPropertySetter)(a.readNonNegativeInteger)}),g=(0,s.makeStructureNS)(l,{ContactPersonPrimary:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},_,t,e)}),ContactPosition:(0,s.makeObjectPropertySetter)(a.readString),ContactAddress:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},y,t,e)}),ContactVoiceTelephone:(0,s.makeObjectPropertySetter)(a.readString),ContactFacsimileTelephone:(0,s.makeObjectPropertySetter)(a.readString),ContactElectronicMailAddress:(0,s.makeObjectPropertySetter)(a.readString)}),_=(0,s.makeStructureNS)(l,{ContactPerson:(0,s.makeObjectPropertySetter)(a.readString),ContactOrganization:(0,s.makeObjectPropertySetter)(a.readString)}),y=(0,s.makeStructureNS)(l,{AddressType:(0,s.makeObjectPropertySetter)(a.readString),Address:(0,s.makeObjectPropertySetter)(a.readString),City:(0,s.makeObjectPropertySetter)(a.readString),StateOrProvince:(0,s.makeObjectPropertySetter)(a.readString),PostCode:(0,s.makeObjectPropertySetter)(a.readString),Country:(0,s.makeObjectPropertySetter)(a.readString)}),m=(0,s.makeStructureNS)(l,{Format:(0,s.makeArrayPusher)(a.readString)}),v=(0,s.makeStructureNS)(l,{Name:(0,s.makeObjectPropertySetter)(a.readString),Title:(0,s.makeObjectPropertySetter)(a.readString),Abstract:(0,s.makeObjectPropertySetter)(a.readString),KeywordList:(0,s.makeObjectPropertySetter)(N),CRS:(0,s.makeObjectPropertyPusher)(a.readString),EX_GeographicBoundingBox:(0,s.makeObjectPropertySetter)(function(t,e){var r=(0,s.pushParseAndPop)({},E,t,e);if(!r)return;var n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,a=r.northBoundLatitude;if(void 0===n||void 0===i||void 0===o||void 0===a)return;return[n,i,o,a]}),BoundingBox:(0,s.makeObjectPropertyPusher)(function(t,e){var r=[(0,a.readDecimalString)(t.getAttribute("minx")),(0,a.readDecimalString)(t.getAttribute("miny")),(0,a.readDecimalString)(t.getAttribute("maxx")),(0,a.readDecimalString)(t.getAttribute("maxy"))],n=[(0,a.readDecimalString)(t.getAttribute("resx")),(0,a.readDecimalString)(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:r,res:n}}),Dimension:(0,s.makeObjectPropertyPusher)(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:(0,a.readBooleanString)(t.getAttribute("multipleValues")),nearestValue:(0,a.readBooleanString)(t.getAttribute("nearestValue")),current:(0,a.readBooleanString)(t.getAttribute("current")),values:(0,a.readString)(t)}}),Attribution:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},b,t,e)}),AuthorityURL:(0,s.makeObjectPropertyPusher)(function(t,e){var r=I(t,e);if(r)return r.name=t.getAttribute("name"),r;return}),Identifier:(0,s.makeObjectPropertyPusher)(a.readString),MetadataURL:(0,s.makeObjectPropertyPusher)(function(t,e){var r=I(t,e);if(r)return r.type=t.getAttribute("type"),r;return}),DataURL:(0,s.makeObjectPropertyPusher)(I),FeatureListURL:(0,s.makeObjectPropertyPusher)(I),Style:(0,s.makeObjectPropertyPusher)(function(t,e){return(0,s.pushParseAndPop)({},T,t,e)}),MinScaleDenominator:(0,s.makeObjectPropertySetter)(a.readDecimal),MaxScaleDenominator:(0,s.makeObjectPropertySetter)(a.readDecimal),Layer:(0,s.makeObjectPropertyPusher)(function(t,e){var r=e[e.length-1],n=(0,s.pushParseAndPop)({},v,t,e);if(!n)return;var i=(0,a.readBooleanString)(t.getAttribute("queryable"));void 0===i&&(i=r.queryable);n.queryable=void 0!==i&&i;var o=(0,a.readNonNegativeIntegerString)(t.getAttribute("cascaded"));void 0===o&&(o=r.cascaded);n.cascaded=o;var u=(0,a.readBooleanString)(t.getAttribute("opaque"));void 0===u&&(u=r.opaque);n.opaque=void 0!==u&&u;var c=(0,a.readBooleanString)(t.getAttribute("noSubsets"));void 0===c&&(c=r.noSubsets);n.noSubsets=void 0!==c&&c;var l=(0,a.readDecimalString)(t.getAttribute("fixedWidth"));l||(l=r.fixedWidth);n.fixedWidth=l;var f=(0,a.readDecimalString)(t.getAttribute("fixedHeight"));f||(f=r.fixedHeight);n.fixedHeight=f,["Style","CRS","AuthorityURL"].forEach(function(t){if(t in r){var e=n[t]||[];n[t]=e.concat(r[t])}});return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in n)){var e=r[t];n[t]=e}}),n})}),b=(0,s.makeStructureNS)(l,{Title:(0,s.makeObjectPropertySetter)(a.readString),OnlineResource:(0,s.makeObjectPropertySetter)(i.readHref),LogoURL:(0,s.makeObjectPropertySetter)(R)}),E=(0,s.makeStructureNS)(l,{westBoundLongitude:(0,s.makeObjectPropertySetter)(a.readDecimal),eastBoundLongitude:(0,s.makeObjectPropertySetter)(a.readDecimal),southBoundLatitude:(0,s.makeObjectPropertySetter)(a.readDecimal),northBoundLatitude:(0,s.makeObjectPropertySetter)(a.readDecimal)}),S=(0,s.makeStructureNS)(l,{GetCapabilities:(0,s.makeObjectPropertySetter)(w),GetMap:(0,s.makeObjectPropertySetter)(w),GetFeatureInfo:(0,s.makeObjectPropertySetter)(w)}),j=(0,s.makeStructureNS)(l,{Format:(0,s.makeObjectPropertyPusher)(a.readString),DCPType:(0,s.makeObjectPropertyPusher)(function(t,e){return(0,s.pushParseAndPop)({},O,t,e)})}),O=(0,s.makeStructureNS)(l,{HTTP:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},P,t,e)})}),P=(0,s.makeStructureNS)(l,{Get:(0,s.makeObjectPropertySetter)(I),Post:(0,s.makeObjectPropertySetter)(I)}),T=(0,s.makeStructureNS)(l,{Name:(0,s.makeObjectPropertySetter)(a.readString),Title:(0,s.makeObjectPropertySetter)(a.readString),Abstract:(0,s.makeObjectPropertySetter)(a.readString),LegendURL:(0,s.makeObjectPropertyPusher)(R),StyleSheetURL:(0,s.makeObjectPropertySetter)(I),StyleURL:(0,s.makeObjectPropertySetter)(I)}),x=(0,s.makeStructureNS)(l,{Format:(0,s.makeObjectPropertySetter)(a.readString),OnlineResource:(0,s.makeObjectPropertySetter)(i.readHref)}),C=(0,s.makeStructureNS)(l,{Keyword:(0,s.makeArrayPusher)(a.readString)});function I(t,e){return(0,s.pushParseAndPop)({},x,t,e)}function w(t,e){return(0,s.pushParseAndPop)({},j,t,e)}function R(t,e){var r=I(t,e);if(r){var n=[(0,a.readNonNegativeIntegerString)(t.getAttribute("width")),(0,a.readNonNegativeIntegerString)(t.getAttribute("height"))];return r.size=n,r}}function N(t,e){return(0,s.pushParseAndPop)([],C,t,e)}var M=p;r.default=M},{"./XLink.js":"d7800637286ba2f72c5186c3c2fa1bda","./XML.js":"7ac2587926f3bc4656e1c6f44ca1dce2","./xsd.js":"7518937bcd6f92347c49c8067c3024ce","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],"96d7b891667fafe5b580b0207a1cd399":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../array.js"),i=u(t("./GML2.js")),o=u(t("./XMLFeature.js")),a=t("../obj.js"),s=t("../xml.js");function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureNS_="http://mapserver.gis.umn.edu/mapserver",r.gmlFormat_=new i.default,r.layers_=n.layers?n.layers:null,r}return l(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var r=t.localName,i=[];if(0===t.childNodes.length)return i;if("msGMLOutput"==r)for(var o=0,a=t.childNodes.length;o<a;o++){var u=t.childNodes[o];if(u.nodeType===Node.ELEMENT_NODE){var c=u,l=e[0],f=c.localName.replace("_layer","");if(!this.layers_||(0,n.includes)(this.layers_,f)){var d=f+"_feature";l.featureType=d,l.featureNS=this.featureNS_;var p={};p[d]=(0,s.makeArrayPusher)(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var h=(0,s.makeStructureNS)([l.featureNS,null],p);c.setAttribute("namespaceURI",this.featureNS_);var g=(0,s.pushParseAndPop)([],h,c,e,this.gmlFormat_);g&&(0,n.extend)(i,g)}}}if("FeatureCollection"==r){var _=(0,s.pushParseAndPop)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);_&&(i=_)}return i},e.prototype.readFeaturesFromNode=function(t,e){var r={};return e&&(0,a.assign)(r,this.getReadOptions(t,e)),this.readFeatures_(t,[r])},e}(o.default);r.default=f},{"../array.js":"8f42dda010c04e4c3f5a3f294914ec2a","./GML2.js":"5a3c8af79f21f95f0d5afa8d9cadf9db","./XMLFeature.js":"8ac25dddd1dec15e16c39865ffe055b3","../obj.js":"33baacb9b92cb6097b890ee8b1ee5384","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],"5652310bda530ec913c50bb7d7798880":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("../extent.js"),i=c(t("./OWS.js")),o=t("./XLink.js"),a=c(t("./XML.js")),s=t("./xsd.js"),u=t("../xml.js");function c(t){return t&&t.__esModule?t:{default:t}}var l,f=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=[null,"http://www.opengis.net/wmts/1.0"],p=[null,"http://www.opengis.net/ows/1.1"],h=(0,u.makeStructureNS)(d,{Contents:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},_,t,e)})}),g=function(t){function e(){var e=t.call(this)||this;return e.owsParser_=new i.default,e}return f(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version").trim(),r=this.owsParser_.readFromNode(t);return r?(r.version=e,(r=(0,u.pushParseAndPop)(r,h,t,[]))||null):null},e}(a.default),_=(0,u.makeStructureNS)(d,{Layer:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,u.pushParseAndPop)({},y,t,e)}),TileMatrixSet:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,u.pushParseAndPop)({},O,t,e)})}),y=(0,u.makeStructureNS)(d,{Style:(0,u.makeObjectPropertyPusher)(function(t,e){var r=(0,u.pushParseAndPop)({},m,t,e);if(!r)return;var n="true"===t.getAttribute("isDefault");return r.isDefault=n,r}),Format:(0,u.makeObjectPropertyPusher)(s.readString),TileMatrixSetLink:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,u.pushParseAndPop)({},v,t,e)}),Dimension:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,u.pushParseAndPop)({},S,t,e)}),ResourceURL:(0,u.makeObjectPropertyPusher)(function(t,e){var r=t.getAttribute("format"),n=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};r&&(o.format=r);n&&(o.template=n);i&&(o.resourceType=i);return o})},(0,u.makeStructureNS)(p,{Title:(0,u.makeObjectPropertySetter)(s.readString),Abstract:(0,u.makeObjectPropertySetter)(s.readString),WGS84BoundingBox:(0,u.makeObjectPropertySetter)(function(t,e){var r=(0,u.pushParseAndPop)([],j,t,e);if(2!=r.length)return;return(0,n.boundingExtent)(r)}),Identifier:(0,u.makeObjectPropertySetter)(s.readString)})),m=(0,u.makeStructureNS)(d,{LegendURL:(0,u.makeObjectPropertyPusher)(function(t,e){var r={};return r.format=t.getAttribute("format"),r.href=(0,o.readHref)(t),r})},(0,u.makeStructureNS)(p,{Title:(0,u.makeObjectPropertySetter)(s.readString),Identifier:(0,u.makeObjectPropertySetter)(s.readString)})),v=(0,u.makeStructureNS)(d,{TileMatrixSet:(0,u.makeObjectPropertySetter)(s.readString),TileMatrixSetLimits:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)([],b,t,e)})}),b=(0,u.makeStructureNS)(d,{TileMatrixLimits:(0,u.makeArrayPusher)(function(t,e){return(0,u.pushParseAndPop)({},E,t,e)})}),E=(0,u.makeStructureNS)(d,{TileMatrix:(0,u.makeObjectPropertySetter)(s.readString),MinTileRow:(0,u.makeObjectPropertySetter)(s.readNonNegativeInteger),MaxTileRow:(0,u.makeObjectPropertySetter)(s.readNonNegativeInteger),MinTileCol:(0,u.makeObjectPropertySetter)(s.readNonNegativeInteger),MaxTileCol:(0,u.makeObjectPropertySetter)(s.readNonNegativeInteger)}),S=(0,u.makeStructureNS)(d,{Default:(0,u.makeObjectPropertySetter)(s.readString),Value:(0,u.makeObjectPropertyPusher)(s.readString)},(0,u.makeStructureNS)(p,{Identifier:(0,u.makeObjectPropertySetter)(s.readString)})),j=(0,u.makeStructureNS)(p,{LowerCorner:(0,u.makeArrayPusher)(T),UpperCorner:(0,u.makeArrayPusher)(T)}),O=(0,u.makeStructureNS)(d,{WellKnownScaleSet:(0,u.makeObjectPropertySetter)(s.readString),TileMatrix:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,u.pushParseAndPop)({},P,t,e)})},(0,u.makeStructureNS)(p,{SupportedCRS:(0,u.makeObjectPropertySetter)(s.readString),Identifier:(0,u.makeObjectPropertySetter)(s.readString)})),P=(0,u.makeStructureNS)(d,{TopLeftCorner:(0,u.makeObjectPropertySetter)(T),ScaleDenominator:(0,u.makeObjectPropertySetter)(s.readDecimal),TileWidth:(0,u.makeObjectPropertySetter)(s.readNonNegativeInteger),TileHeight:(0,u.makeObjectPropertySetter)(s.readNonNegativeInteger),MatrixWidth:(0,u.makeObjectPropertySetter)(s.readNonNegativeInteger),MatrixHeight:(0,u.makeObjectPropertySetter)(s.readNonNegativeInteger)},(0,u.makeStructureNS)(p,{Identifier:(0,u.makeObjectPropertySetter)(s.readString)}));function T(t,e){var r=(0,s.readString)(t).split(/\s+/);if(r&&2==r.length){var n=+r[0],i=+r[1];if(!isNaN(n)&&!isNaN(i))return[n,i]}}var x=g;r.default=x},{"../extent.js":"4b9ffd1e5113d2b2115f35ccd7ae494b","./OWS.js":"dc3611ac06e430e80aee9bcef3ef4d2e","./XLink.js":"d7800637286ba2f72c5186c3c2fa1bda","./XML.js":"7ac2587926f3bc4656e1c6f44ca1dce2","./xsd.js":"7518937bcd6f92347c49c8067c3024ce","../xml.js":"0817d09676cef4229f4563c39c1f9ff1"}],c8a571bf1ebb42240925899ebfbd7565:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Geometry",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"GeometryCollection",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"LineString",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"MultiLineString",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"MultiPoint",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"MultiPolygon",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"Polygon",{enumerable:!0,get:function(){return f.default}});var n=d(t("./geom/Circle.js")),i=d(t("./geom/Geometry.js")),o=d(t("./geom/GeometryCollection.js")),a=d(t("./geom/LineString.js")),s=d(t("./geom/MultiLineString.js")),u=d(t("./geom/MultiPoint.js")),c=d(t("./geom/MultiPolygon.js")),l=d(t("./geom/Point.js")),f=d(t("./geom/Polygon.js"));function d(t){return t&&t.__esModule?t:{default:t}}},{"./geom/Circle.js":"04948a964f5038f7dcef46d11d8353eb","./geom/Geometry.js":"cb1f241dba30bfea6138fe8d7d7ce73f","./geom/GeometryCollection.js":"ee4ef29a7926f6500b27a04087228ab9","./geom/LineString.js":"5d6eefef200c67688f4e433510e8c318","./geom/MultiLineString.js":"232c0f187f10187b51922cf90ab97b62","./geom/MultiPoint.js":"add6c8112f59ed049722d4a2b686edc3","./geom/MultiPolygon.js":"ca93ec74bdb7f70f03ca08d5bb711551","./geom/Point.js":"cf6c900ee6e4cda65f7a0e5c229546d6","./geom/Polygon.js":"24ebc1624175b8546601860191490c20"}],ebb1d63c6878d82a9604c9bcd2689af0:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.position=function(t){if(t.get("visible"))return t.get("outside")?o:a},r.shortestLine=function(t){if(t.get("visible"))return t.get("outside")?s:null},r.buffer=r.track=void 0;var n=t("ol/style"),i=new n.Style({image:new n.Circle({radius:10,fill:new n.Fill({color:"#fff"})})}),o=[i,new n.Style({image:new n.Circle({radius:8,fill:new n.Fill({color:"#f54435"})})})],a=[i,new n.Style({image:new n.Circle({radius:8,fill:new n.Fill({color:"#56b151"})})})],s=[new n.Style({stroke:new n.Stroke({color:"#fff",width:8,lineDash:[8,14]})}),new n.Style({stroke:new n.Stroke({color:"#f54435",width:4,lineDash:[8,14]})})],u=[new n.Style({stroke:new n.Stroke({color:"#fff",width:8})}),new n.Style({stroke:new n.Stroke({color:"#3399CCFF",width:4})})];r.track=u;var c=[new n.Style({fill:new n.Fill({color:"#3399CC33"})})];r.buffer=c},{"ol/style":"3dea0a5b0f2e8d036d39f00b3ecf56b5"}],"3dea0a5b0f2e8d036d39f00b3ecf56b5":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Fill",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Icon",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"IconImage",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"RegularShape",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"Stroke",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"Style",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"Text",{enumerable:!0,get:function(){return f.default}});var n=d(t("./style/Circle.js")),i=d(t("./style/Fill.js")),o=d(t("./style/Icon.js")),a=d(t("./style/IconImage.js")),s=d(t("./style/Image.js")),u=d(t("./style/RegularShape.js")),c=d(t("./style/Stroke.js")),l=d(t("./style/Style.js")),f=d(t("./style/Text.js"));function d(t){return t&&t.__esModule?t:{default:t}}},{"./style/Circle.js":"93fbd9ead5c99814e9c5f67ef07464c3","./style/Fill.js":"a869d8160b7ebc75403f3be54b17a332","./style/Icon.js":"7dcc65d0c33e867a07e7d382ffd9942c","./style/IconImage.js":"56cb05f1216850c66808be8f18814927","./style/Image.js":"bc8e873dd5632db289baab9fcddb4751","./style/RegularShape.js":"c64a085fe737ff86ecbeeeb109a1e273","./style/Stroke.js":"34d383bc2f5fa713ba7dc14d6c06c96f","./style/Style.js":"83d3e6a8b05474094d91379cf54baf97","./style/Text.js":"a062decc4252836a4aac93094a0a5c97"}],baa52aaecf491fa840562fd56eefa975:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.view=void 0;var n=t("ol"),i=t("ol/layer"),o=t("ol/source"),a=new n.View({center:[0,0],zoom:0});r.view=a;var s=new n.Map({controls:[],layers:[new i.Tile({preload:1/0,source:new o.TileJSON({url:"https://api.mapbox.com/v4/mapbox.outdoors.json?secure&access_token=".concat("pk.eyJ1IjoiZnJlZGoiLCJhIjoiMndGNGNINCJ9.yG14Tih1Vtuge0hsjL0grA"),crossOrigin:"anonymous"})})],view:a});r.map=s},{ol:"de1fa2d5630a3818f25d7945af164be8","ol/layer":"07ac77b6d0e5d362ff4f6a5805e97e83","ol/source":"f1f6723dd857e499535771c93bd4014b"}],"0f2135edd1c543a75b28a47a15d9525f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBufferCoordinates=function(t,e,r){var n=new i.GeoJSON({featureProjection:e}),a=n.writeGeometryObject(t);return n.readFeature((0,o.default)(a,r/1e3)).getGeometry().getCoordinates()};var n,i=t("ol/format"),o=(n=t("@turf/buffer"))&&n.__esModule?n:{default:n}},{"ol/format":"1f47e0122321da9468197863144a77af","@turf/buffer":"6c111a953c803f07f33cbc584eba2e76"}],"6c111a953c803f07f33cbc584eba2e76":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(t("@turf/center")),i=l(t("@turf/bbox")),o=t("turf-jsts"),a=t("@turf/projection"),s=t("@turf/meta"),u=t("d3-geo"),c=t("@turf/helpers");function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e,r,n){var u,l=t.properties||{},g="Feature"===t.type?t.geometry:t;if("GeometryCollection"===g.type){var _=[];return(0,s.geomEach)(t,function(t){var i=f(t,e,r,n);i&&_.push(i)}),(0,c.featureCollection)(_)}var y=(0,i.default)(t),m=y[1]>50&&y[3]>50;u=m?{type:g.type,coordinates:d(g.coordinates,h(g))}:(0,a.toMercator)(g);var v,b=(new o.GeoJSONReader).read(u),E=(0,c.radiansToLength)((0,c.lengthToRadians)(e,r),"meters"),S=o.BufferOp.bufferOp(b,E);if(!function t(e){if(Array.isArray(e[0]))return t(e[0]);return isNaN(e[0])}((S=(new o.GeoJSONWriter).write(S)).coordinates))return(v=m?{type:S.type,coordinates:p(S.coordinates,h(g))}:(0,a.toWgs84)(S)).geometry?v:(0,c.feature)(v,l)}function d(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return d(t,e)})}function p(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return p(t,e)})}function h(t){var e=(0,n.default)(t).geometry.coordinates.reverse(),r=e.map(function(t){return-t});return(0,u.geoTransverseMercator)().center(e).rotate(r).scale(c.earthRadius)}var g=function(t,e,r){var n=(r=r||{}).units,i=r.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,n=n||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return(0,s.geomEach)(t,function(t){var r=f(t,e,n,i);r&&o.push(r)}),(0,c.featureCollection)(o);case"FeatureCollection":return(0,s.featureEach)(t,function(t){var r=f(t,e,n,i);r&&(0,s.featureEach)(r,function(t){t&&o.push(t)})}),(0,c.featureCollection)(o)}return f(t,e,n,i)};r.default=g},{"@turf/center":"70ed649522e18760bcd0c5f15a0918e9","@turf/bbox":"39e2dea5f442e5fdd4753ce41d3208c3","turf-jsts":"e004624f10eaa73dd522f0bbdbc57dc7","@turf/projection":"d7057f4a8416e25e485de21b64a620a9","@turf/meta":"eb4788e08476e866cdefe386051a557d","d3-geo":"212847a51186817b21908a383a8b88b2","@turf/helpers":"4cdc7dbcb031449a32eda502d00a931f"}],"70ed649522e18760bcd0c5f15a0918e9":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("@turf/bbox"))&&n.__esModule?n:{default:n},o=t("@turf/helpers");var a=function(t,e){if(e=e||{},!(0,o.isObject)(e))throw new Error("options is invalid");var r=e.properties;if(!t)throw new Error("geojson is required");var n=(0,i.default)(t),a=(n[0]+n[2])/2,s=(n[1]+n[3])/2;return(0,o.point)([a,s],r)};r.default=a},{"@turf/bbox":"39e2dea5f442e5fdd4753ce41d3208c3","@turf/helpers":"4cdc7dbcb031449a32eda502d00a931f"}],"39e2dea5f442e5fdd4753ce41d3208c3":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("@turf/meta");var i=function(t){var e=[1/0,1/0,-1/0,-1/0];return(0,n.coordEach)(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e};r.default=i},{"@turf/meta":"eb4788e08476e866cdefe386051a557d"}],eb4788e08476e866cdefe386051a557d:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.coordEach=i,r.coordReduce=function(t,e,r,n){var o=r;return i(t,function(t,n,i,a,s){o=0===n&&void 0===r?t:e(o,t,n,i,a,s)},n),o},r.propEach=o,r.propReduce=function(t,e,r){var n=r;return o(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n},r.featureEach=a,r.featureReduce=function(t,e,r){var n=r;return a(t,function(t,i){n=0===i&&void 0===r?t:e(n,t,i)}),n},r.coordAll=function(t){var e=[];return i(t,function(t){e.push(t)}),e},r.geomEach=s,r.geomReduce=function(t,e,r){var n=r;return s(t,function(t,i,o,a,s){n=0===i&&void 0===r?t:e(n,t,i,o,a,s)}),n},r.flattenEach=u,r.flattenReduce=function(t,e,r){var n=r;return u(t,function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)}),n},r.segmentEach=c,r.segmentReduce=function(t,e,r){var n=r,i=!1;return c(t,function(t,o,a,s,u){n=!1===i&&void 0===r?t:e(n,t,o,a,s,u),i=!0}),n},r.lineEach=l,r.lineReduce=function(t,e,r){var n=r;return l(t,function(t,i,o,a){n=0===i&&void 0===r?t:e(n,t,i,o,a)}),n},r.findSegment=function(t,e){if(e=e||{},!(0,n.isObject)(e))throw new Error("options is invalid");var r,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,r=t.features[i].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var c=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),(0,n.lineString)([c[s],c[s+1]],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),(0,n.lineString)([c[a][s],c[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),(0,n.lineString)([c[o][s],c[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s-1),(0,n.lineString)([c[o][a][s],c[o][a][s+1]],u,e)}throw new Error("geojson is invalid")},r.findPoint=function(t,e){if(e=e||{},!(0,n.isObject)(e))throw new Error("options is invalid");var r,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,r=t.features[i].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var c=r.coordinates;switch(r.type){case"Point":return(0,n.point)(c,u,e);case"MultiPoint":return o<0&&(o=c.length+o),(0,n.point)(c[o],u,e);case"LineString":return s<0&&(s=c.length+s),(0,n.point)(c[s],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),(0,n.point)(c[a][s],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),(0,n.point)(c[o][s],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s),(0,n.point)(c[o][a][s],u,e)}throw new Error("geojson is invalid")};var n=t("@turf/helpers");function i(t,e,r){if(null!==t)for(var n,o,a,s,u,c,l,f,d=0,p=0,h=t.type,g="FeatureCollection"===h,_="Feature"===h,y=g?t.features.length:1,m=0;m<y;m++){u=(f=!!(l=g?t.features[m].geometry:_?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<u;v++){var b=0,E=0;if(null!==(s=f?l.geometries[v]:l)){c=s.coordinates;var S=s.type;switch(d=!r||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===e(c,p,m,b,E))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(!1===e(c[n],p,m,b,E))return!1;p++,"MultiPoint"===S&&b++}"LineString"===S&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(o=0;o<c[n].length-d;o++){if(!1===e(c[n][o],p,m,b,E))return!1;p++}"MultiLineString"===S&&b++,"Polygon"===S&&E++}"Polygon"===S&&b++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for("MultiPolygon"===S&&(E=0),o=0;o<c[n].length;o++){for(a=0;a<c[n][o].length-d;a++){if(!1===e(c[n][o][a],p,m,b,E))return!1;p++}E++}b++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===i(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function s(t,e){var r,n,i,o,a,s,u,c,l,f,d=0,p="FeatureCollection"===t.type,h="Feature"===t.type,g=p?t.features.length:1;for(r=0;r<g;r++){for(s=p?t.features[r].geometry:h?t.geometry:t,c=p?t.features[r].properties:h?t.properties:{},l=p?t.features[r].bbox:h?t.bbox:void 0,f=p?t.features[r].id:h?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,d,c,l,f))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],d,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,c,l,f))return!1;d++}}function u(t,e){s(t,function(t,r,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e((0,n.feature)(t,i,{bbox:o,id:a}),r,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l={type:s,coordinates:t.coordinates[c]};if(!1===e((0,n.feature)(l,i),r,c))return!1}})}function c(t,e){u(t,function(t,r,o){var a=0;if(t.geometry){var s,u=t.geometry.type;if("Point"!==u&&"MultiPoint"!==u)return!1!==i(t,function(i,u,c,l,f){if(void 0!==s){var d=(0,n.lineString)([s,i],t.properties);if(!1===e(d,r,o,f,a))return!1;a++,s=i}else s=i})&&void 0}})}function l(t,e){if(!t)throw new Error("geojson is required");u(t,function(t,r,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,r,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e((0,n.lineString)(a[s],t.properties),r,i,s))return!1}}})}},{"@turf/helpers":"4cdc7dbcb031449a32eda502d00a931f"}],"4cdc7dbcb031449a32eda502d00a931f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.feature=a,r.geometry=function(t,e,r){if(!m(r=r||{}))throw new Error("options is invalid");var n,i=r.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");i&&v(i);switch(t){case"Point":n=s(e).geometry;break;case"LineString":n=c(e).geometry;break;case"Polygon":n=u(e).geometry;break;case"MultiPoint":n=d(e).geometry;break;case"MultiLineString":n=f(e).geometry;break;case"MultiPolygon":n=p(e).geometry;break;default:throw new Error(t+" is invalid")}i&&(n.bbox=i);return n},r.point=s,r.points=function(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return s(t,e)}),r)},r.polygon=u,r.polygons=function(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return u(t,e)}),r)},r.lineString=c,r.lineStrings=function(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return c(t,e)}),r)},r.featureCollection=l,r.multiLineString=f,r.multiPoint=d,r.multiPolygon=p,r.geometryCollection=function(t,e,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return a({type:"GeometryCollection",geometries:t},e,r)},r.round=function(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},r.radiansToLength=h,r.lengthToRadians=g,r.lengthToDegrees=function(t,e){return _(g(t,e))},r.bearingToAzimuth=function(t){if(null==t)throw new Error("bearing is required");var e=t%360;e<0&&(e+=360);return e},r.radiansToDegrees=_,r.degreesToRadians=function(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180},r.convertLength=function(t,e,r){if(null==t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return h(g(t,e),r||"kilometers")},r.convertArea=function(t,e,r){if(null==t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var n=o[e||"meters"];if(!n)throw new Error("invalid original units");var i=o[r||"kilometers"];if(!i)throw new Error("invalid final units");return t/n*i},r.isNumber=y,r.isObject=m,r.validateBBox=v,r.validateId=b,r.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},r.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},r.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},r.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},r.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},r.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},r.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")},r.areaFactors=r.unitsFactors=r.factors=r.earthRadius=void 0;r.earthRadius=6371008.8;var n={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};r.factors=n;var i={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/6371008.8,degrees:1/111325};r.unitsFactors=i;var o={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function a(t,e,r){if(!m(r=r||{}))throw new Error("options is invalid");var n=r.bbox,i=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&v(n),i&&b(i);var o={type:"Feature"};return i&&(o.id=i),n&&(o.bbox=n),o.properties=e||{},o.geometry=t,o}function s(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!y(t[0])||!y(t[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:t},e,r)}function u(t,e,r){if(!t)throw new Error("coordinates is required");for(var n=0;n<t.length;n++){var i=t[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++){if(0===n&&0===o&&!y(i[0][0])||!y(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}}return a({type:"Polygon",coordinates:t},e,r)}function c(t,e,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!y(t[0][1])||!y(t[0][1]))throw new Error("coordinates must contain numbers");return a({type:"LineString",coordinates:t},e,r)}function l(t,e){if(!m(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&v(r),n&&b(n);var i={type:"FeatureCollection"};return n&&(i.id=n),r&&(i.bbox=r),i.features=t,i}function f(t,e,r){if(!t)throw new Error("coordinates is required");return a({type:"MultiLineString",coordinates:t},e,r)}function d(t,e,r){if(!t)throw new Error("coordinates is required");return a({type:"MultiPoint",coordinates:t},e,r)}function p(t,e,r){if(!t)throw new Error("coordinates is required");return a({type:"MultiPolygon",coordinates:t},e,r)}function h(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=n[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t*r}function g(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=n[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t/r}function _(t){if(null==t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function y(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function m(t){return!!t&&t.constructor===Object}function v(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!y(t))throw new Error("bbox must only contain numbers")})}function b(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}r.areaFactors=o},{}],e004624f10eaa73dd522f0bbdbc57dc7:[function(t,e,r){!function(t,n){n("object"==typeof r&&void 0!==e?r:t.jsts={})}(this,function(t){"use strict";function e(){}function r(t){this.message=t||""}function n(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?Lt:t.color}function s(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function l(t){return null===t?null:t.right}function f(){this.root_=null,this.size_=0}function d(){}function p(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function h(){}function g(t){this.message=t||""}function _(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),r=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0;n=n<0?Math.max(r+n,0):Math.min(n,r);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:r;for(i=i<0?Math.max(r+arguments[2],0):Math.min(i,r);n<i;)e[n]=t,++n;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var y=function(){};y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(t,e,r){return Math.abs(t-e)<=r};var m=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),v=function(){},b={MAX_VALUE:{configurable:!0}};v.isNaN=function(t){return Number.isNaN(t)},v.doubleToLongBits=function(t){return t},v.longBitsToDouble=function(t){return t},v.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(v,b);var E=function(){},S=function(){},j=function(){},O=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},P={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};O.prototype.setOrdinate=function(t,e){switch(t){case O.X:this.x=e;break;case O.Y:this.y=e;break;case O.Z:this.z=e;break;default:throw new m("Invalid ordinate index: "+t)}},O.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!y.equalsWithTolerance(this.x,e.x,r)&&!!y.equalsWithTolerance(this.y,e.y,r)}},O.prototype.getOrdinate=function(t){switch(t){case O.X:return this.x;case O.Y:return this.y;case O.Z:return this.z}throw new m("Invalid ordinate index: "+t)},O.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||v.isNaN(this.z))&&v.isNaN(t.z)},O.prototype.equals=function(t){return t instanceof O&&this.equals2D(t)},O.prototype.equalInZ=function(t,e){return y.equalsWithTolerance(this.z,t.z,e)},O.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},O.prototype.clone=function(){},O.prototype.copy=function(){return new O(this)},O.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},O.prototype.distance3D=function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+r*r+n*n)},O.prototype.distance=function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},O.prototype.hashCode=function(){var t=17;return 37*(t=37*t+O.hashCode(this.x))+O.hashCode(this.y)},O.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},O.prototype.interfaces_=function(){return[E,S,e]},O.prototype.getClass=function(){return O},O.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=v.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},P.DimensionalComparator.get=function(){return T},P.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},P.NULL_ORDINATE.get=function(){return v.NaN},P.X.get=function(){return 0},P.Y.get=function(){return 1},P.Z.get=function(){return 2},Object.defineProperties(O,P);var T=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new m("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};T.prototype.compare=function(t,e){var r=t,n=e,i=T.compare(r.x,n.x);if(0!==i)return i;var o=T.compare(r.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:T.compare(r.z,n.z)},T.prototype.interfaces_=function(){return[j]},T.prototype.getClass=function(){return T},T.compare=function(t,e){return t<e?-1:t>e?1:v.isNaN(t)?v.isNaN(e)?0:-1:v.isNaN(e)?1:0};var x=function(){};x.prototype.create=function(){},x.prototype.interfaces_=function(){return[]},x.prototype.getClass=function(){return x};var C=function(){},I={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C},C.toLocationSymbol=function(t){switch(t){case C.EXTERIOR:return"e";case C.BOUNDARY:return"b";case C.INTERIOR:return"i";case C.NONE:return"-"}throw new m("Unknown location value: "+t)},I.INTERIOR.get=function(){return 0},I.BOUNDARY.get=function(){return 1},I.EXTERIOR.get=function(){return 2},I.NONE.get=function(){return-1},Object.defineProperties(C,I);var w=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},R=function(){},N={LOG_10:{configurable:!0}};R.prototype.interfaces_=function(){return[]},R.prototype.getClass=function(){return R},R.log10=function(t){var e=Math.log(t);return v.isInfinite(e)?e:v.isNaN(e)?e:e/R.LOG_10},R.min=function(t,e,r,n){var i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i},R.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],i=arguments[1],o=arguments[2];return n<i?i:n>o?o:n}},R.wrap=function(t,e){return t<0?e- -t%e:t%e},R.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=t;return e>n&&(n=e),r>n&&(n=r),n}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},R.average=function(t,e){return(t+e)/2},N.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(R,N);var M=function(t){this.str=t};M.prototype.append=function(t){this.str+=t},M.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},M.prototype.toString=function(t){return this.str};var L=function(t){this.value=t};L.prototype.intValue=function(){return this.value},L.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},L.isNaN=function(t){return Number.isNaN(t)};var A=function(){};A.isWhitespace=function(t){return t<=32&&t>=0||127===t},A.toUpperCase=function(t){return t.toUpperCase()};var F=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}else if("string"==typeof arguments[0]){var n=arguments[0];t.call(this,t.parse(n))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},D={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};F.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},F.prototype.extractSignificantDigits=function(t,e){var r=this.abs(),n=F.magnitude(r._hi),i=F.TEN.pow(n);(r=r.divide(i)).gt(F.TEN)?(r=r.divide(F.TEN),n+=1):r.lt(F.ONE)&&(r=r.multiply(F.TEN),n-=1);for(var o=n+1,a=new M,s=F.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var c=Math.trunc(r._hi);if(c<0)break;var l=!1,f=0;c>9?(l=!0,f="9"):f="0"+c,a.append(f),r=r.subtract(F.valueOf(c)).multiply(F.TEN),l&&r.selfAdd(F.TEN);var d=!0,p=F.magnitude(r._hi);if(p<0&&Math.abs(p)>=s-u&&(d=!1),!d)break}return e[0]=n,a.toString()},F.prototype.sqr=function(){return this.multiply(this)},F.prototype.doubleValue=function(){return this._hi+this._lo},F.prototype.subtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},F.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},F.prototype.isZero=function(){return 0===this._hi&&0===this._lo},F.prototype.selfSubtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},F.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},F.prototype.min=function(t){return this.le(t)?this:t},F.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null,l=null,f=null;return u=this._hi/r,f=(i=(c=F.SPLIT*u)-(i=c-u))*(a=(f=F.SPLIT*r)-(a=f-r))-(l=u*r)+i*(s=r-a)+(o=u-i)*a+o*s,f=u+(c=(this._hi-l-f+this._lo-u*n)/r),this._hi=f,this._lo=u-f+c,this}},F.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},F.prototype.divide=function(){if(arguments[0]instanceof F){var t=arguments[0],e=null,r=null,n=null,i=null,o=null,a=null,s=null,u=null;return r=(o=this._hi/t._hi)-(e=(a=F.SPLIT*o)-(e=a-o)),u=e*(n=(u=F.SPLIT*t._hi)-(n=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-n)+r*n+r*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new F(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return v.isNaN(c)?F.createNaN():F.copy(this).selfDivide(c,0)}},F.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},F.prototype.pow=function(t){if(0===t)return F.valueOf(1);var e=new F(this),r=F.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r},F.prototype.ceil=function(){if(this.isNaN())return F.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new F(t,e)},F.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},F.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},F.prototype.setValue=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},F.prototype.max=function(t){return this.ge(t)?this:t},F.prototype.sqrt=function(){if(this.isZero())return F.valueOf(0);if(this.isNegative())return F.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=F.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)},F.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],r=null,n=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),n=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(r=i+s)),this._hi=r+n,this._lo=n+(r-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,f=null,d=null,p=null,h=null,g=null,_=null;p=this._hi+u,f=this._lo+c,h=p-(g=p-this._hi),d=f-(_=f-this._lo);var y=(l=p+(g=(h=u-g+(this._hi-h))+f))+(g=(d=c-_+(this._lo-d))+(g+(p-l))),m=g+(l-y);return this._hi=y,this._lo=m,this}},F.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null;i=(u=F.SPLIT*this._hi)-this._hi,c=F.SPLIT*r,i=u-i,o=this._hi-i,a=c-r;var l=(u=this._hi*r)+(c=i*(a=c-a)-u+i*(s=r-a)+o*a+o*s+(this._hi*n+this._lo*r)),f=c+(i=u-l);return this._hi=l,this._lo=f,this}},F.prototype.selfSqr=function(){return this.selfMultiply(this)},F.prototype.floor=function(){if(this.isNaN())return F.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new F(t,e)},F.prototype.negate=function(){return this.isNaN()?this:new F(-this._hi,-this._lo)},F.prototype.clone=function(){},F.prototype.multiply=function(){if(arguments[0]instanceof F){var t=arguments[0];return t.isNaN()?F.createNaN():F.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return v.isNaN(e)?F.createNaN():F.copy(this).selfMultiply(e,0)}},F.prototype.isNaN=function(){return v.isNaN(this._hi)},F.prototype.intValue=function(){return Math.trunc(this._hi)},F.prototype.toString=function(){var t=F.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},F.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+F.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var o=n-r.length;i=r+F.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},F.prototype.reciprocal=function(){var t,e,r,n,i=null,o=null,a=null,s=null;t=(r=1/this._hi)-(i=(a=F.SPLIT*r)-(i=a-r)),o=(s=F.SPLIT*this._hi)-this._hi;var u=r+(a=(1-(n=r*this._hi)-(s=i*(o=s-o)-n+i*(e=this._hi-o)+t*o+t*e)-r*this._lo)/this._hi);return new F(u,r-u+a)},F.prototype.toSciNotation=function(){if(this.isZero())return F.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=F.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new Error("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n},F.prototype.abs=function(){return this.isNaN()?F.NaN:this.isNegative()?this.negate():new F(this)},F.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},F.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},F.prototype.add=function(){if(arguments[0]instanceof F){var t=arguments[0];return F.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return F.copy(this).selfAdd(e)}},F.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof F){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._hi=r,this._lo=n}},F.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},F.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},F.prototype.trunc=function(){return this.isNaN()?F.NaN:this.isPositive()?this.floor():this.ceil()},F.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},F.prototype.interfaces_=function(){return[e,E,S]},F.prototype.getClass=function(){return F},F.sqr=function(t){return F.valueOf(t).selfMultiply(t)},F.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return F.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new F(e)}},F.sqrt=function(t){return F.valueOf(t).sqrt()},F.parse=function(t){for(var e=0,r=t.length;A.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<r){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}for(var o=new F,a=0,s=0,u=0;!(e>=r);){var c=t.charAt(e);if(e++,A.isDigit(c)){var l=c-"0";o.selfMultiply(F.TEN),o.selfAdd(l),a++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(e);try{u=L.parseInt(f)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+f+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var d=o,p=a-s-u;if(0===p)d=o;else if(p>0){var h=F.TEN.pow(p);d=o.divide(h)}else if(p<0){var g=F.TEN.pow(-p);d=o.multiply(g)}return n?d.negate():d},F.createNaN=function(){return new F(v.NaN,v.NaN)},F.copy=function(t){return new F(t)},F.magnitude=function(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n},F.stringOfChar=function(t,e){for(var r=new M,n=0;n<e;n++)r.append(t);return r.toString()},D.PI.get=function(){return new F(3.141592653589793,12246467991473532e-32)},D.TWO_PI.get=function(){return new F(6.283185307179586,24492935982947064e-32)},D.PI_2.get=function(){return new F(1.5707963267948966,6123233995736766e-32)},D.E.get=function(){return new F(2.718281828459045,14456468917292502e-32)},D.NaN.get=function(){return new F(v.NaN,v.NaN)},D.EPS.get=function(){return 123259516440783e-46},D.SPLIT.get=function(){return 134217729},D.MAX_PRINT_DIGITS.get=function(){return 32},D.TEN.get=function(){return F.valueOf(10)},D.ONE.get=function(){return F.valueOf(1)},D.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},D.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(F,D);var k=function(){},G={DP_SAFE_EPSILON:{configurable:!0}};k.prototype.interfaces_=function(){return[]},k.prototype.getClass=function(){return k},k.orientationIndex=function(t,e,r){var n=k.orientationIndexFilter(t,e,r);if(n<=1)return n;var i=F.valueOf(e.x).selfAdd(-t.x),o=F.valueOf(e.y).selfAdd(-t.y),a=F.valueOf(r.x).selfAdd(-e.x),s=F.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},k.signOfDet2x2=function(t,e,r,n){return t.multiply(n).selfSubtract(e.multiply(r)).signum()},k.intersection=function(t,e,r,n){var i=F.valueOf(n.y).selfSubtract(r.y).selfMultiply(F.valueOf(e.x).selfSubtract(t.x)),o=F.valueOf(n.x).selfSubtract(r.x).selfMultiply(F.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=F.valueOf(n.x).selfSubtract(r.x).selfMultiply(F.valueOf(t.y).selfSubtract(r.y)),u=F.valueOf(n.y).selfSubtract(r.y).selfMultiply(F.valueOf(t.x).selfSubtract(r.x)),c=s.subtract(u).selfDivide(a).doubleValue(),l=F.valueOf(t.x).selfAdd(F.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=F.valueOf(e.x).selfSubtract(t.x).selfMultiply(F.valueOf(t.y).selfSubtract(r.y)),d=F.valueOf(e.y).selfSubtract(t.y).selfMultiply(F.valueOf(t.x).selfSubtract(r.x)),p=f.subtract(d).selfDivide(a).doubleValue(),h=F.valueOf(r.y).selfAdd(F.valueOf(n.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new O(l,h)},k.orientationIndexFilter=function(t,e,r){var n=null,i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),a=i-o;if(i>0){if(o<=0)return k.signum(a);n=i+o}else{if(!(i<0))return k.signum(a);if(o>=0)return k.signum(a);n=-i-o}var s=k.DP_SAFE_EPSILON*n;return a>=s||-a>=s?k.signum(a):2},k.signum=function(t){return t>0?1:t<0?-1:0},G.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(k,G);var U=function(){},B={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};B.X.get=function(){return 0},B.Y.get=function(){return 1},B.Z.get=function(){return 2},B.M.get=function(){return 3},U.prototype.setOrdinate=function(t,e,r){},U.prototype.size=function(){},U.prototype.getOrdinate=function(t,e){},U.prototype.getCoordinate=function(){},U.prototype.getCoordinateCopy=function(t){},U.prototype.getDimension=function(){},U.prototype.getX=function(t){},U.prototype.clone=function(){},U.prototype.expandEnvelope=function(t){},U.prototype.copy=function(){},U.prototype.getY=function(t){},U.prototype.toCoordinateArray=function(){},U.prototype.interfaces_=function(){return[S]},U.prototype.getClass=function(){return U},Object.defineProperties(U,B);var z=function(){},V=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(z),Y=function(){};Y.arraycopy=function(t,e,r,n,i){for(var o=0,a=e;a<e+i;a++)r[n+o]=t[a],o++},Y.getProperty=function(t){return{"line.separator":"\n"}[t]};var X=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1];this.x=r,this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof O&&arguments[1]instanceof O){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var f=arguments[0],d=arguments[1],p=arguments[2],h=arguments[3],g=f.y-d.y,_=d.x-f.x,y=f.x*d.y-d.x*f.y,m=p.y-h.y,v=h.x-p.x,b=p.x*h.y-h.x*p.y;this.x=_*b-v*y,this.y=m*y-g*b,this.w=g*v-m*_}};X.prototype.getY=function(){var t=this.y/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new V;return t},X.prototype.getX=function(){var t=this.x/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new V;return t},X.prototype.getCoordinate=function(){var t=new O;return t.x=this.getX(),t.y=this.getY(),t},X.prototype.interfaces_=function(){return[]},X.prototype.getClass=function(){return X},X.intersection=function(t,e,r,n){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=r.y-n.y,u=n.x-r.x,c=r.x*n.y-n.x*r.y,l=i*u-s*o,f=(o*c-u*a)/l,d=(s*a-i*c)/l;if(v.isNaN(f)||v.isInfinite(f)||v.isNaN(d)||v.isInfinite(d))throw new V;return new O(f,d)};var q=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof O){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},W={serialVersionUID:{configurable:!0}};q.prototype.getArea=function(){return this.getWidth()*this.getHeight()},q.prototype.equals=function(t){if(!(t instanceof q))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},q.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new q;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new q(e,n,r,i)},q.prototype.isNull=function(){return this._maxx<this._minx},q.prototype.getMaxX=function(){return this._maxx},q.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof q){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&r>=this._minx&&r<=this._maxx&&n>=this._miny&&n<=this._maxy}},q.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof q){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof O){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&!(r>this._maxx||r<this._minx||n>this._maxy||n<this._miny)}},q.prototype.getMinY=function(){return this._miny},q.prototype.getMinX=function(){return this._minx},q.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof q){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=n,this._maxy=n):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}},q.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},q.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},q.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},q.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},q.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},q.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},q.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},q.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},q.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},q.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof q){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof O){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.covers(r,n)}},q.prototype.centre=function(){return this.isNull()?null:new O((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},q.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof q){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},q.prototype.getMaxY=function(){return this._maxy},q.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)},q.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+O.hashCode(this._minx))+O.hashCode(this._maxx))+O.hashCode(this._miny))+O.hashCode(this._maxy)},q.prototype.interfaces_=function(){return[E,e]},q.prototype.getClass=function(){return q},q.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),c=Math.min(n.x,i.x),l=Math.max(n.x,i.x);return!(c>u||l<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),c=Math.min(n.y,i.y),l=Math.max(n.y,i.y),c>u||l<s))}},W.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(q,W);var H={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},K=function(t){this.geometryFactory=t||new ye};K.prototype.read=function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var i=H.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=H.emptyTypeStr.exec(t))[2]=void 0),i&&(r=i[1].toLowerCase(),n=i[2],J[r]&&(e=J[r].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},K.prototype.write=function(t){return this.extractGeometry(t)},K.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Z[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+Z[e].apply(this,[t])+")"};var Z={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Z.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Z.point.apply(this,[t._geometries[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Z.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},linearring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Z.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Z.linestring.apply(this,[t._geometries[r]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Z.linestring.apply(this,[t._shell])+")");for(var r=0,n=t._holes.length;r<n;++r)e.push("("+Z.linestring.apply(this,[t._holes[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Z.polygon.apply(this,[t._geometries[r]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push(this.extractGeometry(t._geometries[r]));return e.join(",")}},J={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(H.spaces);return this.geometryFactory.createPoint(new O(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(H.trimParens,"$1"),n.push(J.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(H.spaces),n.push(new O(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(H.spaces),n.push(new O(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,r=t.trim().split(H.parenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(H.trimParens,"$1"),n.push(J.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(n)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,r,n,i,o=t.trim().split(H.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(H.trimParens,"$1"),r=J.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(r._points),0===s?i=n:a.push(n);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,r=t.trim().split(H.doubleParenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(H.trimParens,"$1"),n.push(J.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[],n=0,i=e.length;n<i;++n)r.push(this.read(e[n]));return this.geometryFactory.createGeometryCollection(r)}},Q=function(t){this.parser=new K(t)};Q.prototype.write=function(t){return this.parser.write(t)},Q.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,r;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],r=arguments[2],!e.equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))};var rt=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new O,this._intPt[1]=new O,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},nt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};rt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},rt.prototype.getTopologySummary=function(){var t=new M;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},rt.prototype.computeIntersection=function(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)},rt.prototype.getIntersectionNum=function(){return this._result},rt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},rt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},rt.prototype.setPrecisionModel=function(t){this._precisionModel=t},rt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},rt.prototype.getIntersection=function(t){return this._intPt[t]},rt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},rt.prototype.hasIntersection=function(){return this._result!==rt.NO_INTERSECTION},rt.prototype.getEdgeDistance=function(t,e){return rt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},rt.prototype.isCollinear=function(){return this._result===rt.COLLINEAR_INTERSECTION},rt.prototype.toString=function(){return Q.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Q.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},rt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},rt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},rt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},rt.prototype.interfaces_=function(){return[]},rt.prototype.getClass=function(){return rt},rt.computeEdgeDistance=function(t,e,r){var n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=n>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},rt.nonRobustComputeEdgeDistance=function(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},nt.DONT_INTERSECT.get=function(){return 0},nt.DO_INTERSECT.get=function(){return 1},nt.COLLINEAR.get=function(){return 2},nt.NO_INTERSECTION.get=function(){return 0},nt.POINT_INTERSECTION.get=function(){return 1},nt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(rt,nt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new q(this._inputLines[0][0],this._inputLines[0][1]),r=new q(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2];if(this._isProper=!1,q.intersects(r,n,e)&&0===st.orientationIndex(r,n,e)&&0===st.orientationIndex(n,r,e))return this._isProper=!0,(e.equals(r)||e.equals(n))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,r,n,i){i.x=this.smallestInAbsValue(t.x,e.x,r.x,n.x),i.y=this.smallestInAbsValue(t.y,e.y,r.y,n.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,r,n,i){var o=null;try{o=X.intersection(t,r,n,i)}catch(a){if(!(a instanceof V))throw a;o=e.nearestEndpoint(t,r,n,i)}return o},e.prototype.intersection=function(t,r,n,i){var o=this.intersectionWithNormalization(t,r,n,i);return this.isInSegmentEnvelopes(o)||(o=new O(e.nearestEndpoint(t,r,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,r,n){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(r)<o&&(i=r,o=Math.abs(r)),Math.abs(n)<o&&(i=n),i},e.prototype.checkDD=function(t,e,r,n,i){var o=k.intersection(t,e,r,n),a=this.isInSegmentEnvelopes(o);Y.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&Y.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,r,n){var i=new O(t),o=new O(e),a=new O(r),s=new O(n),u=new O;this.normalizeToEnvCentre(i,o,a,s,u);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,r,n,i){var o=q.intersects(e,r,n),a=q.intersects(e,r,i),s=q.intersects(n,i,e),u=q.intersects(n,i,r);return o&&a?(this._intPt[0]=n,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=n,this._intPt[1]=r,!n.equals(r)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=r,!i.equals(r)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,r,n,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=r.x<n.x?r.x:n.x,l=r.y<n.y?r.y:n.y,f=r.x>n.x?r.x:n.x,d=r.y>n.y?r.y:n.y,p=((o>c?o:c)+(s<f?s:f))/2,h=((a>l?a:l)+(u<d?u:d))/2;i.x=p,i.y=h,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.computeIntersect=function(e,r,n,i){if(this._isProper=!1,!q.intersects(e,r,n,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,r,n),a=st.orientationIndex(e,r,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(n,i,e),u=st.orientationIndex(n,i,r);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,r,n,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:r.equals2D(n)||r.equals2D(i)?this._intPt[0]=r:0===o?this._intPt[0]=new O(n):0===a?this._intPt[0]=new O(i):0===s?this._intPt[0]=new O(e):0===u&&(this._intPt[0]=new O(r))):(this._isProper=!0,this._intPt[0]=this.intersection(e,r,n,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,r,n){var i=t,o=st.distancePointLine(t,r,n),a=st.distancePointLine(e,r,n);return a<o&&(o=a,i=e),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),i},e}(rt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=r.x-e.x,a=r.y-e.y;return ot.signOfDet2x2(n,i,o,a)},ot.signOfDet2x2=function(t,e,r,n){var i=null,o=null,a=null;if(i=1,0===t||0===n)return 0===e||0===r?0:e>0?r>0?-i:i:r>0?i:-i;if(0===e||0===r)return n>0?t>0?i:-i:t>0?-i:i;if(e>0?n>0?e<=n||(i=-i,o=t,t=r,r=o,o=e,e=n,n=o):e<=-n?(i=-i,r=-r,n=-n):(o=t,t=-r,r=o,o=e,e=-n,n=o):n>0?-e<=n?(i=-i,t=-t,e=-e):(o=-t,t=r,r=o,o=-e,e=n,n=o):e>=n?(t=-t,e=-e,r=-r,n=-n):(i=-i,o=-t,t=-r,r=o,o=-e,e=-n,n=o),t>0){if(!(r>0))return i;if(!(t<=r))return i}else{if(r>0)return-i;if(!(t>=r))return-i;i=-i,t=-t,r=-r}for(;;){if((n-=(a=Math.floor(r/t))*e)<0)return-i;if(n>e)return i;if(t>(r-=a*t)+r){if(e<n+n)return i}else{if(e>n+n)return-i;r=t-r,n=e-n,i=-i}if(0===n)return 0===r?0:-i;if(0===r)return i;if((e-=(a=Math.floor(t/r))*n)<0)return i;if(e>n)return-i;if(r>(t-=a*r)+t){if(n<e+e)return-i}else{if(n>e+e)return i;t=r-t,e=n-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ot.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==C.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?C.BOUNDARY:this._crossingCount%2==1?C.INTERIOR:C.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof O&&w(arguments[1],U)){for(var t=arguments[0],e=arguments[1],r=new at(t),n=new O,i=new O,o=1;o<e.size();o++)if(e.getCoordinate(o,n),e.getCoordinate(o-1,i),r.countSegment(n,i),r.isOnSegment())return r.getLocation();return r.getLocation()}if(arguments[0]instanceof O&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new at(a),c=1;c<s.length;c++){var l=s[c],f=s[c-1];if(u.countSegment(l,f),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var st=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,r){return k.orientationIndex(t,e,r)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,r=t[0].x,n=1;n<t.length-1;n++){var i=t[n].x-r,o=t[n+1].y;e+=i*(t[n-1].y-o)}return e/2}if(w(arguments[0],U)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new O,c=new O,l=new O;a.getCoordinate(0,c),a.getCoordinate(1,l);var f=c.x;l.x-=f;for(var d=0,p=1;p<s-1;p++)u.y=c.y,c.x=l.x,c.y=l.y,a.getCoordinate(p+1,l),l.x-=f,d+=c.x*(u.y-l.y);return d/2}},st.distanceLineLine=function(t,e,r,n){if(t.equals(e))return st.distancePointLine(t,r,n);if(r.equals(n))return st.distancePointLine(n,t,e);var i=!1;if(q.intersects(t,e,r,n)){var o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{var a=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),s=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?R.min(st.distancePointLine(t,r,n),st.distancePointLine(e,r,n),st.distancePointLine(r,t,e),st.distancePointLine(n,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==C.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var r=0,n=new O;t.getCoordinate(0,n);for(var i=n.x,o=n.y,a=1;a<e;a++){t.getCoordinate(a,n);var s=n.x,u=n.y,c=s-i,l=u-o;r+=Math.sqrt(c*c+l*l),i=s,o=u}return r},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],n=0,i=1;i<=e;i++){var o=t[i];o.y>r.y&&(r=o,n=i)}var a=n;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(r)&&a!==n);var s=n;do{s=(s+1)%e}while(t[s].equals2D(r)&&s!==n);var u=t[a],c=t[s];if(u.equals2D(r)||c.equals2D(r)||u.equals2D(c))return!1;var l=st.computeOrientation(u,r,c);return 0===l?u.x>c.x:l>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,r){var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)},st.computeOrientation=function(t,e,r){return st.orientationIndex(t,e,r)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new m("Line array must contain at least one vertex");for(var r=t.distance(e[0]),n=0;n<e.length-1;n++){var i=st.distancePointLine(t,e[n],e[n+1]);i<r&&(r=i)}return r}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var l=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(l)*Math.sqrt(u)}},st.isOnLine=function(t,e){for(var r=new it,n=1;n<e.length;n++){var i=e[n-1],o=e[n];if(r.computeIntersection(t,i,o),r.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return st.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return st.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,ut);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var lt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ft={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};lt.prototype.isGeometryCollection=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION},lt.prototype.getFactory=function(){return this._factory},lt.prototype.getGeometryN=function(t){return this},lt.prototype.getArea=function(){return 0},lt.prototype.isRectangle=function(){return!1},lt.prototype.equals=function(){if(arguments[0]instanceof lt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof lt))return!1;var r=e;return this.equalsExact(r)}},lt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},lt.prototype.geometryChanged=function(){this.apply(lt.geometryChangedFilter)},lt.prototype.geometryChangedAction=function(){this._envelope=null},lt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},lt.prototype.getLength=function(){return 0},lt.prototype.getNumGeometries=function(){return 1},lt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,n)}},lt.prototype.getUserData=function(){return this._userData},lt.prototype.getSRID=function(){return this._SRID},lt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},lt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION)throw new m("This method does not support GeometryCollection arguments")},lt.prototype.equal=function(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r},lt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},lt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},lt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new q(this._envelope)},lt.prototype.setSRID=function(t){this._SRID=t},lt.prototype.setUserData=function(t){this._userData=t},lt.prototype.compare=function(t,e){for(var r=t.iterator(),n=e.iterator();r.hasNext()&&n.hasNext();){var i=r.next(),o=n.next(),a=i.compareTo(o);if(0!==a)return a}return r.hasNext()?1:n.hasNext()?-1:0},lt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},lt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===lt.SORTINDEX_MULTIPOINT||this.getSortIndex()===lt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===lt.SORTINDEX_MULTIPOLYGON},lt.prototype.interfaces_=function(){return[S,E,e]},lt.prototype.getClass=function(){return lt},lt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},lt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ft.serialVersionUID.get=function(){return 0x799ea46522854c00},ft.SORTINDEX_POINT.get=function(){return 0},ft.SORTINDEX_MULTIPOINT.get=function(){return 1},ft.SORTINDEX_LINESTRING.get=function(){return 2},ft.SORTINDEX_LINEARRING.get=function(){return 3},ft.SORTINDEX_MULTILINESTRING.get=function(){return 4},ft.SORTINDEX_POLYGON.get=function(){return 5},ft.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ft.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ft.geometryChangedFilter.get=function(){return dt},Object.defineProperties(lt,ft);var dt=function(){};dt.interfaces_=function(){return[ct]},dt.filter=function(t){t.geometryChangedAction()};var pt=function(){};pt.prototype.filter=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt};var ht=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};ht.prototype.isInBoundary=function(t){},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht},gt.Mod2BoundaryNodeRule.get=function(){return _t},gt.EndPointBoundaryNodeRule.get=function(){return yt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MOD2_BOUNDARY_RULE.get=function(){return new _t},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return ht.MOD2_BOUNDARY_RULE},Object.defineProperties(ht,gt);var _t=function(){};_t.prototype.isInBoundary=function(t){return t%2==1},_t.prototype.interfaces_=function(){return[ht]},_t.prototype.getClass=function(){return _t};var yt=function(){};yt.prototype.isInBoundary=function(t){return t>0},yt.prototype.interfaces_=function(){return[ht]},yt.prototype.getClass=function(){return yt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>1},mt.prototype.interfaces_=function(){return[ht]},mt.prototype.getClass=function(){return mt};var vt=function(){};vt.prototype.isInBoundary=function(t){return 1===t},vt.prototype.interfaces_=function(){return[ht]},vt.prototype.getClass=function(){return vt};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(r.prototype=new Error).name="IndexOutOfBoundsException";var Et=function(){};Et.prototype.hasNext=function(){},Et.prototype.next=function(){},Et.prototype.remove=function(){};var St=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(n.prototype=new Error).name="NoSuchElementException";var jt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},e.prototype.iterator=function(){return new Ot(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new r;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,r=0,n=this.array_.length;r<n;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e},e}(St),Ot=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new n;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Et),Pt=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.ensureCapacity(r.length),this.add(r,n)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],r=arguments[1],n=!1,i=e.iterator();i.hasNext();)this.add(i.next(),r),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),r=0;r<this.size();r++)e.add(r,this.get(r).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],n=arguments[1];return this.add(r,n,!0),!0}if(arguments[0]instanceof O&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],u);else for(var l=s.length-1;l>=0;l--)this.add(s[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof O){var f=arguments[0],d=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(f>0&&this.get(f-1).equals2D(d))return null;if(f<p&&this.get(f).equals2D(d))return null}}t.prototype.add.call(this,f,d)}}else if(4===arguments.length){var h=arguments[0],g=arguments[1],_=arguments[2],y=arguments[3],m=1;_>y&&(m=-1);for(var v=_;v!==y;v+=m)this.add(h[v],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new O(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,r),e}(jt),Tt=function(){},xt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};xt.ForwardComparator.get=function(){return Ct},xt.BidirectionalComparator.get=function(){return It},xt.coordArrayType.get=function(){return new Array(0).fill(null)},Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt},Tt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Tt.ptNotInList=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(Tt.indexOf(n,e)<0)return n}return null},Tt.scroll=function(t,e){var r=Tt.indexOf(e,t);if(r<0)return null;var n=new Array(t.length).fill(null);Y.arraycopy(t,r,n,0,t.length-r),Y.arraycopy(t,0,n,t.length-r,r),Y.arraycopy(n,0,t,0,t.length)},Tt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(n===i)return!0;if(null===n||null===i)return!1;if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(0!==o.compare(n[a],i[a]))return!1;return!0}},Tt.intersection=function(t,e){for(var r=new Pt,n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()},Tt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Tt.removeRepeatedPoints=function(t){return Tt.hasRepeatedPoints(t)?new Pt(t,!1).toCoordinateArray():t},Tt.reverse=function(t){for(var e=t.length-1,r=Math.trunc(e/2),n=0;n<=r;n++){var i=t[n];t[n]=t[e-n],t[e-n]=i}},Tt.removeNull=function(t){for(var e=0,r=0;r<t.length;r++)null!==t[r]&&e++;var n=new Array(e).fill(null);if(0===e)return n;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(n[i++]=t[o]);return n},Tt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),r=0;r<t.length;r++)e[r]=new O(t[r]);return e}if(5===arguments.length)for(var n=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new O(n[i+u])},Tt.isEqualReversed=function(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0},Tt.envelope=function(t){for(var e=new q,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e},Tt.toCoordinateArray=function(t){return t.toArray(Tt.coordArrayType)},Tt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Tt.indexOf=function(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1},Tt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1},Tt.compare=function(t,e){for(var r=0;r<t.length&&r<e.length;){var n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0},Tt.minCoordinate=function(t){for(var e=null,r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e},Tt.extract=function(t,e,r){e=R.clamp(e,0,t.length);var n=(r=R.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);var i=new Array(n).fill(null);if(0===n)return i;for(var o=0,a=e;a<=r;a++)i[o++]=t[a];return i},Object.defineProperties(Tt,xt);var Ct=function(){};Ct.prototype.compare=function(t,e){return Tt.compare(t,e)},Ct.prototype.interfaces_=function(){return[j]},Ct.prototype.getClass=function(){return Ct};var It=function(){};It.prototype.compare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;var i=Tt.compare(r,n);return Tt.isEqualReversed(r,n)?0:i},It.prototype.OLDcompare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;for(var i=Tt.increasingDirection(r),o=Tt.increasingDirection(n),a=i>0?0:r.length-1,s=o>0?0:r.length-1,u=0;u<r.length;u++){var c=r[a].compareTo(n[s]);if(0!==c)return c;a+=i,s+=o}return 0},It.prototype.interfaces_=function(){return[j]},It.prototype.getClass=function(){return It};var wt=function(){};wt.prototype.get=function(){},wt.prototype.put=function(){},wt.prototype.size=function(){},wt.prototype.values=function(){},wt.prototype.entrySet=function(){};var Rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(wt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Nt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Mt(this)},e}(o),Mt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new n;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(Et),Lt=0;(f.prototype=new Rt).get=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},f.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Lt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,n,i=this.root_;do{if(r=i,(n=t.compareTo(i.key))<0)i=i.left;else{if(!(n>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:r,color:Lt,getValue:function(){return this.value},getKey:function(){return this.key}};return n<0?r.left=a:r.right=a,this.fixAfterInsertion(a),this.size_++,null},f.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===c(s(s(t)))){var e=l(s(s(t)));1===a(e)?(u(s(t),Lt),u(e,Lt),u(s(s(t)),1),t=s(s(t))):(t===l(s(t))&&(t=s(t),this.rotateLeft(t)),u(s(t),Lt),u(s(s(t)),1),this.rotateRight(s(s(t))))}else{var r=c(s(s(t)));1===a(r)?(u(s(t),Lt),u(r,Lt),u(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateRight(t)),u(s(t),Lt),u(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Lt},f.prototype.values=function(){var t=new jt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=f.successor(e));)t.add(e.value);return t},f.prototype.entrySet=function(){var t=new Nt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=f.successor(e));)t.add(e);return t},f.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},f.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},f.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},f.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var r=t.parent,n=t;null!==r&&n===r.right;)n=r,r=r.parent;return r},f.prototype.size=function(){return this.size_};var At=function(){};At.prototype.interfaces_=function(){return[]},At.prototype.getClass=function(){return At},d.prototype=new o,(p.prototype=new d).contains=function(t){for(var e=0,r=this.array_.length;e<r;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},p.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;e<r;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},p.prototype.remove=function(t){throw new i},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},p.prototype.iterator=function(){return new Ft(this)};var Ft=function(t){this.treeSet_=t,this.position_=0};Ft.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new n;return this.treeSet_.array_[this.position_++]},Ft.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ft.prototype.remove=function(){throw new i};var Dt=function(){};Dt.sort=function(){var t,e,r,n,i=arguments[0];if(1===arguments.length)n=function(t,e){return t.compareTo(e)},i.sort(n);else if(2===arguments.length)r=arguments[1],n=function(t,e){return r.compare(t,e)},i.sort(n);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),r=arguments[3],n=function(t,e){return r.compare(t,e)},e.sort(n),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Dt.asList=function(t){for(var e=new jt,r=0,n=t.length;r<n;r++)e.add(t[r]);return e};var kt=function(){},Gt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Gt.P.get=function(){return 0},Gt.L.get=function(){return 1},Gt.A.get=function(){return 2},Gt.FALSE.get=function(){return-1},Gt.TRUE.get=function(){return-2},Gt.DONTCARE.get=function(){return-3},Gt.SYM_FALSE.get=function(){return"F"},Gt.SYM_TRUE.get=function(){return"T"},Gt.SYM_DONTCARE.get=function(){return"*"},Gt.SYM_P.get=function(){return"0"},Gt.SYM_L.get=function(){return"1"},Gt.SYM_A.get=function(){return"2"},kt.prototype.interfaces_=function(){return[]},kt.prototype.getClass=function(){return kt},kt.toDimensionSymbol=function(t){switch(t){case kt.FALSE:return kt.SYM_FALSE;case kt.TRUE:return kt.SYM_TRUE;case kt.DONTCARE:return kt.SYM_DONTCARE;case kt.P:return kt.SYM_P;case kt.L:return kt.SYM_L;case kt.A:return kt.SYM_A}throw new m("Unknown dimension value: "+t)},kt.toDimensionValue=function(t){switch(A.toUpperCase(t)){case kt.SYM_FALSE:return kt.FALSE;case kt.SYM_TRUE:return kt.TRUE;case kt.SYM_DONTCARE:return kt.DONTCARE;case kt.SYM_P:return kt.P;case kt.SYM_L:return kt.L;case kt.SYM_A:return kt.A}throw new m("Unknown dimension symbol: "+t)},Object.defineProperties(kt,Gt);var Ut=function(){};Ut.prototype.filter=function(t){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var Bt=function(){};Bt.prototype.filter=function(t,e){},Bt.prototype.isDone=function(){},Bt.prototype.isGeometryChanged=function(){},Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt};var zt=function(t){function e(e,r){if(t.call(this,r),this._geometries=e||[],t.hasNullElements(this._geometries))throw new m("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new q,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this._geometries.length;r++)for(var n=this._geometries[r].getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._geometries.length!==n._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(n._geometries[i],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Dt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=kt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=kt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new p(Dt.asList(this._geometries)),r=new p(Dt.asList(t._geometries));return this.compare(e,r)}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],o=n,a=this.getNumGeometries(),s=o.getNumGeometries(),u=0;u<a&&u<s;){var c=this.getGeometryN(u),l=o.getGeometryN(u),f=c.compareToSameClass(l,i);if(0!==f)return f;u++}return u<a?1:u<s?-1:0}},e.prototype.apply=function(){if(w(arguments[0],pt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(w(arguments[0],Bt)){var r=arguments[0];if(0===this._geometries.length)return null;for(var n=0;n<this._geometries.length&&(this._geometries[n].apply(r),!r.isDone());n++);r.isGeometryChanged()&&this.geometryChanged()}else if(w(arguments[0],Ut)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(w(arguments[0],ct)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var r=0;r<this._geometries.length;r++)e._geometries[r]=this._geometries[r].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,r),e}(lt),Vt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[t-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Yt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[At]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,r),e}(zt),Yt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=ht.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=n}};Yt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Yt.prototype.getBoundary=function(){return this._geom instanceof Kt?this.boundaryLineString(this._geom):this._geom instanceof Vt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Yt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Yt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Yt.prototype.computeBoundaryCoordinates=function(t){var e=new jt;this._endpointMap=new f;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Tt.toCoordinateArray(e)},Yt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Xt,this._endpointMap.put(t,e)),e.count++},Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},Yt.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Yt(t).getBoundary()}if(2===arguments.length){var e=arguments[0],r=arguments[1];return new Yt(e,r).getBoundary()}};var Xt=function(){this.count=null};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt};var qt=function(){},Wt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.chars=function(t,e){for(var r=new Array(e).fill(null),n=0;n<e;n++)r[n]=t;return String(r)},qt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},r=new function(){}(e);return t.printStackTrace(r),e.toString()}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(qt.getStackTrace(n))),s=0;s<i;s++)try{o+=a.readLine()+qt.NEWLINE}catch(t){if(!(t instanceof h))throw t;et.shouldNeverReachHere()}return o}},qt.split=function(t,e){for(var r=e.length,n=new jt,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);n.add(a),o=(i=i.substring(o+r)).indexOf(e)}i.length>0&&n.add(i);for(var s=new Array(n.size()).fill(null),u=0;u<s.length;u++)s[u]=n.get(u);return s},qt.toString=function(){if(1===arguments.length){var t=arguments[0];return qt.SIMPLE_ORDINATE_FORMAT.format(t)}},qt.spaces=function(t){return qt.chars(" ",t)},Wt.NEWLINE.get=function(){return Y.getProperty("line.separator")},Wt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(qt,Wt);var Ht=function(){};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.copyCoord=function(t,e,r,n){for(var i=Math.min(t.getDimension(),r.getDimension()),o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))},Ht.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,U.X)===t.getOrdinate(e-1,U.X)&&t.getOrdinate(0,U.Y)===t.getOrdinate(e-1,U.Y)},Ht.isEqual=function(t,e){var r=t.size();if(r!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),i=0;i<r;i++)for(var o=0;o<n;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||v.isNaN(a)&&v.isNaN(s)))return!1}return!0},Ht.extend=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();if(Ht.copy(e,0,n,0,i),i>0)for(var o=i;o<r;o++)Ht.copy(e,i-1,n,o,1);return n},Ht.reverse=function(t){for(var e=t.size()-1,r=Math.trunc(e/2),n=0;n<=r;n++)Ht.swap(t,n,e-n)},Ht.swap=function(t,e,r){if(e===r)return null;for(var n=0;n<t.getDimension();n++){var i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}},Ht.copy=function(t,e,r,n,i){for(var o=0;o<i;o++)Ht.copyCoord(t,e+o,r,n+o)},Ht.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var r=t.getDimension(),n=new M;n.append("(");for(var i=0;i<e;i++){i>0&&n.append(" ");for(var o=0;o<r;o++)o>0&&n.append(","),n.append(qt.toString(t.getOrdinate(i,o)))}return n.append(")"),n.toString()}},Ht.ensureValidRing=function(t,e){var r=e.size();return 0===r?e:r<=3?Ht.createClosedRing(t,e,4):e.getOrdinate(0,U.X)===e.getOrdinate(r-1,U.X)&&e.getOrdinate(0,U.Y)===e.getOrdinate(r-1,U.Y)?e:Ht.createClosedRing(t,e,r+1)},Ht.createClosedRing=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();Ht.copy(e,0,n,0,i);for(var o=i;o<r;o++)Ht.copy(e,0,n,o,1);return n};var Kt=function(t){function e(e,r){t.call(this,r),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new q:this._points.expandEnvelope(new q)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._points.size()!==n._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),n._points.getCoordinate(i),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ht.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,r=0;e<this._points.size()&&r<t._points.size();){var n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(r));if(0!==n)return n;e++,r++}return e<this._points.size()?1:r<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(w(arguments[0],pt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(w(arguments[0],Bt)){var r=arguments[0];if(0===this._points.size())return null;for(var n=0;n<this._points.size()&&(r.filter(this._points,n),!r.isDone());n++);r.isGeometryChanged()&&this.geometryChanged()}else w(arguments[0],Ut)?arguments[0].filter(this):w(arguments[0],ct)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Yt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[At]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,r),e}(lt),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Jt=function(t){function e(e,r){t.call(this,r),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new q;var t=new q;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),r))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return kt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(w(arguments[0],pt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(w(arguments[0],Bt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else w(arguments[0],Ut)?arguments[0].filter(this):w(arguments[0],ct)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,r),e}(lt),Qt=function(){};Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt};var $t=function(t){function e(e,r,n){if(t.call(this,n),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===r&&(r=[]),t.hasNullElements(r))throw new m("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(r))throw new m("shell is empty but holes are not");this._shell=e,this._holes=r}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this._shell.getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;r<5;r++){var n=t.getX(r);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;var i=t.getY(r);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),c=t.getY(s);if(u!==o==(c!==a))return!1;o=u,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e,i=this._shell,o=n._shell;if(!i.equalsExact(o,r))return!1;if(this._holes.length!==n._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(n._holes[a],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Dt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(e.isEmpty())return null;var n=new Array(e.getCoordinates().length-1).fill(null);Y.arraycopy(e.getCoordinates(),0,n,0,n.length);var i=Tt.minCoordinate(e.getCoordinates());Tt.scroll(n,i),Y.arraycopy(n,0,e.getCoordinates(),0,n.length),e.getCoordinates()[n.length]=n[0],st.isCCW(e.getCoordinates())===r&&Tt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,r=t._shell;return e.compareToSameClass(r)}if(2===arguments.length){var n=arguments[0],i=arguments[1],o=n,a=this._shell,s=o._shell,u=a.compareToSameClass(s,i);if(0!==u)return u;for(var c=this.getNumInteriorRing(),l=o.getNumInteriorRing(),f=0;f<c&&f<l;){var d=this.getInteriorRingN(f),p=o.getInteriorRingN(f),h=d.compareToSameClass(p,i);if(0!==h)return h;f++}return f<c?1:f<l?-1:0}},e.prototype.apply=function(t){if(w(t,pt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(w(t,Bt)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(this._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(w(t,Ut))t.filter(this);else if(w(t,ct)){t.filter(this),this._shell.apply(t);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)e._holes[r]=this._holes[r].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),r=new Array(this._holes.length).fill(null),n=0;n<r.length;n++)r[n]=this._holes[n].copy();return new e(t,r,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,r),e}(lt),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return kt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,r),e}(zt),ee=function(t){function e(e,r){e instanceof O&&r instanceof ye&&(e=r.getCoordinateSequenceFactory().create(e)),t.call(this,e,r),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return kt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new m("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new m("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,r),e}(Kt),re=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new jt,e=0;e<this._geometries.length;e++)for(var r=this._geometries[e].getBoundary(),n=0;n<r.getNumGeometries();n++)t.add(r.getGeometryN(n));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,r),e}(zt),ne=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ne.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ne.prototype.edit=function(t,e){if(null===t)return null;var r=this.editInternal(t,e);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r},ne.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof zt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Jt?e.edit(t,this._factory):t instanceof Kt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ne.prototype.editGeometryCollection=function(t,e){for(var r=e.edit(t,this._factory),n=new jt,i=0;i<r.getNumGeometries();i++){var o=this.edit(r.getGeometryN(i),e);null===o||o.isEmpty()||n.add(o)}return r.getClass()===te?this._factory.createMultiPoint(n.toArray([])):r.getClass()===Vt?this._factory.createMultiLineString(n.toArray([])):r.getClass()===re?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))},ne.prototype.editPolygon=function(t,e){var r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var n=this.edit(r.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var i=new jt,o=0;o<r.getNumInteriorRing();o++){var a=this.edit(r.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(n,i.toArray([]))},ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne},ne.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(ne,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[ne.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var r=this.editCoordinates(t.getCoordinates(),t);return null===r?t:t instanceof ee?e.createLinearRing(r):t instanceof Kt?e.createLineString(r):t instanceof Jt?r.length>0?e.createPoint(r[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[ne.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Jt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[ne.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new O}else if(w(arguments[0],U)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var n=0;n<this._coordinates.length;n++)this._coordinates[n]=r.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new O}},ce={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,r){switch(e){case U.X:this._coordinates[t].x=r;break;case U.Y:this._coordinates[t].y=r;break;case U.Z:this._coordinates[t].z=r;break;default:throw new m("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case U.X:return this._coordinates[t].x;case U.Y:return this._coordinates[t].y;case U.Z:return this._coordinates[t].z}return v.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],r=arguments[1];r.x=this._coordinates[e].x,r.y=this._coordinates[e].y,r.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new O(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new M(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[U,e]},ue.prototype.getClass=function(){return ue},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,ce);var le=function(){},fe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};le.prototype.readResolve=function(){return le.instance()},le.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ue(t)}if(w(arguments[0],U)){var e=arguments[0];return new ue(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return n>3&&(n=3),n<2?new ue(r):new ue(r,n)}},le.prototype.interfaces_=function(){return[x,e]},le.prototype.getClass=function(){return le},le.instance=function(){return le.instanceObject},fe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fe.instanceObject.get=function(){return new le},Object.defineProperties(le,fe);var de=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new jt,e=this.map_.values(),r=e.next();!r.done;)t.add(r.value),r=e.next();return t},e.prototype.entrySet=function(){var t=new Nt;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(wt),pe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var r=arguments[0];this._modelType=t.FIXED,this.setScale(r)}else if(arguments[0]instanceof t){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}},he={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pe.prototype.equals=function(t){if(!(t instanceof pe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pe.prototype.compareTo=function(t){var e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new L(r).compareTo(new L(n))},pe.prototype.getScale=function(){return this._scale},pe.prototype.isFloating=function(){return this._modelType===pe.FLOATING||this._modelType===pe.FLOATING_SINGLE},pe.prototype.getType=function(){return this._modelType},pe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pe.FLOATING?t="Floating":this._modelType===pe.FLOATING_SINGLE?t="Floating-Single":this._modelType===pe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return v.isNaN(t)?t:this._modelType===pe.FLOATING_SINGLE?t:this._modelType===pe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof O){var e=arguments[0];if(this._modelType===pe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pe.FLOATING?t=16:this._modelType===pe.FLOATING_SINGLE?t=6:this._modelType===pe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pe.prototype.setScale=function(t){this._scale=Math.abs(t)},pe.prototype.interfaces_=function(){return[e,E]},pe.prototype.getClass=function(){return pe},pe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},he.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},he.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pe,he);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},_e={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},_e.serialVersionUID.get=function(){return-552860263173159e4},_e.nameToTypeMap.get=function(){return new de},Object.defineProperties(ge,_e),pe.Type=ge,pe.FIXED=new ge("FIXED"),pe.FLOATING=new ge("FLOATING"),pe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var ye=function t(){this._precisionModel=new pe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?w(arguments[0],x)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},me={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new O(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new O(t.getMinX(),t.getMinY()),new O(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new O(t.getMinX(),t.getMinY()),new O(t.getMinX(),t.getMaxY()),new O(t.getMaxX(),t.getMaxY()),new O(t.getMaxX(),t.getMinY()),new O(t.getMinX(),t.getMinY())]),null)},ye.prototype.createLineString=function(t){return t?t instanceof Array?new Kt(this.getCoordinateSequenceFactory().create(t),this):w(t,U)?new Kt(t,this):void 0:new Kt(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){if(0===arguments.length)return new Vt(null,this);if(1===arguments.length){var t=arguments[0];return new Vt(t,this)}},ye.prototype.buildGeometry=function(t){for(var e=null,r=!1,n=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(r=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(ye.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof $t)return this.createMultiPolygon(ye.toPolygonArray(t));if(s instanceof Kt)return this.createMultiLineString(ye.toLineStringArray(t));if(s instanceof Jt)return this.createMultiPoint(ye.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ye.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(w(arguments[0],U)){var e=arguments[0];return new Jt(e,this)}}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(w(arguments[0],U)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var r=arguments[0];return this.createPolygon(r,null)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return new $t(n,i,this)}},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){if(0===arguments.length)return new zt(null,this);if(1===arguments.length){var t=arguments[0];return new zt(t,this)}},ye.prototype.createGeometry=function(t){return new ne(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(w(arguments[0],U)){var e=arguments[0];return new ee(e,this)}}},ye.prototype.createMultiPolygon=function(){if(0===arguments.length)return new re(null,this);if(1===arguments.length){var t=arguments[0];return new re(t,this)}},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new te(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(w(arguments[0],U)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(r.size()).fill(null),i=0;i<r.size();i++){var o=this.getCoordinateSequenceFactory().create(1,r.getDimension());Ht.copy(r,i,o,0,1),n[i]=this.createPoint(o)}return this.createMultiPoint(n)}}},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.getDefaultCoordinateSequenceFactory=function(){return le.instance()},ye.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},me.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,me);var ve=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new ye};be.prototype.read=function(t){var e,r=(e="string"==typeof t?JSON.parse(t):t).type;if(!Ee[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ve.indexOf(r)?Ee[r].apply(this,[e.coordinates]):"GeometryCollection"===r?Ee[r].apply(this,[e.geometries]):Ee[r].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Se[e])throw new Error("Geometry is not supported");return Se[e].apply(this,[t])};var Ee={Feature:function(t){var e={};for(var r in t)e[r]=t[r];if(t.geometry){var n=t.geometry.type;if(!Ee[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Ee.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(new O(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new O(t[0],t[1]),new O(t[2],t[1]),new O(t[2],t[3]),new O(t[0],t[3]),new O(t[0],t[1])])},Point:function(t){var e=new O(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],r=0;r<t.length;++r)e.push(Ee.Point.apply(this,[t[r]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Ee.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],r=0;r<t.length;++r)e.push(Ee.LineString.apply(this,[t[r]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Ee.coordinates.apply(this,[t[0]]),r=this.geometryFactory.createLinearRing(e),n=[],i=1;i<t.length;++i){var o=t[i],a=Ee.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);n.push(s)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(Ee.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},Se={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Se.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Se.Point.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],r=t.getCoordinates(),n=0;n<r.length;++n){var i=r[n];e.push(Se.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Se.LineString.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],r=Se.LineString.apply(this,[t._shell]);e.push(r.coordinates);for(var n=0;n<t._holes.length;++n){var i=t._holes[n],o=Se.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=Se.Polygon.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=n.getGeometryType();e.push(Se[i].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}},je=function(t){this.geometryFactory=t||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};je.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pe.FIXED&&this.reducePrecision(e),e},je.prototype.reducePrecision=function(t){var e,r;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,r=t.points.length;e<r;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,r=t.geometries.length;e<r;e++)this.reducePrecision(t.geometries[e])};var Oe=function(){this.parser=new be(this.geometryFactory)};Oe.prototype.write=function(t){return this.parser.write(t)};var Pe=function(){},Te={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe},Pe.opposite=function(t){return t===Pe.LEFT?Pe.RIGHT:t===Pe.RIGHT?Pe.LEFT:t},Te.ON.get=function(){return 0},Te.LEFT.get=function(){return 1},Te.RIGHT.get=function(){return 2},Object.defineProperties(Pe,Te),(g.prototype=new Error).name="EmptyStackException",(_.prototype=new St).add=function(t){return this.array_.push(t),!0},_.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},_.prototype.push=function(t){return this.array_.push(t),t},_.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},_.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},_.prototype.empty=function(){return 0===this.array_.length},_.prototype.isEmpty=function(){return this.empty()},_.prototype.search=function(t){return this.array_.indexOf(t)},_.prototype.size=function(){return this.array_.length},_.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t};var xe=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};xe.prototype.getCoordinate=function(){return this._minCoord},xe.prototype.getRightmostSide=function(t,e){var r=this.getRightmostSideOfSegment(t,e);return r<0&&(r=this.getRightmostSideOfSegment(t,e-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r},xe.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],r=t[this._minIndex+1],n=st.computeOrientation(this._minCoord,r,e),i=!1;e.y<this._minCoord.y&&r.y<this._minCoord.y&&n===st.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&r.y>this._minCoord.y&&n===st.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},xe.prototype.getRightmostSideOfSegment=function(t,e){var r=t.getEdge().getCoordinates();if(e<0||e+1>=r.length)return-1;if(r[e].y===r[e+1].y)return-1;var n=Pe.LEFT;return r[e].y<r[e+1].y&&(n=Pe.RIGHT),n},xe.prototype.getEdge=function(){return this._orientedDe},xe.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),r=0;r<e.length-1;r++)(null===this._minCoord||e[r].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=r,this._minCoord=e[r])},xe.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},xe.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();r.isForward()&&this.checkForRightmostCoordinate(r)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Pe.LEFT&&(this._orientedDe=this._minDe.getSym())},xe.prototype.interfaces_=function(){return[]},xe.prototype.getClass=function(){return xe};var Ce=function(t){function e(r,n){t.call(this,e.msgWithCoord(r,n)),this.pt=n?new O(n):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),Ie=function(){this.array_=[]};Ie.prototype.addLast=function(t){this.array_.push(t)},Ie.prototype.removeFirst=function(){return this.array_.shift()},Ie.prototype.isEmpty=function(){return 0===this.array_.length};var we=function(){this._finder=null,this._dirEdgeList=new jt,this._nodes=new jt,this._rightMostCoord=null,this._env=null,this._finder=new xe};we.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},we.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},we.prototype.computeNodeDepth=function(t){for(var e=null,r=t.getEdges().iterator();r.hasNext();){var n=r.next();if(n.isVisited()||n.getSym().isVisited()){e=n;break}}if(null===e)throw new Ce("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},we.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Pe.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},we.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},we.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Pe.RIGHT)>=1&&e.getDepth(Pe.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},we.prototype.computeDepths=function(t){var e=new Nt,r=new Ie,n=t.getNode();for(r.addLast(n),e.add(n),t.setVisited(!0);!r.isEmpty();){var i=r.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(r.addLast(s),e.add(s))}}}},we.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},we.prototype.getEnvelope=function(){if(null===this._env){for(var t=new q,e=this._dirEdgeList.iterator();e.hasNext();)for(var r=e.next().getEdge().getCoordinates(),n=0;n<r.length-1;n++)t.expandToInclude(r[n]);this._env=t}return this._env},we.prototype.addReachable=function(t){var e=new _;for(e.add(t);!e.empty();){var r=e.pop();this.add(r,e)}},we.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Pe.LEFT,t.getDepth(Pe.RIGHT)),e.setDepth(Pe.RIGHT,t.getDepth(Pe.LEFT))},we.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var n=r.next();this._dirEdgeList.add(n);var i=n.getSym().getNode();i.isVisited()||e.push(i)}},we.prototype.getNodes=function(){return this._nodes},we.prototype.getDirectedEdges=function(){return this._dirEdgeList},we.prototype.interfaces_=function(){return[E]},we.prototype.getClass=function(){return we};var Re=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Pe.ON]=r}else if(arguments[0]instanceof t){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Pe.ON]=o,this.location[Pe.LEFT]=a,this.location[Pe.RIGHT]=s}};Re.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Re.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==C.NONE)return!1;return!0},Re.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===C.NONE&&(this.location[e]=t)},Re.prototype.isLine=function(){return 1===this.location.length},Re.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Pe.ON]=this.location[Pe.ON],e[Pe.LEFT]=C.NONE,e[Pe.RIGHT]=C.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===C.NONE&&r<t.location.length&&(this.location[r]=t.location[r])},Re.prototype.getLocations=function(){return this.location},Re.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Pe.LEFT];this.location[Pe.LEFT]=this.location[Pe.RIGHT],this.location[Pe.RIGHT]=t},Re.prototype.toString=function(){var t=new M;return this.location.length>1&&t.append(C.toLocationSymbol(this.location[Pe.LEFT])),t.append(C.toLocationSymbol(this.location[Pe.ON])),this.location.length>1&&t.append(C.toLocationSymbol(this.location[Pe.RIGHT])),t.toString()},Re.prototype.setLocations=function(t,e,r){this.location[Pe.ON]=t,this.location[Pe.LEFT]=e,this.location[Pe.RIGHT]=r},Re.prototype.get=function(t){return t<this.location.length?this.location[t]:C.NONE},Re.prototype.isArea=function(){return this.location.length>1},Re.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===C.NONE)return!0;return!1},Re.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Pe.ON,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.location[e]=r}},Re.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(C.NONE)},Re.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Re.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};var Ne=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Re(e),this.elt[1]=new Re(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.elt[0]=new Re(r.elt[0]),this.elt[1]=new Re(r.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Re(C.NONE),this.elt[1]=new Re(C.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Re(o,a,s),this.elt[1]=new Re(o,a,s)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],f=arguments[3];this.elt[0]=new Re(C.NONE,C.NONE,C.NONE),this.elt[1]=new Re(C.NONE,C.NONE,C.NONE),this.elt[u].setLocations(c,l,f)}};Ne.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Ne.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Ne.prototype.isNull=function(t){return this.elt[t].isNull()},Ne.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.elt[e].setAllLocationsIfNull(r)}},Ne.prototype.isLine=function(t){return this.elt[t].isLine()},Ne.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Re(t.elt[e]):this.elt[e].merge(t.elt[e])},Ne.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ne.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Pe.ON)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return this.elt[e].get(r)}},Ne.prototype.toString=function(){var t=new M;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Ne.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Ne.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Ne.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Pe.ON,e)}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this.elt[r].setLocation(n,i)}},Ne.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Ne.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Ne.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Re(this.elt[t].location[0]))},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne},Ne.toLineLabel=function(t){for(var e=new Ne(C.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e};var Me=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new jt,this._pts=new jt,this._label=new Ne(C.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new jt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Me.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},Me.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Me.prototype.computePoints=function(t){this._startDe=t;var e=t,r=!0;do{if(null===e)throw new Ce("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ce("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var n=e.getLabel();et.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(e.getEdge(),e.isForward(),r),r=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Me.prototype.getLinearRing=function(){return this._ring},Me.prototype.getCoordinate=function(t){return this._pts.get(t)},Me.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Me.prototype.addPoints=function(t,e,r){var n=t.getCoordinates();if(e){var i=1;r&&(i=0);for(var o=i;o<n.length;o++)this._pts.add(n[o])}else{var a=n.length-2;r&&(a=n.length-1);for(var s=a;s>=0;s--)this._pts.add(n[s])}},Me.prototype.isHole=function(){return this._isHole},Me.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Me.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();)if(r.next().containsPoint(t))return!1;return!0},Me.prototype.addHole=function(t){this._holes.add(t)},Me.prototype.isShell=function(){return null===this._shell},Me.prototype.getLabel=function(){return this._label},Me.prototype.getEdges=function(){return this._edges},Me.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Me.prototype.getShell=function(){return this._shell},Me.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=e.getLocation(r,Pe.RIGHT);if(n===C.NONE)return null;if(this._label.getLocation(r)===C.NONE)return this._label.setLocation(r,n),null}},Me.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Me.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)e[r]=this._holes.get(r).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me};var Le=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Me),Ae=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new jt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var r=new Le(e,this._geometryFactory);t.add(r)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Me),Fe=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Fe.prototype.setVisited=function(t){this._isVisited=t},Fe.prototype.setInResult=function(t){this._isInResult=t},Fe.prototype.isCovered=function(){return this._isCovered},Fe.prototype.isCoveredSet=function(){return this._isCoveredSet},Fe.prototype.setLabel=function(t){this._label=t},Fe.prototype.getLabel=function(){return this._label},Fe.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fe.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Fe.prototype.isInResult=function(){return this._isInResult},Fe.prototype.isVisited=function(){return this._isVisited},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var De=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],r=arguments[1];this._coord=e,this._edges=r,this._label=new Ne(0,C.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var r=C.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);r!==C.BOUNDARY&&(r=n)}return r},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],r=arguments[1];null===this._label?this._label=new Ne(e,r):this._label.setLocation(e,r)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ne)for(var r=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(r,n);this._label.getLocation(n)===C.NONE&&this._label.setLocation(n,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=C.NONE;null!==this._label&&(e=this._label.getLocation(t));var r=null;switch(e){case C.BOUNDARY:r=C.INTERIOR;break;case C.INTERIOR:default:r=C.BOUNDARY}this._label.setLocation(t,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fe),ke=function(){this.nodeMap=new f,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};ke.prototype.find=function(t){return this.nodeMap.get(t)},ke.prototype.addNode=function(){if(arguments[0]instanceof O){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof De){var r=arguments[0],n=this.nodeMap.get(r.getCoordinate());return null===n?(this.nodeMap.put(r.getCoordinate(),r),r):(n.mergeLabel(r),n)}},ke.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},ke.prototype.iterator=function(){return this.nodeMap.values().iterator()},ke.prototype.values=function(){return this.nodeMap.values()},ke.prototype.getBoundaryNodes=function(t){for(var e=new jt,r=this.iterator();r.hasNext();){var n=r.next();n.getLabel().getLocation(t)===C.BOUNDARY&&e.add(n)}return e},ke.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var Ge=function(){},Ue={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge},Ge.isNorthern=function(t){return t===Ge.NE||t===Ge.NW},Ge.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Ge.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r},Ge.isInHalfPlane=function(t,e){return e===Ge.SE?t===Ge.SE||t===Ge.SW:t===e||t===e+1},Ge.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Ge.NE:Ge.SE:e>=0?Ge.NW:Ge.SW}if(arguments[0]instanceof O&&arguments[1]instanceof O){var r=arguments[0],n=arguments[1];if(n.x===r.x&&n.y===r.y)throw new m("Cannot compute the quadrant for two identical points "+r);return n.x>=r.x?n.y>=r.y?Ge.NE:Ge.SE:n.y>=r.y?Ge.NW:Ge.SW}},Ue.NE.get=function(){return 0},Ue.NW.get=function(){return 1},Ue.SW.get=function(){return 2},Ue.SE.get=function(){return 3},Object.defineProperties(Ge,Ue);var Be=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2];this._edge=e,this.init(r,n),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Be.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Be.prototype.getDy=function(){return this._dy},Be.prototype.getCoordinate=function(){return this._p0},Be.prototype.setNode=function(t){this._node=t},Be.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Be.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Be.prototype.getDirectedCoordinate=function(){return this._p1},Be.prototype.getDx=function(){return this._dx},Be.prototype.getLabel=function(){return this._label},Be.prototype.getEdge=function(){return this._edge},Be.prototype.getQuadrant=function(){return this._quadrant},Be.prototype.getNode=function(){return this._node},Be.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Be.prototype.computeLabel=function(t){},Be.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Ge.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Be.prototype.interfaces_=function(){return[E]},Be.prototype.getClass=function(){return Be};var ze=function(t){function e(){var e=arguments[0],r=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Ne(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ce("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Pe.LEFT)===C.INTERIOR&&this._label.getLocation(e,Pe.RIGHT)===C.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Pe.LEFT]+"/"+this._depth[Pe.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,C.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,C.EXTERIOR);return t&&e&&r},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var n=1;t===Pe.LEFT&&(n=-1);var i=Pe.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===C.EXTERIOR&&e===C.INTERIOR?1:t===C.INTERIOR&&e===C.EXTERIOR?-1:0},e}(Be),Ve=function(){};Ve.prototype.createNode=function(t){return new De(t,null)},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var Ye=function(){if(this._edges=new jt,this._nodes=null,this._edgeEndList=new jt,0===arguments.length)this._nodes=new ke(new Ve);else if(1===arguments.length){var t=arguments[0];this._nodes=new ke(t)}};Ye.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var r=this._edges.get(e);r.print(t),r.eiList.print(t)}},Ye.prototype.find=function(t){return this._nodes.find(t)},Ye.prototype.addNode=function(){if(arguments[0]instanceof De){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof O){var e=arguments[0];return this._nodes.addNode(e)}},Ye.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ye.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ye.prototype.debugPrintln=function(t){Y.out.println(t)},Ye.prototype.isBoundaryNode=function(t,e){var r=this._nodes.find(e);if(null===r)return!1;var n=r.getLabel();return null!==n&&n.getLocation(t)===C.BOUNDARY},Ye.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ye.prototype.matchInSameDirection=function(t,e,r,n){return!!t.equals(r)&&st.computeOrientation(t,e,n)===st.COLLINEAR&&Ge.quadrant(t,e)===Ge.quadrant(r,n)},Ye.prototype.getEdgeEnds=function(){return this._edgeEndList},Ye.prototype.debugPrint=function(t){Y.out.print(t)},Ye.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ye.prototype.findEdgeInSameDirection=function(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return n;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return n}return null},Ye.prototype.insertEdge=function(t){this._edges.add(t)},Ye.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null},Ye.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this._edges.add(r);var n=new ze(r,!0),i=new ze(r,!1);n.setSym(i),i.setSym(n),this.add(n),this.add(i)}},Ye.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ye.prototype.getNodes=function(){return this._nodes.values()},Ye.prototype.findEdge=function(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye},Ye.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Xe=function(){this._geometryFactory=null,this._shellList=new jt;var t=arguments[0];this._geometryFactory=t};Xe.prototype.sortShellsAndHoles=function(t,e,r){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()?r.add(i):e.add(i)}},Xe.prototype.computePolygons=function(t){for(var e=new jt,r=t.iterator();r.hasNext();){var n=r.next().toPolygon(this._geometryFactory);e.add(n)}return e},Xe.prototype.placeFreeHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(null===n.getShell()){var i=this.findEdgeRingContaining(n,t);if(null===i)throw new Ce("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(i)}}},Xe.prototype.buildMinimalEdgeRings=function(t,e,r){for(var n=new jt,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):r.addAll(a)}else n.add(o)}return n},Xe.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Xe.prototype.buildMaximalEdgeRings=function(t){for(var e=new jt,r=t.iterator();r.hasNext();){var n=r.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var i=new Ae(n,this._geometryFactory);e.add(i),i.setInResult()}}return e},Xe.prototype.placePolygonHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();n.isHole()&&n.setShell(t)}},Xe.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Xe.prototype.findEdgeRingContaining=function(t,e){for(var r=t.getLinearRing(),n=r.getEnvelopeInternal(),i=r.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var f=!1;l.contains(n)&&st.isPointInRing(i,c.getCoordinates())&&(f=!0),f&&(null===o||a.contains(l))&&(o=u)}return o},Xe.prototype.findShell=function(t){for(var e=0,r=null,n=t.iterator();n.hasNext();){var i=n.next();i.isHole()||(r=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),r},Xe.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],r=arguments[1];Ye.linkResultDirectedEdges(r);var n=this.buildMaximalEdgeRings(e),i=new jt,o=this.buildMinimalEdgeRings(n,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var qe=function(){};qe.prototype.getBounds=function(){},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var We=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};We.prototype.getItem=function(){return this._item},We.prototype.getBounds=function(){return this._bounds},We.prototype.interfaces_=function(){return[qe,e]},We.prototype.getClass=function(){return We};var He=function(){this._size=null,this._items=null,this._size=0,this._items=new jt,this._items.add(null)};He.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},He.prototype.size=function(){return this._size},He.prototype.reorder=function(t){for(var e=null,r=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(r)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,r)},He.prototype.clear=function(){this._size=0,this._items.clear()},He.prototype.isEmpty=function(){return 0===this._size},He.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Ke=function(){};Ke.prototype.visitItem=function(t){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Ze=function(){};Ze.prototype.insert=function(t,e){},Ze.prototype.remove=function(t,e){},Ze.prototype.query=function(){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Je=function(){if(this._childBoundables=new jt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Qe={serialVersionUID:{configurable:!0}};Je.prototype.getLevel=function(){return this._level},Je.prototype.size=function(){return this._childBoundables.size()},Je.prototype.getChildBoundables=function(){return this._childBoundables},Je.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Je.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Je.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Je.prototype.interfaces_=function(){return[qe,e]},Je.prototype.getClass=function(){return Je},Qe.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Je,Qe);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var r=t.toArray();e?Dt.sort(r,e):Dt.sort(r);for(var n=t.iterator(),i=0,o=r.length;i<o;i++)n.next(),n.set(r[i])},$e.singletonList=function(t){var e=new jt;return e.add(t),e};var tr=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=r,this._distance=this.distance()};tr.prototype.expandToQueue=function(t,e){var r=tr.isComposite(this._boundable1),n=tr.isComposite(this._boundable2);if(r&&n)return tr.area(this._boundable1)>tr.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(r)return this.expand(this._boundable1,this._boundable2,t,e),null;if(n)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new m("neither boundable is composite")},tr.prototype.isLeaves=function(){return!(tr.isComposite(this._boundable1)||tr.isComposite(this._boundable2))},tr.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tr.prototype.expand=function(t,e,r,n){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tr(o,e,this._itemDistance);a.getDistance()<n&&r.add(a)}},tr.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tr.prototype.getDistance=function(){return this._distance},tr.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tr.prototype.interfaces_=function(){return[E]},tr.prototype.getClass=function(){return tr},tr.area=function(t){return t.getBounds().getArea()},tr.isComposite=function(t){return t instanceof Je};var er=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new jt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var r=arguments[0];et.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}},rr={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};er.prototype.getNodeCapacity=function(){return this._nodeCapacity},er.prototype.lastNode=function(t){return t.get(t.size()-1)},er.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();r instanceof Je?t+=this.size(r):r instanceof We&&(t+=1)}return t}},er.prototype.removeItem=function(t,e){for(var r=null,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof We&&i.getItem()===e&&(r=i)}return null!==r&&(t.getChildBoundables().remove(r),!0)},er.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new jt:t}if(1===arguments.length){for(var e=arguments[0],r=new jt,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof Je){var o=this.itemsTree(i);null!==o&&r.add(o)}else i instanceof We?r.add(i.getItem()):et.shouldNeverReachHere()}return r.size()<=0?null:r}},er.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new We(t,e))},er.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new jt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];if(et.isTrue(r>-2),n.getLevel()===r)return i.add(n),null;for(var o=n.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Je?this.boundablesAtLevel(r,a,i):(et.isTrue(a instanceof We),-1===r&&i.add(a))}return null}},er.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new jt;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var r=arguments[0],n=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,n)}else if(3===arguments.length)if(w(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),u=0;u<s.size();u++){var c=s.get(u);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Je?this.query(i,c,a):c instanceof We?a.visitItem(c.getItem()):et.shouldNeverReachHere())}else if(w(arguments[2],St)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var l=arguments[0],f=arguments[1],d=arguments[2],p=f.getChildBoundables(),h=0;h<p.size();h++){var g=p.get(h);this.getIntersectsOp().intersects(g.getBounds(),l)&&(g instanceof Je?this.query(l,g,d):g instanceof We?d.add(g.getItem()):et.shouldNeverReachHere())}},er.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},er.prototype.getRoot=function(){return this.build(),this._root},er.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=this.removeItem(n,i);if(o)return!0;for(var a=null,s=n.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),r)&&u instanceof Je&&(o=this.remove(r,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&n.getChildBoundables().remove(a),o}},er.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,e+1);return 1===r.size()?r.get(0):this.createHigherLevels(r,e+1)},er.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();if(r instanceof Je){var n=this.depth(r);n>t&&(t=n)}}return t+1}},er.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=new jt;r.add(this.createNode(e));var n=new jt(t);$e.sort(n,this.getComparator());for(var i=n.iterator();i.hasNext();){var o=i.next();this.lastNode(r).getChildBoundables().size()===this.getNodeCapacity()&&r.add(this.createNode(e)),this.lastNode(r).addChildBoundable(o)}return r},er.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},er.prototype.interfaces_=function(){return[e]},er.prototype.getClass=function(){return er},er.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},rr.IntersectsOp.get=function(){return nr},rr.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},rr.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(er,rr);var nr=function(){},ir=function(){};ir.prototype.distance=function(t,e){},ir.prototype.interfaces_=function(){return[]},ir.prototype.getClass=function(){return ir};var or=function(t){function r(e){e=e||r.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return r.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var r=new jt,n=0;n<t.length;n++)r.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return r},r.prototype.createNode=function(t){return new ar(t)},r.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},r.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],r=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,r)},r.prototype.getIntersectsOp=function(){return r.intersectsOp},r.prototype.verticalSlices=function(t,e){for(var r=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){n[o]=new jt;for(var a=0;i.hasNext()&&a<r;){var s=i.next();n[o].add(s),a++}}return n},r.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var r=arguments[0],n=arguments[1];t.prototype.query.call(this,r,n)}else if(3===arguments.length)if(w(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(w(arguments[2],St)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var s=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,s,u,c)}},r.prototype.getComparator=function(){return r.yComparator},r.prototype.createParentBoundablesFromVerticalSlice=function(e,r){return t.prototype.createParentBoundables.call(this,e,r)},r.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return t.prototype.remove.call(this,e,r)}return t.prototype.remove.apply(this,arguments)},r.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},r.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new jt(t);$e.sort(i,r.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(o,e)},r.prototype.nearestNeighbour=function(){if(1===arguments.length){if(w(arguments[0],ir)){var t=arguments[0],e=new tr(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tr){var n=arguments[0];return this.nearestNeighbour(n,v.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof r&&w(arguments[1],ir)){var i=arguments[0],o=arguments[1],a=new tr(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tr&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],c=null,l=new He;for(l.add(s);!l.isEmpty()&&u>0;){var f=l.poll(),d=f.getDistance();if(d>=u)break;f.isLeaves()?(u=d,c=f):f.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[0],h=arguments[1],g=arguments[2],_=new We(p,h),y=new tr(this.getRoot(),_,g);return this.nearestNeighbour(y)[0]}},r.prototype.interfaces_=function(){return[Ze,e]},r.prototype.getClass=function(){return r},r.centreX=function(t){return r.avg(t.getMinX(),t.getMaxX())},r.avg=function(t,e){return(t+e)/2},r.centreY=function(t){return r.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return ar},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[j]},compare:function(e,n){return t.compareDoubles(r.centreX(e.getBounds()),r.centreX(n.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[j]},compare:function(e,n){return t.compareDoubles(r.centreY(e.getBounds()),r.centreY(n.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(r,n),r}(er),ar=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var r=e.next();null===t?t=new q(r.getBounds()):t.expandToInclude(r.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Je),sr=function(){};sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},sr.relativeSign=function(t,e){return t<e?-1:t>e?1:0},sr.compare=function(t,e,r){if(e.equals2D(r))return 0;var n=sr.relativeSign(e.x,r.x),i=sr.relativeSign(e.y,r.y);switch(t){case 0:return sr.compareValue(n,i);case 1:return sr.compareValue(i,n);case 2:return sr.compareValue(i,-n);case 3:return sr.compareValue(-n,i);case 4:return sr.compareValue(-n,-i);case 5:return sr.compareValue(-i,-n);case 6:return sr.compareValue(-i,n);case 7:return sr.compareValue(n,-i)}return et.shouldNeverReachHere("invalid octant value"),0},sr.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ur=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._segString=t,this.coord=new O(e),this.segmentIndex=r,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(r))};ur.prototype.getCoordinate=function(){return this.coord},ur.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ur.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:sr.compare(this._segmentOctant,this.coord,e.coord)},ur.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ur.prototype.isInterior=function(){return this._isInterior},ur.prototype.interfaces_=function(){return[E]},ur.prototype.getClass=function(){return ur};var cr=function(){this._nodeMap=new f,this._edge=null;var t=arguments[0];this._edge=t};cr.prototype.getSplitCoordinates=function(){var t=new Pt;this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(r,n,t),r=n}return t.toCoordinateArray()},cr.prototype.addCollapsedNodes=function(){var t=new jt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var r=e.next().intValue();this.add(this._edge.getCoordinate(r),r)}},cr.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cr.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var r=this._edge.getCoordinate(e),n=this._edge.getCoordinate(e+2);r.equals2D(n)&&t.add(new L(e+1))}},cr.prototype.addEdgeCoordinates=function(t,e,r){var n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);r.add(new O(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)r.add(this._edge.getCoordinate(o));i&&r.add(new O(e.coord))},cr.prototype.iterator=function(){return this._nodeMap.values().iterator()},cr.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},cr.prototype.findCollapseIndex=function(t,e,r){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(r[0]=t.segmentIndex+1,!0)},cr.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),r=this.iterator(),n=r.next();r.hasNext();){var i=r.next();this.findCollapseIndex(n,i,e)&&t.add(new L(e[0])),n=i}},cr.prototype.getEdge=function(){return this._edge},cr.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cr.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),a=0;o[a++]=new O(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new O(e.coord)),new pr(o,this._edge.getData())},cr.prototype.add=function(t,e){var r=new ur(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(r);return null!==n?(et.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(r,r),r)},cr.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),r=t.get(0).getCoordinate(0);if(!r.equals2D(e[0]))throw new $("bad split edge start point at "+r);var n=t.get(t.size()-1).getCoordinates(),i=n[n.length-1];if(!i.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+i)},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var lr=function(){};lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},lr.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the octant for point ( "+t+", "+e+" )");var r=Math.abs(t),n=Math.abs(e);return t>=0?e>=0?r>=n?0:1:r>=n?7:6:e>=0?r>=n?3:2:r>=n?4:5}if(arguments[0]instanceof O&&arguments[1]instanceof O){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new m("Cannot compute the octant for two identical points "+i);return lr.octant(a,s)}};var fr=function(){};fr.prototype.getCoordinates=function(){},fr.prototype.size=function(){},fr.prototype.getCoordinate=function(t){},fr.prototype.isClosed=function(){},fr.prototype.setData=function(t){},fr.prototype.getData=function(){},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr};var dr=function(){};dr.prototype.addIntersection=function(t,e){},dr.prototype.interfaces_=function(){return[fr]},dr.prototype.getClass=function(){return dr};var pr=function(){this._nodeList=new cr(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};pr.prototype.getCoordinates=function(){return this._pts},pr.prototype.size=function(){return this._pts.length},pr.prototype.getCoordinate=function(t){return this._pts[t]},pr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},pr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},pr.prototype.setData=function(t){this._data=t},pr.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:lr.octant(t,e)},pr.prototype.getData=function(){return this._data},pr.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[3],o=new O(r.getIntersection(i));this.addIntersection(o,n)}},pr.prototype.toString=function(){return Q.toLineString(new ue(this._pts))},pr.prototype.getNodeList=function(){return this._nodeList},pr.prototype.addIntersectionNode=function(t,e){var r=e,n=r+1;if(n<this._pts.length){var i=this._pts[n];t.equals2D(i)&&(r=n)}return this._nodeList.add(t,r)},pr.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},pr.prototype.interfaces_=function(){return[dr]},pr.prototype.getClass=function(){return pr},pr.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new jt;return pr.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var r=arguments[0],n=arguments[1],i=r.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)};var hr=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new O,this.p1=new O;else if(1===arguments.length){var t=arguments[0];this.p0=new O(t.p0),this.p1=new O(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this.p0=new O(e,r),this.p1=new O(n,i)}},gr={serialVersionUID:{configurable:!0}};hr.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},hr.prototype.orientationIndex=function(){if(arguments[0]instanceof hr){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),r=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&r>=0?Math.max(e,r):e<=0&&r<=0?Math.max(e,r):0}if(arguments[0]instanceof O){var n=arguments[0];return st.orientationIndex(this.p0,this.p1,n)}},hr.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},hr.prototype.isVertical=function(){return this.p0.x===this.p1.x},hr.prototype.equals=function(t){if(!(t instanceof hr))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},hr.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},hr.prototype.project=function(){if(arguments[0]instanceof O){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new O(t);var e=this.projectionFactor(t),r=new O;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof hr){var n=arguments[0],i=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(n.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(n.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new hr(a,s)}},hr.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},hr.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},hr.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},hr.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},hr.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},hr.prototype.midPoint=function(){return hr.midPoint(this.p0,this.p1)},hr.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;return n<=0?v.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n},hr.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var r=new Array(2).fill(null),n=v.MAX_VALUE,i=null,o=this.closestPoint(t.p0);n=o.distance(t.p0),r[0]=o,r[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<n&&(n=i,r[0]=a,r[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<n&&(n=i,r[0]=this.p0,r[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<n&&(n=i,r[0]=this.p1,r[1]=u),r},hr.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},hr.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},hr.prototype.getLength=function(){return this.p0.distance(this.p1)},hr.prototype.compareTo=function(t){var e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)},hr.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},hr.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},hr.prototype.lineIntersection=function(t){try{return X.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof V))throw t}return null},hr.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},hr.prototype.pointAlongOffset=function(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new O(r-u,n+s)},hr.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=r.x,this.p1.y=r.y}},hr.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||v.isNaN(e))&&(e=1),e},hr.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},hr.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},hr.prototype.distance=function(){if(arguments[0]instanceof hr){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof O){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},hr.prototype.pointAlong=function(t){var e=new O;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hr.prototype.hashCode=function(){var t=v.doubleToLongBits(this.p0.x);t^=31*v.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=v.doubleToLongBits(this.p1.x);return r^=31*v.doubleToLongBits(this.p1.y),e^Math.trunc(r)^Math.trunc(r>>32)},hr.prototype.interfaces_=function(){return[E,e]},hr.prototype.getClass=function(){return hr},hr.midPoint=function(t,e){return new O((t.x+e.x)/2,(t.y+e.y)/2)},gr.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(hr,gr);var _r=function(){this.tempEnv1=new q,this.tempEnv2=new q,this._overlapSeg1=new hr,this._overlapSeg2=new hr};_r.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];t.getLineSegment(e,this._overlapSeg1),r.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r};var yr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=r,this._context=n};yr.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},yr.prototype.computeSelect=function(t,e,r,n){var i=this._pts[e],o=this._pts[r];if(n.tempEnv1.init(i,o),r-e==1)return n.select(this,e),null;if(!t.intersects(n.tempEnv1))return null;var a=Math.trunc((e+r)/2);e<a&&this.computeSelect(t,e,a,n),a<r&&this.computeSelect(t,a,r,n)},yr.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,r=this._start;r<=this._end;r++)t[e++]=this._pts[r];return t},yr.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},yr.prototype.setId=function(t){this._id=t},yr.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},yr.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new q(t,e)}return this._env},yr.prototype.getEndIndex=function(){return this._end},yr.prototype.getStartIndex=function(){return this._start},yr.prototype.getContext=function(){return this._context},yr.prototype.getId=function(){return this._id},yr.prototype.computeOverlapsInternal=function(t,e,r,n,i,o){var a=this._pts[t],s=this._pts[e],u=r._pts[n],c=r._pts[i];if(e-t==1&&i-n==1)return o.overlap(this,t,r,n),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),f=Math.trunc((n+i)/2);t<l&&(n<f&&this.computeOverlapsInternal(t,l,r,n,f,o),f<i&&this.computeOverlapsInternal(t,l,r,f,i,o)),l<e&&(n<f&&this.computeOverlapsInternal(l,e,r,n,f,o),f<i&&this.computeOverlapsInternal(l,e,r,f,i,o))},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var mr=function(){};mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.getChainStartIndices=function(t){var e=0,r=new jt;r.add(new L(e));do{var n=mr.findChainEnd(t,e);r.add(new L(n)),e=n}while(e<t.length-1);return mr.toIntArray(r)},mr.findChainEnd=function(t,e){for(var r=e;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var n=Ge.quadrant(t[r],t[r+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Ge.quadrant(t[i-1],t[i])===n);)i++;return i-1},mr.getChains=function(){if(1===arguments.length){var t=arguments[0];return mr.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],r=arguments[1],n=new jt,i=mr.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new yr(e,i[o],i[o+1],r);n.add(a)}return n}},mr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var vr=function(){};vr.prototype.computeNodes=function(t){},vr.prototype.getNodedSubstrings=function(){},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr};var br=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};br.prototype.setSegmentIntersector=function(t){this._segInt=t},br.prototype.interfaces_=function(){return[vr]},br.prototype.getClass=function(){return br};var Er=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new jt,this._index=new or,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return pr.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=mr.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var r=e.next();r.setId(this._idCounter++),this._index.insert(r.getEnvelope(),r),this._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Sr(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var r=e.next(),n=this._index.query(r.getEnvelope()).iterator();n.hasNext();){var i=n.next();if(i.getId()>r.getId()&&(r.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.SegmentOverlapAction.get=function(){return Sr},Object.defineProperties(e,r),e}(br),Sr=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3],o=e.getContext(),a=n.getContext();this._si.processIntersections(o,r,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_r),jr=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Or={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};jr.prototype.getEndCapStyle=function(){return this._endCapStyle},jr.prototype.isSingleSided=function(){return this._isSingleSided},jr.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=jr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=jr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==jr.JOIN_ROUND&&(this._quadrantSegments=jr.DEFAULT_QUADRANT_SEGMENTS)},jr.prototype.getJoinStyle=function(){return this._joinStyle},jr.prototype.setJoinStyle=function(t){this._joinStyle=t},jr.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},jr.prototype.getSimplifyFactor=function(){return this._simplifyFactor},jr.prototype.getQuadrantSegments=function(){return this._quadrantSegments},jr.prototype.setEndCapStyle=function(t){this._endCapStyle=t},jr.prototype.getMitreLimit=function(){return this._mitreLimit},jr.prototype.setMitreLimit=function(t){this._mitreLimit=t},jr.prototype.setSingleSided=function(t){this._isSingleSided=t},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},jr.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Or.CAP_ROUND.get=function(){return 1},Or.CAP_FLAT.get=function(){return 2},Or.CAP_SQUARE.get=function(){return 3},Or.JOIN_ROUND.get=function(){return 1},Or.JOIN_MITRE.get=function(){return 2},Or.JOIN_BEVEL.get=function(){return 3},Or.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Or.DEFAULT_MITRE_LIMIT.get=function(){return 5},Or.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(jr,Or);var Pr=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Tr={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Pr.prototype.isDeletable=function(t,e,r,n){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[r];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,n)&&this.isShallowSampled(i,o,t,r,n)},Pr.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(e),n=!1;r<this._inputLine.length;){var i=!1;this.isDeletable(t,e,r,this._distanceTol)&&(this._isDeleted[e]=Pr.DELETE,i=!0,n=!0),t=i?r:e,e=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(e)}return n},Pr.prototype.isShallowConcavity=function(t,e,r,n){return st.computeOrientation(t,e,r)===this._angleOrientation&&st.distancePointLine(e,t,r)<n},Pr.prototype.isShallowSampled=function(t,e,r,n,i){var o=Math.trunc((n-r)/Pr.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=r;a<n;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Pr.prototype.isConcave=function(t,e,r){return st.computeOrientation(t,e,r)===this._angleOrientation},Pr.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Pr.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Pr.DELETE;)e++;return e},Pr.prototype.isShallow=function(t,e,r,n){return st.distancePointLine(e,t,r)<n},Pr.prototype.collapseLine=function(){for(var t=new Pt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Pr.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.simplify=function(t,e){return new Pr(t).simplify(e)},Tr.INIT.get=function(){return 0},Tr.DELETE.get=function(){return 1},Tr.KEEP.get=function(){return 1},Tr.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Pr,Tr);var xr=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new jt},Cr={COORDINATE_ARRAY_TYPE:{configurable:!0}};xr.prototype.getCoordinates=function(){return this._ptList.toArray(xr.COORDINATE_ARRAY_TYPE)},xr.prototype.setPrecisionModel=function(t){this._precisionModel=t},xr.prototype.addPt=function(t){var e=new O(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},xr.prototype.revere=function(){},xr.prototype.addPts=function(t,e){if(e)for(var r=0;r<t.length;r++)this.addPt(t[r]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},xr.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},xr.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},xr.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new O(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},xr.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr},Cr.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(xr,Cr);var Ir=function(){},wr={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},Ir.toDegrees=function(t){return 180*t/Math.PI},Ir.normalize=function(t){for(;t>Math.PI;)t-=Ir.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ir.PI_TIMES_2;return t},Ir.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],r=arguments[1],n=r.x-e.x,i=r.y-e.y;return Math.atan2(i,n)}},Ir.isAcute=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)>0},Ir.isObtuse=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)<0},Ir.interiorAngle=function(t,e,r){var n=Ir.angle(e,t),i=Ir.angle(e,r);return Math.abs(i-n)},Ir.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ir.PI_TIMES_2;t>=Ir.PI_TIMES_2&&(t=0)}else{for(;t>=Ir.PI_TIMES_2;)t-=Ir.PI_TIMES_2;t<0&&(t=0)}return t},Ir.angleBetween=function(t,e,r){var n=Ir.angle(e,t),i=Ir.angle(e,r);return Ir.diff(n,i)},Ir.diff=function(t,e){var r=null;return(r=t<e?e-t:t-e)>Math.PI&&(r=2*Math.PI-r),r},Ir.toRadians=function(t){return t*Math.PI/180},Ir.getTurn=function(t,e){var r=Math.sin(e-t);return r>0?Ir.COUNTERCLOCKWISE:r<0?Ir.CLOCKWISE:Ir.NONE},Ir.angleBetweenOriented=function(t,e,r){var n=Ir.angle(e,t),i=Ir.angle(e,r)-n;return i<=-Math.PI?i+Ir.PI_TIMES_2:i>Math.PI?i-Ir.PI_TIMES_2:i},wr.PI_TIMES_2.get=function(){return 2*Math.PI},wr.PI_OVER_2.get=function(){return Math.PI/2},wr.PI_OVER_4.get=function(){return Math.PI/4},wr.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},wr.CLOCKWISE.get=function(){return st.CLOCKWISE},wr.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Ir,wr);var Rr=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new hr,this._seg1=new hr,this._offset0=new hr,this._offset1=new hr,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=r,this._li=new it,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===jr.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},Nr={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Rr.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=st.computeOrientation(this._s0,this._s1,this._s2),n=r===st.CLOCKWISE&&this._side===Pe.LEFT||r===st.COUNTERCLOCKWISE&&this._side===Pe.RIGHT;0===r?this.addCollinear(e):n?this.addOutsideTurn(r,e):this.addInsideTurn(r,e)},Rr.prototype.addLineEndCap=function(t,e){var r=new hr(t,e),n=new hr;this.computeOffsetSegment(r,Pe.LEFT,this._distance,n);var i=new hr;this.computeOffsetSegment(r,Pe.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case jr.CAP_ROUND:this._segList.addPt(n.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case jr.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(i.p1);break;case jr.CAP_SQUARE:var u=new O;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var c=new O(n.p1.x+u.x,n.p1.y+u.y),l=new O(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},Rr.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Rr.prototype.addMitreJoin=function(t,e,r,n){var i=!0,o=null;try{o=X.intersection(e.p0,e.p1,r.p0,r.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof V))throw t;o=new O(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,r,n,this._bufParams.getMitreLimit())},Rr.prototype.addFilletCorner=function(t,e,r,n,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=r.x-t.x,c=r.y-t.y,l=Math.atan2(c,u);n===st.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,n,i),this._segList.addPt(r)},Rr.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Rr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===jr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===jr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Rr.prototype.createSquare=function(t){this._segList.addPt(new O(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new O(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new O(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new O(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Rr.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Rr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Rr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Rr.prototype.initSideSegments=function(t,e,r){this._s1=t,this._s2=e,this._side=r,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)},Rr.prototype.addLimitedMitreJoin=function(t,e,r,n){var i=this._seg0.p1,o=Ir.angle(i,this._seg0.p0),a=Ir.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Ir.normalize(o+a),u=Ir.normalize(s+Math.PI),c=n*r,l=r-c*Math.abs(Math.sin(a)),f=i.x+c*Math.cos(u),d=i.y+c*Math.sin(u),p=new O(f,d),h=new hr(i,p),g=h.pointAlongOffset(1,l),_=h.pointAlongOffset(1,-l);this._side===Pe.LEFT?(this._segList.addPt(g),this._segList.addPt(_)):(this._segList.addPt(_),this._segList.addPt(g))},Rr.prototype.computeOffsetSegment=function(t,e,r,n){var i=e===Pe.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*r*o/s,c=i*r*a/s;n.p0.x=t.p0.x-c,n.p0.y=t.p0.y+u,n.p1.x=t.p1.x-c,n.p1.y=t.p1.y+u},Rr.prototype.addFilletArc=function(t,e,r,n,i){var o=n===st.CLOCKWISE?-1:1,a=Math.abs(e-r),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,c=0,l=new O;c<a;){var f=e+o*c;l.x=t.x+i*Math.cos(f),l.y=t.y+i*Math.sin(f),this._segList.addPt(l),c+=u}},Rr.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Rr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new O((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var n=new O((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Rr.prototype.createCircle=function(t){var e=new O(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Rr.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Rr.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new xr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Rr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Rr.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===jr.JOIN_BEVEL||this._bufParams.getJoinStyle()===jr.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Rr.prototype.closeRing=function(){this._segList.closeRing()},Rr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Nr.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Nr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Nr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Nr.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Rr,Nr);var Mr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Mr.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var r=e<0,n=Math.abs(e),i=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,r,i);var o=i.getCoordinates();return r&&Tt.reverse(o),o},Mr.prototype.computeSingleSidedBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){r.addSegments(t,!0);var i=Pr.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Pe.LEFT),r.addFirstSegment();for(var a=o-2;a>=0;a--)r.addNextSegment(i[a],!0)}else{r.addSegments(t,!1);var s=Pr.simplify(t,n),u=s.length-1;r.initSideSegments(s[0],s[1],Pe.LEFT),r.addFirstSegment();for(var c=2;c<=u;c++)r.addNextSegment(s[c],!0)}r.addLastSegment(),r.closeRing()},Mr.prototype.computeRingBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);e===Pe.RIGHT&&(n=-n);var i=Pr.simplify(t,n),o=i.length-1;r.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;r.addNextSegment(i[a],s)}r.closeRing()},Mr.prototype.computeLineBufferCurve=function(t,e){var r=this.simplifyTolerance(this._distance),n=Pr.simplify(t,r),i=n.length-1;e.initSideSegments(n[0],n[1],Pe.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(n[o],!0);e.addLastSegment(),e.addLineEndCap(n[i-1],n[i]);var a=Pr.simplify(t,-r),s=a.length-1;e.initSideSegments(a[s],a[s-1],Pe.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Mr.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case jr.CAP_ROUND:e.createCircle(t);break;case jr.CAP_SQUARE:e.createSquare(t)}},Mr.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var r=Math.abs(e),n=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],n);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()},Mr.prototype.getBufferParameters=function(){return this._bufParams},Mr.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Mr.prototype.getRingCurve=function(t,e,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return Mr.copyCoordinates(t);var n=this.getSegGen(r);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},Mr.prototype.computeOffsetCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){var i=Pr.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Pe.LEFT),r.addFirstSegment();for(var a=o-2;a>=0;a--)r.addNextSegment(i[a],!0)}else{var s=Pr.simplify(t,n),u=s.length-1;r.initSideSegments(s[0],s[1],Pe.LEFT),r.addFirstSegment();for(var c=2;c<=u;c++)r.addNextSegment(s[c],!0)}r.addLastSegment()},Mr.prototype.getSegGen=function(t){return new Rr(this._precisionModel,this._bufParams,t)},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),r=0;r<e.length;r++)e[r]=new O(t[r]);return e};var Lr=function(){this._subgraphs=null,this._seg=new hr,this._cga=new st;var t=arguments[0];this._subgraphs=t},Ar={DepthSegment:{configurable:!0}};Lr.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new jt,r=this._subgraphs.iterator();r.hasNext();){var n=r.next(),i=n.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,n.getDirectedEdges(),e)}return e}if(3===arguments.length)if(w(arguments[2],St)&&arguments[0]instanceof O&&arguments[1]instanceof ze){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var l=a.getDepth(Pe.LEFT);this._seg.p0.equals(u[c])||(l=a.getDepth(Pe.RIGHT));var f=new Fr(this._seg,l);s.add(f)}}else if(w(arguments[2],St)&&arguments[0]instanceof O&&w(arguments[1],St))for(var d=arguments[0],p=arguments[1],h=arguments[2],g=p.iterator();g.hasNext();){var _=g.next();_.isForward()&&this.findStabbedSegments(d,_,h)}},Lr.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$e.min(e)._leftDepth},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Ar.DepthSegment.get=function(){return Fr},Object.defineProperties(Lr,Ar);var Fr=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new hr(t),this._leftDepth=e};Fr.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==r?r:0!=(r=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?r:this._upwardSeg.compareTo(e._upwardSeg)},Fr.prototype.compareX=function(t,e){var r=t.p0.compareTo(e.p0);return 0!==r?r:t.p1.compareTo(e.p1)},Fr.prototype.toString=function(){return this._upwardSeg.toString()},Fr.prototype.interfaces_=function(){return[E]},Fr.prototype.getClass=function(){return Fr};var Dr=function(t,e,r){this.p0=t||null,this.p1=e||null,this.p2=r||null};Dr.prototype.area=function(){return Dr.area(this.p0,this.p1,this.p2)},Dr.prototype.signedArea=function(){return Dr.signedArea(this.p0,this.p1,this.p2)},Dr.prototype.interpolateZ=function(t){if(null===t)throw new m("Supplied point is null.");return Dr.interpolateZ(t,this.p0,this.p1,this.p2)},Dr.prototype.longestSideLength=function(){return Dr.longestSideLength(this.p0,this.p1,this.p2)},Dr.prototype.isAcute=function(){return Dr.isAcute(this.p0,this.p1,this.p2)},Dr.prototype.circumcentre=function(){return Dr.circumcentre(this.p0,this.p1,this.p2)},Dr.prototype.area3D=function(){return Dr.area3D(this.p0,this.p1,this.p2)},Dr.prototype.centroid=function(){return Dr.centroid(this.p0,this.p1,this.p2)},Dr.prototype.inCentre=function(){return Dr.inCentre(this.p0,this.p1,this.p2)},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.area=function(t,e,r){return Math.abs(((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2)},Dr.signedArea=function(t,e,r){return((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2},Dr.det=function(t,e,r,n){return t*n-e*r},Dr.interpolateZ=function(t,e,r,n){var i=e.x,o=e.y,a=r.x-i,s=n.x-i,u=r.y-o,c=n.y-o,l=a*c-s*u,f=t.x-i,d=t.y-o,p=(c*f-s*d)/l,h=(-u*f+a*d)/l;return e.z+p*(r.z-e.z)+h*(n.z-e.z)},Dr.longestSideLength=function(t,e,r){var n=t.distance(e),i=e.distance(r),o=r.distance(t),a=n;return i>a&&(a=i),o>a&&(a=o),a},Dr.isAcute=function(t,e,r){return!!Ir.isAcute(t,e,r)&&!!Ir.isAcute(e,r,t)&&!!Ir.isAcute(r,t,e)},Dr.circumcentre=function(t,e,r){var n=r.x,i=r.y,o=t.x-n,a=t.y-i,s=e.x-n,u=e.y-i,c=2*Dr.det(o,a,s,u),l=Dr.det(a,o*o+a*a,u,s*s+u*u),f=Dr.det(o,o*o+a*a,s,s*s+u*u);return new O(n-l/c,i+f/c)},Dr.perpendicularBisector=function(t,e){var r=e.x-t.x,n=e.y-t.y,i=new X(t.x+r/2,t.y+n/2,1),o=new X(t.x-n+r/2,t.y+r+n/2,1);return new X(i,o)},Dr.angleBisector=function(t,e,r){var n=e.distance(t),i=n/(n+e.distance(r)),o=r.x-t.x,a=r.y-t.y;return new O(t.x+i*o,t.y+i*a)},Dr.area3D=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=r.x-t.x,s=r.y-t.y,u=r.z-t.z,c=i*u-o*s,l=o*a-n*u,f=n*s-i*a,d=c*c+l*l+f*f;return Math.sqrt(d)/2},Dr.centroid=function(t,e,r){var n=(t.x+e.x+r.x)/3,i=(t.y+e.y+r.y)/3;return new O(n,i)},Dr.inCentre=function(t,e,r){var n=e.distance(r),i=t.distance(r),o=t.distance(e),a=n+i+o,s=(n*t.x+i*e.x+o*r.x)/a,u=(n*t.y+i*e.y+o*r.y)/a;return new O(s,u)};var kr=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new jt;var t=arguments[0],e=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=r};kr.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,C.EXTERIOR,C.INTERIOR)},kr.prototype.addPolygon=function(t){var e=this._distance,r=Pe.LEFT;this._distance<0&&(e=-this._distance,r=Pe.RIGHT);var n=t.getExteriorRing(),i=Tt.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,r,C.EXTERIOR,C.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Tt.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Pe.opposite(r),C.INTERIOR,C.EXTERIOR)}},kr.prototype.isTriangleErodedCompletely=function(t,e){var r=new Dr(t[0],t[1],t[2]),n=r.inCentre();return st.distancePointLine(n,r.p0,r.p1)<Math.abs(e)},kr.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Tt.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,C.EXTERIOR,C.INTERIOR)},kr.prototype.addCurve=function(t,e,r){if(null===t||t.length<2)return null;var n=new pr(t,new Ne(0,C.BOUNDARY,e,r));this._curveList.add(n)},kr.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},kr.prototype.addPolygonRing=function(t,e,r,n,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=n,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=n,r=Pe.opposite(r));var s=this._curveBuilder.getRingCurve(t,r,e);this.addCurve(s,o,a)},kr.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Kt?this.addLineString(t):t instanceof Jt?this.addPoint(t):t instanceof te?this.addCollection(t):t instanceof Vt?this.addCollection(t):t instanceof re?this.addCollection(t):t instanceof zt&&this.addCollection(t)},kr.prototype.isErodedCompletely=function(t,e){var r=t.getCoordinates();if(r.length<4)return e<0;if(4===r.length)return this.isTriangleErodedCompletely(r,e);var n=t.getEnvelopeInternal(),i=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>i},kr.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr};var Gr=function(){};Gr.prototype.locate=function(t){},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr};var Ur=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Ur.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ur.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new n;var t=this._parent.getGeometryN(this._index++);return t instanceof zt?(this._subcollectionIterator=new Ur(t),this._subcollectionIterator.next()):t},Ur.prototype.remove=function(){throw new Error(this.getClass().getName())},Ur.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ur.prototype.interfaces_=function(){return[Et]},Ur.prototype.getClass=function(){return Ur},Ur.isAtomic=function(t){return!(t instanceof zt)};var Br=function(){this._geom=null;var t=arguments[0];this._geom=t};Br.prototype.locate=function(t){return Br.locate(t,this._geom)},Br.prototype.interfaces_=function(){return[Gr]},Br.prototype.getClass=function(){return Br},Br.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},Br.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var r=e.getExteriorRing();if(!Br.isPointInRing(t,r))return!1;for(var n=0;n<e.getNumInteriorRing();n++){var i=e.getInteriorRingN(n);if(Br.isPointInRing(t,i))return!1}return!0},Br.containsPoint=function(t,e){if(e instanceof $t)return Br.containsPointInPolygon(t,e);if(e instanceof zt)for(var r=new Ur(e);r.hasNext();){var n=r.next();if(n!==e&&Br.containsPoint(t,n))return!0}return!1},Br.locate=function(t,e){return e.isEmpty()?C.EXTERIOR:Br.containsPoint(t,e)?C.INTERIOR:C.EXTERIOR};var zr=function(){this._edgeMap=new f,this._edgeList=null,this._ptInAreaLocation=[C.NONE,C.NONE]};zr.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)},zr.prototype.propagateSideLabels=function(t){for(var e=C.NONE,r=this.iterator();r.hasNext();){var n=r.next().getLabel();n.isArea(t)&&n.getLocation(t,Pe.LEFT)!==C.NONE&&(e=n.getLocation(t,Pe.LEFT))}if(e===C.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Pe.ON)===C.NONE&&s.setLocation(t,Pe.ON,i),s.isArea(t)){var u=s.getLocation(t,Pe.LEFT),c=s.getLocation(t,Pe.RIGHT);if(c!==C.NONE){if(c!==i)throw new Ce("side location conflict",a.getCoordinate());u===C.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else et.isTrue(s.getLocation(t,Pe.LEFT)===C.NONE,"found single null side"),s.setLocation(t,Pe.RIGHT,i),s.setLocation(t,Pe.LEFT,i)}}},zr.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},zr.prototype.print=function(t){Y.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},zr.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},zr.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,n=e.get(r).getLabel().getLocation(t,Pe.LEFT);et.isTrue(n!==C.NONE,"Found unlabelled area edge");for(var i=n,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Pe.LEFT),u=a.getLocation(t,Pe.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},zr.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},zr.prototype.iterator=function(){return this.getEdges().iterator()},zr.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new jt(this._edgeMap.values())),this._edgeList},zr.prototype.getLocation=function(t,e,r){return this._ptInAreaLocation[t]===C.NONE&&(this._ptInAreaLocation[t]=Br.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]},zr.prototype.toString=function(){var t=new M;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append("\n")}return t.toString()},zr.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},zr.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var n=r.next().getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===C.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var c=C.NONE;if(e[u])c=C.EXTERIOR;else{var l=a.getCoordinate();c=this.getLocation(u,l,t)}s.setAllLocationsIfNull(u,c)}},zr.prototype.getDegree=function(){return this._edgeMap.size()},zr.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr};var Vr=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,r=this._SCANNING_FOR_INCOMING,n=0;n<this._resultAreaEdgeList.size();n++){var i=this._resultAreaEdgeList.get(n),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),r){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),r=this._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===t)throw new Ce("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var r=t.get(0);if(1===e)return r;var n=t.get(e-1),i=r.getQuadrant(),o=n.getQuadrant();return Ge.isNorthern(i)&&Ge.isNorthern(o)?r:Ge.isNorthern(i)||Ge.isNorthern(o)?0!==r.getDy()?r:0!==n.getDy()?n:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},e.prototype.print=function(t){Y.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var r=e.next();t.print("out "),r.print(t),t.println(),t.print("in "),r.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new jt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var r=e.next().getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,r=this._edgeList.size()-1;r>=0;r--){var n=this._edgeList.get(r),i=n.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=n}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),r=t.getDepth(Pe.LEFT),n=t.getDepth(Pe.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),r);if(this.computeDepths(0,e,i)!==n)throw new Ce("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=o;u<a;u++){var c=this._edgeList.get(u);c.setEdgeDepths(Pe.RIGHT,s),s=c.getDepth(Pe.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,r=null,n=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),n){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;r=a,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;r.setNextMin(o),n=this._SCANNING_FOR_INCOMING}}n===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var r=arguments[0],n=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===r&&n++;return n}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=C.NONE,e=this.iterator();e.hasNext();){var r=e.next(),n=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){t=C.INTERIOR;break}if(n.isInResult()){t=C.EXTERIOR;break}}}if(t===C.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===C.INTERIOR):(a.isInResult()&&(i=C.EXTERIOR),s.isInResult()&&(i=C.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Ne(C.NONE);for(var r=this.iterator();r.hasNext();)for(var n=r.next().getEdge().getLabel(),i=0;i<2;i++){var o=n.getLocation(i);o!==C.INTERIOR&&o!==C.BOUNDARY||this._label.setLocation(i,C.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zr),Yr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new De(t,new Vr)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ve),Xr=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Xr.prototype.compareTo=function(t){var e=t;return Xr.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Xr.prototype.interfaces_=function(){return[E]},Xr.prototype.getClass=function(){return Xr},Xr.orientation=function(t){return 1===Tt.increasingDirection(t)},Xr.compareOriented=function(t,e,r,n){for(var i=e?1:-1,o=n?1:-1,a=e?t.length:-1,s=n?r.length:-1,u=e?0:t.length-1,c=n?0:r.length-1;;){var l=t[u].compareTo(r[c]);if(0!==l)return l;var f=(u+=i)===a,d=(c+=o)===s;if(f&&!d)return-1;if(!f&&d)return 1;if(f&&d)return 0}};var qr=function(){this._edges=new jt,this._ocaMap=new f};qr.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var r=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var n=r.getCoordinates(),i=0;i<n.length;i++)i>0&&t.print(","),t.print(n[i].x+" "+n[i].y);t.println(")")}t.print(")  ")},qr.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},qr.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},qr.prototype.iterator=function(){return this._edges.iterator()},qr.prototype.getEdges=function(){return this._edges},qr.prototype.get=function(t){return this._edges.get(t)},qr.prototype.findEqualEdge=function(t){var e=new Xr(t.getCoordinates());return this._ocaMap.get(e)},qr.prototype.add=function(t){this._edges.add(t);var e=new Xr(t.getCoordinates());this._ocaMap.put(e,t)},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr};var Wr=function(){};Wr.prototype.processIntersections=function(t,e,r,n){},Wr.prototype.isDone=function(){},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Hr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Hr.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(Hr.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},Hr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Hr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Hr.prototype.getLineIntersector=function(){return this._li},Hr.prototype.hasProperIntersection=function(){return this._hasProper},Hr.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Hr.prototype.hasIntersection=function(){return this._hasIntersection},Hr.prototype.isDone=function(){return!1},Hr.prototype.hasInteriorIntersection=function(){return this._hasInterior},Hr.prototype.interfaces_=function(){return[Wr]},Hr.prototype.getClass=function(){return Hr},Hr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Kr=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new O(t),this.segmentIndex=e,this.dist=r};Kr.prototype.getSegmentIndex=function(){return this.segmentIndex},Kr.prototype.getCoordinate=function(){return this.coord},Kr.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Kr.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Kr.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Kr.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Kr.prototype.getDistance=function(){return this.dist},Kr.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Kr.prototype.interfaces_=function(){return[E]},Kr.prototype.getClass=function(){return Kr};var Zr=function(){this._nodeMap=new f,this.edge=null;var t=arguments[0];this.edge=t};Zr.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Zr.prototype.iterator=function(){return this._nodeMap.values().iterator()},Zr.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},Zr.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Zr.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),a=0;o[a++]=new O(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new en(o,new Ne(this.edge._label))},Zr.prototype.add=function(t,e,r){var n=new Kr(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)},Zr.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr};var Jr=function(){};Jr.prototype.getChainStartIndices=function(t){var e=0,r=new jt;r.add(new L(e));do{var n=this.findChainEnd(t,e);r.add(new L(n)),e=n}while(e<t.length-1);return Jr.toIntArray(r)},Jr.prototype.findChainEnd=function(t,e){for(var r=Ge.quadrant(t[e],t[e+1]),n=e+1;n<t.length&&Ge.quadrant(t[n-1],t[n])===r;)n++;return n-1},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr},Jr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var Qr=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new q,this.env2=new q;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jr;this.startIndex=e.getChainStartIndices(this.pts)};Qr.prototype.getCoordinates=function(){return this.pts},Qr.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r},Qr.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r},Qr.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],f=this.pts[o],d=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(l,f),this.env2.init(d,p),!this.env1.intersects(this.env2))return null;var h=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<h&&(s<g&&this.computeIntersectsForChain(i,h,a,s,g,c),g<u&&this.computeIntersectsForChain(i,h,a,g,u,c)),h<o&&(s<g&&this.computeIntersectsForChain(h,o,a,s,g,c),g<u&&this.computeIntersectsForChain(h,o,a,g,u,c))}},Qr.prototype.getStartIndexes=function(){return this.startIndex},Qr.prototype.computeIntersects=function(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr};var $r=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var r=0;r<3;r++)this._depth[e][r]=t.NULL_VALUE},tn={NULL_VALUE:{configurable:!0}};$r.prototype.getDepth=function(t,e){return this._depth[t][e]},$r.prototype.setDepth=function(t,e,r){this._depth[t][e]=r},$r.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==$r.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===$r.NULL_VALUE}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this._depth[n][i]===$r.NULL_VALUE}},$r.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var r=1;r<3;r++){var n=0;this._depth[t][r]>e&&(n=1),this._depth[t][r]=n}}},$r.prototype.getDelta=function(t){return this._depth[t][Pe.RIGHT]-this._depth[t][Pe.LEFT]},$r.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?C.EXTERIOR:C.INTERIOR},$r.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},$r.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var r=1;r<3;r++){var n=t.getLocation(e,r);n!==C.EXTERIOR&&n!==C.INTERIOR||(this.isNull(e,r)?this._depth[e][r]=$r.depthAtLocation(n):this._depth[e][r]+=$r.depthAtLocation(n))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===C.INTERIOR&&this._depth[i][o]++}},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.depthAtLocation=function(t){return t===C.EXTERIOR?0:t===C.INTERIOR?1:$r.NULL_VALUE},tn.NULL_VALUE.get=function(){return-1},Object.defineProperties($r,tn);var en=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Zr(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new $r,this._depthDelta=0,1===arguments.length){var r=arguments[0];e.call(this,r,null)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Ne.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;if(this.pts.length!==r.pts.length)return!1;for(var n=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(r.pts[a])||(n=!1),this.pts[a].equals2D(r.pts[--o])||(i=!1),!n&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qr(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new q;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,r,n){var i=new O(t.getIntersection(n)),o=e,a=t.getEdgeDistance(r,n),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new M;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],r=arguments[1];r.setAtLeastIfValid(e.getLocation(0,Pe.ON),e.getLocation(1,Pe.ON),1),e.isArea()&&(r.setAtLeastIfValid(e.getLocation(0,Pe.LEFT),e.getLocation(1,Pe.LEFT),2),r.setAtLeastIfValid(e.getLocation(0,Pe.RIGHT),e.getLocation(1,Pe.RIGHT),2))},e}(Fe),rn=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new qr,this._bufParams=t||null};rn.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rn.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Ne(t.getLabel())).flip(),r.merge(n);var i=rn.depthDelta(n),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rn.depthDelta(t.getLabel()))},rn.prototype.buildSubgraphs=function(t,e){for(var r=new jt,n=t.iterator();n.hasNext();){var i=n.next(),o=i.getRightmostCoordinate(),a=new Lr(r).getDepth(o);i.computeDepth(a),i.findResultEdges(),r.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rn.prototype.createSubgraphs=function(t){for(var e=new jt,r=t.getNodes().iterator();r.hasNext();){var n=r.next();if(!n.isVisited()){var i=new we;i.create(n),e.add(i)}}return $e.sort(e,$e.reverseOrder()),e},rn.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rn.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Er,r=new it;return r.setPrecisionModel(t),e.setSegmentIntersector(new Hr(r)),e},rn.prototype.buffer=function(t,e){var r=this._workingPrecisionModel;null===r&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var n=new Mr(r,this._bufParams),i=new kr(t,e,n).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,r),this._graph=new Ye(new Yr),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Xe(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rn.prototype.computeNodedEdges=function(t,e){var r=this.getNoder(e);r.computeNodes(t);for(var n=r.getNodedSubstrings().iterator();n.hasNext();){var i=n.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new en(i.getCoordinates(),new Ne(a));this.insertUniqueEdge(s)}}},rn.prototype.setNoder=function(t){this._workingNoder=t},rn.prototype.interfaces_=function(){return[]},rn.prototype.getClass=function(){return rn},rn.depthDelta=function(t){var e=t.getLocation(0,Pe.LEFT),r=t.getLocation(0,Pe.RIGHT);return e===C.INTERIOR&&r===C.EXTERIOR?1:e===C.EXTERIOR&&r===C.INTERIOR?-1:0},rn.convertSegStrings=function(t){for(var e=new ye,r=new jt;t.hasNext();){var n=t.next(),i=e.createLineString(n.getCoordinates());r.add(i)}return e.buildGeometry(r)};var nn=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this._noder=r,this._scaleFactor=n,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};nn.prototype.rescale=function(){if(w(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],n=0;n<r.length;n++)r[n].x=r[n].x/this._scaleFactor+this._offsetX,r[n].y=r[n].y/this._scaleFactor+this._offsetY;2===r.length&&r[0].equals2D(r[1])&&Y.out.println(r)}},nn.prototype.scale=function(){if(w(arguments[0],bt)){for(var t=arguments[0],e=new jt,r=t.iterator();r.hasNext();){var n=r.next();e.add(new pr(this.scale(n.getCoordinates()),n.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new O(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Tt.removeRepeatedPoints(o)}},nn.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},nn.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},nn.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},nn.prototype.interfaces_=function(){return[vr]},nn.prototype.getClass=function(){return nn};var on=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},an={fact:{configurable:!0}};on.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var r=arguments[0],n=arguments[1].iterator();n.hasNext();)for(var i=n.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(r))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+r)},on.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),r=this._segStrings.iterator();r.hasNext();){var n=r.next();this.checkInteriorIntersections(e,n)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],f=arguments[1],d=arguments[2],p=arguments[3];if(l===d&&f===p)return null;var h=l.getCoordinates()[f],g=l.getCoordinates()[f+1],_=d.getCoordinates()[p],y=d.getCoordinates()[p+1];if(this._li.computeIntersection(h,g,_,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,h,g)||this.hasInteriorIntersection(this._li,_,y)))throw new $("found non-noded intersection at "+h+"-"+g+" and "+_+"-"+y)}},on.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},on.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var r=arguments[0].getCoordinates(),n=0;n<r.length-2;n++)this.checkCollapse(r[n],r[n+1],r[n+2])},on.prototype.hasInteriorIntersection=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++){var i=t.getIntersection(n);if(!i.equals(e)&&!i.equals(r))return!0}return!1},on.prototype.checkCollapse=function(t,e,r){if(t.equals(r))throw new $("found non-noded collapse at "+on.fact.createLineString([t,e,r]))},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on},an.fact.get=function(){return new ye},Object.defineProperties(on,an);var sn=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=r,e<=0)throw new m("Scale factor must be non-zero");1!==e&&(this._pt=new O(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new O,this._p1Scaled=new O),this.initCorners(this._pt)},un={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sn.prototype.intersectsScaled=function(t,e){var r=Math.min(t.x,e.x),n=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<r||this._minx>n||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sn.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new O(this._maxx,this._maxy),this._corner[1]=new O(this._minx,this._maxy),this._corner[2]=new O(this._minx,this._miny),this._corner[3]=new O(this._maxx,this._miny)},sn.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sn.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sn.prototype.getCoordinate=function(){return this._originalPt},sn.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sn.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sn.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new q(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sn.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},sn.prototype.intersectsToleranceSquare=function(t,e){var r=!1,n=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||r&&n||t.equals(this._pt)||e.equals(this._pt)))))},sn.prototype.addSnappedNode=function(t,e){var r=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(r,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},sn.prototype.interfaces_=function(){return[]},sn.prototype.getClass=function(){return sn},un.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sn,un);var cn=function(){this.tempEnv1=new q,this.selectedSegment=new hr};cn.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var ln=function(){this._index=null;var t=arguments[0];this._index=t},fn={HotPixelSnapAction:{configurable:!0}};ln.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=e.getSafeEnvelope(),o=new dn(e,r,n);return this._index.query(i,{interfaces_:function(){return[Ke]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},fn.HotPixelSnapAction.get=function(){return dn},Object.defineProperties(ln,fn);var dn=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=r,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],r=arguments[1],n=e.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cn),pn=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new jt};pn.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)}},pn.prototype.isDone=function(){return!1},pn.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pn.prototype.interfaces_=function(){return[Wr]},pn.prototype.getClass=function(){return pn};var hn=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};hn.prototype.checkCorrectness=function(t){var e=pr.getNodedSubstrings(t),r=new on(e);try{r.checkValid()}catch(t){if(!(t instanceof z))throw t;t.printStackTrace()}},hn.prototype.getNodedSubstrings=function(){return pr.getNodedSubstrings(this._nodedSegStrings)},hn.prototype.snapRound=function(t,e){var r=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)},hn.prototype.findInteriorIntersections=function(t,e){var r=new pn(e);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()},hn.prototype.computeVertexSnaps=function(){if(w(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof pr)for(var r=arguments[0],n=r.getCoordinates(),i=0;i<n.length;i++){var o=new sn(n[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,r,i)&&r.addIntersection(n[i],i)}},hn.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Er,this._pointSnapper=new ln(this._noder.getIndex()),this.snapRound(t,this._li)},hn.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=new sn(r,this._scaleFactor,this._li);this._pointSnapper.snap(n)}},hn.prototype.interfaces_=function(){return[vr]},hn.prototype.getClass=function(){return hn};var gn=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new jr,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._argGeom=e,this._bufParams=r}},_n={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gn.prototype.bufferFixedPrecision=function(t){var e=new nn(new hn(new pe(1)),t.getScale()),r=new rn(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(e),this._resultGeometry=r.buffer(this._argGeom,this._distance)},gn.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gn.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ce))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var r=arguments[0],n=gn.precisionScaleFactor(this._argGeom,this._distance,r),i=new pe(n);this.bufferFixedPrecision(i)}},gn.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gn.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gn.prototype.bufferOriginalPrecision=function(){try{var t=new rn(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},gn.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gn.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gn.prototype.interfaces_=function(){return[]},gn.prototype.getClass=function(){return gn},gn.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new gn(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1],i=arguments[2],o=new gn(r);return o.setQuadrantSegments(i),o.getResultGeometry(n)}if(arguments[2]instanceof jr&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],u=arguments[2];return new gn(a,u).getResultGeometry(s)}}else if(4===arguments.length){var c=arguments[0],l=arguments[1],f=arguments[2],d=arguments[3],p=new gn(c);return p.setQuadrantSegments(f),p.setEndCapStyle(d),p.getResultGeometry(l)}},gn.precisionScaleFactor=function(t,e,r){var n=t.getEnvelopeInternal(),i=R.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=r-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},_n.CAP_ROUND.get=function(){return jr.CAP_ROUND},_n.CAP_BUTT.get=function(){return jr.CAP_FLAT},_n.CAP_FLAT.get=function(){return jr.CAP_FLAT},_n.CAP_SQUARE.get=function(){return jr.CAP_SQUARE},_n.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gn,_n);var yn=function(){this._pt=[new O,new O],this._distance=v.NaN,this._isNull=!0};yn.prototype.getCoordinates=function(){return this._pt},yn.prototype.getCoordinate=function(t){return this._pt[t]},yn.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},yn.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},yn.prototype.getDistance=function(){return this._distance},yn.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var mn=function(){};mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn},mn.computeDistance=function(){if(arguments[2]instanceof yn&&arguments[0]instanceof Kt&&arguments[1]instanceof O)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=t.getCoordinates(),i=new hr,o=0;o<n.length-1;o++){i.setCoordinates(n[o],n[o+1]);var a=i.closestPoint(e);r.setMinimum(a,e)}else if(arguments[2]instanceof yn&&arguments[0]instanceof $t&&arguments[1]instanceof O){var s=arguments[0],u=arguments[1],c=arguments[2];mn.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)mn.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof yn&&arguments[0]instanceof lt&&arguments[1]instanceof O){var f=arguments[0],d=arguments[1],p=arguments[2];if(f instanceof Kt)mn.computeDistance(f,d,p);else if(f instanceof $t)mn.computeDistance(f,d,p);else if(f instanceof zt)for(var h=f,g=0;g<h.getNumGeometries();g++){var _=h.getGeometryN(g);mn.computeDistance(_,d,p)}else p.setMinimum(f.getCoordinate(),d)}else if(arguments[2]instanceof yn&&arguments[0]instanceof hr&&arguments[1]instanceof O){var y=arguments[0],m=arguments[1],v=arguments[2],b=y.closestPoint(m);v.setMinimum(b,m)}};var vn=function(t){this._maxPtDist=new yn,this._inputGeom=t||null},bn={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};vn.prototype.computeMaxMidpointDistance=function(t){var e=new Sn(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vn.prototype.computeMaxVertexDistance=function(t){var e=new En(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vn.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vn.prototype.getDistancePoints=function(){return this._maxPtDist},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},bn.MaxPointDistanceFilter.get=function(){return En},bn.MaxMidpointDistanceFilter.get=function(){return Sn},Object.defineProperties(vn,bn);var En=function(t){this._maxPtDist=new yn,this._minPtDist=new yn,this._geom=t||null};En.prototype.filter=function(t){this._minPtDist.initialize(),mn.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},En.prototype.getMaxPointDistance=function(){return this._maxPtDist},En.prototype.interfaces_=function(){return[pt]},En.prototype.getClass=function(){return En};var Sn=function(t){this._maxPtDist=new yn,this._minPtDist=new yn,this._geom=t||null};Sn.prototype.filter=function(t,e){if(0===e)return null;var r=t.getCoordinate(e-1),n=t.getCoordinate(e),i=new O((r.x+n.x)/2,(r.y+n.y)/2);this._minPtDist.initialize(),mn.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Sn.prototype.isDone=function(){return!1},Sn.prototype.isGeometryChanged=function(){return!1},Sn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Sn.prototype.interfaces_=function(){return[Bt]},Sn.prototype.getClass=function(){return Sn};var jn=function(t){this._comps=t||null};jn.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},jn.prototype.interfaces_=function(){return[Ut]},jn.prototype.getClass=function(){return jn},jn.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return jn.getPolygons(t,new jt)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof $t?r.add(e):e instanceof zt&&e.apply(new jn(r)),r}};var On=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._lines=e,this._isForcedToLineString=r}};On.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Kt&&this._lines.add(t)},On.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},On.prototype.interfaces_=function(){return[ct]},On.prototype.getClass=function(){return On},On.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(On.getLines(t))}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().buildGeometry(On.getLines(e,r))}},On.getLines=function(){if(1===arguments.length){var t=arguments[0];return On.getLines(t,!1)}if(2===arguments.length){if(w(arguments[0],bt)&&w(arguments[1],bt)){for(var e=arguments[0],r=arguments[1],n=e.iterator();n.hasNext();){var i=n.next();On.getLines(i,r)}return r}if(arguments[0]instanceof lt&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new jt;return o.apply(new On(s,a)),s}if(arguments[0]instanceof lt&&w(arguments[1],bt)){var u=arguments[0],c=arguments[1];return u instanceof Kt?c.add(u):u.apply(new On(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&w(arguments[0],bt)&&w(arguments[1],bt)){for(var l=arguments[0],f=arguments[1],d=arguments[2],p=l.iterator();p.hasNext();){var h=p.next();On.getLines(h,f,d)}return f}if("boolean"==typeof arguments[2]&&arguments[0]instanceof lt&&w(arguments[1],bt)){var g=arguments[0],_=arguments[1],y=arguments[2];return g.apply(new On(_,y)),_}}};var Pn=function(){if(this._boundaryRule=ht.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new m("Rule must be non-null");this._boundaryRule=t}};Pn.prototype.locateInternal=function(){if(arguments[0]instanceof O&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return C.EXTERIOR;var r=e.getExteriorRing(),n=this.locateInPolygonRing(t,r);if(n===C.EXTERIOR)return C.EXTERIOR;if(n===C.BOUNDARY)return C.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===C.INTERIOR)return C.EXTERIOR;if(a===C.BOUNDARY)return C.BOUNDARY}return C.INTERIOR}if(arguments[0]instanceof O&&arguments[1]instanceof Kt){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return C.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?st.isOnLine(s,c)?C.INTERIOR:C.EXTERIOR:C.BOUNDARY}if(arguments[0]instanceof O&&arguments[1]instanceof Jt){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?C.INTERIOR:C.EXTERIOR}},Pn.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):C.EXTERIOR},Pn.prototype.intersects=function(t,e){return this.locate(t,e)!==C.EXTERIOR},Pn.prototype.updateLocationInfo=function(t){t===C.INTERIOR&&(this._isIn=!0),t===C.BOUNDARY&&this._numBoundaries++},Pn.prototype.computeLocation=function(t,e){if(e instanceof Jt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Kt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Vt)for(var r=e,n=0;n<r.getNumGeometries();n++){var i=r.getGeometryN(n);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof re)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof zt)for(var u=new Ur(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Pn.prototype.locate=function(t,e){return e.isEmpty()?C.EXTERIOR:e instanceof Kt?this.locateInternal(t,e):e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?C.BOUNDARY:this._numBoundaries>0||this._isIn?C.INTERIOR:C.EXTERIOR)},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn};var Tn=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],r=arguments[1];t.call(this,e,t.INSIDE_AREA,r)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._component=n,this._segIndex=i,this._pt=o}},xn={INSIDE_AREA:{configurable:!0}};Tn.prototype.isInsideArea=function(){return this._segIndex===Tn.INSIDE_AREA},Tn.prototype.getCoordinate=function(){return this._pt},Tn.prototype.getGeometryComponent=function(){return this._component},Tn.prototype.getSegmentIndex=function(){return this._segIndex},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},xn.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Tn,xn);var Cn=function(t){this._pts=t||null};Cn.prototype.filter=function(t){t instanceof Jt&&this._pts.add(t)},Cn.prototype.interfaces_=function(){return[Ut]},Cn.prototype.getClass=function(){return Cn},Cn.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Jt?$e.singletonList(t):Cn.getPoints(t,new jt)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof Jt?r.add(e):e instanceof zt&&e.apply(new Cn(r)),r}};var In=function(){this._locations=null;var t=arguments[0];this._locations=t};In.prototype.filter=function(t){(t instanceof Jt||t instanceof Kt||t instanceof $t)&&this._locations.add(new Tn(t,0,t.getCoordinate()))},In.prototype.interfaces_=function(){return[Ut]},In.prototype.getClass=function(){return In},In.getLocations=function(t){var e=new jt;return t.apply(new In(e)),e};var wn=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Pn,this._minDistanceLocation=null,this._minDistance=v.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=n,this._terminateDistance=i}};wn.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=1-e,i=jn.getPolygons(this._geom[e]);if(i.size()>0){var o=In.getLocations(this._geom[n]);if(this.computeContainmentDistance(o,i,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[n]=r[0],this._minDistanceLocation[e]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&w(arguments[0],St)&&w(arguments[1],St)){for(var a=arguments[0],s=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var l=a.get(c),f=0;f<s.size();f++)if(this.computeContainmentDistance(l,s.get(f),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tn&&arguments[1]instanceof $t){var d=arguments[0],p=arguments[1],h=arguments[2],g=d.getCoordinate();if(C.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,h[0]=d,h[1]=new Tn(p,g),null}},wn.prototype.computeMinDistanceLinesPoints=function(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,r),this._minDistance<=this._terminateDistance)return null}},wn.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=On.getLines(this._geom[0]),r=On.getLines(this._geom[1]),n=Cn.getPoints(this._geom[0]),i=Cn.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,i,t),void this.updateMinDistance(t,!1))))},wn.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},wn.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},wn.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},wn.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Kt&&arguments[1]instanceof Jt){var t=arguments[0],e=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var n=t.getCoordinates(),i=e.getCoordinate(),o=0;o<n.length-1;o++){var a=st.distancePointLine(i,n[o],n[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new hr(n[o],n[o+1]).closestPoint(i);r[0]=new Tn(t,o,s),r[1]=new Tn(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Kt&&arguments[1]instanceof Kt){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),d=c.getCoordinates(),p=0;p<f.length-1;p++)for(var h=0;h<d.length-1;h++){var g=st.distanceLineLine(f[p],f[p+1],d[h],d[h+1]);if(g<this._minDistance){this._minDistance=g;var _=new hr(f[p],f[p+1]),y=new hr(d[h],d[h+1]),m=_.closestPoints(y);l[0]=new Tn(u,p,m[0]),l[1]=new Tn(c,h,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},wn.prototype.computeMinDistancePoints=function(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,r[0]=new Tn(i,0,i.getCoordinate()),r[1]=new Tn(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},wn.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new m("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},wn.prototype.computeMinDistanceLines=function(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,r),this._minDistance<=this._terminateDistance)return null}},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.distance=function(t,e){return new wn(t,e).distance()},wn.isWithinDistance=function(t,e,r){return new wn(t,e,r).distance()<=r},wn.nearestPoints=function(t,e){return new wn(t,e).nearestPoints()};var Rn=function(){this._pt=[new O,new O],this._distance=v.NaN,this._isNull=!0};Rn.prototype.getCoordinates=function(){return this._pt},Rn.prototype.getCoordinate=function(t){return this._pt[t]},Rn.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},Rn.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},Rn.prototype.toString=function(){return Q.toLineString(this._pt[0],this._pt[1])},Rn.prototype.getDistance=function(){return this._distance},Rn.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn};var Nn=function(){};Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.computeDistance=function(){if(arguments[2]instanceof Rn&&arguments[0]instanceof Kt&&arguments[1]instanceof O)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=new hr,i=t.getCoordinates(),o=0;o<i.length-1;o++){n.setCoordinates(i[o],i[o+1]);var a=n.closestPoint(e);r.setMinimum(a,e)}else if(arguments[2]instanceof Rn&&arguments[0]instanceof $t&&arguments[1]instanceof O){var s=arguments[0],u=arguments[1],c=arguments[2];Nn.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)Nn.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Rn&&arguments[0]instanceof lt&&arguments[1]instanceof O){var f=arguments[0],d=arguments[1],p=arguments[2];if(f instanceof Kt)Nn.computeDistance(f,d,p);else if(f instanceof $t)Nn.computeDistance(f,d,p);else if(f instanceof zt)for(var h=f,g=0;g<h.getNumGeometries();g++){var _=h.getGeometryN(g);Nn.computeDistance(_,d,p)}else p.setMinimum(f.getCoordinate(),d)}else if(arguments[2]instanceof Rn&&arguments[0]instanceof hr&&arguments[1]instanceof O){var y=arguments[0],m=arguments[1],v=arguments[2],b=y.closestPoint(m);v.setMinimum(b,m)}};var Mn=function(){this._g0=null,this._g1=null,this._ptDist=new Rn,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Ln={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Mn.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Mn.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new m("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Mn.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Mn.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Mn.prototype.computeOrientedDistance=function(t,e,r){var n=new An(e);if(t.apply(n),r.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var i=new Fn(e,this._densifyFrac);t.apply(i),r.setMaximum(i.getMaxPointDistance())}},Mn.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Mn.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Mn(t,e).distance()}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=new Mn(r,n);return o.setDensifyFraction(i),o.distance()}},Ln.MaxPointDistanceFilter.get=function(){return An},Ln.MaxDensifiedByFractionDistanceFilter.get=function(){return Fn},Object.defineProperties(Mn,Ln);var An=function(){this._maxPtDist=new Rn,this._minPtDist=new Rn,this._euclideanDist=new Nn,this._geom=null;var t=arguments[0];this._geom=t};An.prototype.filter=function(t){this._minPtDist.initialize(),Nn.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},An.prototype.getMaxPointDistance=function(){return this._maxPtDist},An.prototype.interfaces_=function(){return[pt]},An.prototype.getClass=function(){return An};var Fn=function(){this._maxPtDist=new Rn,this._minPtDist=new Rn,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Fn.prototype.filter=function(t,e){if(0===e)return null;for(var r=t.getCoordinate(e-1),n=t.getCoordinate(e),i=(n.x-r.x)/this._numSubSegs,o=(n.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=r.x+a*i,u=r.y+a*o,c=new O(s,u);this._minPtDist.initialize(),Nn.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Fn.prototype.isDone=function(){return!1},Fn.prototype.isGeometryChanged=function(){return!1},Fn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fn.prototype.interfaces_=function(){return[Bt]},Fn.prototype.getClass=function(){return Fn};var Dn=function(t,e,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=r||null},kn={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Dn.prototype.checkMaximumDistance=function(t,e,r){var n=new Mn(e,t);if(n.setDensifyFraction(.25),this._maxDistanceFound=n.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var i=n.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Q.toLineString(i[0],i[1])+")"}},Dn.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Dn.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Dn.VERBOSE&&Y.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Dn.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof re||this._input instanceof zt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Dn.prototype.getErrorIndicator=function(){return this._errorIndicator},Dn.prototype.checkMinimumDistance=function(t,e,r){var n=new wn(t,e,r);if(this._minDistanceFound=n.distance(),this._minDistanceFound<r){this._isValid=!1;var i=n.nearestPoints();this._errorLocation=n.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Q.toLineString(i[0],i[1])+" )"}},Dn.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Dn.prototype.getErrorLocation=function(){return this._errorLocation},Dn.prototype.getPolygonLines=function(t){for(var e=new jt,r=new On(e),n=jn.getPolygons(t).iterator();n.hasNext();)n.next().apply(r);return t.getFactory().buildGeometry(e)},Dn.prototype.getErrorMessage=function(){return this._errMsg},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},kn.VERBOSE.get=function(){return!1},kn.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Dn,kn);var Gn=function(t,e,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=r||null},Un={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Gn.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Gn.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Gn.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new q(this._input.getEnvelopeInternal());e.expandBy(this._distance);var r=new q(this._result.getEnvelopeInternal());r.expandBy(t),r.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")},Gn.prototype.checkDistance=function(){var t=new Dn(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Gn.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Gn.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof re||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Gn.prototype.getErrorIndicator=function(){return this._errorIndicator},Gn.prototype.getErrorLocation=function(){return this._errorLocation},Gn.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Gn.prototype.report=function(t){if(!Gn.VERBOSE)return null;Y.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Gn.prototype.getErrorMessage=function(){return this._errorMsg},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},Gn.isValidMsg=function(t,e,r){var n=new Gn(t,e,r);return n.isValid()?null:n.getErrorMessage()},Gn.isValid=function(t,e,r){return!!new Gn(t,e,r).isValid()},Un.VERBOSE.get=function(){return!1},Un.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Gn,Un);var Bn=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Bn.prototype.getCoordinates=function(){return this._pts},Bn.prototype.size=function(){return this._pts.length},Bn.prototype.getCoordinate=function(t){return this._pts[t]},Bn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Bn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:lr.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Bn.prototype.setData=function(t){this._data=t},Bn.prototype.getData=function(){return this._data},Bn.prototype.toString=function(){return Q.toLineString(new ue(this._pts))},Bn.prototype.interfaces_=function(){return[fr]},Bn.prototype.getClass=function(){return Bn};var zn=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new jt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};zn.prototype.getInteriorIntersection=function(){return this._interiorIntersection},zn.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},zn.prototype.getIntersectionSegments=function(){return this._intSegments},zn.prototype.count=function(){return this._intersectionCount},zn.prototype.getIntersections=function(){return this._intersections},zn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zn.prototype.setKeepIntersections=function(t){this._keepIntersections=t},zn.prototype.processIntersections=function(t,e,r,n){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===r&&e===n)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(r,n))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},zn.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},zn.prototype.hasIntersection=function(){return null!==this._interiorIntersection},zn.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},zn.prototype.interfaces_=function(){return[Wr]},zn.prototype.getClass=function(){return zn},zn.createAllIntersectionsFinder=function(t){var e=new zn(t);return e.setFindAllIntersections(!0),e},zn.createAnyIntersectionFinder=function(t){return new zn(t)},zn.createIntersectionCounter=function(t){var e=new zn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Vn=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Vn.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Vn.prototype.getIntersections=function(){return this._segInt.getIntersections()},Vn.prototype.isValid=function(){return this.execute(),this._isValid},Vn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vn.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new zn(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Er;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Vn.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ce(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Vn.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Q.toLineString(t[0],t[1])+" and "+Q.toLineString(t[2],t[3])},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn},Vn.computeIntersections=function(t){var e=new Vn(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Yn=function t(){this._nv=null;var e=arguments[0];this._nv=new Vn(t.toSegmentStrings(e))};Yn.prototype.checkValid=function(){this._nv.checkValid()},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn},Yn.toSegmentStrings=function(t){for(var e=new jt,r=t.iterator();r.hasNext();){var n=r.next();e.add(new Bn(n.getCoordinates(),n))}return e},Yn.checkValid=function(t){new Yn(t).checkValid()};var Xn=function(t){this._mapOp=t};Xn.prototype.map=function(t){for(var e=new jt,r=0;r<t.getNumGeometries();r++){var n=this._mapOp.map(t.getGeometryN(r));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(ye.toGeometryArray(e))},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn},Xn.map=function(t,e){return new Xn(e).map(t)};var qn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new jt,this._resultLineList=new jt;var t=arguments[0],e=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=r};qn.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next();this.collectLineEdge(r,t,this._lineEdgesList),this.collectBoundaryTouchEdge(r,t,this._lineEdgesList)}},qn.prototype.labelIsolatedLine=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,r)},qn.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},qn.prototype.collectLineEdge=function(t,e,r){var n=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ti.isResultOfOp(n,e)||i.isCovered()||(r.add(i),t.setVisitedEdge(!0)))},qn.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next(),n=r.getEdge();if(r.isLineEdge()&&!n.isCoveredSet()){var i=this._op.isCoveredByA(r.getCoordinate());n.setCovered(i)}}},qn.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=r.getLabel();r.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(r,0):this.labelIsolatedLine(r,1))}},qn.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var r=e.next(),n=this._geometryFactory.createLineString(r.getCoordinates());this._resultLineList.add(n),r.setInResult(!0)}},qn.prototype.collectBoundaryTouchEdge=function(t,e,r){var n=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ti.isResultOfOp(n,e)&&e===Ti.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))))},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Wn=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new jt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Wn.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var r=this._geometryFactory.createPoint(e);this._resultPointList.add(r)}},Wn.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var r=e.next();if(!(r.isInResult()||r.isIncidentEdgeInResult()||0!==r.getEdges().getDegree()&&t!==Ti.INTERSECTION)){var n=r.getLabel();Ti.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(r)}}},Wn.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Hn=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Hn.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hn.prototype.transformPolygon=function(t,e){var r=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof ee&&!n.isEmpty()||(r=!1);for(var i=new jt,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(r=!1),i.add(a))}if(r)return this._factory.createPolygon(n,i.toArray([]));var s=new jt;return null!==n&&s.add(n),s.addAll(i),this._factory.buildGeometry(s)},Hn.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hn.prototype.getInputGeometry=function(){return this._inputGeom},Hn.prototype.transformMultiLineString=function(t,e){for(var r=new jt,n=0;n<t.getNumGeometries();n++){var i=this.transformLineString(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Hn.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hn.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hn.prototype.transformMultiPoint=function(t,e){for(var r=new jt,n=0;n<t.getNumGeometries();n++){var i=this.transformPoint(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Hn.prototype.transformMultiPolygon=function(t,e){for(var r=new jt,n=0;n<t.getNumGeometries();n++){var i=this.transformPolygon(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Hn.prototype.copy=function(t){return t.copy()},Hn.prototype.transformGeometryCollection=function(t,e){for(var r=new jt,n=0;n<t.getNumGeometries();n++){var i=this.transform(t.getGeometryN(n));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||r.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(r)):this._factory.buildGeometry(r)},Hn.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Jt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Kt)return this.transformLineString(t,null);if(t instanceof Vt)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof re)return this.transformMultiPolygon(t,null);if(t instanceof zt)return this.transformGeometryCollection(t,null);throw new m("Unknown Geometry subtype: "+t.getClass().getName())},Hn.prototype.transformLinearRing=function(t,e){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===r)return this._factory.createLinearRing(null);var n=r.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Kn=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new hr,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Kt&&"number"==typeof arguments[1]){var e=arguments[0],r=arguments[1];t.call(this,e.getCoordinates(),r)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};Kn.prototype.snapVertices=function(t,e){for(var r=this._isClosed?t.size()-1:t.size(),n=0;n<r;n++){var i=t.get(n),o=this.findSnapForVertex(i,e);null!==o&&(t.set(n,new O(o)),0===n&&this._isClosed&&t.set(t.size()-1,new O(o)))}},Kn.prototype.findSnapForVertex=function(t,e){for(var r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<this._snapTolerance)return e[r]}return null},Kn.prototype.snapTo=function(t){var e=new Pt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Kn.prototype.snapSegments=function(t,e){if(0===e.length)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var n=0;n<r;n++){var i=e[n],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new O(i),!1)}},Kn.prototype.findSegmentIndexToSnap=function(t,e){for(var r=v.MAX_VALUE,n=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<r&&(r=o,n=i)}return n},Kn.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zn=function(t){this._srcGeom=t||null},Jn={SNAP_PRECISION_FACTOR:{configurable:!0}};Zn.prototype.snapTo=function(t,e){var r=this.extractTargetCoordinates(t);return new Qn(e,r).transform(this._srcGeom)},Zn.prototype.snapToSelf=function(t,e){var r=this.extractTargetCoordinates(this._srcGeom),n=new Qn(t,r,!0).transform(this._srcGeom),i=n;return e&&w(i,Qt)&&(i=n.buffer(0)),i},Zn.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zn.prototype.extractTargetCoordinates=function(t){for(var e=new p,r=t.getCoordinates(),n=0;n<r.length;n++)e.add(r[n]);return e.toArray(new Array(0).fill(null))},Zn.prototype.computeMinimumSegmentLength=function(t){for(var e=v.MAX_VALUE,r=0;r<t.length-1;r++){var n=t[r].distance(t[r+1]);n<e&&(e=n)}return e},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},Zn.snap=function(t,e,r){var n=new Array(2).fill(null),i=new Zn(t);n[0]=i.snapTo(e,r);var o=new Zn(e);return n[1]=o.snapTo(n[0],r),n},Zn.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zn.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===pe.FIXED){var n=1/r.getScale()*2/1.415;n>e&&(e=n)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zn.computeOverlaySnapTolerance(i),Zn.computeOverlaySnapTolerance(o))}},Zn.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zn.SNAP_PRECISION_FACTOR},Zn.snapToSelf=function(t,e,r){return new Zn(t).snapToSelf(e,r)},Jn.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zn,Jn);var Qn=function(t){function e(e,r,n){t.call(this),this._snapTolerance=e||null,this._snapPts=r||null,this._isSelfSnap=void 0!==n&&n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var r=new Kn(t,this._snapTolerance);return r.setAllowSnappingToSourceVertices(this._isSelfSnap),r.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var r=t.toCoordinateArray(),n=this.snapLine(r,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hn),$n=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$n.prototype.getCommon=function(){return v.longBitsToDouble(this._commonBits)},$n.prototype.add=function(t){var e=v.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$n.signExpBits(this._commonBits),this._isFirst=!1,null):$n.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$n.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$n.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$n.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=v.longBitsToDouble(t),r="0000000000000000000000000000000000000000000000000000000000000000"+v.toBinaryString(t),n=r.substring(r.length-64);return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+e+" ]"}},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$n.signExpBits=function(t){return t>>52},$n.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$n.numCommonMostSigMantissaBits=function(t,e){for(var r=0,n=52;n>=0;n--){if($n.getBit(t,n)!==$n.getBit(e,n))return r;r++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ri},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ni(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new O(this._commonCoord);e.x=-e.x,e.y=-e.y;var r=new ni(e);return t.apply(r),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ri},ei.Translater.get=function(){return ni},Object.defineProperties(ti,ei);var ri=function(){this._commonBitsX=new $n,this._commonBitsY=new $n};ri.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ri.prototype.getCommonCoordinate=function(){return new O(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ri.prototype.interfaces_=function(){return[pt]},ri.prototype.getClass=function(){return ri};var ni=function(){this.trans=null;var t=arguments[0];this.trans=t};ni.prototype.filter=function(t,e){var r=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,r),t.setOrdinate(e,1,n)},ni.prototype.isDone=function(){return!1},ni.prototype.isGeometryChanged=function(){return!0},ni.prototype.interfaces_=function(){return[Bt]},ni.prototype.getClass=function(){return ni};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Zn(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),r=Ti.overlayOp(e[0],e[1],t);return this.prepareResult(r)},ii.prototype.checkValid=function(t){t.isValid()||Y.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Zn.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zn.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,r){return new ii(t,e).getResultGeometry(r)},ii.union=function(t,e){return ii.overlayOp(t,e,Ti.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ti.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ti.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ti.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,r=!1,n=null;try{e=Ti.overlayOp(this._geom[0],this._geom[1],t),r=!0}catch(t){if(!(t instanceof $))throw t;n=t}if(!r)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?n:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,r){return new oi(t,e).getResultGeometry(r)},oi.union=function(t,e){return oi.overlayOp(t,e,Ti.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ti.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ti.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ti.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],r=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=r}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=n,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[E]},si.prototype.getClass=function(){return si},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(si,ui);var ci=function(){};ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var li=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r};li.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(li.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},li.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},li.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},li.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},li.prototype.isBoundaryPointInternal=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next().getCoordinate();if(t.isIntersection(n))return!0}return!1},li.prototype.hasProperIntersection=function(){return this._hasProper},li.prototype.hasIntersection=function(){return this._hasIntersection},li.prototype.isDone=function(){return this._isDone},li.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},li.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},li.prototype.addIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var fi=function(t){function e(){t.call(this),this.events=new jt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var r=this.events.get(e);if(r.isInsert()&&this.processOverlaps(e,r.getDeleteEventIndex(),r,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof li&&w(arguments[0],St)&&w(arguments[1],St)){var n=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(n,n),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&w(arguments[0],St)&&arguments[1]instanceof li){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var r=t.getMonotoneChainEdge(),n=r.getStartIndexes(),i=0;i<n.length-1;i++){var o=new ai(r,i),a=new si(e,r.getMinX(i),o);this.events.add(a),this.events.add(new si(r.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,r,n){for(var i=r.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();r.isSameLabel(a)||(i.computeIntersections(s,n),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var r=arguments[0],n=arguments[1],i=r.iterator();i.hasNext();){var o=i.next();this.addEdge(o,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),di=function(){this._min=v.POSITIVE_INFINITY,this._max=v.NEGATIVE_INFINITY},pi={NodeComparator:{configurable:!0}};di.prototype.getMin=function(){return this._min},di.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},di.prototype.getMax=function(){return this._max},di.prototype.toString=function(){return Q.toLineString(new O(this._min,0),new O(this._max,0))},di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},pi.NodeComparator.get=function(){return hi},Object.defineProperties(di,pi);var hi=function(){};hi.prototype.compare=function(t,e){var r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0},hi.prototype.interfaces_=function(){return[j]},hi.prototype.getClass=function(){return hi};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],r=arguments[1],n=arguments[2];this._min=e,this._max=r,this._item=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(di),_i=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],r=arguments[1];this._node1=e,this._node2=r,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(di),yi=function(){this._leaves=new jt,this._root=null,this._level=0};yi.prototype.buildTree=function(){$e.sort(this._leaves,new di.NodeComparator);for(var t=this._leaves,e=null,r=new jt;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}},yi.prototype.insert=function(t,e,r){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,r))},yi.prototype.query=function(t,e,r){this.init(),this._root.query(t,e,r)},yi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yi.prototype.printNode=function(t){Y.out.println(Q.toLineString(new O(t._min,this._level),new O(t._max,this._level)))},yi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var r=0;r<t.size();r+=2){var n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{var i=new _i(t.get(r),t.get(r+1));e.add(i)}}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var mi=function(){this._items=new jt};mi.prototype.visitItem=function(t){this._items.add(t)},mi.prototype.getItems=function(){return this._items},mi.prototype.interfaces_=function(){return[Ke]},mi.prototype.getClass=function(){return mi};var vi=function(){this._index=null;var t=arguments[0];if(!w(t,Qt))throw new m("Argument must be Polygonal");this._index=new Si(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vi.prototype.locate=function(t){var e=new at(t),r=new Ei(e);return this._index.query(t.y,t.y,r),e.getLocation()},vi.prototype.interfaces_=function(){return[Gr]},vi.prototype.getClass=function(){return vi},bi.SegmentVisitor.get=function(){return Ei},bi.IntervalIndexedGeometry.get=function(){return Si},Object.defineProperties(vi,bi);var Ei=function(){this._counter=null;var t=arguments[0];this._counter=t};Ei.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Ei.prototype.interfaces_=function(){return[Ke]},Ei.prototype.getClass=function(){return Ei};var Si=function(){this._index=new yi;var t=arguments[0];this.init(t)};Si.prototype.init=function(t){for(var e=On.getLines(t).iterator();e.hasNext();){var r=e.next().getCoordinates();this.addLine(r)}},Si.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var r=new hr(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}},Si.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new mi;return this._index.query(t,e,r),r.getItems()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._index.query(n,i,o)}},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var ji=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new de,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Pn,2===arguments.length){var e=arguments[0],r=arguments[1],n=ht.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=r,this._boundaryNodeRule=n,null!==r&&this.add(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,r){var n=this._nodes.addNode(r).getLabel(),i=1;C.NONE,n.getLocation(t,Pe.ON)===C.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=new li(r,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof re,u=n||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,r){var n=new li(e,r,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Jt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,C.INTERIOR)}else if(arguments[0]instanceof O){var e=arguments[0];this.insertPoint(this._argIndex,e,C.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),C.EXTERIOR,C.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,C.INTERIOR,C.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],C.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],C.BOUNDARY)},e.prototype.addLineString=function(t){var e=Tt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var r=new en(e,new Ne(this._argIndex,C.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,n=t.iterator();n.hasNext();){var i=n.next();e[r++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,r){if(this.isBoundaryNode(t,e))return null;r===C.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)},e.prototype.addPolygonRing=function(t,e,r){if(t.isEmpty())return null;var n=Tt.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=e,o=r;st.isCCW(n)&&(i=r,o=e);var a=new en(n,new Ne(this._argIndex,C.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,n[0],C.BOUNDARY)},e.prototype.insertPoint=function(t,e,r){var n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new Ne(t,r):i.setLocation(t,r)},e.prototype.createEdgeSetIntersector=function(){return new fi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,n)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof re&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Kt)this.addLineString(e);else if(e instanceof Jt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Vt)this.addCollection(e);else if(e instanceof re)this.addCollection(e);else{if(!(e instanceof zt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},e.prototype.locate=function(t){return w(this._parentGeom,Qt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vi(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?C.BOUNDARY:C.INTERIOR},e}(Ye),Oi=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ji(0,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=ht.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ji(0,e,n),this._arg[1]=new ji(1,r,n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ji(0,i,a),this._arg[1]=new ji(1,o,a)}};Oi.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Oi.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi};var Pi=function(){};Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.map=function(){if(arguments[0]instanceof lt&&w(arguments[1],Pi.MapOp)){for(var t=arguments[0],e=arguments[1],r=new jt,n=0;n<t.getNumGeometries();n++){var i=e.map(t.getGeometryN(n));null!==i&&r.add(i)}return t.getFactory().buildGeometry(r)}if(w(arguments[0],bt)&&w(arguments[1],Pi.MapOp)){for(var o=arguments[0],a=arguments[1],s=new jt,u=o.iterator();u.hasNext();){var c=u.next(),l=a.map(c);null!==l&&s.add(l)}return s}},Pi.MapOp=function(){};var Ti=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r),this._ptLocator=new Pn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new qr,this._resultPolyList=new jt,this._resultLineList=new jt,this._resultPointList=new jt,this._graph=new Ye(new Yr),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Ne(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(r),i.add(n),r.merge(n)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),r=e.getSym();e.isInResult()&&r.isInResult()&&(e.setInResult(!1),r.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,r,n,i){var o=new jt;return o.addAll(t),o.addAll(r),o.addAll(n),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(this._ptLocator.locate(t,n)!==C.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new jt,e=this._edgeList.iterator();e.hasNext();){var r=e.next();r.isCollapsed()&&(e.remove(),t.add(r.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getEdges().getLabel();e.getLabel().merge(r)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertUniqueEdge(r)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new jt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Yn.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var r=new Xe(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();var n=new qn(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);var i=new Wn(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,r)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._graph.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var n=r.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Pe.RIGHT),i.getLocation(1,Pe.RIGHT),t)&&n.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),r=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var i=0;i<2;i++)r.isNull(i)||!r.isArea()||n.isNull(i)||(0===n.getDelta(i)?r.toLine(i):(et.isTrue(!n.isNull(i,Pe.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(i,Pe.LEFT,n.getLocation(i,Pe.LEFT)),et.isTrue(!n.isNull(i,Pe.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(i,Pe.RIGHT,n.getLocation(i,Pe.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getLabel();e.isIsolated()&&(r.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(r)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oi);Ti.overlayOp=function(t,e,r){return new Ti(t,e).getResultGeometry(r)},Ti.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ti.createEmptyResult(Ti.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var r=e;return Xn.map(t,{interfaces_:function(){return[Pi.MapOp]},map:function(t){return t.intersection(r)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.INTERSECTION)},Ti.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.SYMDIFFERENCE)},Ti.resultDimension=function(t,e,r){var n=e.getDimension(),i=r.getDimension(),o=-1;switch(t){case Ti.INTERSECTION:o=Math.min(n,i);break;case Ti.UNION:o=Math.max(n,i);break;case Ti.DIFFERENCE:o=n;break;case Ti.SYMDIFFERENCE:o=Math.max(n,i)}return o},Ti.createEmptyResult=function(t,e,r,n){var i=null;switch(Ti.resultDimension(t,e,r)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon()}return i},Ti.difference=function(t,e){return t.isEmpty()?Ti.createEmptyResult(Ti.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.DIFFERENCE))},Ti.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=t.getLocation(0),n=t.getLocation(1);return Ti.isResultOfOp(r,n,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===C.BOUNDARY&&(i=C.INTERIOR),o===C.BOUNDARY&&(o=C.INTERIOR),a){case Ti.INTERSECTION:return i===C.INTERIOR&&o===C.INTERIOR;case Ti.UNION:return i===C.INTERIOR||o===C.INTERIOR;case Ti.DIFFERENCE:return i===C.INTERIOR&&o!==C.INTERIOR;case Ti.SYMDIFFERENCE:return i===C.INTERIOR&&o!==C.INTERIOR||i!==C.INTERIOR&&o===C.INTERIOR}return!1}},Ti.INTERSECTION=1,Ti.UNION=2,Ti.DIFFERENCE=3,Ti.SYMDIFFERENCE=4;var xi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Pn,this._seg=new hr;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};xi.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var r=this._linework.getGeometryN(e).getCoordinateSequence(),n=0;n<r.size()-1;n++)if(r.getCoordinate(n,this._seg.p0),r.getCoordinate(n+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},xi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?C.BOUNDARY:this._ptLocator.locate(t,this._g)},xi.prototype.extractLinework=function(t){var e=new Ci;t.apply(e);var r=e.getLinework(),n=ye.toLineStringArray(r);return t.getFactory().createMultiLineString(n)},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi};var Ci=function(){this._linework=null,this._linework=new jt};Ci.prototype.getLinework=function(){return this._linework},Ci.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var r=0;r<e.getNumInteriorRing();r++)this._linework.add(e.getInteriorRingN(r))}},Ci.prototype.interfaces_=function(){return[Ut]},Ci.prototype.getClass=function(){return Ci};var Ii=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ii.prototype.extractPoints=function(t,e,r){for(var n=t.getCoordinates(),i=0;i<n.length-1;i++)this.computeOffsetPoints(n[i],n[i+1],e,r)},Ii.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ii.prototype.getPoints=function(t){for(var e=new jt,r=On.getLines(this._g).iterator();r.hasNext();){var n=r.next();this.extractPoints(n,t,e)}return e},Ii.prototype.computeOffsetPoints=function(t,e,r,n){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=r*i/a,u=r*o/a,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var f=new O(c-u,l+s);n.add(f)}if(this._doRight){var d=new O(c+u,l-s);n.add(d)}},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii};var wi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new jt;var e=arguments[0],r=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,r),this._geom=[e,r,n],this._locFinder=[new xi(this._geom[0],this._boundaryDistanceTolerance),new xi(this._geom[1],this._boundaryDistanceTolerance),new xi(this._geom[2],this._boundaryDistanceTolerance)]},Ri={TOLERANCE:{configurable:!0}};wi.prototype.reportResult=function(t,e,r){Y.out.println("Overlay result invalid - A:"+C.toLocationSymbol(e[0])+" B:"+C.toLocationSymbol(e[1])+" expected:"+(r?"i":"e")+" actual:"+C.toLocationSymbol(e[2]))},wi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},wi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var r=this._testCoords.get(e);if(!this.checkValid(t,r))return this._invalidLocation=r,!1}return!0}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!wi.hasLocation(this._location,C.BOUNDARY)||this.isValidResult(n,this._location)}},wi.prototype.addTestPts=function(t){var e=new Ii(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},wi.prototype.isValidResult=function(t,e){var r=Ti.isResultOfOp(e[0],e[1],t),n=!(r^e[2]===C.INTERIOR);return n||this.reportResult(t,e,r),n},wi.prototype.getInvalidLocation=function(){return this._invalidLocation},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi},wi.hasLocation=function(t,e){for(var r=0;r<3;r++)if(t[r]===e)return!0;return!1},wi.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zn.computeSizeBasedSnapTolerance(t),Zn.computeSizeBasedSnapTolerance(e))},wi.isValid=function(t,e,r,n){return new wi(t,e,n).isValid(r)},Ri.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(wi,Ri);var Ni=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ni.prototype.extractElements=function(t,e){if(null===t)return null;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);this._skipEmpty&&n.isEmpty()||e.add(n)}},Ni.prototype.combine=function(){for(var t=new jt,e=this._inputGeoms.iterator();e.hasNext();){var r=e.next();this.extractElements(r,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.combine=function(){if(1===arguments.length){var t=arguments[0];return new Ni(t).combine()}if(2===arguments.length){var e=arguments[0],r=arguments[1];return new Ni(Ni.createList(e,r)).combine()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];return new Ni(Ni.createList(n,i,o)).combine()}},Ni.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ni.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new jt;return r.add(t),r.add(e),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],a=new jt;return a.add(n),a.add(i),a.add(o),a}};var Mi=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new jt)},Li={STRTREE_NODE_CAPACITY:{configurable:!0}};Mi.prototype.reduceToGeometries=function(t){for(var e=new jt,r=t.iterator();r.hasNext();){var n=r.next(),i=null;w(n,St)?i=this.unionTree(n):n instanceof lt&&(i=n),e.add(i)}return e},Mi.prototype.extractByEnvelope=function(t,e,r){for(var n=new jt,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?n.add(o):r.add(o)}return this._geomFactory.buildGeometry(n)},Mi.prototype.unionOptimized=function(t,e){var r=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!r.intersects(n))return Ni.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=r.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,i)},Mi.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new or(Mi.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var r=e.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var n=t.itemsTree();return this.unionTree(n)},Mi.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2];if(n-r<=1){var i=Mi.getGeometry(e,r);return this.unionSafe(i,null)}if(n-r==2)return this.unionSafe(Mi.getGeometry(e,r),Mi.getGeometry(e,r+1));var o=Math.trunc((n+r)/2),a=this.binaryUnion(e,r,o),s=this.binaryUnion(e,o,n);return this.unionSafe(a,s)}},Mi.prototype.repeatedUnion=function(t){for(var e=null,r=t.iterator();r.hasNext();){var n=r.next();e=null===e?n.copy():e.union(n)}return e},Mi.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Mi.prototype.unionActual=function(t,e){return Mi.restrictToPolygons(t.union(e))},Mi.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Mi.prototype.unionUsingEnvelopeIntersection=function(t,e,r){var n=new jt,i=this.extractByEnvelope(r,t,n),o=this.extractByEnvelope(r,e,n),a=this.unionActual(i,o);return n.add(a),Ni.combine(n)},Mi.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().createGeometryCollection([e,r]).buffer(0)}},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.restrictToPolygons=function(t){if(w(t,Qt))return t;var e=jn.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ye.toPolygonArray(e))},Mi.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Mi.union=function(t){return new Mi(t).union()},Li.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Mi,Li);var Ai=function(){};Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Ai.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.UNION)},t.GeoJSONReader=je,t.GeoJSONWriter=Oe,t.OverlayOp=Ti,t.UnionOp=Ai,t.BufferOp=gn,Object.defineProperty(t,"__esModule",{value:!0})})},{}],d7057f4a8416e25e485de21b64a620a9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toMercator=function(t,e){return s(t,"mercator",e)},r.toWgs84=function(t,e){return s(t,"wgs84",e)};var n,i=t("@turf/meta"),o=t("@turf/helpers"),a=(n=t("@turf/clone"))&&n.__esModule?n:{default:n};function s(t,e,r){if(r=r||{},!(0,o.isObject)(r))throw new Error("options is invalid");var n=r.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&(0,o.isNumber)(t[0])?t="mercator"===e?u(t):c(t):(!0!==n&&(t=(0,a.default)(t)),(0,i.coordEach)(t,function(t){var r="mercator"===e?u(t):c(t);t[0]=r[0],t[1]=r[1]})),t}function u(t){var e,r=Math.PI/180,n=6378137,i=20037508.342789244,o=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*((e=t[0])<0?-1:e>0?1:0))*r,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*r))];return o[0]>i&&(o[0]=i),o[0]<-i&&(o[0]=-i),o[1]>i&&(o[1]=i),o[1]<-i&&(o[1]=-i),o}function c(t){var e=180/Math.PI,r=6378137;return[t[0]*e/r,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/r)))*e]}},{"@turf/meta":"eb4788e08476e866cdefe386051a557d","@turf/helpers":"4cdc7dbcb031449a32eda502d00a931f","@turf/clone":"20f43a332635010b6ffc61da962ff5d2"}],"20f43a332635010b6ffc61da962ff5d2":[function(t,e,r){"use strict";function n(t){var e={type:"Feature"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}}),e.properties=function t(e){var r={};if(!e)return r;Object.keys(e).forEach(function(n){var i=e[n];"object"==typeof i?null===i?r[n]=null:i.length?r[n]=i.map(function(t){return t}):r[n]=t(i):r[n]=i});return r}(t.properties),e.geometry=i(t.geometry),e}function i(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return i(t)}),e):(e.coordinates=function t(e){if("object"!=typeof e[0])return e.slice();return e.map(function(e){return t(e)})}(t.coordinates),e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return n(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}}),e.features=t.features.map(function(t){return n(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return i(t);default:throw new Error("unknown GeoJSON type")}};r.default=o},{}],"212847a51186817b21908a383a8b88b2":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"geoArea",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"geoBounds",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"geoCentroid",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"geoCircle",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"geoClipExtent",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"geoContains",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"geoDistance",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"geoGraticule",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"geoGraticule10",{enumerable:!0,get:function(){return l.graticule10}}),Object.defineProperty(r,"geoInterpolate",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"geoLength",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"geoPath",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"geoAlbers",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"geoAlbersUsa",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"geoAzimuthalEqualArea",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"geoAzimuthalEqualAreaRaw",{enumerable:!0,get:function(){return _.azimuthalEqualAreaRaw}}),Object.defineProperty(r,"geoAzimuthalEquidistant",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"geoAzimuthalEquidistantRaw",{enumerable:!0,get:function(){return y.azimuthalEquidistantRaw}}),Object.defineProperty(r,"geoConicConformal",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"geoConicConformalRaw",{enumerable:!0,get:function(){return m.conicConformalRaw}}),Object.defineProperty(r,"geoConicEqualArea",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"geoConicEqualAreaRaw",{enumerable:!0,get:function(){return v.conicEqualAreaRaw}}),Object.defineProperty(r,"geoConicEquidistant",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"geoConicEquidistantRaw",{enumerable:!0,get:function(){return b.conicEquidistantRaw}}),Object.defineProperty(r,"geoEquirectangular",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"geoEquirectangularRaw",{enumerable:!0,get:function(){return E.equirectangularRaw}}),Object.defineProperty(r,"geoGnomonic",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(r,"geoGnomonicRaw",{enumerable:!0,get:function(){return S.gnomonicRaw}}),Object.defineProperty(r,"geoIdentity",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(r,"geoProjection",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(r,"geoProjectionMutator",{enumerable:!0,get:function(){return O.projectionMutator}}),Object.defineProperty(r,"geoMercator",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(r,"geoMercatorRaw",{enumerable:!0,get:function(){return P.mercatorRaw}}),Object.defineProperty(r,"geoNaturalEarth1",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(r,"geoNaturalEarth1Raw",{enumerable:!0,get:function(){return T.naturalEarth1Raw}}),Object.defineProperty(r,"geoOrthographic",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(r,"geoOrthographicRaw",{enumerable:!0,get:function(){return x.orthographicRaw}}),Object.defineProperty(r,"geoStereographic",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"geoStereographicRaw",{enumerable:!0,get:function(){return C.stereographicRaw}}),Object.defineProperty(r,"geoTransverseMercator",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(r,"geoTransverseMercatorRaw",{enumerable:!0,get:function(){return I.transverseMercatorRaw}}),Object.defineProperty(r,"geoRotation",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(r,"geoStream",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(r,"geoTransform",{enumerable:!0,get:function(){return N.default}});var n=L(t("./src/area")),i=L(t("./src/bounds")),o=L(t("./src/centroid")),a=L(t("./src/circle")),s=L(t("./src/clip/extent")),u=L(t("./src/contains")),c=L(t("./src/distance")),l=M(t("./src/graticule")),f=L(t("./src/interpolate")),d=L(t("./src/length")),p=L(t("./src/path/index")),h=L(t("./src/projection/albers")),g=L(t("./src/projection/albersUsa")),_=M(t("./src/projection/azimuthalEqualArea")),y=M(t("./src/projection/azimuthalEquidistant")),m=M(t("./src/projection/conicConformal")),v=M(t("./src/projection/conicEqualArea")),b=M(t("./src/projection/conicEquidistant")),E=M(t("./src/projection/equirectangular")),S=M(t("./src/projection/gnomonic")),j=L(t("./src/projection/identity")),O=M(t("./src/projection/index")),P=M(t("./src/projection/mercator")),T=M(t("./src/projection/naturalEarth1")),x=M(t("./src/projection/orthographic")),C=M(t("./src/projection/stereographic")),I=M(t("./src/projection/transverseMercator")),w=L(t("./src/rotation")),R=L(t("./src/stream")),N=L(t("./src/transform"));function M(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}function L(t){return t&&t.__esModule?t:{default:t}}},{"./src/area":"ec6f86e1c5fd10cf068c708d4d2711f0","./src/bounds":"08c4ced7e5693785cd56a82abc651d80","./src/centroid":"af1562cf4dde3560857277608bc7ecb2","./src/circle":"993b8a31b609871c9638386053cef0ec","./src/clip/extent":"e700f9cd5023f67d92cadcf161a1f5ba","./src/contains":"a99662bb9af7a39309c0c9b2e4e24d08","./src/distance":"6b11124a833d642c6bbc4ca863ca0452","./src/graticule":"b64595e475b322412309c89f363d2ea7","./src/interpolate":"8e64b384716f1bba24269ec9ddf7e9ca","./src/length":"00a7c19b9cdd3e664bcf2c26357f17fb","./src/path/index":"1d7fcdd53ad53e2c1e3378a2b5a188b4","./src/projection/albers":"8cf0e1c82171ef9127ae5f9a2038815c","./src/projection/albersUsa":"89a4eab866da038c1c1c038e3d0af652","./src/projection/azimuthalEqualArea":"f0d23d03f767acecb55e34d2ac3b9100","./src/projection/azimuthalEquidistant":"e8cc08c1b618f998d7e796db1defc1ee","./src/projection/conicConformal":"52450747c147a532730159c0e0252160","./src/projection/conicEqualArea":"0e223f66863105f8977bede4c763a06a","./src/projection/conicEquidistant":"c3f1dd76309f5cf1a14e582707b24fc1","./src/projection/equirectangular":"4a9eee367756ad8a1f45a406b1f07723","./src/projection/gnomonic":"8495457c0162564f537471a2abb65cc7","./src/projection/identity":"ef97564bb180f8f1cb64597d2fea086e","./src/projection/index":"f8d72d2ea5de149f92069ef723fdac9d","./src/projection/mercator":"0d9b406f7227390fc768d10dfa7f1d01","./src/projection/naturalEarth1":"f0b3d72eb8572c7969fefd71d290096c","./src/projection/orthographic":"359ed4b75ff3a18e235dcb49bd0485b8","./src/projection/stereographic":"718add7c97852caa4ecc0766448c0f20","./src/projection/transverseMercator":"13c311b430f150f860425c746cd62aa9","./src/rotation":"bfe7efa978c2671445343c33808074c7","./src/stream":"9d5b1dd69cf28c375baede464405ac83","./src/transform":"30c3a97c230b1f39402e99f89076fe7e"}],ec6f86e1c5fd10cf068c708d4d2711f0:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return h.reset(),(0,a.default)(t,g),2*h},r.areaStream=r.areaRingSum=void 0;var n=s(t("./adder")),i=t("./math"),o=s(t("./noop")),a=s(t("./stream"));function s(t){return t&&t.__esModule?t:{default:t}}var u=(0,n.default)();r.areaRingSum=u;var c,l,f,d,p,h=(0,n.default)(),g={point:o.default,lineStart:o.default,lineEnd:o.default,polygonStart:function(){u.reset(),g.lineStart=_,g.lineEnd=y},polygonEnd:function(){var t=+u;h.add(t<0?i.tau+t:t),this.lineStart=this.lineEnd=this.point=o.default},sphere:function(){h.add(i.tau)}};function _(){g.point=m}function y(){v(c,l)}function m(t,e){g.point=v,c=t,l=e,t*=i.radians,e*=i.radians,f=t,d=(0,i.cos)(e=e/2+i.quarterPi),p=(0,i.sin)(e)}function v(t,e){t*=i.radians,e=(e*=i.radians)/2+i.quarterPi;var r=t-f,n=r>=0?1:-1,o=n*r,a=(0,i.cos)(e),s=(0,i.sin)(e),c=p*s,l=d*a+c*(0,i.cos)(o),h=c*n*(0,i.sin)(o);u.add((0,i.atan2)(h,l)),f=t,d=a,p=s}r.areaStream=g},{"./adder":"373bece71c4e28c389a5d4960d5749f7","./math":"73e282156ec1f2ebd1f19880f2342cfe","./noop":"34881596835958a2aeaf0bf7d8f6e97c","./stream":"9d5b1dd69cf28c375baede464405ac83"}],"373bece71c4e28c389a5d4960d5749f7":[function(t,e,r){"use strict";function n(){this.reset()}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return new n},n.prototype={constructor:n,reset:function(){this.s=this.t=0},add:function(t){o(i,t,this.t),o(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new n;function o(t,e,r){var n=t.s=e+r,i=n-e,o=n-i;t.t=e-o+(r-i)}},{}],"73e282156ec1f2ebd1f19880f2342cfe":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.acos=function(t){return t>1?0:t<-1?n:Math.acos(t)},r.asin=function(t){return t>1?i:t<-1?-i:Math.asin(t)},r.haversin=function(t){return(t=m(t/2))*t},r.tan=r.sqrt=r.sign=r.sin=r.pow=r.log=r.floor=r.exp=r.ceil=r.cos=r.atan2=r.atan=r.abs=r.radians=r.degrees=r.tau=r.quarterPi=r.halfPi=r.pi=r.epsilon2=r.epsilon=void 0;r.epsilon=1e-6;r.epsilon2=1e-12;var n=Math.PI;r.pi=n;var i=n/2;r.halfPi=i;var o=n/4;r.quarterPi=o;var a=2*n;r.tau=a;var s=180/n;r.degrees=s;var u=n/180;r.radians=u;var c=Math.abs;r.abs=c;var l=Math.atan;r.atan=l;var f=Math.atan2;r.atan2=f;var d=Math.cos;r.cos=d;var p=Math.ceil;r.ceil=p;var h=Math.exp;r.exp=h;var g=Math.floor;r.floor=g;var _=Math.log;r.log=_;var y=Math.pow;r.pow=y;var m=Math.sin;r.sin=m;var v=Math.sign||function(t){return t>0?1:t<0?-1:0};r.sign=v;var b=Math.sqrt;r.sqrt=b;var E=Math.tan;r.tan=E},{}],"34881596835958a2aeaf0bf7d8f6e97c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){}},{}],"9d5b1dd69cf28c375baede464405ac83":[function(t,e,r){"use strict";function n(t,e){t&&o.hasOwnProperty(t.type)&&o[t.type](t,e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){t&&i.hasOwnProperty(t.type)?i[t.type](t,e):n(t,e)};var i={Feature:function(t,e){n(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,i=-1,o=r.length;++i<o;)n(r[i].geometry,e)}},o={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){a(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)a(r[n],e,0)},Polygon:function(t,e){s(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)s(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,i=-1,o=r.length;++i<o;)n(r[i],e)}};function a(t,e,r){var n,i=-1,o=t.length-r;for(e.lineStart();++i<o;)n=t[i],e.point(n[0],n[1],n[2]);e.lineEnd()}function s(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)a(t[r],e,1);e.polygonEnd()}},{}],"08c4ced7e5693785cd56a82abc651d80":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){var e,r,n,i,o,a,u;if(d=f=-(c=l=1/0),y=[],(0,s.default)(t,b),r=y.length){for(y.sort(I),e=1,n=y[0],o=[n];e<r;++e)i=y[e],w(n,i[0])||w(n,i[1])?(C(n[0],i[1])>C(n[0],n[1])&&(n[1]=i[1]),C(i[0],n[1])>C(n[0],n[1])&&(n[0]=i[0])):o.push(n=i);for(a=-1/0,r=o.length-1,e=0,n=o[r];e<=r;n=i,++e)i=o[e],(u=C(n[1],i[0]))>a&&(a=u,c=i[0],f=n[1])}return y=m=null,c===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,l],[f,d]]};var n=u(t("./adder")),i=t("./area"),o=t("./cartesian"),a=t("./math"),s=u(t("./stream"));function u(t){return t&&t.__esModule?t:{default:t}}var c,l,f,d,p,h,g,_,y,m,v=(0,n.default)(),b={point:E,lineStart:j,lineEnd:O,polygonStart:function(){b.point=P,b.lineStart=T,b.lineEnd=x,v.reset(),i.areaStream.polygonStart()},polygonEnd:function(){i.areaStream.polygonEnd(),b.point=E,b.lineStart=j,b.lineEnd=O,i.areaRingSum<0?(c=-(f=180),l=-(d=90)):v>a.epsilon?d=90:v<-a.epsilon&&(l=-90),m[0]=c,m[1]=f}};function E(t,e){y.push(m=[c=t,f=t]),e<l&&(l=e),e>d&&(d=e)}function S(t,e){var r=(0,o.cartesian)([t*a.radians,e*a.radians]);if(_){var n=(0,o.cartesianCross)(_,r),i=[n[1],-n[0],0],s=(0,o.cartesianCross)(i,n);(0,o.cartesianNormalizeInPlace)(s),s=(0,o.spherical)(s);var u,h=t-p,g=h>0?1:-1,v=s[0]*a.degrees*g,b=(0,a.abs)(h)>180;b^(g*p<v&&v<g*t)?(u=s[1]*a.degrees)>d&&(d=u):b^(g*p<(v=(v+360)%360-180)&&v<g*t)?(u=-s[1]*a.degrees)<l&&(l=u):(e<l&&(l=e),e>d&&(d=e)),b?t<p?C(c,t)>C(c,f)&&(f=t):C(t,f)>C(c,f)&&(c=t):f>=c?(t<c&&(c=t),t>f&&(f=t)):t>p?C(c,t)>C(c,f)&&(f=t):C(t,f)>C(c,f)&&(c=t)}else y.push(m=[c=t,f=t]);e<l&&(l=e),e>d&&(d=e),_=r,p=t}function j(){b.point=S}function O(){m[0]=c,m[1]=f,b.point=E,_=null}function P(t,e){if(_){var r=t-p;v.add((0,a.abs)(r)>180?r+(r>0?360:-360):r)}else h=t,g=e;i.areaStream.point(t,e),S(t,e)}function T(){i.areaStream.lineStart()}function x(){P(h,g),i.areaStream.lineEnd(),(0,a.abs)(v)>a.epsilon&&(c=-(f=180)),m[0]=c,m[1]=f,_=null}function C(t,e){return(e-=t)<0?e+360:e}function I(t,e){return t[0]-e[0]}function w(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}},{"./adder":"373bece71c4e28c389a5d4960d5749f7","./area":"ec6f86e1c5fd10cf068c708d4d2711f0","./cartesian":"7cc5464f03002a86699989d8ea7f67a5","./math":"73e282156ec1f2ebd1f19880f2342cfe","./stream":"9d5b1dd69cf28c375baede464405ac83"}],"7cc5464f03002a86699989d8ea7f67a5":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.spherical=function(t){return[(0,n.atan2)(t[1],t[0]),(0,n.asin)(t[2])]},r.cartesian=function(t){var e=t[0],r=t[1],i=(0,n.cos)(r);return[i*(0,n.cos)(e),i*(0,n.sin)(e),(0,n.sin)(r)]},r.cartesianDot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},r.cartesianCross=function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},r.cartesianAddInPlace=function(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]},r.cartesianScale=function(t,e){return[t[0]*e,t[1]*e,t[2]*e]},r.cartesianNormalizeInPlace=function(t){var e=(0,n.sqrt)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e};var n=t("./math")},{"./math":"73e282156ec1f2ebd1f19880f2342cfe"}],af1562cf4dde3560857277608bc7ecb2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){n=i=o=a=s=u=c=l=f=d=p=0,(0,E.default)(t,j);var e=f,r=d,h=p,g=e*e+r*r+h*h;if(g<v.epsilon2&&(e=u,r=c,h=l,i<v.epsilon&&(e=o,r=a,h=s),(g=e*e+r*r+h*h)<v.epsilon2))return[NaN,NaN];return[(0,v.atan2)(r,e)*v.degrees,(0,v.asin)(h/(0,v.sqrt)(g))*v.degrees]};var n,i,o,a,s,u,c,l,f,d,p,h,g,_,y,m,v=t("./math"),b=S(t("./noop")),E=S(t("./stream"));function S(t){return t&&t.__esModule?t:{default:t}}var j={sphere:b.default,point:O,lineStart:T,lineEnd:I,polygonStart:function(){j.lineStart=w,j.lineEnd=R},polygonEnd:function(){j.lineStart=T,j.lineEnd=I}};function O(t,e){t*=v.radians,e*=v.radians;var r=(0,v.cos)(e);P(r*(0,v.cos)(t),r*(0,v.sin)(t),(0,v.sin)(e))}function P(t,e,r){o+=(t-o)/++n,a+=(e-a)/n,s+=(r-s)/n}function T(){j.point=x}function x(t,e){t*=v.radians,e*=v.radians;var r=(0,v.cos)(e);_=r*(0,v.cos)(t),y=r*(0,v.sin)(t),m=(0,v.sin)(e),j.point=C,P(_,y,m)}function C(t,e){t*=v.radians,e*=v.radians;var r=(0,v.cos)(e),n=r*(0,v.cos)(t),o=r*(0,v.sin)(t),a=(0,v.sin)(e),s=(0,v.atan2)((0,v.sqrt)((s=y*a-m*o)*s+(s=m*n-_*a)*s+(s=_*o-y*n)*s),_*n+y*o+m*a);i+=s,u+=s*(_+(_=n)),c+=s*(y+(y=o)),l+=s*(m+(m=a)),P(_,y,m)}function I(){j.point=O}function w(){j.point=N}function R(){M(h,g),j.point=O}function N(t,e){h=t,g=e,t*=v.radians,e*=v.radians,j.point=M;var r=(0,v.cos)(e);_=r*(0,v.cos)(t),y=r*(0,v.sin)(t),m=(0,v.sin)(e),P(_,y,m)}function M(t,e){t*=v.radians,e*=v.radians;var r=(0,v.cos)(e),n=r*(0,v.cos)(t),o=r*(0,v.sin)(t),a=(0,v.sin)(e),s=y*a-m*o,h=m*n-_*a,g=_*o-y*n,b=(0,v.sqrt)(s*s+h*h+g*g),E=(0,v.asin)(b),S=b&&-E/b;f+=S*s,d+=S*h,p+=S*g,i+=E,u+=E*(_+(_=n)),c+=E*(y+(y=o)),l+=E*(m+(m=a)),P(_,y,m)}},{"./math":"73e282156ec1f2ebd1f19880f2342cfe","./noop":"34881596835958a2aeaf0bf7d8f6e97c","./stream":"9d5b1dd69cf28c375baede464405ac83"}],"993b8a31b609871c9638386053cef0ec":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.circleStream=u,r.default=function(){var t,e,r=(0,o.default)([0,0]),n=(0,o.default)(90),i=(0,o.default)(6),c={point:function(r,n){t.push(r=e(r,n)),r[0]*=a.degrees,r[1]*=a.degrees}};function l(){var o=r.apply(this,arguments),l=n.apply(this,arguments)*a.radians,f=i.apply(this,arguments)*a.radians;return t=[],e=(0,s.rotateRadians)(-o[0]*a.radians,-o[1]*a.radians,0).invert,u(c,l,f,1),o={type:"Polygon",coordinates:[t]},t=e=null,o}return l.center=function(t){return arguments.length?(r="function"==typeof t?t:(0,o.default)([+t[0],+t[1]]),l):r},l.radius=function(t){return arguments.length?(n="function"==typeof t?t:(0,o.default)(+t),l):n},l.precision=function(t){return arguments.length?(i="function"==typeof t?t:(0,o.default)(+t),l):i},l};var n,i=t("./cartesian"),o=(n=t("./constant"))&&n.__esModule?n:{default:n},a=t("./math"),s=t("./rotation");function u(t,e,r,n,o,s){if(r){var u=(0,a.cos)(e),l=(0,a.sin)(e),f=n*r;null==o?(o=e+n*a.tau,s=e-f/2):(o=c(u,o),s=c(u,s),(n>0?o<s:o>s)&&(o+=n*a.tau));for(var d,p=o;n>0?p>s:p<s;p-=f)d=(0,i.spherical)([u,-l*(0,a.cos)(p),-l*(0,a.sin)(p)]),t.point(d[0],d[1])}}function c(t,e){(e=(0,i.cartesian)(e))[0]-=t,(0,i.cartesianNormalizeInPlace)(e);var r=(0,a.acos)(-e[1]);return((-e[2]<0?-r:r)+a.tau-a.epsilon)%a.tau}},{"./cartesian":"7cc5464f03002a86699989d8ea7f67a5","./constant":"9cd42868bcee8dd6d15b00e006e3f116","./math":"73e282156ec1f2ebd1f19880f2342cfe","./rotation":"bfe7efa978c2671445343c33808074c7"}],"9cd42868bcee8dd6d15b00e006e3f116":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return function(){return t}}},{}],bfe7efa978c2671445343c33808074c7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.rotateRadians=s,r.default=function(t){function e(e){return(e=t(e[0]*o.radians,e[1]*o.radians))[0]*=o.degrees,e[1]*=o.degrees,e}return t=s(t[0]*o.radians,t[1]*o.radians,t.length>2?t[2]*o.radians:0),e.invert=function(e){return(e=t.invert(e[0]*o.radians,e[1]*o.radians))[0]*=o.degrees,e[1]*=o.degrees,e},e};var n,i=(n=t("./compose"))&&n.__esModule?n:{default:n},o=t("./math");function a(t,e){return[t>o.pi?t-o.tau:t<-o.pi?t+o.tau:t,e]}function s(t,e,r){return(t%=o.tau)?e||r?(0,i.default)(c(t),l(e,r)):c(t):e||r?l(e,r):a}function u(t){return function(e,r){return[(e+=t)>o.pi?e-o.tau:e<-o.pi?e+o.tau:e,r]}}function c(t){var e=u(t);return e.invert=u(-t),e}function l(t,e){var r=(0,o.cos)(t),n=(0,o.sin)(t),i=(0,o.cos)(e),a=(0,o.sin)(e);function s(t,e){var s=(0,o.cos)(e),u=(0,o.cos)(t)*s,c=(0,o.sin)(t)*s,l=(0,o.sin)(e),f=l*r+u*n;return[(0,o.atan2)(c*i-f*a,u*r-l*n),(0,o.asin)(f*i+c*a)]}return s.invert=function(t,e){var s=(0,o.cos)(e),u=(0,o.cos)(t)*s,c=(0,o.sin)(t)*s,l=(0,o.sin)(e),f=l*i-c*a;return[(0,o.atan2)(c*i+l*a,u*r+f*n),(0,o.asin)(f*r-u*n)]},s}a.invert=a},{"./compose":"b37751b7ea4b12007500f07e7d929116","./math":"73e282156ec1f2ebd1f19880f2342cfe"}],b37751b7ea4b12007500f07e7d929116:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])});return r}},{}],e700f9cd5023f67d92cadcf161a1f5ba:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clipExtent=f,r.default=function(){var t,e,r,n=0,i=0,o=960,a=500;return r={stream:function(r){return t&&e===r?t:t=f(n,i,o,a)(e=r)},extent:function(s){return arguments.length?(n=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,r):[[n,i],[o,a]]}}};var n=t("../math"),i=u(t("./buffer")),o=u(t("./line")),a=u(t("./polygon")),s=t("d3-array");function u(t){return t&&t.__esModule?t:{default:t}}var c=1e9,l=-c;function f(t,e,r,u){function f(n,i){return t<=n&&n<=r&&e<=i&&i<=u}function d(n,i,o,a){var s=0,c=0;if(null==n||(s=p(n,o))!==(c=p(i,o))||g(n,i)<0^o>0)do{a.point(0===s||3===s?t:r,s>1?u:e)}while((s=(s+o+4)%4)!==c);else a.point(i[0],i[1])}function p(i,o){return(0,n.abs)(i[0]-t)<n.epsilon?o>0?0:3:(0,n.abs)(i[0]-r)<n.epsilon?o>0?2:1:(0,n.abs)(i[1]-e)<n.epsilon?o>0?1:0:o>0?3:2}function h(t,e){return g(t.x,e.x)}function g(t,e){var r=p(t,1),n=p(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(n){var p,g,_,y,m,v,b,E,S,j,O,P=n,T=(0,i.default)(),x={point:C,lineStart:function(){x.point=I,g&&g.push(_=[]);j=!0,S=!1,b=E=NaN},lineEnd:function(){p&&(I(y,m),v&&S&&T.rejoin(),p.push(T.result()));x.point=C,S&&P.lineEnd()},polygonStart:function(){P=T,p=[],g=[],O=!0},polygonEnd:function(){var e=function(){for(var e=0,r=0,n=g.length;r<n;++r)for(var i,o,a=g[r],s=1,c=a.length,l=a[0],f=l[0],d=l[1];s<c;++s)i=f,o=d,l=a[s],f=l[0],d=l[1],o<=u?d>u&&(f-i)*(u-o)>(d-o)*(t-i)&&++e:d<=u&&(f-i)*(u-o)<(d-o)*(t-i)&&--e;return e}(),r=O&&e,i=(p=(0,s.merge)(p)).length;(r||i)&&(n.polygonStart(),r&&(n.lineStart(),d(null,null,1,n),n.lineEnd()),i&&(0,a.default)(p,h,e,d,n),n.polygonEnd());P=n,p=g=_=null}};function C(t,e){f(t,e)&&P.point(t,e)}function I(n,i){var a=f(n,i);if(g&&_.push([n,i]),j)y=n,m=i,v=a,j=!1,a&&(P.lineStart(),P.point(n,i));else if(a&&S)P.point(n,i);else{var s=[b=Math.max(l,Math.min(c,b)),E=Math.max(l,Math.min(c,E))],d=[n=Math.max(l,Math.min(c,n)),i=Math.max(l,Math.min(c,i))];(0,o.default)(s,d,t,e,r,u)?(S||(P.lineStart(),P.point(s[0],s[1])),P.point(d[0],d[1]),a||P.lineEnd(),O=!1):a&&(P.lineStart(),P.point(n,i),O=!1)}b=n,E=i,S=a}return x}}},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./buffer":"bfb1eb48520b65c379f9b81113424576","./line":"bffcb56ab0857ab662eb47b6c818b788","./polygon":"1e72cb40bff300a3a3550c65d7238728","d3-array":"4faa3e8f2f37f91d9d791ac5702f901c"}],bfb1eb48520b65c379f9b81113424576:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var t,e=[];return{point:function(e,r){t.push([e,r])},lineStart:function(){e.push(t=[])},lineEnd:i.default,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}};var n,i=(n=t("../noop"))&&n.__esModule?n:{default:n}},{"../noop":"34881596835958a2aeaf0bf7d8f6e97c"}],bffcb56ab0857ab662eb47b6c818b788:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r,n,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],f=0,d=1,p=c-s,h=l-u;if(a=r-s,!p&&a>0)return;if(a/=p,p<0){if(a<f)return;a<d&&(d=a)}else if(p>0){if(a>d)return;a>f&&(f=a)}if(a=i-s,!p&&a<0)return;if(a/=p,p<0){if(a>d)return;a>f&&(f=a)}else if(p>0){if(a<f)return;a<d&&(d=a)}if(a=n-u,!h&&a>0)return;if(a/=h,h<0){if(a<f)return;a<d&&(d=a)}else if(h>0){if(a>d)return;a>f&&(f=a)}if(a=o-u,!h&&a<0)return;if(a/=h,h<0){if(a>d)return;a>f&&(f=a)}else if(h>0){if(a<f)return;a<d&&(d=a)}f>0&&(t[0]=s+f*p,t[1]=u+f*h);d<1&&(e[0]=s+d*p,e[1]=u+d*h);return!0}},{}],"1e72cb40bff300a3a3550c65d7238728":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r,n,s){var u,c,l=[],f=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r,n=t[0],a=t[e];if((0,i.default)(n,a)){for(s.lineStart(),u=0;u<e;++u)s.point((n=t[u])[0],n[1]);s.lineEnd()}else l.push(r=new o(n,t,null,!0)),f.push(r.o=new o(n,null,r,!1)),l.push(r=new o(a,t,null,!1)),f.push(r.o=new o(a,null,r,!0))}}),!l.length)return;for(f.sort(e),a(l),a(f),u=0,c=f.length;u<c;++u)f[u].e=r=!r;var d,p,h=l[0];for(;;){for(var g=h,_=!0;g.v;)if((g=g.n)===h)return;d=g.z,s.lineStart();do{if(g.v=g.o.v=!0,g.e){if(_)for(u=0,c=d.length;u<c;++u)s.point((p=d[u])[0],p[1]);else n(g.x,g.n.x,1,s);g=g.n}else{if(_)for(d=g.p.z,u=d.length-1;u>=0;--u)s.point((p=d[u])[0],p[1]);else n(g.x,g.p.x,-1,s);g=g.p}g=g.o,d=g.z,_=!_}while(!g.v);s.lineEnd()}};var n,i=(n=t("../pointEqual"))&&n.__esModule?n:{default:n};function o(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function a(t){if(e=t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}},{"../pointEqual":"1923364e49bdfa8965b79bec05d25621"}],"1923364e49bdfa8965b79bec05d25621":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){return(0,n.abs)(t[0]-e[0])<n.epsilon&&(0,n.abs)(t[1]-e[1])<n.epsilon};var n=t("./math")},{"./math":"73e282156ec1f2ebd1f19880f2342cfe"}],"4faa3e8f2f37f91d9d791ac5702f901c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"bisect",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"bisectRight",{enumerable:!0,get:function(){return n.bisectRight}}),Object.defineProperty(r,"bisectLeft",{enumerable:!0,get:function(){return n.bisectLeft}}),Object.defineProperty(r,"ascending",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"bisector",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"cross",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"descending",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"deviation",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"extent",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"histogram",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"thresholdFreedmanDiaconis",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"thresholdScott",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"thresholdSturges",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"max",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"mean",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"median",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"merge",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"min",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"pairs",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"permute",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"quantile",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"range",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(r,"scan",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(r,"shuffle",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(r,"sum",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(r,"ticks",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(r,"tickIncrement",{enumerable:!0,get:function(){return T.tickIncrement}}),Object.defineProperty(r,"tickStep",{enumerable:!0,get:function(){return T.tickStep}}),Object.defineProperty(r,"transpose",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(r,"variance",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"zip",{enumerable:!0,get:function(){return I.default}});var n=R(t("./bisect")),i=w(t("./ascending")),o=w(t("./bisector")),a=w(t("./cross")),s=w(t("./descending")),u=w(t("./deviation")),c=w(t("./extent")),l=w(t("./histogram")),f=w(t("./threshold/freedmanDiaconis")),d=w(t("./threshold/scott")),p=w(t("./threshold/sturges")),h=w(t("./max")),g=w(t("./mean")),_=w(t("./median")),y=w(t("./merge")),m=w(t("./min")),v=w(t("./pairs")),b=w(t("./permute")),E=w(t("./quantile")),S=w(t("./range")),j=w(t("./scan")),O=w(t("./shuffle")),P=w(t("./sum")),T=R(t("./ticks")),x=w(t("./transpose")),C=w(t("./variance")),I=w(t("./zip"));function w(t){return t&&t.__esModule?t:{default:t}}function R(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}},{"./bisect":"2c9f3ca6caa740e412483473138a7b01","./ascending":"5ba374edf7d1d2490fce47ca2d035c5c","./bisector":"eee6927460c3da52ff660efc8b28621c","./cross":"e0ab2e5397d24e0b7649d0fa567832a5","./descending":"1cbc855cb0c06a1b5b624ad8bf04a3cd","./deviation":"5e31d7d0b4206595154d02bc2211cbce","./extent":"4704f9d50ebb7568c8939b2f851c8b04","./histogram":"0ff8f6d18aba1617060d8195334422b7","./threshold/freedmanDiaconis":"d6e67663ccae5b4c332117d4eda546d0","./threshold/scott":"4c8cfa094dd19d27602f9322fd96304b","./threshold/sturges":"5a17b255c6fbe6beb001b67c4299ce75","./max":"41298da21081da8643729ec0a5842713","./mean":"20c6855b26d829ade024cad34bd550f3","./median":"422dbcf85486c6dc51327b8472c278ba","./merge":"a6f645098bcacc9c496a84bd643f5997","./min":"2091d54102ed5607264df64b665349df","./pairs":"5791adba95227faed83eded50ce52173","./permute":"3d0e29296f5776dbf77a9006d56b5cc4","./quantile":"9887518f00dbb3c05f5c086287ccca85","./range":"a57b3db4f0e97ace1bd1851e00fd2bfe","./scan":"e692c5f1e3e2dd0df5c8ece2237cecbc","./shuffle":"99b85b65b3e7a4a7771374294fc27201","./sum":"8b888cf95e6caf2e6b818a03c2a59832","./ticks":"c1411519f8b0b1831ae11ea3d0bf3f63","./transpose":"cdb9e02eb7cbf6ef04f636cd02ab1869","./variance":"a9ef17701b7933d526a69e73eada3185","./zip":"89f3121b1da9c3a55712ce9a2d093758"}],"2c9f3ca6caa740e412483473138a7b01":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.bisectLeft=r.bisectRight=void 0;var n=i(t("./ascending"));function i(t){return t&&t.__esModule?t:{default:t}}var o=(0,i(t("./bisector")).default)(n.default),a=o.right;r.bisectRight=a;var s=o.left;r.bisectLeft=s;var u=a;r.default=u},{"./ascending":"5ba374edf7d1d2490fce47ca2d035c5c","./bisector":"eee6927460c3da52ff660efc8b28621c"}],"5ba374edf7d1d2490fce47ca2d035c5c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},{}],eee6927460c3da52ff660efc8b28621c:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){1===t.length&&(e=t,t=function(t,r){return(0,i.default)(e(t),r)});var e;return{left:function(e,r,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)<0?n=o+1:i=o}return n},right:function(e,r,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)>0?i=o:n=o+1}return n}}};var n,i=(n=t("./ascending"))&&n.__esModule?n:{default:n}},{"./ascending":"5ba374edf7d1d2490fce47ca2d035c5c"}],e0ab2e5397d24e0b7649d0fa567832a5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r){var i,o,a,s,u=t.length,c=e.length,l=new Array(u*c);null==r&&(r=n.pair);for(i=a=0;i<u;++i)for(s=t[i],o=0;o<c;++o,++a)l[a]=r(s,e[o]);return l};var n=t("./pairs")},{"./pairs":"5791adba95227faed83eded50ce52173"}],"5791adba95227faed83eded50ce52173":[function(t,e,r){"use strict";function n(t,e){return[t,e]}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){null==e&&(e=n);var r=0,i=t.length-1,o=t[0],a=new Array(i<0?0:i);for(;r<i;)a[r]=e(o,o=t[++r]);return a},r.pair=n},{}],"1cbc855cb0c06a1b5b624ad8bf04a3cd":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}},{}],"5e31d7d0b4206595154d02bc2211cbce":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r=(0,i.default)(t,e);return r?Math.sqrt(r):r};var n,i=(n=t("./variance"))&&n.__esModule?n:{default:n}},{"./variance":"a9ef17701b7933d526a69e73eada3185"}],a9ef17701b7933d526a69e73eada3185:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r,n,o=t.length,a=0,s=-1,u=0,c=0;if(null==e)for(;++s<o;)isNaN(r=(0,i.default)(t[s]))||(u+=(n=r-u)/++a,c+=n*(r-u));else for(;++s<o;)isNaN(r=(0,i.default)(e(t[s],s,t)))||(u+=(n=r-u)/++a,c+=n*(r-u));if(a>1)return c/(a-1)};var n,i=(n=t("./number"))&&n.__esModule?n:{default:n}},{"./number":"6856455042b4723efe8e0ce3cc1a4aa9"}],"6856455042b4723efe8e0ce3cc1a4aa9":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return null===t?NaN:+t}},{}],"4704f9d50ebb7568c8939b2f851c8b04":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r,n,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(r=t[a])&&r>=r)for(n=i=r;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),i<r&&(i=r))}else for(;++a<o;)if(null!=(r=e(t[a],a,t))&&r>=r)for(n=i=r;++a<o;)null!=(r=e(t[a],a,t))&&(n>r&&(n=r),i<r&&(i=r));return[n,i]}},{}],"0ff8f6d18aba1617060d8195334422b7":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var t=s.default,e=a.default,r=l.default;function f(n){var o,a,s=n.length,l=new Array(s);for(o=0;o<s;++o)l[o]=t(n[o],o,n);var f=e(l),d=f[0],p=f[1],h=r(l,d,p);Array.isArray(h)||(h=(0,c.tickStep)(d,p,h),h=(0,u.default)(Math.ceil(d/h)*h,p,h));for(var g=h.length;h[0]<=d;)h.shift(),--g;for(;h[g-1]>p;)h.pop(),--g;var _,y=new Array(g+1);for(o=0;o<=g;++o)(_=y[o]=[]).x0=o>0?h[o-1]:d,_.x1=o<g?h[o]:p;for(o=0;o<s;++o)d<=(a=l[o])&&a<=p&&y[(0,i.default)(h,a,0,g)].push(n[o]);return y}return f.value=function(e){return arguments.length?(t="function"==typeof e?e:(0,o.default)(e),f):t},f.domain=function(t){return arguments.length?(e="function"==typeof t?t:(0,o.default)([t[0],t[1]]),f):e},f.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:Array.isArray(t)?(0,o.default)(n.slice.call(t)):(0,o.default)(t),f):r},f};var n=t("./array"),i=f(t("./bisect")),o=f(t("./constant")),a=f(t("./extent")),s=f(t("./identity")),u=f(t("./range")),c=t("./ticks"),l=f(t("./threshold/sturges"));function f(t){return t&&t.__esModule?t:{default:t}}},{"./array":"6a9aff3df605e5a4dc8ca88dd45d5703","./bisect":"2c9f3ca6caa740e412483473138a7b01","./constant":"d1505fcf4c76df8c18eb75ca5c7c425c","./extent":"4704f9d50ebb7568c8939b2f851c8b04","./identity":"da9d98f3fa370c722a109d9ca8b7b62f","./range":"a57b3db4f0e97ace1bd1851e00fd2bfe","./ticks":"c1411519f8b0b1831ae11ea3d0bf3f63","./threshold/sturges":"5a17b255c6fbe6beb001b67c4299ce75"}],"6a9aff3df605e5a4dc8ca88dd45d5703":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.slice=void 0;var n=Array.prototype,i=n.slice;r.slice=i;var o=n.map;r.map=o},{}],d1505fcf4c76df8c18eb75ca5c7c425c:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return function(){return t}}},{}],da9d98f3fa370c722a109d9ca8b7b62f:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return t}},{}],a57b3db4f0e97ace1bd1851e00fd2bfe:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;var n=-1,i=0|Math.max(0,Math.ceil((e-t)/r)),o=new Array(i);for(;++n<i;)o[n]=t+n*r;return o}},{}],c1411519f8b0b1831ae11ea3d0bf3f63:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r){var n,i,o,s,u=-1;if(r=+r,(t=+t)===(e=+e)&&r>0)return[t];(n=e<t)&&(i=t,t=e,e=i);if(0===(s=a(t,e,r))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(t+u)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(t-u)/s;n&&o.reverse();return o},r.tickIncrement=a,r.tickStep=function(t,e,r){var a=Math.abs(e-t)/Math.max(0,r),s=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),u=a/s;u>=n?s*=10:u>=i?s*=5:u>=o&&(s*=2);return e<t?-s:s};var n=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2);function a(t,e,r){var a=(e-t)/Math.max(0,r),s=Math.floor(Math.log(a)/Math.LN10),u=a/Math.pow(10,s);return s>=0?(u>=n?10:u>=i?5:u>=o?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(u>=n?10:u>=i?5:u>=o?2:1)}},{}],"5a17b255c6fbe6beb001b67c4299ce75":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}},{}],d6e67663ccae5b4c332117d4eda546d0:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r){return t=n.map.call(t,o.default).sort(i.default),Math.ceil((r-e)/(2*((0,a.default)(t,.75)-(0,a.default)(t,.25))*Math.pow(t.length,-1/3)))};var n=t("../array"),i=s(t("../ascending")),o=s(t("../number")),a=s(t("../quantile"));function s(t){return t&&t.__esModule?t:{default:t}}},{"../array":"6a9aff3df605e5a4dc8ca88dd45d5703","../ascending":"5ba374edf7d1d2490fce47ca2d035c5c","../number":"6856455042b4723efe8e0ce3cc1a4aa9","../quantile":"9887518f00dbb3c05f5c086287ccca85"}],"9887518f00dbb3c05f5c086287ccca85":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r){null==r&&(r=i.default);if(!(n=t.length))return;if((e=+e)<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,o=(n-1)*e,a=Math.floor(o),s=+r(t[a],a,t),u=+r(t[a+1],a+1,t);return s+(u-s)*(o-a)};var n,i=(n=t("./number"))&&n.__esModule?n:{default:n}},{"./number":"6856455042b4723efe8e0ce3cc1a4aa9"}],"4c8cfa094dd19d27602f9322fd96304b":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r){return Math.ceil((r-e)/(3.5*(0,i.default)(t)*Math.pow(t.length,-1/3)))};var n,i=(n=t("../deviation"))&&n.__esModule?n:{default:n}},{"../deviation":"5e31d7d0b4206595154d02bc2211cbce"}],"41298da21081da8643729ec0a5842713":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r,n,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(r=t[o])&&r>=r)for(n=r;++o<i;)null!=(r=t[o])&&r>n&&(n=r)}else for(;++o<i;)if(null!=(r=e(t[o],o,t))&&r>=r)for(n=r;++o<i;)null!=(r=e(t[o],o,t))&&r>n&&(n=r);return n}},{}],"20c6855b26d829ade024cad34bd550f3":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r,n=t.length,o=n,a=-1,s=0;if(null==e)for(;++a<n;)isNaN(r=(0,i.default)(t[a]))?--o:s+=r;else for(;++a<n;)isNaN(r=(0,i.default)(e(t[a],a,t)))?--o:s+=r;if(o)return s/o};var n,i=(n=t("./number"))&&n.__esModule?n:{default:n}},{"./number":"6856455042b4723efe8e0ce3cc1a4aa9"}],"422dbcf85486c6dc51327b8472c278ba":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r,a=t.length,s=-1,u=[];if(null==e)for(;++s<a;)isNaN(r=(0,i.default)(t[s]))||u.push(r);else for(;++s<a;)isNaN(r=(0,i.default)(e(t[s],s,t)))||u.push(r);return(0,o.default)(u.sort(n.default),.5)};var n=a(t("./ascending")),i=a(t("./number")),o=a(t("./quantile"));function a(t){return t&&t.__esModule?t:{default:t}}},{"./ascending":"5ba374edf7d1d2490fce47ca2d035c5c","./number":"6856455042b4723efe8e0ce3cc1a4aa9","./quantile":"9887518f00dbb3c05f5c086287ccca85"}],a6f645098bcacc9c496a84bd643f5997:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){var e,r,n,i=t.length,o=-1,a=0;for(;++o<i;)a+=t[o].length;r=new Array(a);for(;--i>=0;)for(n=t[i],e=n.length;--e>=0;)r[--a]=n[e];return r}},{}],"2091d54102ed5607264df64b665349df":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r,n,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(r=t[o])&&r>=r)for(n=r;++o<i;)null!=(r=t[o])&&n>r&&(n=r)}else for(;++o<i;)if(null!=(r=e(t[o],o,t))&&r>=r)for(n=r;++o<i;)null!=(r=e(t[o],o,t))&&n>r&&(n=r);return n}},{}],"3d0e29296f5776dbf77a9006d56b5cc4":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r=e.length,n=new Array(r);for(;r--;)n[r]=t[e[r]];return n}},{}],e692c5f1e3e2dd0df5c8ece2237cecbc:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){if(!(r=t.length))return;var r,n,o=0,a=0,s=t[a];null==e&&(e=i.default);for(;++o<r;)(e(n=t[o],s)<0||0!==e(s,s))&&(s=n,a=o);if(0===e(s,s))return a};var n,i=(n=t("./ascending"))&&n.__esModule?n:{default:n}},{"./ascending":"5ba374edf7d1d2490fce47ca2d035c5c"}],"99b85b65b3e7a4a7771374294fc27201":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r){var n,i,o=(null==r?t.length:r)-(e=null==e?0:+e);for(;o;)i=Math.random()*o--|0,n=t[o+e],t[o+e]=t[i+e],t[i+e]=n;return t}},{}],"8b888cf95e6caf2e6b818a03c2a59832":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r,n=t.length,i=-1,o=0;if(null==e)for(;++i<n;)(r=+t[i])&&(o+=r);else for(;++i<n;)(r=+e(t[i],i,t))&&(o+=r);return o}},{}],cdb9e02eb7cbf6ef04f636cd02ab1869:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){if(!(a=t.length))return[];for(var e=-1,r=(0,i.default)(t,o),n=new Array(r);++e<r;)for(var a,s=-1,u=n[e]=new Array(a);++s<a;)u[s]=t[s][e];return n};var n,i=(n=t("./min"))&&n.__esModule?n:{default:n};function o(t){return t.length}},{"./min":"2091d54102ed5607264df64b665349df"}],"89f3121b1da9c3a55712ce9a2d093758":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return(0,i.default)(arguments)};var n,i=(n=t("./transpose"))&&n.__esModule?n:{default:n}},{"./transpose":"cdb9e02eb7cbf6ef04f636cd02ab1869"}],a99662bb9af7a39309c0c9b2e4e24d08:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){return(t&&s.hasOwnProperty(t.type)?s[t.type]:c)(t,e)};var n=a(t("./polygonContains")),i=a(t("./distance")),o=t("./math");function a(t){return t&&t.__esModule?t:{default:t}}var s={Feature:function(t,e){return c(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)if(c(r[n].geometry,e))return!0;return!1}},u={Sphere:function(){return!0},Point:function(t,e){return l(t.coordinates,e)},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)if(l(r[n],e))return!0;return!1},LineString:function(t,e){return f(t.coordinates,e)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)if(f(r[n],e))return!0;return!1},Polygon:function(t,e){return d(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)if(d(r[n],e))return!0;return!1},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)if(c(r[n],e))return!0;return!1}};function c(t,e){return!(!t||!u.hasOwnProperty(t.type))&&u[t.type](t,e)}function l(t,e){return 0===(0,i.default)(t,e)}function f(t,e){var r=(0,i.default)(t[0],t[1]);return(0,i.default)(t[0],e)+(0,i.default)(e,t[1])<=r+o.epsilon}function d(t,e){return!!(0,n.default)(t.map(p),h(e))}function p(t){return(t=t.map(h)).pop(),t}function h(t){return[t[0]*o.radians,t[1]*o.radians]}},{"./polygonContains":"81ee6d53056d34a60450c4a4f8cb2958","./distance":"6b11124a833d642c6bbc4ca863ca0452","./math":"73e282156ec1f2ebd1f19880f2342cfe"}],"81ee6d53056d34a60450c4a4f8cb2958":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r=e[0],n=e[1],i=[(0,a.sin)(r),-(0,a.cos)(r),0],u=0,c=0;s.reset();for(var l=0,f=t.length;l<f;++l)if(p=(d=t[l]).length)for(var d,p,h=d[p-1],g=h[0],_=h[1]/2+a.quarterPi,y=(0,a.sin)(_),m=(0,a.cos)(_),v=0;v<p;++v,g=E,y=j,m=O,h=b){var b=d[v],E=b[0],S=b[1]/2+a.quarterPi,j=(0,a.sin)(S),O=(0,a.cos)(S),P=E-g,T=P>=0?1:-1,x=T*P,C=x>a.pi,I=y*j;if(s.add((0,a.atan2)(I*T*(0,a.sin)(x),m*O+I*(0,a.cos)(x))),u+=C?P+T*a.tau:P,C^g>=r^E>=r){var w=(0,o.cartesianCross)((0,o.cartesian)(h),(0,o.cartesian)(b));(0,o.cartesianNormalizeInPlace)(w);var R=(0,o.cartesianCross)(i,w);(0,o.cartesianNormalizeInPlace)(R);var N=(C^P>=0?-1:1)*(0,a.asin)(R[2]);(n>N||n===N&&(w[0]||w[1]))&&(c+=C^P>=0?1:-1)}}return(u<-a.epsilon||u<a.epsilon&&s<-a.epsilon)^1&c};var n,i=(n=t("./adder"))&&n.__esModule?n:{default:n},o=t("./cartesian"),a=t("./math");var s=(0,i.default)()},{"./adder":"373bece71c4e28c389a5d4960d5749f7","./cartesian":"7cc5464f03002a86699989d8ea7f67a5","./math":"73e282156ec1f2ebd1f19880f2342cfe"}],"6b11124a833d642c6bbc4ca863ca0452":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){return o[0]=t,o[1]=e,(0,i.default)(a)};var n,i=(n=t("./length"))&&n.__esModule?n:{default:n};var o=[null,null],a={type:"LineString",coordinates:o}},{"./length":"00a7c19b9cdd3e664bcf2c26357f17fb"}],"00a7c19b9cdd3e664bcf2c26357f17fb":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return f.reset(),(0,a.default)(t,d),+f};var n=s(t("./adder")),i=t("./math"),o=s(t("./noop")),a=s(t("./stream"));function s(t){return t&&t.__esModule?t:{default:t}}var u,c,l,f=(0,n.default)(),d={sphere:o.default,point:o.default,lineStart:function(){d.point=h,d.lineEnd=p},lineEnd:o.default,polygonStart:o.default,polygonEnd:o.default};function p(){d.point=d.lineEnd=o.default}function h(t,e){t*=i.radians,e*=i.radians,u=t,c=(0,i.sin)(e),l=(0,i.cos)(e),d.point=g}function g(t,e){t*=i.radians,e*=i.radians;var r=(0,i.sin)(e),n=(0,i.cos)(e),o=(0,i.abs)(t-u),a=(0,i.cos)(o),s=n*(0,i.sin)(o),d=l*r-c*n*a,p=c*r+l*n*a;f.add((0,i.atan2)((0,i.sqrt)(s*s+d*d),p)),u=t,c=r,l=n}},{"./adder":"373bece71c4e28c389a5d4960d5749f7","./math":"73e282156ec1f2ebd1f19880f2342cfe","./noop":"34881596835958a2aeaf0bf7d8f6e97c","./stream":"9d5b1dd69cf28c375baede464405ac83"}],b64595e475b322412309c89f363d2ea7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=s,r.graticule10=function(){return s()()};var n=t("d3-array"),i=t("./math");function o(t,e,r){var o=(0,n.range)(t,e-i.epsilon,r).concat(e);return function(t){return o.map(function(e){return[t,e]})}}function a(t,e,r){var o=(0,n.range)(t,e-i.epsilon,r).concat(e);return function(t){return o.map(function(e){return[e,t]})}}function s(){var t,e,r,s,u,c,l,f,d,p,h,g,_=10,y=_,m=90,v=360,b=2.5;function E(){return{type:"MultiLineString",coordinates:S()}}function S(){return(0,n.range)((0,i.ceil)(s/m)*m,r,m).map(h).concat((0,n.range)((0,i.ceil)(f/v)*v,l,v).map(g)).concat((0,n.range)((0,i.ceil)(e/_)*_,t,_).filter(function(t){return(0,i.abs)(t%m)>i.epsilon}).map(d)).concat((0,n.range)((0,i.ceil)(c/y)*y,u,y).filter(function(t){return(0,i.abs)(t%v)>i.epsilon}).map(p))}return E.lines=function(){return S().map(function(t){return{type:"LineString",coordinates:t}})},E.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(g(l).slice(1),h(r).reverse().slice(1),g(f).reverse().slice(1))]}},E.extent=function(t){return arguments.length?E.extentMajor(t).extentMinor(t):E.extentMinor()},E.extentMajor=function(t){return arguments.length?(s=+t[0][0],r=+t[1][0],f=+t[0][1],l=+t[1][1],s>r&&(t=s,s=r,r=t),f>l&&(t=f,f=l,l=t),E.precision(b)):[[s,f],[r,l]]},E.extentMinor=function(r){return arguments.length?(e=+r[0][0],t=+r[1][0],c=+r[0][1],u=+r[1][1],e>t&&(r=e,e=t,t=r),c>u&&(r=c,c=u,u=r),E.precision(b)):[[e,c],[t,u]]},E.step=function(t){return arguments.length?E.stepMajor(t).stepMinor(t):E.stepMinor()},E.stepMajor=function(t){return arguments.length?(m=+t[0],v=+t[1],E):[m,v]},E.stepMinor=function(t){return arguments.length?(_=+t[0],y=+t[1],E):[_,y]},E.precision=function(n){return arguments.length?(b=+n,d=o(c,u,90),p=a(e,t,b),h=o(f,l,90),g=a(s,r,b),E):b},E.extentMajor([[-180,-90+i.epsilon],[180,90-i.epsilon]]).extentMinor([[-180,-80-i.epsilon],[180,80+i.epsilon]])}},{"d3-array":"4faa3e8f2f37f91d9d791ac5702f901c","./math":"73e282156ec1f2ebd1f19880f2342cfe"}],"8e64b384716f1bba24269ec9ddf7e9ca":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r=t[0]*n.radians,i=t[1]*n.radians,o=e[0]*n.radians,a=e[1]*n.radians,s=(0,n.cos)(i),u=(0,n.sin)(i),c=(0,n.cos)(a),l=(0,n.sin)(a),f=s*(0,n.cos)(r),d=s*(0,n.sin)(r),p=c*(0,n.cos)(o),h=c*(0,n.sin)(o),g=2*(0,n.asin)((0,n.sqrt)((0,n.haversin)(a-i)+s*c*(0,n.haversin)(o-r))),_=(0,n.sin)(g),y=g?function(t){var e=(0,n.sin)(t*=g)/_,r=(0,n.sin)(g-t)/_,i=r*f+e*p,o=r*d+e*h,a=r*u+e*l;return[(0,n.atan2)(o,i)*n.degrees,(0,n.atan2)(a,(0,n.sqrt)(i*i+o*o))*n.degrees]}:function(){return[r*n.degrees,i*n.degrees]};return y.distance=g,y};var n=t("./math")},{"./math":"73e282156ec1f2ebd1f19880f2342cfe"}],"1d7fcdd53ad53e2c1e3378a2b5a188b4":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r,f,d=4.5;function p(t){return t&&("function"==typeof d&&f.pointRadius(+d.apply(this,arguments)),(0,i.default)(t,r(f))),f.result()}return p.area=function(t){return(0,i.default)(t,r(o.default)),o.default.result()},p.measure=function(t){return(0,i.default)(t,r(c.default)),c.default.result()},p.bounds=function(t){return(0,i.default)(t,r(a.default)),a.default.result()},p.centroid=function(t){return(0,i.default)(t,r(s.default)),s.default.result()},p.projection=function(e){return arguments.length?(r=null==e?(t=null,n.default):(t=e).stream,p):t},p.context=function(t){return arguments.length?(f=null==t?(e=null,new l.default):new u.default(e=t),"function"!=typeof d&&f.pointRadius(d),p):e},p.pointRadius=function(t){return arguments.length?(d="function"==typeof t?t:(f.pointRadius(+t),+t),p):d},p.projection(t).context(e)};var n=f(t("../identity")),i=f(t("../stream")),o=f(t("./area")),a=f(t("./bounds")),s=f(t("./centroid")),u=f(t("./context")),c=f(t("./measure")),l=f(t("./string"));function f(t){return t&&t.__esModule?t:{default:t}}},{"../identity":"9bfe1b2a6883ad496572910060ed8135","../stream":"9d5b1dd69cf28c375baede464405ac83","./area":"4658fb83d9d3b5489a049fa7ab4c0e93","./bounds":"8c1510dfda9dd0e8ae43cd5ab3b3e55a","./centroid":"b620ad0eb03ac338f9ae0c05093930d3","./context":"5666cbf16736b60bcdff43a992857215","./measure":"7b9609bd6b8009af16f0ec5edc2355eb","./string":"679a99b3ee896ba2613f8d4848389aac"}],"9bfe1b2a6883ad496572910060ed8135":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return t}},{}],"4658fb83d9d3b5489a049fa7ab4c0e93":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(t("../adder")),i=t("../math"),o=a(t("../noop"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u,c,l,f=(0,n.default)(),d=(0,n.default)(),p={point:o.default,lineStart:o.default,lineEnd:o.default,polygonStart:function(){p.lineStart=h,p.lineEnd=y},polygonEnd:function(){p.lineStart=p.lineEnd=p.point=o.default,f.add((0,i.abs)(d)),d.reset()},result:function(){var t=f/2;return f.reset(),t}};function h(){p.point=g}function g(t,e){p.point=_,s=c=t,u=l=e}function _(t,e){d.add(l*t-c*e),c=t,l=e}function y(){_(s,u)}var m=p;r.default=m},{"../adder":"373bece71c4e28c389a5d4960d5749f7","../math":"73e282156ec1f2ebd1f19880f2342cfe","../noop":"34881596835958a2aeaf0bf7d8f6e97c"}],"8c1510dfda9dd0e8ae43cd5ab3b3e55a":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("../noop"))&&n.__esModule?n:{default:n};var o=1/0,a=o,s=-o,u=s;var c={point:function(t,e){t<o&&(o=t);t>s&&(s=t);e<a&&(a=e);e>u&&(u=e)},lineStart:i.default,lineEnd:i.default,polygonStart:i.default,polygonEnd:i.default,result:function(){var t=[[o,a],[s,u]];return s=u=-(a=o=1/0),t}};r.default=c},{"../noop":"34881596835958a2aeaf0bf7d8f6e97c"}],b620ad0eb03ac338f9ae0c05093930d3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i,o,a,s=t("../math"),u=0,c=0,l=0,f=0,d=0,p=0,h=0,g=0,_=0,y={point:m,lineStart:v,lineEnd:S,polygonStart:function(){y.lineStart=j,y.lineEnd=O},polygonEnd:function(){y.point=m,y.lineStart=v,y.lineEnd=S},result:function(){var t=_?[h/_,g/_]:p?[f/p,d/p]:l?[u/l,c/l]:[NaN,NaN];return u=c=l=f=d=p=h=g=_=0,t}};function m(t,e){u+=t,c+=e,++l}function v(){y.point=b}function b(t,e){y.point=E,m(o=t,a=e)}function E(t,e){var r=t-o,n=e-a,i=(0,s.sqrt)(r*r+n*n);f+=i*(o+t)/2,d+=i*(a+e)/2,p+=i,m(o=t,a=e)}function S(){y.point=m}function j(){y.point=P}function O(){T(n,i)}function P(t,e){y.point=T,m(n=o=t,i=a=e)}function T(t,e){var r=t-o,n=e-a,i=(0,s.sqrt)(r*r+n*n);f+=i*(o+t)/2,d+=i*(a+e)/2,p+=i,h+=(i=a*t-o*e)*(o+t),g+=i*(a+e),_+=3*i,m(o=t,a=e)}var x=y;r.default=x},{"../math":"73e282156ec1f2ebd1f19880f2342cfe"}],"5666cbf16736b60bcdff43a992857215":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=a;var n,i=t("../math"),o=(n=t("../noop"))&&n.__esModule?n:{default:n};function a(t){this._context=t}a.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,i.tau)}},result:o.default}},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","../noop":"34881596835958a2aeaf0bf7d8f6e97c"}],"7b9609bd6b8009af16f0ec5edc2355eb":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(t("../adder")),i=t("../math"),o=a(t("../noop"));function a(t){return t&&t.__esModule?t:{default:t}}var s,u,c,l,f,d=(0,n.default)(),p={point:o.default,lineStart:function(){p.point=h},lineEnd:function(){s&&g(u,c),p.point=o.default},polygonStart:function(){s=!0},polygonEnd:function(){s=null},result:function(){var t=+d;return d.reset(),t}};function h(t,e){p.point=g,u=l=t,c=f=e}function g(t,e){l-=t,f-=e,d.add((0,i.sqrt)(l*l+f*f)),l=t,f=e}var _=p;r.default=_},{"../adder":"373bece71c4e28c389a5d4960d5749f7","../math":"73e282156ec1f2ebd1f19880f2342cfe","../noop":"34881596835958a2aeaf0bf7d8f6e97c"}],"679a99b3ee896ba2613f8d4848389aac":[function(t,e,r){"use strict";function n(){this._string=[]}function i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,n.prototype={_radius:4.5,_circle:i(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=i(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}}},{}],"8cf0e1c82171ef9127ae5f9a2038815c":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return(0,i.default)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var n,i=(n=t("./conicEqualArea"))&&n.__esModule?n:{default:n}},{"./conicEqualArea":"0e223f66863105f8977bede4c763a06a"}],"0e223f66863105f8977bede4c763a06a":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.conicEqualAreaRaw=a,r.default=function(){return(0,i.conicProjection)(a).scale(155.424).center([0,33.6442])};var n=t("../math"),i=t("./conic"),o=t("./cylindricalEqualArea");function a(t,e){var r=(0,n.sin)(t),i=(r+(0,n.sin)(e))/2;if((0,n.abs)(i)<n.epsilon)return(0,o.cylindricalEqualAreaRaw)(t);var a=1+r*(2*i-r),s=(0,n.sqrt)(a)/i;function u(t,e){var r=(0,n.sqrt)(a-2*i*(0,n.sin)(e))/i;return[r*(0,n.sin)(t*=i),s-r*(0,n.cos)(t)]}return u.invert=function(t,e){var r=s-e;return[(0,n.atan2)(t,(0,n.abs)(r))/i*(0,n.sign)(r),(0,n.asin)((a-(t*t+r*r)*i*i)/(2*i))]},u}},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./conic":"9593f4de04f63fb1aef246db3833a89a","./cylindricalEqualArea":"f197032cbaee447865c47c17edff7efc"}],"9593f4de04f63fb1aef246db3833a89a":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.conicProjection=function(t){var e=0,r=n.pi/3,o=(0,i.projectionMutator)(t),a=o(e,r);return a.parallels=function(t){return arguments.length?o(e=t[0]*n.radians,r=t[1]*n.radians):[e*n.degrees,r*n.degrees]},a};var n=t("../math"),i=t("./index")},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./index":"f8d72d2ea5de149f92069ef723fdac9d"}],f8d72d2ea5de149f92069ef723fdac9d:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return g(function(){return t})()},r.projectionMutator=g;var n=p(t("../clip/antimeridian")),i=p(t("../clip/circle")),o=t("../clip/extent"),a=p(t("../compose")),s=p(t("../identity")),u=t("../math"),c=t("../rotation"),l=t("../transform"),f=t("./fit"),d=p(t("./resample"));function p(t){return t&&t.__esModule?t:{default:t}}var h=(0,l.transformer)({point:function(t,e){this.stream.point(t*u.radians,e*u.radians)}});function g(t){var e,r,l,p,g,_,y,m,v,b,E=150,S=480,j=250,O=0,P=0,T=0,x=0,C=0,I=null,w=n.default,R=null,N=s.default,M=.5,L=(0,d.default)(D,M);function A(t){return[(t=g(t[0]*u.radians,t[1]*u.radians))[0]*E+r,l-t[1]*E]}function F(t){return(t=g.invert((t[0]-r)/E,(l-t[1])/E))&&[t[0]*u.degrees,t[1]*u.degrees]}function D(t,n){return[(t=e(t,n))[0]*E+r,l-t[1]*E]}function k(){g=(0,a.default)(p=(0,c.rotateRadians)(T,x,C),e);var t=e(O,P);return r=S-t[0]*E,l=j+t[1]*E,G()}function G(){return v=b=null,A}return A.stream=function(t){return v&&b===t?v:v=h(w(p,L(N(b=t))))},A.clipAngle=function(t){return arguments.length?(w=+t?(0,i.default)(I=t*u.radians,6*u.radians):(I=null,n.default),G()):I*u.degrees},A.clipExtent=function(t){return arguments.length?(N=null==t?(R=_=y=m=null,s.default):(0,o.clipExtent)(R=+t[0][0],_=+t[0][1],y=+t[1][0],m=+t[1][1]),G()):null==R?null:[[R,_],[y,m]]},A.scale=function(t){return arguments.length?(E=+t,k()):E},A.translate=function(t){return arguments.length?(S=+t[0],j=+t[1],k()):[S,j]},A.center=function(t){return arguments.length?(O=t[0]%360*u.radians,P=t[1]%360*u.radians,k()):[O*u.degrees,P*u.degrees]},A.rotate=function(t){return arguments.length?(T=t[0]%360*u.radians,x=t[1]%360*u.radians,C=t.length>2?t[2]%360*u.radians:0,k()):[T*u.degrees,x*u.degrees,C*u.degrees]},A.precision=function(t){return arguments.length?(L=(0,d.default)(D,M=t*t),G()):(0,u.sqrt)(M)},A.fitExtent=function(t,e){return(0,f.fitExtent)(A,t,e)},A.fitSize=function(t,e){return(0,f.fitSize)(A,t,e)},function(){return e=t.apply(this,arguments),A.invert=e.invert&&F,k()}}},{"../clip/antimeridian":"d53da8fcc8d61381e71ae02fa4e6757c","../clip/circle":"98cd21a4a35c67c243a2139bbc7cd64f","../clip/extent":"e700f9cd5023f67d92cadcf161a1f5ba","../compose":"b37751b7ea4b12007500f07e7d929116","../identity":"9bfe1b2a6883ad496572910060ed8135","../math":"73e282156ec1f2ebd1f19880f2342cfe","../rotation":"bfe7efa978c2671445343c33808074c7","../transform":"30c3a97c230b1f39402e99f89076fe7e","./fit":"e3b9747a3b5b32d2a620ad9f4f034d46","./resample":"7dce1385cdc0653ca7b47a42eb545791"}],d53da8fcc8d61381e71ae02fa4e6757c:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=t("./index"))&&n.__esModule?n:{default:n},o=t("../math");var a=(0,i.default)(function(){return!0},function(t){var e,r=NaN,n=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,s){var u=a>0?o.pi:-o.pi,c=(0,o.abs)(a-r);(0,o.abs)(c-o.pi)<o.epsilon?(t.point(r,n=(n+s)/2>0?o.halfPi:-o.halfPi),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(u,n),t.point(a,n),e=0):i!==u&&c>=o.pi&&((0,o.abs)(r-i)<o.epsilon&&(r-=i*o.epsilon),(0,o.abs)(a-u)<o.epsilon&&(a-=u*o.epsilon),n=function(t,e,r,n){var i,a,s=(0,o.sin)(t-r);return(0,o.abs)(s)>o.epsilon?(0,o.atan)(((0,o.sin)(e)*(a=(0,o.cos)(n))*(0,o.sin)(r)-(0,o.sin)(n)*(i=(0,o.cos)(e))*(0,o.sin)(t))/(i*a*s)):(e+n)/2}(r,n,a,s),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(u,n),e=0),t.point(r=a,n=s),i=u},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}},function(t,e,r,n){var i;if(null==t)i=r*o.halfPi,n.point(-o.pi,i),n.point(0,i),n.point(o.pi,i),n.point(o.pi,0),n.point(o.pi,-i),n.point(0,-i),n.point(-o.pi,-i),n.point(-o.pi,0),n.point(-o.pi,i);else if((0,o.abs)(t[0]-e[0])>o.epsilon){var a=t[0]<e[0]?o.pi:-o.pi;i=r*a/2,n.point(-a,i),n.point(0,i),n.point(a,i)}else n.point(e[0],e[1])},[-o.pi,-o.halfPi]);r.default=a},{"./index":"4a6672c03ec92dea9a594ed990d40ead","../math":"73e282156ec1f2ebd1f19880f2342cfe"}],"4a6672c03ec92dea9a594ed990d40ead":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e,r,o){return function(u,f){var d,p,h,g=e(f),_=u.invert(o[0],o[1]),y=(0,n.default)(),m=e(y),v=!1,b={point:E,lineStart:j,lineEnd:O,polygonStart:function(){b.point=P,b.lineStart=T,b.lineEnd=x,p=[],d=[]},polygonEnd:function(){b.point=E,b.lineStart=j,b.lineEnd=O,p=(0,s.merge)(p);var t=(0,a.default)(d,_);p.length?(v||(f.polygonStart(),v=!0),(0,i.default)(p,l,t,r,f)):t&&(v||(f.polygonStart(),v=!0),f.lineStart(),r(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),p=d=null},sphere:function(){f.polygonStart(),f.lineStart(),r(null,null,1,f),f.lineEnd(),f.polygonEnd()}};function E(e,r){var n=u(e,r);t(e=n[0],r=n[1])&&f.point(e,r)}function S(t,e){var r=u(t,e);g.point(r[0],r[1])}function j(){b.point=S,g.lineStart()}function O(){b.point=E,g.lineEnd()}function P(t,e){h.push([t,e]);var r=u(t,e);m.point(r[0],r[1])}function T(){m.lineStart(),h=[]}function x(){P(h[0][0],h[0][1]),m.lineEnd();var t,e,r,n,i=m.clean(),o=y.result(),a=o.length;if(h.pop(),d.push(h),h=null,a)if(1&i){if((e=(r=o[0]).length-1)>0){for(v||(f.polygonStart(),v=!0),f.lineStart(),t=0;t<e;++t)f.point((n=r[t])[0],n[1]);f.lineEnd()}}else a>1&&2&i&&o.push(o.pop().concat(o.shift())),p.push(o.filter(c))}return b}};var n=u(t("./buffer")),i=u(t("./polygon")),o=t("../math"),a=u(t("../polygonContains")),s=t("d3-array");function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return t.length>1}function l(t,e){return((t=t.x)[0]<0?t[1]-o.halfPi-o.epsilon:o.halfPi-t[1])-((e=e.x)[0]<0?e[1]-o.halfPi-o.epsilon:o.halfPi-e[1])}},{"./buffer":"bfb1eb48520b65c379f9b81113424576","./polygon":"1e72cb40bff300a3a3550c65d7238728","../math":"73e282156ec1f2ebd1f19880f2342cfe","../polygonContains":"81ee6d53056d34a60450c4a4f8cb2958","d3-array":"4faa3e8f2f37f91d9d791ac5702f901c"}],"98cd21a4a35c67c243a2139bbc7cd64f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){var r=(0,o.cos)(t),u=r>0,c=(0,o.abs)(r)>o.epsilon;function l(t,e){return(0,o.cos)(t)*(0,o.cos)(e)>r}function f(t,e,i){var a=(0,n.cartesian)(t),s=(0,n.cartesian)(e),u=[1,0,0],c=(0,n.cartesianCross)(a,s),l=(0,n.cartesianDot)(c,c),f=c[0],d=l-f*f;if(!d)return!i&&t;var p=r*l/d,h=-r*f/d,g=(0,n.cartesianCross)(u,c),_=(0,n.cartesianScale)(u,p),y=(0,n.cartesianScale)(c,h);(0,n.cartesianAddInPlace)(_,y);var m=g,v=(0,n.cartesianDot)(_,m),b=(0,n.cartesianDot)(m,m),E=v*v-b*((0,n.cartesianDot)(_,_)-1);if(!(E<0)){var S=(0,o.sqrt)(E),j=(0,n.cartesianScale)(m,(-v-S)/b);if((0,n.cartesianAddInPlace)(j,_),j=(0,n.spherical)(j),!i)return j;var O,P=t[0],T=e[0],x=t[1],C=e[1];T<P&&(O=P,P=T,T=O);var I=T-P,w=(0,o.abs)(I-o.pi)<o.epsilon;if(!w&&C<x&&(O=x,x=C,C=O),w||I<o.epsilon?w?x+C>0^j[1]<((0,o.abs)(j[0]-P)<o.epsilon?x:C):x<=j[1]&&j[1]<=C:I>o.pi^(P<=j[0]&&j[0]<=T)){var R=(0,n.cartesianScale)(m,(-v+S)/b);return(0,n.cartesianAddInPlace)(R,_),[j,(0,n.spherical)(R)]}}}function d(e,r){var n=u?t:o.pi-t,i=0;return e<-n?i|=1:e>n&&(i|=2),r<-n?i|=4:r>n&&(i|=8),i}return(0,s.default)(l,function(t){var e,r,n,i,s;return{lineStart:function(){i=n=!1,s=1},point:function(p,h){var g,_=[p,h],y=l(p,h),m=u?y?0:d(p,h):y?d(p+(p<0?o.pi:-o.pi),h):0;if(!e&&(i=n=y)&&t.lineStart(),y!==n&&(!(g=f(e,_))||(0,a.default)(e,g)||(0,a.default)(_,g))&&(_[0]+=o.epsilon,_[1]+=o.epsilon,y=l(_[0],_[1])),y!==n)s=0,y?(t.lineStart(),g=f(_,e),t.point(g[0],g[1])):(g=f(e,_),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(c&&e&&u^y){var v;m&r||!(v=f(_,e,!0))||(s=0,u?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!y||e&&(0,a.default)(e,_)||t.point(_[0],_[1]),e=_,n=y,r=m},lineEnd:function(){n&&t.lineEnd(),e=null},clean:function(){return s|(i&&n)<<1}}},function(r,n,o,a){(0,i.circleStream)(a,t,e,o,r,n)},u?[0,-t]:[-o.pi,t-o.pi])};var n=t("../cartesian"),i=t("../circle"),o=t("../math"),a=u(t("../pointEqual")),s=u(t("./index"));function u(t){return t&&t.__esModule?t:{default:t}}},{"../cartesian":"7cc5464f03002a86699989d8ea7f67a5","../circle":"993b8a31b609871c9638386053cef0ec","../math":"73e282156ec1f2ebd1f19880f2342cfe","../pointEqual":"1923364e49bdfa8965b79bec05d25621","./index":"4a6672c03ec92dea9a594ed990d40ead"}],"30c3a97c230b1f39402e99f89076fe7e":[function(t,e,r){"use strict";function n(t){return function(e){var r=new i;for(var n in t)r[n]=t[n];return r.stream=e,r}}function i(){}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return{stream:n(t)}},r.transformer=n,i.prototype={constructor:i,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},{}],e3b9747a3b5b32d2a620ad9f4f034d46:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fitExtent=a,r.fitSize=function(t,e,r){return a(t,[[0,0],e],r)};var n=o(t("../stream")),i=o(t("../path/bounds"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,r){var o=e[1][0]-e[0][0],a=e[1][1]-e[0][1],s=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=s&&t.clipExtent(null),(0,n.default)(r,t.stream(i.default));var u=i.default.result(),c=Math.min(o/(u[1][0]-u[0][0]),a/(u[1][1]-u[0][1])),l=+e[0][0]+(o-c*(u[1][0]+u[0][0]))/2,f=+e[0][1]+(a-c*(u[1][1]+u[0][1]))/2;return null!=s&&t.clipExtent(s),t.scale(150*c).translate([l,f])}},{"../stream":"9d5b1dd69cf28c375baede464405ac83","../path/bounds":"8c1510dfda9dd0e8ae43cd5ab3b3e55a"}],"7dce1385cdc0653ca7b47a42eb545791":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,e){return+e?function(t,e){function r(n,o,a,u,c,l,f,d,p,h,g,_,y,m){var v=f-n,b=d-o,E=v*v+b*b;if(E>4*e&&y--){var S=u+h,j=c+g,O=l+_,P=(0,i.sqrt)(S*S+j*j+O*O),T=(0,i.asin)(O/=P),x=(0,i.abs)((0,i.abs)(O)-1)<i.epsilon||(0,i.abs)(a-p)<i.epsilon?(a+p)/2:(0,i.atan2)(j,S),C=t(x,T),I=C[0],w=C[1],R=I-n,N=w-o,M=b*R-v*N;(M*M/E>e||(0,i.abs)((v*R+b*N)/E-.5)>.3||u*h+c*g+l*_<s)&&(r(n,o,a,u,c,l,I,w,x,S/=P,j/=P,O,y,m),m.point(I,w),r(I,w,x,S,j,O,f,d,p,h,g,_,y,m))}}return function(e){var i,o,s,u,c,l,f,d,p,h,g,_,y={point:m,lineStart:v,lineEnd:E,polygonStart:function(){e.polygonStart(),y.lineStart=S},polygonEnd:function(){e.polygonEnd(),y.lineStart=v}};function m(r,n){r=t(r,n),e.point(r[0],r[1])}function v(){d=NaN,y.point=b,e.lineStart()}function b(i,o){var s=(0,n.cartesian)([i,o]),u=t(i,o);r(d,p,f,h,g,_,d=u[0],p=u[1],f=i,h=s[0],g=s[1],_=s[2],a,e),e.point(d,p)}function E(){y.point=m,e.lineEnd()}function S(){v(),y.point=j,y.lineEnd=O}function j(t,e){b(i=t,e),o=d,s=p,u=h,c=g,l=_,y.point=b}function O(){r(d,p,f,h,g,_,o,s,i,u,c,l,a,e),y.lineEnd=E,E()}return y}}(t,e):function(t){return(0,o.transformer)({point:function(e,r){e=t(e,r),this.stream.point(e[0],e[1])}})}(t)};var n=t("../cartesian"),i=t("../math"),o=t("../transform"),a=16,s=(0,i.cos)(30*i.radians)},{"../cartesian":"7cc5464f03002a86699989d8ea7f67a5","../math":"73e282156ec1f2ebd1f19880f2342cfe","../transform":"30c3a97c230b1f39402e99f89076fe7e"}],f197032cbaee447865c47c17edff7efc:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cylindricalEqualAreaRaw=function(t){var e=(0,n.cos)(t);function r(t,r){return[t*e,(0,n.sin)(r)/e]}return r.invert=function(t,r){return[t/e,(0,n.asin)(r*e)]},r};var n=t("../math")},{"../math":"73e282156ec1f2ebd1f19880f2342cfe"}],"89a4eab866da038c1c1c038e3d0af652":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var t,e,r,s,u,c,l=(0,i.default)(),f=(0,o.default)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=(0,o.default)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),p={point:function(t,e){c=[t,e]}};function h(t){var e=t[0],n=t[1];return c=null,r.point(e,n),c||(s.point(e,n),c)||(u.point(e,n),c)}function g(){return t=e=null,h}return h.invert=function(t){var e=l.scale(),r=l.translate(),n=(t[0]-r[0])/e,i=(t[1]-r[1])/e;return(i>=.12&&i<.234&&n>=-.425&&n<-.214?f:i>=.166&&i<.234&&n>=-.214&&n<-.115?d:l).invert(t)},h.stream=function(r){return t&&e===r?t:(n=[l.stream(e=r),f.stream(r),d.stream(r)],i=n.length,t={point:function(t,e){for(var r=-1;++r<i;)n[r].point(t,e)},sphere:function(){for(var t=-1;++t<i;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)n[t].polygonEnd()}});var n,i},h.precision=function(t){return arguments.length?(l.precision(t),f.precision(t),d.precision(t),g()):l.precision()},h.scale=function(t){return arguments.length?(l.scale(t),f.scale(.35*t),d.scale(t),h.translate(l.translate())):l.scale()},h.translate=function(t){if(!arguments.length)return l.translate();var e=l.scale(),i=+t[0],o=+t[1];return r=l.translate(t).clipExtent([[i-.455*e,o-.238*e],[i+.455*e,o+.238*e]]).stream(p),s=f.translate([i-.307*e,o+.201*e]).clipExtent([[i-.425*e+n.epsilon,o+.12*e+n.epsilon],[i-.214*e-n.epsilon,o+.234*e-n.epsilon]]).stream(p),u=d.translate([i-.205*e,o+.212*e]).clipExtent([[i-.214*e+n.epsilon,o+.166*e+n.epsilon],[i-.115*e-n.epsilon,o+.234*e-n.epsilon]]).stream(p),g()},h.fitExtent=function(t,e){return(0,a.fitExtent)(h,t,e)},h.fitSize=function(t,e){return(0,a.fitSize)(h,t,e)},h.scale(1070)};var n=t("../math"),i=s(t("./albers")),o=s(t("./conicEqualArea")),a=t("./fit");function s(t){return t&&t.__esModule?t:{default:t}}},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./albers":"8cf0e1c82171ef9127ae5f9a2038815c","./conicEqualArea":"0e223f66863105f8977bede4c763a06a","./fit":"e3b9747a3b5b32d2a620ad9f4f034d46"}],f0d23d03f767acecb55e34d2ac3b9100:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return(0,a.default)(s).scale(124.75).clipAngle(179.999)},r.azimuthalEqualAreaRaw=void 0;var n,i=t("../math"),o=t("./azimuthal"),a=(n=t("./index"))&&n.__esModule?n:{default:n};var s=(0,o.azimuthalRaw)(function(t){return(0,i.sqrt)(2/(1+t))});r.azimuthalEqualAreaRaw=s,s.invert=(0,o.azimuthalInvert)(function(t){return 2*(0,i.asin)(t/2)})},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./azimuthal":"4760690ded84aeb86a0d611cc8e4e354","./index":"f8d72d2ea5de149f92069ef723fdac9d"}],"4760690ded84aeb86a0d611cc8e4e354":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.azimuthalRaw=function(t){return function(e,r){var i=(0,n.cos)(e),o=(0,n.cos)(r),a=t(i*o);return[a*o*(0,n.sin)(e),a*(0,n.sin)(r)]}},r.azimuthalInvert=function(t){return function(e,r){var i=(0,n.sqrt)(e*e+r*r),o=t(i),a=(0,n.sin)(o),s=(0,n.cos)(o);return[(0,n.atan2)(e*a,i*s),(0,n.asin)(i&&r*a/i)]}};var n=t("../math")},{"../math":"73e282156ec1f2ebd1f19880f2342cfe"}],e8cc08c1b618f998d7e796db1defc1ee:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return(0,a.default)(s).scale(79.4188).clipAngle(179.999)},r.azimuthalEquidistantRaw=void 0;var n,i=t("../math"),o=t("./azimuthal"),a=(n=t("./index"))&&n.__esModule?n:{default:n};var s=(0,o.azimuthalRaw)(function(t){return(t=(0,i.acos)(t))&&t/(0,i.sin)(t)});r.azimuthalEquidistantRaw=s,s.invert=(0,o.azimuthalInvert)(function(t){return t})},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./azimuthal":"4760690ded84aeb86a0d611cc8e4e354","./index":"f8d72d2ea5de149f92069ef723fdac9d"}],"52450747c147a532730159c0e0252160":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.conicConformalRaw=s,r.default=function(){return(0,i.conicProjection)(s).scale(109.5).parallels([30,30])};var n=t("../math"),i=t("./conic"),o=t("./mercator");function a(t){return(0,n.tan)((n.halfPi+t)/2)}function s(t,e){var r=(0,n.cos)(t),i=t===e?(0,n.sin)(t):(0,n.log)(r/(0,n.cos)(e))/(0,n.log)(a(e)/a(t)),s=r*(0,n.pow)(a(t),i)/i;if(!i)return o.mercatorRaw;function u(t,e){s>0?e<-n.halfPi+n.epsilon&&(e=-n.halfPi+n.epsilon):e>n.halfPi-n.epsilon&&(e=n.halfPi-n.epsilon);var r=s/(0,n.pow)(a(e),i);return[r*(0,n.sin)(i*t),s-r*(0,n.cos)(i*t)]}return u.invert=function(t,e){var r=s-e,o=(0,n.sign)(i)*(0,n.sqrt)(t*t+r*r);return[(0,n.atan2)(t,(0,n.abs)(r))/i*(0,n.sign)(r),2*(0,n.atan)((0,n.pow)(s/o,1/i))-n.halfPi]},u}},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./conic":"9593f4de04f63fb1aef246db3833a89a","./mercator":"0d9b406f7227390fc768d10dfa7f1d01"}],"0d9b406f7227390fc768d10dfa7f1d01":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mercatorRaw=s,r.default=function(){return u(s).scale(961/n.tau)},r.mercatorProjection=u;var n=t("../math"),i=a(t("../rotation")),o=a(t("./index"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return[t,(0,n.log)((0,n.tan)((n.halfPi+e)/2))]}function u(t){var e,r,a,u=(0,o.default)(t),c=u.center,l=u.scale,f=u.translate,d=u.clipExtent,p=null;function h(){var o=n.pi*l(),c=u((0,i.default)(u.rotate()).invert([0,0]));return d(null==p?[[c[0]-o,c[1]-o],[c[0]+o,c[1]+o]]:t===s?[[Math.max(c[0]-o,p),e],[Math.min(c[0]+o,r),a]]:[[p,Math.max(c[1]-o,e)],[r,Math.min(c[1]+o,a)]])}return u.scale=function(t){return arguments.length?(l(t),h()):l()},u.translate=function(t){return arguments.length?(f(t),h()):f()},u.center=function(t){return arguments.length?(c(t),h()):c()},u.clipExtent=function(t){return arguments.length?(null==t?p=e=r=a=null:(p=+t[0][0],e=+t[0][1],r=+t[1][0],a=+t[1][1]),h()):null==p?null:[[p,e],[r,a]]},h()}s.invert=function(t,e){return[t,2*(0,n.atan)((0,n.exp)(e))-n.halfPi]}},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","../rotation":"bfe7efa978c2671445343c33808074c7","./index":"f8d72d2ea5de149f92069ef723fdac9d"}],c3f1dd76309f5cf1a14e582707b24fc1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.conicEquidistantRaw=a,r.default=function(){return(0,i.conicProjection)(a).scale(131.154).center([0,13.9389])};var n=t("../math"),i=t("./conic"),o=t("./equirectangular");function a(t,e){var r=(0,n.cos)(t),i=t===e?(0,n.sin)(t):(r-(0,n.cos)(e))/(e-t),a=r/i+t;if((0,n.abs)(i)<n.epsilon)return o.equirectangularRaw;function s(t,e){var r=a-e,o=i*t;return[r*(0,n.sin)(o),a-r*(0,n.cos)(o)]}return s.invert=function(t,e){var r=a-e;return[(0,n.atan2)(t,(0,n.abs)(r))/i*(0,n.sign)(r),a-(0,n.sign)(i)*(0,n.sqrt)(t*t+r*r)]},s}},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./conic":"9593f4de04f63fb1aef246db3833a89a","./equirectangular":"4a9eee367756ad8a1f45a406b1f07723"}],"4a9eee367756ad8a1f45a406b1f07723":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.equirectangularRaw=o,r.default=function(){return(0,i.default)(o).scale(152.63)};var n,i=(n=t("./index"))&&n.__esModule?n:{default:n};function o(t,e){return[t,e]}o.invert=o},{"./index":"f8d72d2ea5de149f92069ef723fdac9d"}],"8495457c0162564f537471a2abb65cc7":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.gnomonicRaw=s,r.default=function(){return(0,a.default)(s).scale(144.049).clipAngle(60)};var n,i=t("../math"),o=t("./azimuthal"),a=(n=t("./index"))&&n.__esModule?n:{default:n};function s(t,e){var r=(0,i.cos)(e),n=(0,i.cos)(t)*r;return[r*(0,i.sin)(t)/n,(0,i.sin)(e)/n]}s.invert=(0,o.azimuthalInvert)(i.atan)},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./azimuthal":"4760690ded84aeb86a0d611cc8e4e354","./index":"f8d72d2ea5de149f92069ef723fdac9d"}],ef97564bb180f8f1cb64597d2fea086e:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var t,e,r,n,a,c,l=1,f=0,d=0,p=1,h=1,g=o.default,_=null,y=o.default;function m(){return n=a=null,c}return c={stream:function(t){return n&&a===t?n:n=g(y(a=t))},clipExtent:function(n){return arguments.length?(y=null==n?(_=t=e=r=null,o.default):(0,i.clipExtent)(_=+n[0][0],t=+n[0][1],e=+n[1][0],r=+n[1][1]),m()):null==_?null:[[_,t],[e,r]]},scale:function(t){return arguments.length?(g=u((l=+t)*p,l*h,f,d),m()):l},translate:function(t){return arguments.length?(g=u(l*p,l*h,f=+t[0],d=+t[1]),m()):[f,d]},reflectX:function(t){return arguments.length?(g=u(l*(p=t?-1:1),l*h,f,d),m()):p<0},reflectY:function(t){return arguments.length?(g=u(l*p,l*(h=t?-1:1),f,d),m()):h<0},fitExtent:function(t,e){return(0,s.fitExtent)(c,t,e)},fitSize:function(t,e){return(0,s.fitSize)(c,t,e)}}};var n,i=t("../clip/extent"),o=(n=t("../identity"))&&n.__esModule?n:{default:n},a=t("../transform"),s=t("./fit");function u(t,e,r,n){return 1===t&&1===e&&0===r&&0===n?o.default:(0,a.transformer)({point:function(i,o){this.stream.point(i*t+r,o*e+n)}})}},{"../clip/extent":"e700f9cd5023f67d92cadcf161a1f5ba","../identity":"9bfe1b2a6883ad496572910060ed8135","../transform":"30c3a97c230b1f39402e99f89076fe7e","./fit":"e3b9747a3b5b32d2a620ad9f4f034d46"}],f0b3d72eb8572c7969fefd71d290096c:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.naturalEarth1Raw=a,r.default=function(){return(0,i.default)(a).scale(175.295)};var n,i=(n=t("./index"))&&n.__esModule?n:{default:n},o=t("../math");function a(t,e){var r=e*e,n=r*r;return[t*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791)),e*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))]}a.invert=function(t,e){var r,n=e,i=25;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(.028874*a-.044475-.005916*s)))-e)/(1.007226+a*(.045255+s*(.259866*a-.311325-.005916*11*s)))}while((0,o.abs)(r)>o.epsilon&&--i>0);return[t/(.8707+(a=n*n)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),n]}},{"./index":"f8d72d2ea5de149f92069ef723fdac9d","../math":"73e282156ec1f2ebd1f19880f2342cfe"}],"359ed4b75ff3a18e235dcb49bd0485b8":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.orthographicRaw=s,r.default=function(){return(0,a.default)(s).scale(249.5).clipAngle(90+i.epsilon)};var n,i=t("../math"),o=t("./azimuthal"),a=(n=t("./index"))&&n.__esModule?n:{default:n};function s(t,e){return[(0,i.cos)(e)*(0,i.sin)(t),(0,i.sin)(e)]}s.invert=(0,o.azimuthalInvert)(i.asin)},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./azimuthal":"4760690ded84aeb86a0d611cc8e4e354","./index":"f8d72d2ea5de149f92069ef723fdac9d"}],"718add7c97852caa4ecc0766448c0f20":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.stereographicRaw=s,r.default=function(){return(0,a.default)(s).scale(250).clipAngle(142)};var n,i=t("../math"),o=t("./azimuthal"),a=(n=t("./index"))&&n.__esModule?n:{default:n};function s(t,e){var r=(0,i.cos)(e),n=1+(0,i.cos)(t)*r;return[r*(0,i.sin)(t)/n,(0,i.sin)(e)/n]}s.invert=(0,o.azimuthalInvert)(function(t){return 2*(0,i.atan)(t)})},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./azimuthal":"4760690ded84aeb86a0d611cc8e4e354","./index":"f8d72d2ea5de149f92069ef723fdac9d"}],"13c311b430f150f860425c746cd62aa9":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transverseMercatorRaw=o,r.default=function(){var t=(0,i.mercatorProjection)(o),e=t.center,r=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?r([t[0],t[1],t.length>2?t[2]+90:90]):[(t=r())[0],t[1],t[2]-90]},r([0,0,90]).scale(159.155)};var n=t("../math"),i=t("./mercator");function o(t,e){return[(0,n.log)((0,n.tan)((n.halfPi+e)/2)),-t]}o.invert=function(t,e){return[-e,2*(0,n.atan)((0,n.exp)(t))-n.halfPi]}},{"../math":"73e282156ec1f2ebd1f19880f2342cfe","./mercator":"0d9b406f7227390fc768d10dfa7f1d01"}],"76a6450cb736d86ab494d825c0c21f5f":[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("ol/coordinate"),i=t("ol"),o=t("ol/geom"),a=t("ol/extent"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(t("./style")),u=l(t("./notification")),c=l(t("./img/lost.jpg"));function l(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e="function"==typeof Map?new Map:void 0;return(h=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return g(t,arguments,y(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_(n,t)})(t)}function g(t,e,r){return(g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&_(i,r.prototype),i}).apply(null,arguments)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){function e(t,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=function(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?p(t):e}(this,y(e).call(this))).view=t,a.segment=r,a.distance=n,a.geolocation=new i.Geolocation({projection:a.view.getProjection()}),a.positionFeature=new i.Feature(new o.Point([])),a.positionFeature.setStyle(s.position),a.shortestLineFeature=new i.Feature(new o.LineString([])),a.shortestLineFeature.setStyle(s.shortestLine),a.geolocation.on("change:position",a.onPositionChange.bind(p(a))),a.notifier=new u.default(a.onAction.bind(p(a))),a.difference=0,a.outside=!1,a.mutted=!1,a}var r,l,g;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,h(EventTarget)),r=e,(l=[{key:"onAction",value:function(t){this.mutted="mute"===t.action,this.notify()}},{key:"onPositionChange",value:function(t){var e=t.target.getPosition();(0,a.containsCoordinate)(this.view.calculateExtent(),e)||this.view.animate({center:e,duration:250}),this.positionFeature.getGeometry().setCoordinates(e);var r=this.segment.getClosestPoint(e);this.shortestLineFeature.getGeometry().setCoordinates([e,r]);var i=(0,n.distance)(r,e);this.difference=i-this.distance,this.outside=this.difference>0}},{key:"notify",value:function(){var t=[];this.mutted?t.push({action:"Unmute",title:"Unmute"}):t.push({action:"mute",title:"Mute"}),this.notifier.showNotification("You are lost!",{body:"".concat(Math.round(this.difference),"m away from the track "),image:c.default,tag:"outside",renotify:!this.mutted,actions:t})}},{key:"outside",set:function(t){t&&this.notify(),this.positionFeature.set("outside",t),this.shortestLineFeature.set("outside",t);var e=new CustomEvent("change",{detail:{outside:t,difference:this.difference}});this.dispatchEvent(e)}},{key:"tracking",get:function(){return this.geolocation.getTracking()},set:function(t){this.geolocation.setTracking(t),this.positionFeature.set("visible",t),this.shortestLineFeature.set("visible",t)}}])&&d(r.prototype,l),g&&d(r,g),e}();r.default=m},{"ol/coordinate":"2a3e9645190015dfc3d4ed757193af4c",ol:"de1fa2d5630a3818f25d7945af164be8","ol/geom":"c8a571bf1ebb42240925899ebfbd7565","ol/extent":"4b9ffd1e5113d2b2115f35ccd7ae494b","./style":"ebb1d63c6878d82a9604c9bcd2689af0","./notification":"89633fdf3125dd8f3eb89750a3648a35","./img/lost.jpg":"c4ac435d0f89c539aa75c7071061e02b"}],"89633fdf3125dd8f3eb89750a3648a35":[function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),navigator.serviceWorker.register("/service-worker.js").then(function(t){Notification.requestPermission().then(function(n){"granted"===n&&(r.registration=t,navigator.serviceWorker.addEventListener("message",function(t){t.data.action&&e(t.data)}))})})}var e,r,i;return e=t,(r=[{key:"showNotification",value:function(t,e){this.registration&&this.registration.showNotification(t,e)}}])&&n(e.prototype,r),i&&n(e,i),t}();r.default=i},{"service-worker.js":"5fca713a63b31b03949d63b5be9840ed"}],c4ac435d0f89c539aa75c7071061e02b:[function(t,e,r){e.exports="/lost.4ba911d7.jpg"},{}]},{},["05e98922ea80008e5541b8b1cc8a3a9b"]);